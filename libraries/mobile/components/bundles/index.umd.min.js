!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/common/http"),require("@ionic-native/file"),require("@ionic-native/file-opener"),require("@ionic-native/barcode-scanner"),require("@ionic-native/media-capture"),require("@ionic-native/camera"),require("@wm/mobile/core"),require("@wm/core"),require("@wm/components"),require("@angular/core")):"function"==typeof define&&define.amd?define("@wm/mobile/components",["exports","@angular/common","@angular/common/http","@ionic-native/file","@ionic-native/file-opener","@ionic-native/barcode-scanner","@ionic-native/media-capture","@ionic-native/camera","@wm/mobile/core","@wm/core","@wm/components","@angular/core"],t):t((e.wm=e.wm||{},e.wm.mobile=e.wm.mobile||{},e.wm.mobile.components={}),e.ng.common,e.ng.common.http,e.ionicNative.plugins,e.ionicNative.plugins,e.ionicNative.plugins,e.ionicNative.plugins,e.ionicNative.plugins,e.wm.mobile.core,e.wm.core,e.wm.components,e.ng.core)}(this,function(e,t,n,i,a,o,s,l,r,p,c,d){"use strict";var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function h(e,t){function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var m=Object.assign||function m(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};function v(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,a,o=n.call(e),r=[];try{for(;(void 0===t||0<t--)&&!(i=o.next()).done;)r.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=o["return"])&&n.call(o)}finally{if(a)throw a.error}}return r}function f(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}var b,g,y,w,P=function(){function e(e){this.widget=e}return e.prototype.onClick=function(){var e=this.widget.hyperlink;if(e){if(0<=e.indexOf(":")&&!_.startsWith(e,"http://")&&!_.startsWith(e,"https://"))return;if(_.startsWith(e,"#"))return void(window.location.href=window.location.origin+window.location.pathname+e);_.startsWith(e,"//")&&(e="https:"+e),cordova.InAppBrowser.open(e,this.widget.target)}},e.decorators=[{type:d.Directive,args:[{selector:"[wmAnchor]"}]}],e.ctorParameters=function(){return[{type:undefined,decorators:[{type:d.Inject,args:[c.WidgetRef]}]}]},e.propDecorators={onClick:[{type:d.HostListener,args:["click"]}]},e}(),S="app-auto-update.apk",C=function(){function e(e,t,n,i,a,o){var r=this;this.deviceService=e,this.fileDownloadService=t,this.elRef=n,this.file=i,this.fileOpener=a,this.http=o,this.downloadProgress=0,this.downloading=!1,this.message="There is an update available. Would you like to update the app?",p.addClass(this.elRef.nativeElement,"app-update-dialog modal fade in hidden"),p.setCSS(this.elRef.nativeElement,"display","block"),p.hasCordova()&&this.getBuildMeta().then(function(e){e&&"DEVELOPMENT_MODE"===e.buildMode&&(r.file.removeFile(cordova.file.externalApplicationStorageDirectory,S)["catch"](p.noop),r.checkForUpdate().then(r.getUserConfirmation.bind(r),p.noop))})}return e.prototype.cancel=function(){p.addClass(this.elRef.nativeElement,"hidden")},e.prototype.installLatestVersion=function(){var t=this,e=cordova.file.externalApplicationStorageDirectory+S,n=this._buildMeta.host+"/appBuild/rest/mobileBuilds/android/download?token="+this._buildMeta.token+"&buildNumber="+this._buildMeta.latestBuildNumber+"&fileName="+S+"&releaseVersion="+this._buildMeta.platformVersion,i={next:function(e){t.downloadProgress=e.loaded/e.total*100},error:null,complete:null};this.fileDownloadService.download(n,!1,cordova.file.externalApplicationStorageDirectory,S,i).then(function(){t.fileOpener.open(e,"application/vnd.android.package-archive")},function(){this.message="Failed to download latest version."}),this.message="Downloading the latest version ["+this._buildMeta.latestVersion+"].",this.downloading=!0},e.prototype.checkForUpdate=function(){var o=this;return new Promise(function(i,a){o.http.get(o._buildMeta.host+"/appBuild/rest/mobileBuilds/latest_build?token="+o._buildMeta.token+"&releaseVersion="+o._buildMeta.platformVersion).toPromise().then(function(e){var t=e.success.body.buildNumber,n=e.success.body.version;o._buildMeta.buildNumber<t?(o._buildMeta.latestBuildNumber=t,o._buildMeta.latestVersion=n,i(t)):a()},a)})},e.prototype.getBuildMeta=function(){var t=this;return this._buildMeta?Promise.resolve(this._buildMeta):this.file.readAsText(cordova.file.applicationDirectory+"www/","build_meta.json").then(function(e){return t._buildMeta=JSON.parse(e),t._buildMeta},p.noop)},e.prototype.getUserConfirmation=function(){this.downloadProgress=0,this.downloading=!1,this.message="There is an update available. Would you like to update the app?",p.removeClass(this.elRef.nativeElement,"hidden")},e.decorators=[{type:d.Component,args:[{selector:"[wmAppUpdate]",template:'<div class="modal-dialog">\n    <div class="modal-content"> \n        <div class="modal-body"> \n            <span [textContent]="message"></span>\n            <div class="progress" [hidden]="!downloading">\n                <div class="progress-bar" [style.width.%]="downloadProgress"></div>\n            </div>\n        </div>\n        <div class="modal-footer"> \n            <button type="button" class="btn btn-default" data-dismiss="modal" (click)="cancel()">Skip update</button>\n            <button type="button" class="btn btn-primary" [hidden]="downloading" (click)="installLatestVersion()">Update</button>\n        </div>\n    </div>\n</div>'}]}],e.ctorParameters=function(){return[{type:r.DeviceService},{type:r.DeviceFileDownloadService},{type:d.ElementRef},{type:i.File},{type:a.FileOpener},{type:n.HttpClient}]},e}(),R={widgetType:"wm-barcodescanner",hostClass:"btn app-barcode"},I=function(i){function e(e,t){var n=i.call(this,t,R)||this;return n.scanner=e,c.styler(n.nativeElement,n,c.APPLY_STYLES_TYPE.SCROLLABLE_CONTAINER),n}return h(e,i),e.prototype.openBarcodescanner=function(t){var n=this;this.scan().then(function(e){n.datavalue=e,n.invokeEventCallback("success",{$event:t})})},e.prototype.scan=function(){var e;return p.hasCordova()?(this.barcodeformat&&"ALL"!==this.barcodeformat&&(e={formats:this.barcodeformat}),this.scanner.scan(e).then(function(e){return e.text})):Promise.resolve("BAR_CODE")},e.initializeProps=void c.register("wm-barcodescanner",new Map([["barcodeformat",m({value:"ALL"},c.PROP_STRING)],["caption",m({value:""},c.PROP_STRING)],["class",c.PROP_STRING],["iconclass",m({value:"glyphicon glyphicon-barcode"},c.PROP_STRING)],["iconsize",m({value:"2em"},c.PROP_STRING)],["name",c.PROP_STRING],["show",m({value:!0},c.PROP_BOOLEAN)]])),e.decorators=[{type:d.Component,args:[{selector:"button[wmBarcodescanner]",template:'<i [ngClass]="iconclass" [ngStyle]="{\'font-size\': iconsize}"></i>\n<span class="btn-caption" [textContent]="caption"></span>',providers:[c.provideAsWidgetRef(e)]}]}],e.ctorParameters=function(){return[{type:o.BarcodeScanner},{type:d.Injector}]},e.propDecorators={openBarcodescanner:[{type:d.HostListener,args:["click",["$event"]]}]},e}(c.StylableComponent),O={widgetType:"wm-camera",hostClass:"btn app-camera"};(g=b||(b={})).IMAGE="IMAGE",g.PNG="PNG",(w=y||(y={})).JPEG="JPEG",w.PNG="PNG";var E,T,N=function(r){function e(e,t,n,i,a){var o=r.call(this,n,O)||this;return o.camera=e,o.mediaCapture=t,c.styler(o.nativeElement,o,c.APPLY_STYLES_TYPE.SCROLLABLE_CONTAINER),o}return h(e,r),e.prototype.openCamera=function(t){var n=this;p.hasCordova()?this.capturetype===b.IMAGE?(this._cameraOptions={quality:this.imagequality,destinationType:1,sourceType:1,allowEdit:this.allowedit,correctOrientation:this.correctorientation,encodingType:this.imageencodingtype===y.JPEG?0:1,saveToPhotoAlbum:this.savetogallery,targetWidth:this.imagetargetwidth,targetHeight:this.imagetargetheight},this.camera.getPicture(this._cameraOptions).then(function(e){return n.updateModel(t,e)})):(this._cameraOptions={limit:1},this.mediaCapture.captureVideo(this._cameraOptions).then(function(e){return n.updateModel(t,e[0].fullPath)})):this.invokeEventCallback("success",{$event:t})},e.prototype.updateModel=function(t,e){var n=this;this.localFilePath=this.datavalue=e,p.convertToBlob(e).then(function(e){n.localFile=e.blob,n.invokeEventCallback("success",{$event:t,localFilePath:n.localFilePath,localFile:n.localFile})},function(){n.localFile=undefined})},e.initializeProps=void c.register("wm-camera",new Map([["allowedit",m({value:!1},c.PROP_BOOLEAN)],["capturetype",m({value:"IMAGE"},c.PROP_STRING)],["caption",m({value:""},c.PROP_STRING)],["class",c.PROP_STRING],["correctorientation",m({value:!1},c.PROP_BOOLEAN)],["datavalue",m({value:""},c.PROP_STRING)],["iconclass",m({value:"wi wi-photo-camera"},c.PROP_STRING)],["iconsize",m({value:"2em"},c.PROP_STRING)],["imagequality",m({value:80},c.PROP_NUMBER)],["imageencodingtype",m({value:"JPEG"},c.PROP_STRING)],["imagetargetwidth",c.PROP_NUMBER],["imagetargetheight",c.PROP_NUMBER],["localFile",m({value:""},c.PROP_STRING)],["localFilePath",m({value:""},c.PROP_STRING)],["name",c.PROP_STRING],["savetogallery",m({value:!1},c.PROP_BOOLEAN)],["show",m({value:!0},c.PROP_BOOLEAN)]])),e.decorators=[{type:d.Component,args:[{selector:"button[wmCamera]",template:'<i [ngClass]="iconclass" [ngStyle]="{\'font-size\': iconsize}"></i>',providers:[c.provideAsWidgetRef(e)]}]}],e.ctorParameters=function(){return[{type:l.Camera},{type:s.MediaCapture},{type:d.Injector},{type:d.ElementRef},{type:d.ChangeDetectorRef}]},e.propDecorators={openCamera:[{type:d.HostListener,args:["click",["$event"]]}]},e}(c.StylableComponent),k=function(){function e(e){e.useDatapicker=!1,e.datepattern="yyyy-MM-dd",e.updateFormat("datepattern")}return e.decorators=[{type:d.Directive,args:[{selector:"[wmDate]"}]}],e.ctorParameters=function(){return[{type:c.DateComponent}]},e}(),A=function(){function e(e){e.useDatapicker=!1,e.datepattern="yyyy-MM-ddTHH:mm:ss",e.updateFormat("datepattern")}return e.decorators=[{type:d.Directive,args:[{selector:"[wmDateTime]"}]}],e.ctorParameters=function(){return[{type:c.DatetimeComponent}]},e}(),L=function(){function e(e){this.deviceService=e,this.selectedFiles=[],this.submitEmitter=new d.EventEmitter}return e.prototype.getFileExtension=function(e){var t=e?e.lastIndexOf("."):-1;return 0<t?e.substring(t+1):""},e.prototype.ngOnDestroy=function(){this.backButtonListenerDeregister&&this.backButtonListenerDeregister()},e.prototype.onFileClick=function(e){e.isFile?e.isSelected?this.deselectFile(e):this.selectFile(e):this.goToFolder(e)},Object.defineProperty(e.prototype,"show",{set:function(e){var t=this,n=cordova.file.externalRootDirectory;(this.isVisible=e)?(this.currentFolder||(p.isIos()&&(n=cordova.file.documentsDirectory),resolveLocalFileSystemURL(n,function(e){return t.goToFolder(e)})),this.backButtonListenerDeregister=this.deviceService.onBackButtonTap(function(){if(t.isVisible)return t.currentFolder.parent?t.onFileClick(t.currentFolder.parent):t.isVisible=!1,p.$appDigest(),!1})):this.backButtonListenerDeregister&&this.backButtonListenerDeregister()},enumerable:!0,configurable:!0}),e.prototype.submit=function(){var e=this,t=[];this.loadFileSize(this.selectedFiles).then(function(){_.forEach(e.selectedFiles,function(e){e.isSelected=!1,t.push({path:e.nativeURL,name:e.name,size:e.size})}),e.selectedFiles=[],e.isVisible=!1,e.submitEmitter.next({files:t})})},e.prototype.deselectFile=function(e){_.remove(this.selectedFiles,e),e.isSelected=!1},e.prototype.goToFolder=function(t){var n=this;t.files?this.currentFolder=t:this.loadFolder(t,this.fileTypeToSelect).then(function(e){t.files=e,t.parent=n.currentFolder,n.currentFolder=t})},e.prototype.loadFileSize=function(e){return Promise.all(e.map(function(n){return new Promise(function(t,e){n.file(function(e){n.size=e.size,t()},e)})}))},e.prototype.loadFolder=function(i,a){return new Promise(function(t,e){var n;i.createReader().readEntries(function(e){_.isEmpty(a)||(n=_.split(a,","),e=_.filter(e,function(t){return!t.isFile||0<=_.findIndex(n,function(e){return _.endsWith(t.name,"."+e)})})),t(_.sortBy(e,function(e){return(e.isFile?"1_":"0_")+e.name.toLowerCase()}))},e)})},e.prototype.refreshFolder=function(){var t=this;return this.loadFolder(this.currentFolder,this.fileTypeToSelect).then(function(e){return t.currentFolder.files=e})},e.prototype.selectFile=function(e){!this.multiple&&0<this.selectedFiles.length&&(this.selectedFiles[0].isSelected=!1,this.selectedFiles=[]),this.selectedFiles.push(e),e.isSelected=!0},e.decorators=[{type:d.Component,args:[{selector:"[wmMobileFileBrowser]",template:'<div class="app-file-browser" *ngIf="isVisible && currentFolder">\n    <div class="modal-backdrop fade" [class.in]="isVisible"></div>\n    <div class="modal fade" style="display: block;" [class.in]="isVisible" >\n        <div class="modal-dialog">\n            <div class="modal-content">\n                <div class="modal-header clearfix">\n                    <h4 class="modal-title pull-left">\n                        <span (click)="onFileClick(currentFolder.parent)" [hidden]="!!!currentFolder.parent">\n                            <i class="wi wi-long-arrow-left"></i>\n                        </span>\n                     {{currentFolder.name}}\n                    </h4>\n                    <div class="selected-file-button pull-right" (click)="refreshFolder()">\n                        <i class="wi wi-refresh"></i>\n                    </div>\n                </div>\n                <div class="modal-body">\n                    <div class="file-info-box" *ngFor="let file of currentFolder.files">\n                        <div class="file-info"  [class.bg-primary]="file.isSelected" (click)="onFileClick(file)">\n                            <i class="file-icon wi wi-folder" *ngIf="!file.isFile"></i>\n                            <i class="file-icon wi wi-file {{getFileExtension(file.name)}}" *ngIf="file.isFile"></i>\n                            <span class="file-name">{{file.name}}</span>\n                        </div>\n                    </div>\n                </div>\n                <div class="modal-footer">\n                    <button type="button" class="btn btn-primary" *ngIf="selectedFiles && selectedFiles.length > 0" (click)="submit()">\n                        Done <span class="badge badge-light">{{selectedFiles.length}}</span>\n                    </button>\n                    <button type="button" class="btn btn-default" (click)="show = false;">Close</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'}]}],e.ctorParameters=function(){return[{type:r.DeviceService}]},e.propDecorators={fileTypeToSelect:[{type:d.Input}],multiple:[{type:d.Input}],submitEmitter:[{type:d.Output,args:["submit"]}]},e}(),B=function(){function e(e){this.camera=e}return e.prototype.selectAudio=function(n){var i=this;return void 0===n&&(n=!1),new Promise(function(e,t){window.plugins.mediapicker.getAudio(e,t,n,p.isIphone())}).then(function(e){var t=_.map(_.isArray(e)?e:[e],"exportedurl");return i.getFiles(t)})},e.prototype.setFileBrowser=function(e){this.fileBrowserComponent=e},e.prototype.selectFiles=function(e,t){var a=this;return void 0===e&&(e=!1),this.fileBrowserComponent?(this.fileBrowserComponent.multiple=e,this.fileBrowserComponent.fileTypeToSelect=t,this.fileBrowserComponent.show=!0,new Promise(function(t,n){var i=a.fileBrowserComponent.submitEmitter.subscribe(function(e){return a.getFiles(_.map(e.files,"path")).then(function(e){i.unsubscribe(),a.fileBrowserComponent.show=!1,t(e)},function(){i.unsubscribe(),a.fileBrowserComponent.show=!1,n()})})})):Promise.reject("File Browser component is not present.")},e.prototype.selectImages=function(e){var n=this;void 0===e&&(e=!1);var i=e?10:1;return new Promise(function(e,t){window.imagePicker.getPictures(e,t,{mediaType:0,maxImages:i})}).then(function(e){var t=e.map(function(e){return e.indexOf("://")<0?"file://"+e:e});return n.getFiles(t)})},e.prototype.selectVideos=function(e){var t=this;void 0===e&&(e=!1);return this.camera.getPicture({destinationType:1,sourceType:0,mediaType:1}).then(function(e){return e.indexOf("://")<0&&(e="file://"+e),t.getFiles([e])})},e.prototype.getFiles=function(e){return Promise.all(_.map(e,function(e){return p.convertToBlob(e)})).then(function(e){return _.map(e,function(e){var t=e.filepath;return{name:t.split("/").pop(),path:t,content:e.blob,size:e.blob.size}})})},e.decorators=[{type:d.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:l.Camera}]},e.ngInjectableDef=d.defineInjectable({factory:function(){return new e(d.inject(l.Camera))},token:e,providedIn:"root"}),e}(),x=function(){function e(e,t){var n=this;this.fileSelectorService=e,(this.fileUploadComponent=t)._isMobileType=!0,t._isCordova=p.hasCordova(),t.openFileSelector=function(){n.openFileSelector().then(function(e){n.fileUploadComponent.onFileSelect({},e)})}}return e.prototype.openFileSelector=function(){switch(this.fileUploadComponent.contenttype){case"image":return this.fileSelectorService.selectImages();case"video":return this.fileSelectorService.selectVideos();case"audio":return this.fileSelectorService.selectAudio();default:return this.fileSelectorService.selectFiles()}},e.decorators=[{type:d.Directive,args:[{selector:"[wmFileUpload]"}]}],e.ctorParameters=function(){return[{type:B},{type:c.FileUploadComponent}]},e}(),F=function(){function e(e,t){this.componentInstance=e,this.deviceFileCacheService=t,this._isEnabled=!1,this._lastUrl=""}return e.prototype.ngDoCheck=function(){var t=this;this._isEnabled&&this.componentInstance.imgSource&&this.componentInstance.imgSource.startsWith("http")&&(this._lastUrl!==this.componentInstance.imgSource?(this._lastUrl=this.componentInstance.imgSource,this.componentInstance.imgSource="resources/images/imagelists/default-image.png",this.getLocalPath(this._lastUrl).then(function(e){t._cacheUrl=e,t.componentInstance.imgSource=t._cacheUrl})):this._cacheUrl&&(this.componentInstance.imgSource=this._cacheUrl))},Object.defineProperty(e.prototype,"wmImageCache",{set:function(e){this._isEnabled=p.hasCordova()&&"true"===e},enumerable:!0,configurable:!0}),e.prototype.getLocalPath=function(e){return p.hasCordova()&&e&&e.indexOf("{{")<0&&e.startsWith("http")?this.deviceFileCacheService.getLocalPath(e,!0,!0)["catch"](p.noop):Promise.resolve(e)},e.decorators=[{type:d.Directive,args:[{selector:"[wmImageCache]"}]}],e.ctorParameters=function(){return[{type:undefined,decorators:[{type:d.Self},{type:d.Inject,args:[c.WidgetRef]}]},{type:r.DeviceFileCacheService}]},e.propDecorators={wmImageCache:[{type:d.Input}]},e}(),D={widgetType:"wm-media-list",hostClass:"app-medialist"};(T=E||(E={})).SINGLE_ROW="Single-row",T.MULTI_ROW="Multi-row";var M,G,V=function(i){function e(e){var t=i.call(this,e,D)||this;return t.selectedMediaIndex=-1,c.styler(t.nativeElement,t,c.APPLY_STYLES_TYPE.SCROLLABLE_CONTAINER),t}return h(e,i),e.prototype.appendToBody=function(){var e=this;return this.$fullScreenEle||setTimeout(function(){e.$fullScreenEle=e.$element.find(">.app-media-fullscreen"),e.$fullScreenEle.appendTo("body:first")},100),!0},e.prototype.onPropertyChange=function(e,t,n){"dataset"===e?this.onDataChange(t):"layout"===e?t===E.SINGLE_ROW?p.addClass(this.nativeElement,"singlerow"):p.removeClass(this.nativeElement,"singlerow"):i.prototype.onPropertyChange.call(this,e,t,n)},e.prototype.exitFullScreen=function(){this.selectedMediaIndex=-1,this.$fullScreenEle.appendTo(this.$element),this.$fullScreenEle=null,p.$appDigest()},e.prototype.getPicTitle=function(){return this.selectedMediaIndex+1+"/"+this.fieldDefs.length},e.prototype.showFullScreen=function(e){this.selectedMediaIndex=e,p.$appDigest()},e.prototype.showNext=function(){this.selectedMediaIndex<this.fieldDefs.length-1&&(this.selectedMediaIndex++,p.$appDigest())},e.prototype.getSrc=function(e){return e?this.fieldDefs[this.selectedMediaIndex][e]:""},e.prototype.showPrev=function(){0<this.selectedMediaIndex&&(this.selectedMediaIndex--,p.$appDigest())},e.prototype.onDataChange=function(e){e?(p.isObject(e)&&!p.isArray(e)&&(e=[e]),this.binddataset||p.isString(e)&&(e=e.split(",")),p.isArray(e)&&this.updateFieldDefs(e)):this.updateFieldDefs([])},e.prototype.updateFieldDefs=function(e){var t=this;(this.fieldDefs=e).forEach(function(e){e.mediaUrlVal=p.$parseExpr(t.mediaurl)(e),e.thumbnailUrlVal=p.$parseExpr(t.thumbnailurl)(e)}),this.fieldDefs=e},e.prototype.listTrackByFn=function(e){return e},e.initializeProps=void c.register("wm-media-list",new Map([["class",c.PROP_STRING],["dataset",c.PROP_ANY],["layout",m({value:"Single-row"},c.PROP_STRING)],["mediaurl",c.PROP_STRING],["name",c.PROP_STRING],["offline",m({value:!0},c.PROP_BOOLEAN)],["show",m({value:!0},c.PROP_BOOLEAN)],["thumbnailheight",m({value:"100pt"},c.PROP_STRING)],["thumbnailwidth",m({value:"100pt"},c.PROP_STRING)],["thumbnailurl",c.PROP_STRING]])),e.decorators=[{type:d.Component,args:[{selector:"[wmMediaList]",template:'<ul class="list-unstyled list-inline app-media-thumbnail">\n    <li *ngFor="let item of fieldDefs; index as index;" [ngStyle]="{width: thumbnailwidth, height: thumbnailheight}" (click)="showFullScreen(index)">\n        <div class="thumbnail">\n            <ng-container [ngTemplateOutlet]="imgTemplate"\n                          [ngTemplateOutletContext]="{src: item.thumbnailUrlVal, class: \'thumbnail-image\'}">\n            </ng-container>\n            <div class="thumbnail-details">\n                <ng-container [ngTemplateOutlet]="mediaListTemplate" [ngTemplateOutletContext]="{item:item, index:index}" [wmMediaListItem]="item">\n                </ng-container>\n            </div>\n        </div>\n    </li>\n</ul>\n<div class="app-media-fullscreen" *ngIf="selectedMediaIndex >= 0 && appendToBody()">\n    <header wmMobileNavbar\n            backbutton="true"\n            backbtnclick.event="exitFullScreen()"\n            showLeftnavbtn="false"\n            backbuttoniconclass.event="wi wi-chevron-left"\n            title.bind="getPicTitle()">\n    </header>\n    <div wmContent>\n        <div wmPageContent>\n            <div class="media-content">\n                <div class="image-container"  (swipeleft)="showNext()" (swiperight)="showPrev()">\n                    <ng-container [ngTemplateOutlet]="imgTemplate"\n                                  [ngTemplateOutletContext]="{field: \'mediaUrlVal\', class: \'center-block\'}">\n                    </ng-container>\n                    <a class="app-media-fullscreen-nav-control left" [hidden]="!(selectedMediaIndex > 0)" (click)="showPrev()">\n                        <i class="wi wi-chevron-left"></i>\n                    </a>\n                    <a class="app-media-fullscreen-nav-control right" [hidden]="!(selectedMediaIndex < fieldDefs.length-1)" (click)="showNext()">\n                        <i class="wi wi-chevron-right"></i>\n                    </a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<ng-template #imgTemplate let-src="src" let-classname="class" let-field="field">\n    <img wmPicture class="{{classname}}" picturesource.bind="src || getSrc(field)" wmImageCache="{{offline}}" />\n</ng-template>',providers:[c.provideAsWidgetRef(e)]}]}],e.ctorParameters=function(){return[{type:d.Injector}]},e.propDecorators={mediaListTemplate:[{type:d.ContentChild,args:["mediaListTemplate"]}]},e}(c.StylableComponent),j=function(){function e(){}return Object.defineProperty(e.prototype,"wmMediaListItem",{set:function(e){this.item=e},enumerable:!0,configurable:!0}),e.decorators=[{type:d.Directive,args:[{selector:"[wmMediaListItem]",providers:[c.provideAsWidgetRef(e)]}]}],e.propDecorators={wmMediaListItem:[{type:d.Input}]},e}(),W=function(){function e(e,t,n,i){var a=this;this.page=e,this.leftPanelRef=t,this.deviceService=n,p.addClass(i.nativeElement,"wm-mobile-app-left-panel"),e.notify("wmLeftPanel:ready",t),e.subscribe("wmLeftPanel:expand",function(){a._backBtnListenerDestroyer=n.onBackButtonTap(function(){return t.collapse(),!1})}),e.subscribe("wmLeftPanel:collapse",function(){a.destroyBackBtnListener()})}return e.prototype.ngOnDestroy=function(){this.destroyBackBtnListener()},e.prototype.destroyBackBtnListener=function(){this._backBtnListenerDestroyer&&(this._backBtnListenerDestroyer(),this._backBtnListenerDestroyer=null)},e.decorators=[{type:d.Directive,args:[{selector:"[wmLeftPanel]"}]}],e.ctorParameters=function(){return[{type:c.PageDirective},{type:c.LeftPanelDirective},{type:r.DeviceService},{type:d.ElementRef}]},e}(),U=function(){function e(t,e,n,i,a){var o=this;this.deviceService=n,this.page=i,this.navigationService=a,p.addClass(e.nativeElement,"mobile-app-page"),this._$ele=$(e.nativeElement),i.subscribe("wmMobileTabbar:ready",function(){return o._$ele.addClass("has-tabbar")}),n.onBackButtonTap(function(e){return t.landingPageName===t.activePageName?window.navigator.app.exitApp():o.navigationService.goToPrevious(),!1})}return e.decorators=[{type:d.Directive,args:[{selector:"[wmPage]"}]}],e.ctorParameters=function(){return[{type:p.App},{type:d.ElementRef},{type:r.DeviceService},{type:c.PageDirective},{type:p.AbstractNavigationService}]},e}(),q=new Map([["backbutton",m({value:!0},c.PROP_BOOLEAN)],["backbuttoniconclass",m({value:"wi wi-back"},c.PROP_STRING)],["backbuttonlabel",m({value:""},c.PROP_STRING)],["backgroundattachment",c.PROP_STRING],["backgroundcolor",c.PROP_STRING],["backgroundgradient",c.PROP_STRING],["backgroundimage",c.PROP_STRING],["backgroundposition",c.PROP_STRING],["backgroundrepeat",c.PROP_STRING],["backgroundsize",c.PROP_STRING],["class",c.PROP_STRING],["datafield",m({value:"All Fields"},c.PROP_STRING)],["dataset",c.PROP_ANY],["datasource",c.PROP_STRING],["datavalue",c.PROP_STRING],["debouncetime",m({value:250},c.PROP_NUMBER)],["defaultview",c.PROP_STRING],["displayimagesrc",c.PROP_STRING],["displaylabel",c.PROP_STRING],["imgsrc",c.PROP_STRING],["query",m({value:""},c.PROP_STRING)],["leftnavpaneliconclass",m({value:"wi wi-menu"},c.PROP_STRING)],["matchmode",c.PROP_STRING],["name",c.PROP_STRING],["readonlySearchBar",c.PROP_BOOLEAN],["searchbutton",m({value:!1},c.PROP_BOOLEAN)],["searchbuttoniconclass",m({value:"wi wi-search"},c.PROP_STRING)],["searchbuttonlabel",m({value:""},c.PROP_STRING)],["show",m({value:!0},c.PROP_BOOLEAN)],["showLeftnavbtn",m({value:!0},c.PROP_BOOLEAN)],["searchkey",c.PROP_STRING],["searchplaceholder",m({value:"Search"},c.PROP_STRING)],["showSearchbar",c.PROP_BOOLEAN],["title",c.PROP_STRING]]),z={widgetType:"wm-mobile-navbar",hostClass:"app-mobile-header app-mobile-navbar"},Y=function(s){function e(e,t,n,i,a,o){var r=s.call(this,a,z)||this;return r.page=t,r.deviceService=n,r.navigationService=i,r.backbtnClickEvt=o,r._isReady=!1,t.subscribe("wmLeftPanel:ready",function(e){r.showLeftnavbtn&&(r.leftNavPanel=e)}),r._backBtnListenerDestroyer=n.onBackButtonTap(function(e){if(r._isReady&&r.backbtnClickEvt)return r.invokeEventCallback("backbtnclick",{$event:e}),!1}),setTimeout(function(){return r._isReady=!0},1e3),r}return h(e,s),Object.defineProperty(e.prototype,"datasource",{get:function(){return this._datasource},set:function(e){this._datasource=e,this.searchComponent.datasource=e},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){this.searchComponent.binddisplayimagesrc=this.binddisplayimagesrc,this.searchComponent.displayimagesrc=this.binddisplayimagesrc?this.binddisplayimagesrc:this.displayimagesrc,this.searchComponent.displaylabel=this.binddisplaylabel?this.binddisplaylabel:this.displaylabel,this.searchComponent.datafield=this.datafield,this.searchComponent.binddataset=this.binddataset,this.searchComponent.dataset=this.dataset,this.searchComponent.searchkey=this.searchkey,this.searchComponent.datasource=this.datasource,this.searchComponent.matchmode=this.matchmode},e.prototype.goBack=function(e){this.deviceService.executeBackTapListeners(e)},e.prototype.ngOnDestroy=function(){this._backBtnListenerDestroyer(),s.prototype.ngOnDestroy.call(this)},e.prototype.onPropertyChange=function(e,t,n){this.searchComponent&&("datafield"===e&&(this.searchComponent.datafield=this.datafield),"displaylabel"===e&&(this.searchComponent.displaylabel=this.binddisplaylabel?this.binddisplaylabel:this.displaylabel)),"imgsrc"===e?this.imagesrc=c.getImageUrl(t):"dataset"===e||("defaultview"===e?this.showSearchbar="searchview"===t:"datavalue"===e?this.query=t:s.prototype.onPropertyChange.call(this,e,t,n))},e.prototype.onSubmission=function(e){this.invokeEventCallback("search",{$event:e})},e.prototype.switchView=function(e){this.showSearchbar="actionview"!==e},e.prototype.goBacktoPreviousView=function(e){"actionview"===this.defaultview?this.switchView("actionview"):this.goBack(e)},e.prototype.onSelect=function(e,t,n){this.datavalue=n,this.query=t.query,this.invokeEventCallback("change",{$event:e,newVal:n,oldVal:t.prevDatavalue})},e.prototype.onClear=function(){this.datavalue="",this.query=""},e.initializeProps=void c.register("wm-mobile-navbar",q),e.decorators=[{type:d.Component,args:[{selector:"header[wmMobileNavbar]",template:'<nav class="navbar" *ngIf="!showSearchbar">\n    <div class="mobile-navbar-left">\n        <ul class="nav navbar-nav navbar-left">\n            <li *ngIf="leftNavPanel" >\n                <a (click)="leftNavPanel.toggle();"  href="javascript: void(0);">\n                    <i [ngClass]="leftnavpaneliconclass"></i>\n                    </a>\n                </li>\n            <li *ngIf="backbutton">\n                <a class="btn-back" type="button" (click)="goBack($event)"  href="javascript: void(0);">\n                    <i [ngClass]="backbuttoniconclass"></i><span [innerText]="backbuttonlabel"></span>\n                </a>\n            </li>\n        </ul>\n    </div>\n    <div class="mobile-navbar-center">\n        <div class="navbar-header">\n            <h1 class="navbar-brand">\n                <img data-identifier="img" class="brand-image" [alt]="title" width="32" height="32" *ngIf="imgsrc" [src]="imgsrc"/>\n                <span class="title" [innerText]="title || \'\'"></span>\n                </h1>\n            </div>\n        </div>\n    <div class="mobile-navbar-right">\n        <ul class="nav navbar-nav navbar-right">\n            <li>\n                <ng-content></ng-content>\n            </li>\n            <li *ngIf="searchbutton">\n                <a class="btn-search btn-transparent" type="button" (click)="showSearchbar = true"  href="javascript: void(0);">\n                    <i [ngClass]="searchbuttoniconclass"></i><span [innerText]="searchbuttonlabel"></span>\n                </a>\n            </li>\n        </ul>\n    </div>\n</nav>\n<nav class="navbar searchbar" [hidden]="!showSearchbar">\n    <div class="mobile-navbar-left">\n        <ul class="nav navbar-nav navbar-left">\n            <li>\n                <a class="btn-back" type="button" (click)="goBacktoPreviousView($event)" href="javascript:void(0);">\n                    <i [ngClass]="backbuttoniconclass"></i>\n                </a>\n            </li>\n        </ul>\n    </div>\n    <div class="mobile-navbar-center search-container">\n        <div wmSearch query.bind="query"\n             clearsearch.event="onClear();"\n             select.event="onSelect($event, widget, selectedValue)"\n             searchkey.bind="searchkey"\n             dataset.bind="dataset"\n             displayimagesrc.bind="displayimagesrc"\n             datavalue.bind="datavalue"\n             submit.event="onSubmission($event, widget, value)"\n             placeholder.bind="searchplaceholder"\n             navsearchbar="true"\n             readonly.bind="readonlySearchBar">\n        </div>\n    </div>\n    <div class="mobile-navbar-right">\n        <ul class="nav navbar-nav navbar-right">\n            <li>\n                <a class="btn-cancel btn-transparent" type="button" (click)="showSearchbar = false;"  href="javascript: void(0);"> Cancel </a>\n            </li>\n        </ul>\n    </div>\n</nav>',providers:[c.provideAsWidgetRef(e)]}]}],e.ctorParameters=function(){return[{type:p.App},{type:c.PageDirective},{type:r.DeviceService},{type:p.AbstractNavigationService},{type:d.Injector},{type:undefined,decorators:[{type:d.Attribute,args:["backbtnclick.event"]}]}]},e.propDecorators={searchComponent:[{type:d.ViewChild,args:[c.SearchComponent]}]},e}(c.BaseComponent),H={widgetType:"wm-network-info-toaster",hostClass:"network-info-toaster"};(G=M||(M={}))[G.CONNECTED=1]="CONNECTED",G[G.CONNECTING=0]="CONNECTING",G[G.SERVICE_AVAILABLE_BUT_NOT_CONNECTED=-1]="SERVICE_AVAILABLE_BUT_NOT_CONNECTED",G[G.NETWORK_AVAIABLE_BUT_SERVICE_NOT_AVAILABLE=-2]="NETWORK_AVAIABLE_BUT_SERVICE_NOT_AVAILABLE",G[G.NETWORK_NOT_AVAIABLE=-3]="NETWORK_NOT_AVAIABLE";var K=function(a){function e(e,t,n){var i=a.call(this,n,H)||this;return i.networkService=e,i.showMessage=!1,i.isServiceConnected=!1,i.isServiceAvailable=!1,c.styler(i.$element,i),i.isServiceAvailable=i.networkService.isAvailable(),i.isServiceConnected=i.networkService.isConnected(),i._listenerDestroyer=t.subscribe("onNetworkStateChange",function(e){var t=i.networkState,n=!1;e.isConnected?(i.networkState=M.CONNECTED,n=!0):e.isConnecting?i.networkState=M.CONNECTING:e.isServiceAvailable?i.networkState=M.SERVICE_AVAILABLE_BUT_NOT_CONNECTED:e.isNetworkAvailable&&!e.isServiceAvailable?i.networkState=M.NETWORK_AVAIABLE_BUT_SERVICE_NOT_AVAILABLE:i.networkState=M.NETWORK_NOT_AVAIABLE,i.showMessage=!(t===undefined&&e.isConnected)&&t!==i.networkState,n&&i.showMessage&&setTimeout(function(){i.showMessage=!1,p.$appDigest()},5e3)}),i}return h(e,a),e.prototype.connect=function(){this.networkService.connect()},e.prototype.hideMessage=function(){this.showMessage=!1},e.prototype.ngOnDestroy=function(){this._listenerDestroyer(),a.prototype.ngOnDestroy.call(this)},e.initializeProps=void c.register("wm-network-info-toaster",new Map([])),e.decorators=[{type:d.Component,args:[{selector:"[wmNetworkInfoToaster]",template:'<div class="network-info-toaster-content" [ngSwitch]="networkState" *ngIf="showMessage">\n    <div class="info" *ngSwitchCase="-3">\n       <label class="message" [textContent]="appLocale.MESSAGE_NETWORK_NOT_AVAILABLE"></label>\n       <button class="btn btn-default hide-btn" (click)="hideMessage()" [textContent]="appLocale.LABEL_HIDE_NETWORK_INFO"></button>\n    </div>\n    <div class="info" *ngSwitchCase="-2">\n       <label class="message" [textContent]="appLocale.MESSAGE_SERVICE_NOT_AVAILABLE"></label>\n       <button class="btn btn-default hide-btn" (click)="hideMessage()" [textContent]="appLocale.LABEL_HIDE_NETWORK_INFO"></button>\n    </div>\n    <div class="info" *ngSwitchCase="-1">\n       <label class="message" [textContent]="appLocale.MESSAGE_SERVICE_AVAILABLE"></label>\n       <button class="btn btn-default hide-btn" (click)="hideMessage()" [textContent]="appLocale.LABEL_HIDE_NETWORK_INFO"></button>\n       <button class="btn btn-primary connect-btn" (click)="connect()" [textContent]="appLocale.LABEL_CONNECT_TO_SERVICE"></button>\n    </div>\n    <div class="info" *ngSwitchCase="0">\n       <label class="message" [textContent]="appLocale.MESSAGE_SERVICE_CONNECTING"></label>\n    </div>\n    <div class="info" *ngSwitchCase="1">\n       <label class="message" [textContent]="appLocale.MESSAGE_SERVICE_CONNECTED"></label>\n    </div>\n</div>',providers:[c.provideAsWidgetRef(e)]}]}],e.ctorParameters=function(){return[{type:r.NetworkService},{type:p.App},{type:d.Injector}]},e}(c.StylableComponent),Q=function(){function e(e){p.addClass(e.nativeElement,"app-page-content-loader")}return e.decorators=[{type:d.Component,args:[{selector:"[wmPageContentLoader]",template:'<div class="loader bg-primary"></div>\n<div class="load-info"></div>',providers:[c.provideAsWidgetRef(e)]}]}],e.ctorParameters=function(){return[{type:d.ElementRef}]},e}(),J=function(){function e(e){this.el=e,this.isVisible=!0,this.instances=[],this.queue=[],p.addClass(this.el.nativeElement,"app-global-progress-bar modal default")}return e.prototype.createInstance=function(e,t,n){var i=this;void 0===t&&(t=0),void 0===n&&(n=100);var a={max:n,min:t,name:e,onStop:null,progressLabel:"",show:t!==n,stopButtonLabel:"Cancel",value:0},o={get:function(e){return a[e]},set:function(e,t){return i.setInstaceProperty(a,e,t)},destroy:function(){return i.removeInstance(a)}};return this.addToQueue(a).then(function(){return o})},e.prototype.getVisibleInstances=function(){return this.instances.filter(function(e){return e.show})},e.prototype.ngDoCheck=function(){var e=!!this.instances.find(function(e){return e.show});this.isVisible&&!e?(p.setAttr(this.el.nativeElement,"hidden","true"),this.isVisible=!1):!this.isVisible&&e&&(p.removeAttr(this.el.nativeElement,"hidden"),this.isVisible=!0)},e.prototype.addToQueue=function(t){var n=this;return new Promise(function(e){n.queue.push(function(){if(!(n.instances.length<3))return!1;n.instances.push(t),e(t)}),n.flushQueue()})},e.prototype.flushQueue=function(){0<this.queue.length&&!1!==this.queue[0]()&&(this.queue.shift(),this.flushQueue())},e.prototype.removeInstance=function(t){var n=this;return new Promise(function(e){setTimeout(function(){_.remove(n.instances,t),n.flushQueue(),e()},1e3)})},e.prototype.setInstaceProperty=function(e,t,n){var i=this;"value"===t?(e.value>=e.max&&(n=e.max),e.value=n,e.progressLabel=e.value+"/"+e.max):"onStop"===t&&_.isFunction(n)?e.onStop=function(){return n(),i.removeInstance(e)}:e[t]=n,e.show=e.min!==e.max},e.decorators=[{type:d.Component,args:[{selector:"[wmProcessManager]",template:'<ng-container *ngIf="instances.length > 0">\n   <div class="modal-dialog app-dialog">\n       <div class="modal-content">\n           <ul class="instance-list list-unstyled">\n               <li *ngFor="let instance of getVisibleInstances(instances); index as i" class="instance-list-item">\n                   <div class="row">\n                       <div class="col-xs-8">\n                           <label class="app-global-progress-bar-name h6">{{instance.name}}</label>\n                       </div>\n                       <div class="col-xs-4 app-global-progress-bar-progress-label-col">\n                           <label class="app-global-progress-bar-progress-label h6">\n                                   {{instance.progressLabel}}</label>\n                       </div>\n                   </div>\n                   <ng-template [ngTemplateOutlet]="progressTemplate" [ngTemplateOutletContext]="{instance: instance}"></ng-template>\n                   <button class="btn btn-secondary pull-right stop-btn" *ngIf="instance.onStop" (click)="instance.onStop();">\n                       {{instance.stopButtonLabel}}\n                   </button>\n                   <div style="clear: both;"></div>\n               </li>\n               <li class="instance-list-item" *ngIf="queue.length > 0">\n                   <label class="global-progress-bar-ui-primary-label h6">\n                       ({{queue.length}}) queued\n                   </label>\n               </li>\n           </ul>\n       </div>\n   </div>\n</ng-container>\n<ng-template #progressTemplate let-instance="instance">\n    <div wmProgressBar minvalue.bind="instance.min" maxvalue.bind="instance.max" datavalue.bind="instance.value"></div>\n</ng-template>',providers:[c.provideAsWidgetRef(e)]}]}],e.ctorParameters=function(){return[{type:d.ElementRef}]},e}(),X=function(){function e(e){p.switchClass(e.nativeElement,"app-mobile-search")}return e.decorators=[{type:d.Directive,args:[{selector:"[wmSearch]"}]}],e.ctorParameters=function(){return[{type:d.ElementRef}]},e}(),Z={widgetType:"wm-segmented-control",hostClass:"app-segmented-control"},ee=function(i){function e(e){var t=i.call(this,e,Z)||this;return t.contents=[],t.currentSelectedIndex=0,c.styler(t.nativeElement,t,c.APPLY_STYLES_TYPE.SCROLLABLE_CONTAINER),t}return h(e,i),e.prototype.addContent=function(e){this.contents.push(e)},e.prototype.goToNext=function(){this.showContent(this.currentSelectedIndex+1)},e.prototype.goToPrev=function(){this.showContent(this.currentSelectedIndex-1)},e.prototype.ngAfterViewInit=function(){var e,t;this._$container=this.$element.find(">.app-segments-container");var n=this._$container.find(">.list-inline >li"),i=100*this.contents.length+"%";p.setCSSFromObj(this._$container[0],{maxWidth:i,width:i,"white-space":"nowrap",transition:"transform 0.2s linear"});var a=100/this.contents.length+"%";try{for(var o=function l(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}(Array.from(n)),r=o.next();!r.done;r=o.next()){var s=r.value;p.setCSS(s,"width",a)}}catch(c){e={error:c}}finally{try{r&&!r.done&&(t=o["return"])&&t.call(o)}finally{if(e)throw e.error}}this.showContent(0,undefined,!0)},e.prototype.onPropertyChange=function(e,t,n){"tabindex"!==e&&i.prototype.onPropertyChange.call(this,e,t,n)},e.prototype.removeContent=function(t){var e=this.contents.findIndex(function(e){return e===t});0<=e&&(this.contents.splice(e,1),e<this.contents.length?this.showContent(e):0<this.contents.length&&this.showContent(0))},e.prototype.showContent=function(t,e,n){var i,a;if(p.isNumber(t)?(i=t,this.contents.length&&(a=this.contents[i])):(a=t,i=this.contents.findIndex(function(e){return e===t})),a&&a.loadContent(n),!(i<0||i>=this.contents.length)){e&&e.stopPropagation();var o={$old:this.currentSelectedIndex,$new:i};this.currentSelectedIndex=i,this.invokeEventCallback("beforesegmentchange",o),p.setCSS(this._$container[0],"transform","translate3d("+-1*i/this.contents.length*100+"%, 0, 0)"),this.invokeEventCallback("segmentchange",o)}},e.initializeProps=void c.register("wm-segmented-control",new Map([["class",c.PROP_STRING],["name",c.PROP_STRING],["show",m({value:!0},c.PROP_BOOLEAN)]])),e.decorators=[{type:d.Component,args:[{selector:"[wmSegmentedControl]",template:'<div class="app-segments-container"> \n    <ul class="list-inline">\n        <ng-content></ng-content>\n    </ul>\n    </div> \n<div class="btn-group btn-group-justified"> \n    <a class="btn btn-default" *ngFor="let content of contents; index as i"\n       [ngClass]="{\'active btn-primary\' : i == currentSelectedIndex}"\n       (click)="showContent(i, $event);">\n        <i class="app-icon" [ngClass]="content.iconclass"></i>{{content.caption}}\n    </a> \n</div> ',providers:[c.provideAsWidgetRef(e)]}]}],e.ctorParameters=function(){return[{type:d.Injector}]},e}(c.StylableComponent),te={widgetType:"wm-segment-content",hostClass:"app-segment-content clearfix"},ne=function(i){function e(e,t){var n=i.call(this,t,te)||this;return n.segmentedControl=e,n.compile=!1,c.styler(n.nativeElement,n,c.APPLY_STYLES_TYPE.SCROLLABLE_CONTAINER),e.addContent(n),n}return h(e,i),e.prototype.ngAfterViewInit=function(){this.loadmode||this.loadContent(!0)},e.prototype.navigate=function(){this.segmentedControl.showContent(this)},e.prototype._loadContent=function(){this.compile||(this.compile=!0,this.invokeEventCallback("ready"))},e.prototype.loadContent=function(e){"after-delay"===this.loadmode||e?setTimeout(this._loadContent.bind(this),e?0:this.loaddelay):this._loadContent()},e.initializeProps=void c.register("wm-segment-content",new Map([["caption",m({value:""},c.PROP_STRING)],["class",c.PROP_STRING],["content",c.PROP_STRING],["iconclass",m({value:""},c.PROP_STRING)],["loadmode",c.PROP_STRING],["loaddelay",m({value:10},c.PROP_NUMBER)],["name",c.PROP_STRING],["show",m({value:!0},c.PROP_BOOLEAN)]])),e.decorators=[{type:d.Component,args:[{selector:"[wmSegmentContent]",template:'<ng-content *ngIf="compile"></ng-content>',providers:[c.provideAsWidgetRef(e)]}]}],e.ctorParameters=function(){return[{type:ee},{type:d.Injector}]},e}(c.StylableComponent),ie=function(){function e(e){e.useDatapicker=!1}return e.decorators=[{type:d.Directive,args:[{selector:"[wmTime]"}]}],e.ctorParameters=function(){return[{type:c.TimeComponent}]},e}(),ae={widgetType:"wm-mobile-tabbar",hostClass:"app-tabbar app-top-nav"},oe=function(r){function e(e,t,n,i,a){var o=r.call(this,t,ae)||this;return o.page=e,o.binditemlabel=n,o.binditemicon=i,o.binditemlink=a,o.tabItems=[],o.layout={},o._layouts=[{minwidth:2048,max:12},{minwidth:1024,max:10},{minwidth:768,max:7},{minwidth:480,max:5},{minwidth:0,max:4}],c.styler(o.nativeElement,o),e.notify("wmMobileTabbar:ready",o),o}return h(e,r),e.prototype.onPropertyChange=function(e,t,n){"dataset"===e?t&&(this.tabItems=this.getTabItems(t)):r.prototype.onPropertyChange.call(this,e,t,n)},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){e.layout=e.getSuitableLayout(),$(window).on("resize.tabbar",_.debounce(function(){return e.layout=e.getSuitableLayout()},20))}),r.prototype.ngAfterViewInit.call(this)},e.prototype.ngOnDestroy=function(){$(window).off(".tabbar"),r.prototype.ngOnDestroy.call(this)},e.prototype.onItemSelect=function(e,t){this.invokeEventCallback("select",{$event:e,$item:t.value||t.label})},e.prototype.getItems=function(e){return e.map(function(e){return{label:e,icon:"wi wi-"+e}})},e.prototype.getSuitableLayout=function(){var t=$(this.nativeElement).parent().width();return this._layouts.find(function(e){return t>=e.minwidth})},e.prototype.getTabItems=function(e){var i=this;return _.isArray(e)?_.isObject(e[0])?e.map(function(e){var t=c.getEvaluatedData(e,{expression:"itemlink",bindExpression:i.binditemlink},i.viewParent)||e.link,n=window.location.hash.substr(2);return{label:c.getEvaluatedData(e,{expression:"itemlabel",bindExpression:i.binditemlabel},i.viewParent)||e.label,icon:c.getEvaluatedData(e,{expression:"itemicon",bindExpression:i.binditemicon},i.viewParent)||e.icon,link:t,active:_.includes([n,"#"+n,"#/"+n],t)}}):this.getItems(e):_.isString(e)?this.getItems(e.split(",")):void 0},e.initializeProps=void c.register("wm-mobile-tabbar",new Map([["class",c.PROP_STRING],["dataset",c.PROP_ANY],["itemicon",c.PROP_STRING],["itemlabel",c.PROP_STRING],["itemlink",c.PROP_STRING],["morebuttoniconclass",m({value:"wi wi-more-horiz"},c.PROP_STRING)],["morebuttonlabel",m({value:"more"},c.PROP_STRING)],["name",c.PROP_STRING],["show",m({value:!0},c.PROP_BOOLEAN)]])),e.decorators=[{type:d.Component,args:[{selector:"div[wmMobileTabbar]",template:'<nav class="navbar navbar-default">\n    <ul class="tab-items nav navbar-nav">\n        <li class="tab-item" *ngFor="let item of tabItems; index as i" [class.hidden]="!(tabItems.length === layout.max || i < layout.max)" >\n            <a [class.active]="item.active" [href]="(item.link || \'javascript:void(0)\')| trustAs: \'resource\'" (click)="onItemSelect($event, item)">\n                <i class="app-icon" [ngClass]="item.icon"></i><label>{{item.label}}</label>\n            </a>\n        </li>\n        <li class="menu-items dropdown" [class.hidden]="tabItems.length <= layout.max" [ngClass]="{dropup : position === bottom}">\n            <a (click)="showMoreMenu = !showMoreMenu" href="javascript:void(0)">\n                <i class="app-icon {{morebuttoniconclass}}"></i><label>{{morebuttonlabel}}</label>\n            </a>\n            <ul class="dropdown-menu dropdown-menu-right" [ngClass]="{\'nav navbar-nav\' : menutype === thumbnail}" *ngIf="showMoreMenu">\n                <li role="menuitem" class="menu-item" *ngFor="let item of tabItems;index as i" [class.hidden]="i < layout.max">\n                    <a [ngClass]="{active : item.active}" [href]="(item.link || \'javascript:void(0)\')| trustAs: \'resource\'" (click)="onItemSelect($event, item)" class="dropdown-item">\n                        <i class="app-icon" [ngClass]="item.icon"></i><label>{{item.label}}</label>\n                    </a>\n                </li>\n            </ul>\n        </li>\n    </ul>\n</nav>\n',providers:[c.provideAsWidgetRef(e)]}]}],e.ctorParameters=function(){return[{type:c.PageDirective},{type:d.Injector},{type:undefined,decorators:[{type:d.Attribute,args:["itemlabel.bind"]}]},{type:undefined,decorators:[{type:d.Attribute,args:["itemicon.bind"]}]},{type:undefined,decorators:[{type:d.Attribute,args:["itemicon.bind"]}]}]},e}(c.StylableComponent),re={widgetType:"wm-widget-template",hostClass:"app-widget-template"},se=function(i){function e(e){var t=i.call(this,e,re)||this;return c.styler(t.nativeElement,t,c.APPLY_STYLES_TYPE.SCROLLABLE_CONTAINER),t}return h(e,i),e.prototype.onPropertyChange=function(e,t,n){"tabindex"!==e&&i.prototype.onPropertyChange.call(this,e,t,n)},e.initializeProps=void c.register("wm-widget-template",new Map([["name",c.PROP_STRING],["show",m({value:!0},c.PROP_BOOLEAN)]])),e.decorators=[{type:d.Component,args:[{selector:"[wmWidgetTemplate]",template:"<span>Widget Template</span>",providers:[c.provideAsWidgetRef(e)]}]}],e.ctorParameters=function(){return[{type:d.Injector}]},e}(c.StylableComponent),le=[P,C,I,N,k,A,L,x,F,V,j,W,Y,U,oe,K,Q,J,X,ne,ee,ie,se],ce=[],pe=function(){function e(){}return e.decorators=[{type:d.NgModule,args:[{imports:[t.CommonModule,c.WmComponentsModule],declarations:f(le,ce),exports:f(le,ce),providers:[],entryComponents:[]}]}],e}(),de=function(){function e(){}return e.prototype.setUIComponent=function(e){this.processManagerComponent=e},e.prototype.createInstance=function(e,t,n){return this.processManagerComponent?this.processManagerComponent.createInstance(e,t,n):Promise.reject("ProcessManagerComponent is missing")},e.decorators=[{type:d.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=d.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}();e.ɵa=P,e.ɵb=C,e.ɵc=I,e.ɵd=N,e.ɵf=A,e.ɵe=k,e.ɵg=x,e.ɵh=F,e.ɵk=W,e.ɵj=j,e.ɵi=V,e.ɵl=Y,e.ɵo=K,e.ɵp=Q,e.ɵm=U,e.ɵq=X,e.ɵr=ne,e.ɵs=ee,e.ɵn=oe,e.ɵt=ie,e.ɵu=se,e.WmMobileComponentsModule=pe,e.FileSelectorService=B,e.ProcessManagementService=de,e.FileBrowserComponent=L,e.ProcessManagerComponent=J,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.min.js.map