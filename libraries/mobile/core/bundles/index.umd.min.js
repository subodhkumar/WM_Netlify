!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@ionic-native/app-version"),require("rxjs/operators"),require("@wm/components"),require("@ionic-native/file-opener"),require("@angular/common/http"),require("@ionic-native/network"),require("@ionic-native/file"),require("@angular/core"),require("@wm/core")):"function"==typeof define&&define.amd?define("@wm/mobile/core",["exports","@ionic-native/app-version","rxjs/operators","@wm/components","@ionic-native/file-opener","@angular/common/http","@ionic-native/network","@ionic-native/file","@angular/core","@wm/core"],t):t((e.wm=e.wm||{},e.wm.mobile=e.wm.mobile||{},e.wm.mobile.core={}),e.ionicNative.plugins,e.rxjs.operators,e.wm.components,e.ionicNative.plugins,e.ng.common.http,e.ionicNative.plugins,e.ionicNative.plugins,e.ng.core,e.wm.core)}(this,function(r,e,i,t,n,o,a,c,s,u){"use strict";var p;(p=r.FileType||(r.FileType={})).AUDIO="AUDIO",p.DOCUMENT="DOCUMENT",p.IMAGE="IMAGE",p.VIDEO="VIDEO";var l=["gif","jpg","png","svg","webp","jpeg","jif","jfif","jfi"],d=["mp4","mpg","avi","wma","mp2","3gp","3g2","m4p","m4v","mpg","fiv"],f=["mp3","m4p","aiff","aa","aax","wma"],h=[{name:"{APP_NAME}",children:[{name:"Media",children:[{name:"{APP_NAME} Images",fileType:r.FileType.IMAGE},{name:"{APP_NAME} Audio",fileType:r.FileType.AUDIO},{name:"{APP_NAME} Vedios",fileType:r.FileType.VIDEO},{name:"{APP_NAME} Documents",fileType:r.FileType.DOCUMENT}]}]}],v=function(){function n(e,t){this.cordovaAppVersion=e,this.cordovaFile=t,this.serviceName=n.name,this._fileTypeVsPathMap={temporary:{},persistent:{}}}return n.prototype.addMediaToGallery=function(n){return u.isAndroid()&&this.isPersistentType(n)?new Promise(function(e,t){cordova.plugins.MediaScannerPlugin.scanFile(n,e,t)}):Promise.resolve()},n.prototype.appendToFileName=function(e,t){var n;return t=t||"_"+_.now(),1<(n=(e=e||"noname").split(".")).length?(n[n.length-2]=n[n.length-2]+t,n.join(".")):e+t},n.prototype.clearTemporaryStorage=function(){return this.cordovaFile.removeRecursively(this.getTemporaryRootPath()+this._appName+"/","Media")},n.prototype.copy=function(e,t){var n=this,r=t.split("/").pop(),i=this.findFolderPath(e,r),o=t.substring(0,t.lastIndexOf("/"));return this.newFileName(i,r).then(function(e){return n.cordovaFile.copyFile(o,r,i,e).then(function(){return i+e})})},n.prototype.findFolderPath=function(e,t){var n=e?this._fileTypeVsPathMap.persistent:this._fileTypeVsPathMap.temporary;return n[this.findFileType(t)]||n[r.FileType.DOCUMENT]},n.prototype.getPersistentRootPath=function(){return cordova.file.dataDirectory},n.prototype.getTemporaryRootPath=function(){return cordova.file.cacheDirectory},n.prototype.getUploadDirectory=function(){return this._uploadDir},n.prototype.isPersistentType=function(e){return e.startsWith(this.getPersistentRootPath())},n.prototype.isValidPath=function(e){var t,n;return e?(t=e.substring(0,e.lastIndexOf("/")+1),n=e.split("/").pop(),this.cordovaFile.checkFile(t,n).then(function(){return e})):Promise.reject("File path is required")},n.prototype.listFiles=function(e,r){return new Promise(function(t,n){resolveLocalFileSystemURL(e,function(e){e.files?t([]):e.createReader().readEntries(function(e){r&&(e=e.filter(function(e){return e.name.match(r)})),e=e.map(function(e){return{name:e.name,isDirectory:e.isDirectory,path:e.nativeURL}}),t(e)},n)},n)})},n.prototype.newFileName=function(t,n){var r=this;return this.cordovaFile.checkFile(t,n).then(function(){var e=n.lastIndexOf(".");return n=0<e?n.substring(0,e)+"_"+_.now()+"."+n.substring(e+1):n+"_"+_.now(),r.newFileName(t,n)},function(){return n})},n.prototype.removeFile=function(e){var t=e.lastIndexOf("/"),n=e.substring(0,t),r=e.substring(t+1);return this.cordovaFile.removeFile(n,r)},n.prototype.removeDir=function(e){var t=this,n=e.lastIndexOf("/"),r=e.substring(0,n+1),i=e.substring(n+1),o=i+_.now();return this.cordovaFile.checkDir(r,i).then(function(){return t.cordovaFile.moveDir(r,i,r,o).then(function(){return t.cordovaFile.removeDir(r,o)})})["catch"](u.noop)},n.prototype.start=function(){var n=this;return FileReader.READ_CHUNK_SIZE=524288,new Promise(function(e,t){n.cordovaAppVersion.getAppName().then(function(e){var t=[];return n._appName=e,t.push(n.createFolderIfNotExists(n.getTemporaryRootPath(),h,n._fileTypeVsPathMap.temporary)),t.push(n.createFolderIfNotExists(n.getPersistentRootPath(),h,n._fileTypeVsPathMap.persistent)),t.push(n.setupUploadDirectory()),Promise.all(t)}).then(function(){if(u.isAndroid())return n.cordovaFile.readAsText(cordova.file.externalRootDirectory,"random-file-for-permission")["catch"](u.noop)}).then(e,t)})},n.prototype.createFolderIfNotExists=function(r,e,i){var o=this,a=[];if(e&&e.forEach(function(e){var t;e.name=e.name.replace("{APP_NAME}",o._appName),t=r+e.name+"/",e.fileType&&!i[e.fileType]&&(i[e.fileType]=t);var n=o.cordovaFile.createDir(r,e.name,!1).then(function(){return o.createFolderIfNotExists(t,e.children,i)},function(){return o.createFolderIfNotExists(t,e.children,i)});a.push(n)}),0<a.length)return Promise.all(a)},n.prototype.findFileType=function(e){var t;if(0<e.indexOf(".")){if(t=e.split(".").pop().toLowerCase(),l.some(function(e){return e===t}))return r.FileType.IMAGE;if(d.some(function(e){return e===t}))return r.FileType.VIDEO;if(f.some(function(e){return e===t}))return r.FileType.AUDIO}return r.FileType.DOCUMENT},n.prototype.setupUploadDirectory=function(){var e=this,t="uploads",n=cordova.file.dataDirectory;return this.cordovaFile.checkDir(n,t).then(function(){return e._uploadDir=n+t},function(){return e.cordovaFile.createDir(n,t,!0).then(function(){return e._uploadDir=n+t})})},n.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],n.ctorParameters=function(){return[{type:e.AppVersion},{type:c.File}]},n.ngInjectableDef=s.defineInjectable({factory:function(){return new n(s.inject(e.AppVersion),s.inject(c.File))},token:n,providedIn:"root"}),n}(),y=function(){function e(e,t,n,r){this.cordovaFile=e,this.http=t,this.deviceFileService=n,this.fileExtensionFromMimePipe=r,this._downloadQueue=[],this._concurrentDownloads=0}return e.prototype.download=function(e,t,n,r,i){return this.addToDownloadQueue(e,t,n,r,i)},e.prototype.addToDownloadQueue=function(n,r,i,o,a){var c=this;return new Promise(function(e,t){c._downloadQueue.push({url:n,isPersistent:r,destFolder:i,destFile:o,resolve:e,reject:t,progressObserver:a}),c._concurrentDownloads<2&&c.downloadNext()})},e.prototype.downloadNext=function(){var t=this;if(0<this._downloadQueue.length){var n=this._downloadQueue.shift();this.downloadFile(n).then(function(e){n.resolve(e),t.downloadNext()},function(){n.reject(),t.downloadNext()})}},e.prototype.downloadFile=function(t){var n,r,i=this;return this._concurrentDownloads++,this.sendHttpRequest(t.url,t.progressObserver).then(function(e){return r=e.body,i.getFileName(e,t,r.type)}).then(function(e){return t.destFolder||(t.destFolder=i.deviceFileService.findFolderPath(t.isPersistent,e)),n=t.destFolder+e,i.cordovaFile.writeFile(t.destFolder,e,r)}).then(function(){return i._concurrentDownloads--,n},function(e){return i._concurrentDownloads--,i.cordovaFile.removeFile(t.destFolder,t.destFile),Promise.reject("Failed to downloaded  "+t.url+" with error "+JSON.stringify(e))})},e.prototype.getFileName=function(e,t,n){var r,i,o=e.headers.get("Content-Disposition"),a=t.destFile;if(!a&&o&&-1!==o.indexOf("attachment")){var c=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(o);null!==c&&c[1]&&(a=c[1].replace(/['"]/g,""))}a||(a=(a=t.url.split("?")[0]).split("/").pop()),n&&(r=this.fileExtensionFromMimePipe.transform(n)),_.isArray(r)&&(i=_.find(r,function(e){return _.endsWith(a,e)})),i||_.endsWith(a,r)||(a+=r);var s=t.destFolder||this.deviceFileService.findFolderPath(t.isPersistent,a);return this.deviceFileService.newFileName(s,a)},e.prototype.sendHttpRequest=function(e,t){var n=new o.HttpRequest("GET",e,{responseType:"blob",reportProgress:null!=t});return this.http.request(n).pipe(i.map(function(e){return t&&t.next&&e.type===o.HttpEventType.DownloadProgress&&t.next(e),e}),i.filter(function(e){return e.type===o.HttpEventType.Response}),i.map(function(e){return t&&t.complete&&t.complete(),e})).toPromise()},e.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:c.File},{type:o.HttpClient},{type:v},{type:t.FileExtensionFromMimePipe}]},e.ngInjectableDef=s.defineInjectable({factory:function(){return new e(s.inject(c.File),s.inject(o.HttpClient),s.inject(v),s.inject(t.FileExtensionFromMimePipe))},token:e,providedIn:"root"}),e}(),m="appCache.json",w=function(){function r(e,t,n){this.cordovaFile=e,this.fileService=t,this.downloadService=n,this.serviceName=r.name,this._cacheIndex={}}return r.prototype.addEntry=function(e,t){this._cacheIndex[e]=t,this.writeCacheIndexToFile()},r.prototype.getLocalPath=function(e,t,n){var r=this,i=this._cacheIndex[e];return this.fileService.isValidPath(i)["catch"](function(){if(delete r._cacheIndex[e],t)return r.download(e,n);Promise.reject("No cache entry for "+e)})},r.prototype.invalidateCache=function(){this._cacheIndex={},this.writeCacheIndexToFile(),this.fileService.clearTemporaryStorage()},r.prototype.start=function(){var t=this;return this.cordovaFile.readAsText(cordova.file.dataDirectory,m).then(function(e){t._cacheIndex=JSON.parse(e)},u.noop)},r.prototype.download=function(t,e){var n=this;return this.downloadService.download(t,e).then(function(e){return n._cacheIndex[t]=e,n.writeCacheIndexToFile(),e})},r.prototype.writeCacheIndexToFile=function(){var e=this;this._writing?this._saveCache=!0:(this._writing=!0,this.cordovaFile.writeFile(cordova.file.dataDirectory,m,JSON.stringify(this._cacheIndex),{replace:!0})["catch"](u.noop).then(function(){e._saveCache?setTimeout(function(){e._writing=!1,e._saveCache=!1,e.writeCacheIndexToFile()},5e3):e._writing=!1}))},r.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],r.ctorParameters=function(){return[{type:c.File},{type:v},{type:y}]},r.ngInjectableDef=s.defineInjectable({factory:function(){return new r(s.inject(c.File),s.inject(v),s.inject(y))},token:r,providedIn:"root"}),r}(),g=function(){function o(e,t,n,r,i){this.cordovaFile=e,this.cordovaFileOpener=t,this.fileService=n,this.cacheService=r,this.downloadService=i,this.serviceName=o.name}return o.prototype.getFileMimeType=function(e){return new Promise(function(t){resolveLocalFileSystemURL(e,function(e){e.file(function(e){t(e.type)})})})},o.prototype.openRemoteFile=function(e,t,n){var r=this;return this.getLocalPath(e,t,n).then(function(t){return r.getFileMimeType(t).then(function(e){return r.cordovaFileOpener.open(t,e)})})},o.prototype.start=function(){var e,t=this;return e=u.isAndroid()?cordova.file.externalCacheDirectory:u.isIos()?cordova.file.documentsDirectory+"NoCloud/":cordova.file.dataDirectory,this.cordovaFile.createDir(e,"downloads",!1)["catch"](u.noop).then(function(){t._downloadsFolder=e+"downloads/"})},o.prototype.generateFileName=function(e,t){var n=e.split("?")[0];return n=n.split("/").pop(),n=this.fileService.appendToFileName(n,""+_.now()),t?n.split(".")[0]+"."+t:n},o.prototype.getLocalPath=function(a,c,s){var u=this;return new Promise(function(o,e){return u.cacheService.getLocalPath(a,!1,!1).then(function(e){var t,n,r,i;e.startsWith(u._downloadsFolder)?o(e):(t=s||u.generateFileName(a,c),n=e.lastIndexOf("/"),r=e.substring(0,n),i=e.substring(n+1),u.cordovaFile.copyFile(r,i,u._downloadsFolder,t).then(function(){var e=u._downloadsFolder+t;u.cacheService.addEntry(a,e),o(e)}))})["catch"](function(){u.downloadService.download(a,!1,u._downloadsFolder,s).then(function(e){u.cacheService.addEntry(a,e),o(e)},e)})})},o.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],o.ctorParameters=function(){return[{type:c.File},{type:n.FileOpener},{type:v},{type:w},{type:y}]},o.ngInjectableDef=s.defineInjectable({factory:function(){return new o(s.inject(c.File),s.inject(n.FileOpener),s.inject(v),s.inject(w),s.inject(y))},token:o,providedIn:"root"}),o}(),F="registry.info",b=function(){function e(e){var t=this;this.file=e,this._registry={},this._isReady=!1,this._whenReadyPromises=[],this._backBtnTapListeners=[],this._startUpServices=[];setTimeout(function(){t._isReady||(console.warn("Device is not ready even after 10 seconds"),console.warn("Waiting For %O",t._startUpServices.map(function(e){return e.serviceName})))},1e4),document.addEventListener("backbutton",this.executeBackTapListeners.bind(this))}return e.prototype.executeBackTapListeners=function(t){_.forEach(this._backBtnTapListeners,function(e){return!1!==e(t)}),u.$appDigest()},e.prototype.addStartUpService=function(e){this._startUpServices.push(e)},e.prototype.onBackButtonTap=function(t){var n=this;return this._backBtnTapListeners.unshift(t),function(){var e=n._backBtnTapListeners.indexOf(t);0<=e&&n._backBtnTapListeners.splice(e,1)}},e.prototype.start=function(){var t=this;return this._isReady||0===this._startUpServices.length?(this._isReady=!0,Promise.resolve()):new Promise(function(e){u.hasCordova()?document.addEventListener("deviceready",function(){return e()},!1):e()}).then(function(){if(window.cordova)return t.file.readAsText(cordova.file.dataDirectory,F).then(function(e){return t._registry=JSON.parse(e)},u.noop)}).then(function(){return Promise.all(t._startUpServices.map(function(t){return t.start()["catch"](function(e){return console.error("%s failed to start due to: %O",t.serviceName,e),Promise.reject(e)})}))}).then(function(){window.wmDeviceReady=!0,document.dispatchEvent(new CustomEvent("wmDeviceReady")),t._startUpServices.length=0,t._whenReadyPromises.forEach(function(e){return e()}),t._isReady=!0})},e.prototype.whenReady=function(){var t=this;return this._isReady?Promise.resolve():new Promise(function(e){t._whenReadyPromises.push(e)})},e.prototype.getAppBuildTime=function(){return this.file.readAsText(cordova.file.applicationDirectory+"www","config.json").then(function(e){return JSON.parse(e).buildTime})},e.prototype.storeEntry=function(e,t){return this._registry[e]=t,this.file.writeFile(cordova.file.dataDirectory,F,JSON.stringify(this._registry),{replace:!0})},e.prototype.getEntry=function(e){return this._registry[e]},e.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:c.File}]},e.ngInjectableDef=s.defineInjectable({factory:function(){return new e(s.inject(c.File))},token:e,providedIn:"root"}),e}(),S="WM.NetworkService._autoConnect",P="WM.NetworkService.isConnected",C=[new RegExp("/wmProperties.js")],I=XMLHttpRequest.prototype.open,N=(XMLHttpRequest.prototype.send,{isConnecting:!1,isConnected:"true"===localStorage.getItem(P),isNetworkAvailable:!0,isServiceAvailable:!0}),T=function(t){var e=!N.isConnected&&_.startsWith(t,"http");return e&&(e=!_.find(C,function(e){return e.test(t)})),e},D=T;XMLHttpRequest.prototype.open=function(e,t,n,r,i){if(void 0===n&&(n=!0),T(t)){var o=t.split("://"),a=o[1].indexOf("/");o[1]="localhost"+(0<a?o[1].substr(a):"/"),t=o.join("://")}return I.apply(this,[e,t,n,r,i])};var A=function(){function i(e,t,n){var r=this;this.httpClient=e,this.app=t,this.network=n,this.serviceName=i.name,this._autoConnect="false"!==localStorage.getItem(S),this._isCheckingServer=!1,this.disableAutoConnect=function(){return r.setAutoConnect(!1)},this.isConnected=function(){return _.get(navigator,"connection")&&navigator.connection.type&&(N.isConnected=N.isConnected&&"none"!==navigator.connection.type),r.checkForNetworkStateChange(),N.isConnected},this.isConnecting=function(){return N.isConnecting}}return i.prototype.connect=function(){return this.setAutoConnect(!0),this.tryToConnect()},i.prototype.disconnect=function(){var e=this.tryToDisconnect();return this.disableAutoConnect(),e},i.prototype.isAvailable=function(e){var t=this;return void 0===e&&(e=!1),e?this.isServiceAvailable().then(function(){return t.checkForNetworkStateChange(),N.isServiceAvailable}):N.isServiceAvailable},i.prototype.onConnect=function(){var e,t,n=this;return this.isConnected()?Promise.resolve():(e=u.getAbortableDefer(),t=this.app.subscribe("onNetworkStateChange",function(){n.isConnected()&&(e.resolve(!0),t())}),e.promise["catch"](function(){t()}),e.promise)},i.prototype.retryIfNetworkFails=function(e){var t=this,n=u.getAbortableDefer();return u.retryIfFails(e,0,0,function(){var e;return!t.isConnected()&&(e=t.onConnect(),n.promise["catch"](function(){e.abort()}),e)}).then(n.resolve,n.reject),n.promise},i.prototype.start=function(){var t=this;return window.cordova&&window.Connection&&navigator.connection&&(N.isNetworkAvailable="none"!==navigator.connection.type,N.isConnected=N.isNetworkAvailable&&N.isConnected,this.network.onConnect().subscribe(function(){N.isNetworkAvailable=!0,t.tryToConnect()["catch"](u.noop)}),this.network.onDisconnect().subscribe(function(){N.isNetworkAvailable=!1,N.isServiceAvailable=!1,t.tryToDisconnect()}),this.app.subscribe("onNetworkStateChange",function(e){!e.isNetworkAvailable||e.isServiceAvailable||t._isCheckingServer||(t._isCheckingServer=!0,t.checkForServiceAvailiblity().then(function(){t._isCheckingServer=!1,t.connect()},function(){t._isCheckingServer=!1}))})),this.tryToConnect(!0)["catch"](u.noop)},i.prototype.unblock=function(e){C.push(new RegExp(e))},i.prototype.checkForNetworkStateChange=function(){_.isEqual(this._lastKnownNetworkState,N)||(this._lastKnownNetworkState=_.clone(N),this.app.notify("onNetworkStateChange",this._lastKnownNetworkState))},i.prototype.checkForServiceAvailiblity=function(){var e=this;return new Promise(function(t){var n=setInterval(function(){N.isNetworkAvailable&&e.isServiceAvailable(4500).then(function(e){e&&(clearInterval(n),t())})},5e3)})},i.prototype.isServiceAvailable=function(e){return this.pingServer(e).then(function(e){return N.isServiceAvailable=e,N.isServiceAvailable||(N.isConnecting=!1,N.isConnected=!1),e})},i.prototype.pingServer=function(i){var o=this;return void 0===i&&(i=6e4),new Promise(function(e){var t=new XMLHttpRequest,n=o.app.deployedUrl;n&&!_.endsWith(n,"/")?n+="/":n=n||"";var r=setTimeout(function(){t.abort(),e(!1)},i);t.addEventListener("load",function(){200===t.status?e(!0):e(!1),r&&clearTimeout(r)}),t.addEventListener("error",function(){return e(!1)}),t.open("GET",n+"services/application/wmProperties.js?t="+Date.now()),t.send()})},i.prototype.setAutoConnect=function(e){this._autoConnect=e,localStorage.setItem(S,""+e)},i.prototype.tryToConnect=function(n){var r=this;return void 0===n&&(n=!1),new Promise(function(e,t){r.isServiceAvailable(5e3).then(function(){N.isServiceAvailable&&r._autoConnect?(N.isConnecting=!0,n||r.checkForNetworkStateChange(),setTimeout(function(){N.isConnecting=!1,N.isConnected=!0,localStorage.setItem(P,""+!0),n||r.checkForNetworkStateChange(),e(!0)},n?0:5e3)):(N.isConnecting=!1,N.isConnected=!1,localStorage.setItem(P,""+!1),t(),r.checkForNetworkStateChange())})})},i.prototype.tryToDisconnect=function(){return N.isConnected=!1,N.isConnecting=!1,this.checkForNetworkStateChange(),localStorage.setItem(P,""+N.isConnected),Promise.resolve(N.isConnected)},i.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],i.ctorParameters=function(){return[{type:o.HttpClient},{type:u.App},{type:a.Network}]},i.ngInjectableDef=s.defineInjectable({factory:function(){return new i(s.inject(o.HttpClient),s.inject(u.App),s.inject(a.Network))},token:i,providedIn:"root"}),i}(),k=function(){function o(e,t,n,r,i){o.addStartupServices(e,t,n,r,i)}return o.addStartupServices=function(e,t,n,r,i){this.initialized||(e.addStartUpService(i),u.hasCordova()&&(e.addStartUpService(t),e.addStartUpService(n),e.addStartUpService(r)),this.initialized=!0)},o.initialized=!1,o.decorators=[{type:s.NgModule,args:[{declarations:[],imports:[],providers:[],bootstrap:[]}]}],o.ctorParameters=function(){return[{type:b},{type:v},{type:w},{type:g},{type:A}]},o}(),j=function(){function e(e,t){this.url=e,this.cordovaFile=t,this._files=[],this._params=[],this._headers=[]}return e.prototype.addFile=function(e,t,n){return this._files.push({name:e,path:t,fileName:n}),this},e.prototype.addHeader=function(e,t){return this._headers.push({name:e,value:t}),this},e.prototype.addParam=function(e,t){return this._params.push({name:e,value:t}),this},e.prototype.post=function(){var r=this,i=new FormData;return this._params.forEach(function(e){return i.append(e.name,e.value)}),Promise.all(this._files.map(function(t){return t.path?u.convertToBlob(t.path).then(function(e){return{name:t.name,fileName:t.fileName,blob:e.blob}}):t})).then(function(e){return e.forEach(function(e){return i.append(e.name,e.blob||e.path,e.fileName)}),new Promise(function(e,t){var n=new XMLHttpRequest;n.open("POST",r.url),r._headers.forEach(function(e){return n.setRequestHeader(e.name,e.value)}),n.onload=function(){e({headers:function(e){return n.getResponseHeader(e)},response:n.response,text:n.responseText})},n.onerror=t,n.onabort=t,n.send(i)})})},e}(),E=function(){function e(e){this.cordovaFile=e}return e.prototype.upload=function(e,t,n,r,i,o){var a=new j(e,this.cordovaFile).addFile(t,n,r);return _.forEach(i,function(e,t){return a.addParam(e,t)}),_.forEach(o,function(e,t){return a.addHeader(e,t)}),a.post()},e.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:c.File}]},e.ngInjectableDef=s.defineInjectable({factory:function(){return new e(s.inject(c.File))},token:e,providedIn:"root"}),e}(),x=function(){function e(e){var t=this;this.app=e,this.handlers=[],document.addEventListener("externalAppMessageReceived",function(e){var n=e.detail.message;t.handlers.forEach(function(e){var t=e&&n.address.match(e.pattern);t&&0<t.length&&e.callBack(n)})})}return e.prototype.subscribe=function(e,t){var n=this,r={pattern:new RegExp(e),callBack:t};return this.handlers.push(r),function(){return _.remove(n.handlers,r)}},e.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:u.App}]},e.ngInjectableDef=s.defineInjectable({factory:function(){return new e(s.inject(u.App))},token:e,providedIn:"root"}),e}();!function(i,o){function a(e,t,n){return n=n<0?undefined:n,e&&0<=t&&e.length>t&&e.substring(t,n)||undefined}function c(e,t){return e&&e.indexOf(t)}function s(e){return{address:function t(e){return a(e,c(e,"://")+3,c(e,"?"))}(e),data:function r(e){var t=a(e,c(e,"?")+1,c(e,"#")),n={};return _.forEach(_.split(t,"&"),function(e){var t=e.split("=");n[t[0]]=t[1]}),n}(e)}}i.handleOpenURL=function(e){var t=i.handleOpenURL;if(t.isReady&&!_.startsWith(e,"http")){var n=s(e),r=new i.CustomEvent("externalAppMessageReceived",{detail:{message:n}});o.dispatchEvent(r)}t.lastURL=e}}(window,document),r.MobileCoreModule=k,r.DeviceFileCacheService=w,r.DeviceFileDownloadService=y,r.DeviceFileOpenerService=g,r.DeviceFileService=v,r.UploadRequest=j,r.DeviceFileUploadService=E,r.DeviceService=b,r.ExtAppMessageService=x,r.NetworkService=A,r.ɵ0=D,Object.defineProperty(r,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.min.js.map