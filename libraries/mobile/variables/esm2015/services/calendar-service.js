import { DeviceVariableService } from '@wm/variables';
const DEFAULT_TIME = new Date().getTime();
/*3 months timestamp value*/
const DELTA_VALUE_DATE = (3 * 30 * 24 * 60 * 60 * 1000);
const DEFAULT_START_DATE = (DEFAULT_TIME - DELTA_VALUE_DATE);
const DEFAULT_END_DATE = (DEFAULT_TIME + DELTA_VALUE_DATE);
const EVENT_META = {
    title: '',
    message: '',
    location: '',
    startDate: new Date(),
    endDate: new Date()
};
/**
 * this file contains all calendar operations under 'calendar' service.
 */
export class CalendarService extends DeviceVariableService {
    constructor(calendar) {
        super();
        this.name = 'calendar';
        this.operations = [];
        this.operations.push(new CreateEventOperation(calendar), new DeleteEventOperation(calendar), new GetEventsOperation(calendar));
    }
}
class CreateEventOperation {
    constructor(calendar) {
        this.calendar = calendar;
        this.name = 'createEvent';
        this.properties = [
            { target: 'eventTitle', type: 'string', dataBinding: true },
            { target: 'eventNotes', type: 'string', dataBinding: true },
            { target: 'eventLocation', type: 'string', dataBinding: true },
            { target: 'eventStart', type: 'datetime', dataBinding: true },
            { target: 'eventEnd', type: 'datetime', dataBinding: true }
        ];
        this.requiredCordovaPlugins = ['CALENDAR'];
    }
    invoke(variable, options, eventInfo) {
        return this.calendar.createEvent(eventInfo.get('eventTitle'), eventInfo.get('eventLocation'), eventInfo.get('eventNotes'), new Date(eventInfo.get('eventStart') || 0), new Date(eventInfo.get('eventEnd') || 0));
    }
}
class DeleteEventOperation {
    constructor(calendar) {
        this.calendar = calendar;
        this.name = 'deleteEvent';
        this.properties = [
            { target: 'eventTitle', type: 'string', dataBinding: true },
            { target: 'eventNotes', type: 'string', dataBinding: true },
            { target: 'eventLocation', type: 'string', dataBinding: true },
            { target: 'eventStart', type: 'datetime', dataBinding: true },
            { target: 'eventEnd', type: 'datetime', dataBinding: true }
        ];
        this.requiredCordovaPlugins = ['CALENDAR'];
    }
    invoke(variable, options, eventInfo) {
        return this.calendar.deleteEvent(eventInfo.get('eventTitle'), eventInfo.get('eventLocation'), eventInfo.get('eventNotes'), new Date(eventInfo.get('eventStart') || DEFAULT_START_DATE), new Date(eventInfo.get('eventEnd') || DEFAULT_END_DATE));
    }
}
class GetEventsOperation {
    constructor(calendar) {
        this.calendar = calendar;
        this.name = 'getEvents';
        this.model = [EVENT_META];
        this.properties = [
            { target: 'eventTitle', type: 'string', dataBinding: true },
            { target: 'eventNotes', type: 'string', dataBinding: true },
            { target: 'eventLocation', type: 'string', dataBinding: true },
            { target: 'eventStart', type: 'datetime', dataBinding: true },
            { target: 'eventEnd', type: 'datetime', dataBinding: true }
        ];
        this.requiredCordovaPlugins = ['CALENDAR'];
    }
    invoke(variable, options, eventInfo) {
        return this.calendar.findEvent(eventInfo.get('eventTitle'), eventInfo.get('eventLocation'), eventInfo.get('eventNotes'), new Date(eventInfo.get('eventStart') || DEFAULT_START_DATE), new Date(eventInfo.get('eventEnd') || DEFAULT_END_DATE));
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsZW5kYXItc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0B3bS9tb2JpbGUvdmFyaWFibGVzLyIsInNvdXJjZXMiOlsic2VydmljZXMvY2FsZW5kYXItc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxPQUFPLEVBQUUscUJBQXFCLEVBQTRCLE1BQU0sZUFBZSxDQUFDO0FBRWhGLE1BQU0sWUFBWSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUM7QUFDMUMsNEJBQTRCO0FBQzVCLE1BQU0sZ0JBQWdCLEdBQUksQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDO0FBQ3pELE1BQU0sa0JBQWtCLEdBQUcsQ0FBQyxZQUFZLEdBQUcsZ0JBQWdCLENBQUMsQ0FBQztBQUM3RCxNQUFNLGdCQUFnQixHQUFHLENBQUMsWUFBWSxHQUFHLGdCQUFnQixDQUFDLENBQUM7QUFDM0QsTUFBTSxVQUFVLEdBQUc7SUFDZixLQUFLLEVBQUUsRUFBRTtJQUNULE9BQU8sRUFBRSxFQUFFO0lBQ1gsUUFBUSxFQUFFLEVBQUU7SUFDWixTQUFTLEVBQUUsSUFBSSxJQUFJLEVBQUU7SUFDckIsT0FBTyxFQUFFLElBQUksSUFBSSxFQUFFO0NBQ3RCLENBQUM7QUFFRjs7R0FFRztBQUNILE1BQU0sT0FBTyxlQUFnQixTQUFRLHFCQUFxQjtJQUl0RCxZQUFZLFFBQWtCO1FBQzFCLEtBQUssRUFBRSxDQUFDO1FBSkksU0FBSSxHQUFHLFVBQVUsQ0FBQztRQUNsQixlQUFVLEdBQStCLEVBQUUsQ0FBQztRQUl4RCxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLG9CQUFvQixDQUFDLFFBQVEsQ0FBQyxFQUNuRCxJQUFJLG9CQUFvQixDQUFDLFFBQVEsQ0FBQyxFQUNsQyxJQUFJLGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7SUFDMUMsQ0FB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QUksR0FBRyxXQUFXLENBQUM7UUFDbkIsVUFBSyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDckIsZUFBVSxHQUFHO1lBQ3pCLEVBQUMsTUFBTSxFQUFFLFlBQVksRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFBRSxJQUFJLEVBQUM7WUFDekQsRUFBQyxNQUFNLEVBQUUsWUFBWSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBQztZQUN6RCxFQUFDLE1BQU0sRUFBRSxlQUFlLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxXQUFXLEVBQUUsSUFBSSxFQUFDO1lBQzVELEVBQUMsTUFBTSxFQUFFLFlBQVksRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxJQUFJLEVBQUM7WUFDM0QsRUFBQyxNQUFNLEVBQUUsVUFBVSxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBQztTQUM1RCxDQUFDO1FBQ2MsMkJBQXNCLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUl0RCxDQUFDO0lBRU0sTUFBTSxDQUFDLFFBQWEsRUFBRSxPQUFZLEVBQUUsU0FBMkI7UUFDbEUsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FDMUIsU0FBUyxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsRUFDM0IsU0FBUyxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsRUFDOUIsU0FBUyxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsRUFDM0IsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsSUFBSSxrQkFBa0IsQ0FBQyxFQUMzRCxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxJQUFJLGdCQUFnQixDQUFDLENBQUMsQ0FBQztJQUNqRSxDQUFDO0NBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDYWxlbmRhciB9IGZyb20gJ0Bpb25pYy1uYXRpdmUvY2FsZW5kYXInO1xuXG5pbXBvcnQgeyBEZXZpY2VWYXJpYWJsZVNlcnZpY2UsIElEZXZpY2VWYXJpYWJsZU9wZXJhdGlvbiB9IGZyb20gJ0B3bS92YXJpYWJsZXMnO1xuXG5jb25zdCBERUZBVUxUX1RJTUUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbi8qMyBtb250aHMgdGltZXN0YW1wIHZhbHVlKi9cbmNvbnN0IERFTFRBX1ZBTFVFX0RBVEUgPSAgKDMgKiAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApO1xuY29uc3QgREVGQVVMVF9TVEFSVF9EQVRFID0gKERFRkFVTFRfVElNRSAtIERFTFRBX1ZBTFVFX0RBVEUpO1xuY29uc3QgREVGQVVMVF9FTkRfREFURSA9IChERUZBVUxUX1RJTUUgKyBERUxUQV9WQUxVRV9EQVRFKTtcbmNvbnN0IEVWRU5UX01FVEEgPSB7XG4gICAgdGl0bGU6ICcnLFxuICAgIG1lc3NhZ2U6ICcnLFxuICAgIGxvY2F0aW9uOiAnJyxcbiAgICBzdGFydERhdGU6IG5ldyBEYXRlKCksXG4gICAgZW5kRGF0ZTogbmV3IERhdGUoKVxufTtcblxuLyoqXG4gKiB0aGlzIGZpbGUgY29udGFpbnMgYWxsIGNhbGVuZGFyIG9wZXJhdGlvbnMgdW5kZXIgJ2NhbGVuZGFyJyBzZXJ2aWNlLlxuICovXG5leHBvcnQgY2xhc3MgQ2FsZW5kYXJTZXJ2aWNlIGV4dGVuZHMgRGV2aWNlVmFyaWFibGVTZXJ2aWNlIHtcbiAgICBwdWJsaWMgcmVhZG9ubHkgbmFtZSA9ICdjYWxlbmRhcic7XG4gICAgcHVibGljIHJlYWRvbmx5IG9wZXJhdGlvbnM6IElEZXZpY2VWYXJpYWJsZU9wZXJhdGlvbltdID0gW107XG5cbiAgICBjb25zdHJ1Y3RvcihjYWxlbmRhcjogQ2FsZW5kYXIpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5vcGVyYXRpb25zLnB1c2gobmV3IENyZWF0ZUV2ZW50T3BlcmF0aW9uKGNhbGVuZGFyKSxcbiAgICAgICAgICAgIG5ldyBEZWxldGVFdmVudE9wZXJhdGlvbihjYWxlbmRhciksXG4gICAgICAgICAgICBuZXcgR2V0RXZlbnRzT3BlcmF0aW9uKGNhbGVuZGFyKSk7XG4gICAgfVxufVxuXG5jbGFzcyBDcmVhdGVFdmVudE9wZXJhdGlvbiBpbXBsZW1lbnRzIElEZXZpY2VWYXJpYWJsZU9wZXJhdGlvbiB7XG4gICAgcHVibGljIHJlYWRvbmx5IG5hbWUgPSAnY3JlYXRlRXZlbnQnO1xuICAgIHB1YmxpYyByZWFkb25seSBwcm9wZXJ0aWVzID0gW1xuICAgICAgICAgICAge3RhcmdldDogJ2V2ZW50VGl0bGUnLCB0eXBlOiAnc3RyaW5nJywgZGF0YUJpbmRpbmc6IHRydWV9LFxuICAgICAgICAgICAge3RhcmdldDogJ2V2ZW50Tm90ZXMnLCB0eXBlOiAnc3RyaW5nJywgZGF0YUJpbmRpbmc6IHRydWV9LFxuICAgICAgICAgICAge3RhcmdldDogJ2V2ZW50TG9jYXRpb24nLCB0eXBlOiAnc3RyaW5nJywgZGF0YUJpbmRpbmc6IHRydWV9LFxuICAgICAgICAgICAge3RhcmdldDogJ2V2ZW50U3RhcnQnLCB0eXBlOiAnZGF0ZXRpbWUnLCBkYXRhQmluZGluZzogdHJ1ZX0sXG4gICAgICAgICAgICB7dGFyZ2V0OiAnZXZlbnRFbmQnLCB0eXBlOiAnZGF0ZXRpbWUnLCBkYXRhQmluZGluZzogdHJ1ZX1cbiAgICAgICAgXTtcbiAgICBwdWJsaWMgcmVhZG9ubHkgcmVxdWlyZWRDb3Jkb3ZhUGx1Z2lucyA9IFsnQ0FMRU5EQVInXTtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgY2FsZW5kYXI6IENhbGVuZGFyKSB7XG5cbiAgICB9XG5cbiAgICBwdWJsaWMgaW52b2tlKHZhcmlhYmxlOiBhbnksIG9wdGlvbnM6IGFueSwgZXZlbnRJbmZvOiBNYXA8c3RyaW5nLCBhbnk+KTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsZW5kYXIuY3JlYXRlRXZlbnQoXG4gICAgICAgICAgICBldmVudEluZm8uZ2V0KCdldmVudFRpdGxlJyksXG4gICAgICAgICAgICBldmVudEluZm8uZ2V0KCdldmVudExvY2F0aW9uJyksXG4gICAgICAgICAgICBldmVudEluZm8uZ2V0KCdldmVudE5vdGVzJyksXG4gICAgICAgICAgICBuZXcgRGF0ZShldmVudEluZm8uZ2V0KCdldmVudFN0YXJ0JykgfHwgMCksXG4gICAgICAgICAgICBuZXcgRGF0ZShldmVudEluZm8uZ2V0KCdldmVudEVuZCcpIHx8IDApKTtcbiAgICB9XG59XG5cbmNsYXNzIERlbGV0ZUV2ZW50T3BlcmF0aW9uIGltcGxlbWVudHMgSURldmljZVZhcmlhYmxlT3BlcmF0aW9uIHtcbiAgICBwdWJsaWMgcmVhZG9ubHkgbmFtZSA9ICdkZWxldGVFdmVudCc7XG4gICAgcHVibGljIHJlYWRvbmx5IHByb3BlcnRpZXMgPSBbXG4gICAgICAgIHt0YXJnZXQ6ICdldmVudFRpdGxlJywgdHlwZTogJ3N0cmluZycsIGRhdGFCaW5kaW5nOiB0cnVlfSxcbiAgICAgICAge3RhcmdldDogJ2V2ZW50Tm90ZXMnLCB0eXBlOiAnc3RyaW5nJywgZGF0YUJpbmRpbmc6IHRydWV9LFxuICAgICAgICB7dGFyZ2V0OiAnZXZlbnRMb2NhdGlvbicsIHR5cGU6ICdzdHJpbmcnLCBkYXRhQmluZGluZzogdHJ1ZX0sXG4gICAgICAgIHt0YXJnZXQ6ICdldmVudFN0YXJ0JywgdHlwZTogJ2RhdGV0aW1lJywgZGF0YUJpbmRpbmc6IHRydWV9LFxuICAgICAgICB7dGFyZ2V0OiAnZXZlbnRFbmQnLCB0eXBlOiAnZGF0ZXRpbWUnLCBkYXRhQmluZGluZzogdHJ1ZX1cbiAgICBdO1xuICAgIHB1YmxpYyByZWFkb25seSByZXF1aXJlZENvcmRvdmFQbHVnaW5zID0gWydDQUxFTkRBUiddO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBjYWxlbmRhcjogQ2FsZW5kYXIpIHtcblxuICAgIH1cblxuICAgIHB1YmxpYyBpbnZva2UodmFyaWFibGU6IGFueSwgb3B0aW9uczogYW55LCBldmVudEluZm86IE1hcDxzdHJpbmcsIGFueT4pOiBQcm9taXNlPGFueT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxlbmRhci5kZWxldGVFdmVudChcbiAgICAgICAgICAgIGV2ZW50SW5mby5nZXQoJ2V2ZW50VGl0bGUnKSxcbiAgICAgICAgICAgIGV2ZW50SW5mby5nZXQoJ2V2ZW50TG9jYXRpb24nKSxcbiAgICAgICAgICAgIGV2ZW50SW5mby5nZXQoJ2V2ZW50Tm90ZXMnKSxcbiAgICAgICAgICAgIG5ldyBEYXRlKGV2ZW50SW5mby5nZXQoJ2V2ZW50U3RhcnQnKSB8fCBERUZBVUxUX1NUQVJUX0RBVEUpLFxuICAgICAgICAgICAgbmV3IERhdGUoZXZlbnRJbmZvLmdldCgnZXZlbnRFbmQnKSB8fCBERUZBVUxUX0VORF9EQVRFKSk7XG4gICAgfVxufVxuXG5jbGFzcyBHZXRFdmVudHNPcGVyYXRpb24gaW1wbGVtZW50cyBJRGV2aWNlVmFyaWFibGVPcGVyYXRpb24ge1xuICAgIHB1YmxpYyByZWFkb25seSBuYW1lID0gJ2dldEV2ZW50cyc7XG4gICAgcHVibGljIHJlYWRvbmx5IG1vZGVsID0gW0VWRU5UX01FVEFdO1xuICAgIHB1YmxpYyByZWFkb25seSBwcm9wZXJ0aWVzID0gW1xuICAgICAgICB7dGFyZ2V0OiAnZXZlbnRUaXRsZScsIHR5cGU6ICdzdHJpbmcnLCBkYXRhQmluZGluZzogdHJ1ZX0sXG4gICAgICAgIHt0YXJnZXQ6ICdldmVudE5vdGVzJywgdHlwZTogJ3N0cmluZycsIGRhdGFCaW5kaW5nOiB0cnVlfSxcbiAgICAgICAge3RhcmdldDogJ2V2ZW50TG9jYXRpb24nLCB0eXBlOiAnc3RyaW5nJywgZGF0YUJpbmRpbmc6IHRydWV9LFxuICAgICAgICB7dGFyZ2V0OiAnZXZlbnRTdGFydCcsIHR5cGU6ICdkYXRldGltZScsIGRhdGFCaW5kaW5nOiB0cnVlfSxcbiAgICAgICAge3RhcmdldDogJ2V2ZW50RW5kJywgdHlwZTogJ2RhdGV0aW1lJywgZGF0YUJpbmRpbmc6IHRydWV9XG4gICAgXTtcbiAgICBwdWJsaWMgcmVhZG9ubHkgcmVxdWlyZWRDb3Jkb3ZhUGx1Z2lucyA9IFsnQ0FMRU5EQVInXTtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgY2FsZW5kYXI6IENhbGVuZGFyKSB7XG5cbiAgICB9XG5cbiAgICBwdWJsaWMgaW52b2tlKHZhcmlhYmxlOiBhbnksIG9wdGlvbnM6IGFueSwgZXZlbnRJbmZvOiBNYXA8c3RyaW5nLCBhbnk+KTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsZW5kYXIuZmluZEV2ZW50KFxuICAgICAgICAgICAgZXZlbnRJbmZvLmdldCgnZXZlbnRUaXRsZScpLFxuICAgICAgICAgICAgZXZlbnRJbmZvLmdldCgnZXZlbnRMb2NhdGlvbicpLFxuICAgICAgICAgICAgZXZlbnRJbmZvLmdldCgnZXZlbnROb3RlcycpLFxuICAgICAgICAgICAgbmV3IERhdGUoZXZlbnRJbmZvLmdldCgnZXZlbnRTdGFydCcpIHx8IERFRkFVTFRfU1RBUlRfREFURSksXG4gICAgICAgICAgICBuZXcgRGF0ZShldmVudEluZm8uZ2V0KCdldmVudEVuZCcpIHx8IERFRkFVTFRfRU5EX0RBVEUpKTtcbiAgICB9XG59XG4iXX0=