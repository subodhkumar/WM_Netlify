{"version":3,"file":"index.umd.js.map","sources":["node_modules/tslib/tslib.es6.js","ng://@wm/mobile/runtime/components/app-ext.component.ts","ng://@wm/mobile/runtime/services/cookie.service.ts","ng://@wm/mobile/runtime/services/http-interceptor.service.ts","ng://@wm/mobile/runtime/services/webprocess.service.ts","ng://@wm/mobile/runtime/mobile-runtime.module.ts","ng://@wm/mobile/runtime/index.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { if (o[n]) i[n] = function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; }; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator];\r\n    return m ? m.call(o) : typeof __values === \"function\" ? __values(o) : o[Symbol.iterator]();\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { AfterViewInit, Component, ElementRef, ViewChild } from '@angular/core';\n\nimport { hasCordova } from '@wm/core';\nimport { FileBrowserComponent, FileSelectorService, ProcessManagerComponent, ProcessManagementService } from '@wm/mobile/components';\n\n@Component({\n    selector: '[wmAppExt]',\n    template: `<ng-container>\n        <div wmNetworkInfoToaster></div>\n        <div wmAppUpdate></div>\n        <div wmMobileFileBrowser></div>\n        <div wmProcessManager></div>\n    </ng-container>`\n})\nexport class AppExtComponent implements AfterViewInit {\n\n    @ViewChild(FileBrowserComponent) fileBrowserComponent: FileBrowserComponent;\n\n    @ViewChild(ProcessManagerComponent) processManagerComponent: ProcessManagerComponent;\n\n    constructor(\n        private elRef: ElementRef,\n        private fileSelectorService: FileSelectorService,\n        private processManagementService: ProcessManagementService\n    ) {}\n\n    ngAfterViewInit() {\n        const mobileElements = $(this.elRef.nativeElement).find('>[wmNetworkInfoToaster], >[wmAppUpdate], >[wmMobileFileBrowser]');\n        const $body = $('body:first');\n        if (hasCordova()) {\n            mobileElements.appendTo($body);\n            this.fileSelectorService.setFileBrowser(this.fileBrowserComponent);\n        } else {\n            mobileElements.remove();\n        }\n        $(this.elRef.nativeElement).find('>[wmProgressManager]').appendTo($body);\n        this.processManagementService.setUIComponent(this.processManagerComponent);\n    }\n}\n","import { Injectable } from '@angular/core';\n\nimport { IDeviceStartUpService } from '@wm/mobile/core';\n\ndeclare const _;\n\nconst STORAGE_KEY = 'wavemaker.persistedcookies';\n\ninterface CookieInfo {\n    hostname: string;\n    name: string;\n    value: string;\n}\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class CookieService implements IDeviceStartUpService {\n\n    private cookieInfo = {};\n\n    public serviceName = 'CookeService';\n\n    public persistCookie(hostname: string, cookieName: string, cookieValue?: string): Promise<void> {\n        return new Promise<string>(resolve => {\n                if (cookieValue) {\n                    resolve(cookieValue);\n                } else {\n                    this.getCookie(hostname, cookieName)\n                        .then(data => resolve(data.cookieValue));\n                }\n            }).then(value => {\n                this.cookieInfo[hostname + '-' + cookieName] = {\n                    hostname: hostname.replace(/:[0-9]+/, ''),\n                    name: cookieName,\n                    value: this.rotateLTR(value)\n                };\n                localStorage.setItem(STORAGE_KEY, JSON.stringify(this.cookieInfo));\n            });\n    }\n\n    public getCookie(hostname: string, cookieName: string): Promise<any> {\n        return new Promise<void>((resolve, reject) => {\n            window['cookieEmperor'].getCookie(hostname, cookieName, resolve, reject);\n        });\n    }\n\n    public setCookie(hostname: string, cookieName: string, cookieValue: string): Promise<any> {\n        return new Promise<void>((resolve, reject) => {\n            window['cookieEmperor'].setCookie(hostname, cookieName, cookieValue, resolve, reject);\n        });\n    }\n\n    public clearAll(): Promise<any> {\n        return new Promise<any>((resolve, reject) => window['cookieEmperor'].clearAll(resolve, reject));\n    }\n\n    /**\n     * Loads persisted cookies from local storage and adds them to the browser.\n     * @returns {*}\n     */\n    public start(): Promise<any> {\n        const cookieInfoStr = localStorage.getItem(STORAGE_KEY),\n            promises = [];\n        if (cookieInfoStr) {\n            const cookieInfo = JSON.parse(cookieInfoStr) as Map<string, CookieInfo>;\n            _.forEach(cookieInfo, c => {\n                if (c.name && c.value) {\n                    const promise = new Promise((resolve, reject) => {\n                        window['cookieEmperor'].setCookie(c.hostname, c.name, this.rotateRTL(c.value), resolve, reject);\n                    });\n                    promises.push(promise);\n                }\n            });\n        }\n        return Promise.all(promises);\n    }\n\n    /**\n     * Just rotates the given string exactly from 1/3 of string length in left to right direction.\n     * @param str\n     * @returns {string}\n     */\n    private rotateLTR(str: string): string {\n        const arr = str.split(''),\n            tArr = [],\n            shift = Math.floor(str.length / 3);\n        arr.forEach((v, i) => {\n            tArr[(i + shift) % arr.length] = arr[i];\n        });\n        return tArr.join('');\n    }\n\n    /**\n     * Just rotates the given string exactly from 1/3 of string length in  right to left direction..\n     * @param str\n     * @returns {string}\n     */\n    private rotateRTL(str: string): string {\n        const arr = str.split(''),\n            tArr = [],\n            shift = Math.floor(str.length / 3);\n        arr.forEach((v, i) => {\n            tArr[(arr.length + i - shift) % arr.length] = arr[i];\n        });\n        return tArr.join('');\n    }\n}\n","import { HttpEvent, HttpHandler, HttpInterceptor, HttpRequest, HttpResponse } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\n\nimport { File } from '@ionic-native/file';\nimport { from, Observable, Subject } from 'rxjs';\nimport { mergeMap } from 'rxjs/operators';\n\nimport { App, executePromiseChain, getWmProjectProperties, hasCordova, noop, removeExtraSlashes } from '@wm/core';\nimport { DeviceFileDownloadService, DeviceService, NetworkService } from '@wm/mobile/core';\nimport { SecurityService } from '@wm/security';\nimport { CONSTANTS } from '@wm/variables';\n\ndeclare const cordova;\ndeclare const _;\n\ninterface RequestInterceptor {\n    intercept(request: HttpRequest<any>): Promise<HttpRequest<any>>;\n}\n\n@Injectable()\nexport class MobileHttpInterceptor implements HttpInterceptor {\n\n    private requestInterceptors: RequestInterceptor[] = [];\n\n    public constructor(private app: App,\n                       file: File,\n                       deviceFileDownloadService: DeviceFileDownloadService,\n                       private deviceService: DeviceService,\n                       private networkService: NetworkService,\n                       securityService: SecurityService) {\n        if (hasCordova() && !CONSTANTS.isWaveLens) {\n            this.requestInterceptors.push(new SecurityInterceptor(app, file, securityService));\n            this.requestInterceptors.push(new RemoteSyncInterceptor(app, deviceFileDownloadService, deviceService, file, networkService));\n            this.requestInterceptors.push(new ServiceCallInterceptor(app));\n        }\n    }\n\n    public intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n        const subject = new Subject<HttpEvent<any>>();\n        const token = localStorage.getItem(CONSTANTS.XSRF_COOKIE_NAME);\n        if (token) {\n            // Clone the request to add the new header\n            request = request.clone({ headers: request.headers.set(getWmProjectProperties().xsrf_header_name, token) });\n        }\n        const data = {request: request};\n\n        // invoke the request only when device is ready.\n        const obs = from(this.deviceService.whenReady()\n            .then(() => executePromiseChain(this.getInterceptors(), [data])));\n        return obs.pipe(mergeMap(() => {\n            return next.handle(data.request);\n        }));\n    }\n\n    private getInterceptors() {\n        return this.requestInterceptors.map(i => {\n            return (data) => i.intercept(data.request).then(req => data.request = req);\n        });\n    }\n\n    private onHttpError(response: HttpResponse<any>) {\n        if (hasCordova\n            && (!response || !response.status || response.status < 0 || response.status === 404)\n            && (this.networkService.isConnected())) {\n            this.networkService.isAvailable(true);\n        }\n    }\n}\n\nclass ServiceCallInterceptor implements RequestInterceptor {\n\n    private static REMOTE_SERVICE_URL_PATTERNS = [\n        new RegExp('^((./)|/)?services/'),\n        new RegExp('j_spring_security_check'),\n        new RegExp('j_spring_security_logout')\n    ];\n\n    constructor(private app: App) {}\n\n    public intercept(request: HttpRequest<any>): Promise<HttpRequest<any>> {\n        let modifiedRequest = request;\n        let url = request.url;\n        // if necessary, prepend deployed url\n        if (url.indexOf('://') < 0\n            && ServiceCallInterceptor.REMOTE_SERVICE_URL_PATTERNS.find(r => r.test(url))) {\n            url = this.app.deployedUrl + url;\n        }\n        url = removeExtraSlashes(url);\n        if (url !== request.url) {\n            modifiedRequest = request.clone({\n                url: url\n            });\n        }\n        return Promise.resolve(modifiedRequest);\n    }\n\n}\n\nclass RemoteSyncInterceptor implements RequestInterceptor {\n\n    private checkRemoteDirectory = true;\n    private hasRemoteChanges = false;\n\n    private static URL_TO_SYNC = [\n        new RegExp('page.min.json$'),\n        new RegExp('app.js$'),\n        new RegExp('app.variables.json$')\n    ];\n\n    constructor(private app: App,\n                private deviceFileDownloadService: DeviceFileDownloadService,\n                private deviceService: DeviceService,\n                private file: File,\n                private networkService: NetworkService) {\n        this.file.checkDir(cordova.file.dataDirectory, 'remote').then(() => this.hasRemoteChanges = true, noop);\n    }\n\n    public intercept(request: HttpRequest<any>): Promise<HttpRequest<any>> {\n        const isRemoteSyncEnabled = localStorage.getItem('remoteSync') === 'true';\n        if (this.hasRemoteChanges || isRemoteSyncEnabled) {\n            return Promise.resolve(request.url).then(url => {\n                if (url.indexOf('://') < 0\n                    && RemoteSyncInterceptor.URL_TO_SYNC.find(r => r.test(url))) {\n                    const fileNameFromUrl = _.last(_.split(url, '/'));\n                    return this.download(url, fileNameFromUrl, isRemoteSyncEnabled);\n                }\n                return url;\n            }).then(url => {\n                if (url !== request.url) {\n                    this.hasRemoteChanges = true;\n                    return request.clone({\n                        url: url\n                    });\n                }\n                return request;\n            });\n        } else {\n            return Promise.resolve(request);\n        }\n    }\n\n    private createFolderStructure(parentFolder: string, folderNamesList: string[]): Promise<string> {\n        const folderName = folderNamesList[0];\n        if (!_.isEmpty(folderName)) {\n            return this.file.createDir(parentFolder, folderName, false)\n                .catch(noop)\n                .then(() => {\n                    parentFolder = parentFolder + folderName + '/';\n                    folderNamesList.shift();\n                    return this.createFolderStructure(parentFolder, folderNamesList);\n                });\n        }\n        return Promise.resolve(parentFolder);\n    }\n\n    private init(pageUrl: string, isRemoteSyncEnabled: boolean) {\n        const fileName = _.last(_.split(pageUrl, '/')),\n            path = _.replace(pageUrl, fileName, ''),\n            folderPath = 'remote' + _.replace(path, this.app.deployedUrl, ''),\n            downloadsParent = cordova.file.dataDirectory;\n        return new Promise((resolve, reject) => {\n                if (this.checkRemoteDirectory) {\n                    return this.deviceService.getAppBuildTime().then(buildTime => {\n                        const remoteSyncInfo = this.deviceService.getEntry('remote-sync') || {};\n                        if (!remoteSyncInfo.lastBuildTime || remoteSyncInfo.lastBuildTime !== buildTime) {\n                            return this.file.removeDir(cordova.file.dataDirectory, 'remote')\n                                .catch(noop).then(() => {\n                                    remoteSyncInfo.lastBuildTime = buildTime;\n                                    this.hasRemoteChanges = false;\n                                    return this.deviceService.storeEntry('remote-sync', remoteSyncInfo);\n                                });\n                        }\n                    }).then(() => this.checkRemoteDirectory = false)\n                        .then(resolve, reject);\n                }\n                resolve();\n            })\n            .then(() => this.file.checkDir(downloadsParent, folderPath))\n            .then(() => downloadsParent + folderPath,\n                () => {\n                    if (isRemoteSyncEnabled) {\n                        return this.createFolderStructure(downloadsParent, _.split(folderPath, '/'));\n                    }\n                    return Promise.reject('Could not find equivalent remote path');\n                });\n    }\n\n    private download(url: string, fileName: string, isRemoteSyncEnabled: boolean): Promise<string> {\n        const pageUrl = this.app.deployedUrl + '/' + url;\n        let folderPath;\n        return this.init(pageUrl, isRemoteSyncEnabled)\n            .then(pathToRemote => {\n                folderPath = pathToRemote;\n                return this.file.checkFile(folderPath + fileName, '');\n            }).then(() => {\n                if (isRemoteSyncEnabled && this.networkService.isConnected()) {\n                    return this.file.removeFile(folderPath, fileName)\n                        .then(() => folderPath + fileName);\n                }\n                return folderPath + fileName;\n            }, () => url)\n            .then(path => {\n                if (isRemoteSyncEnabled && this.networkService.isConnected()) {\n                    return this.deviceFileDownloadService.download(pageUrl, false, folderPath, fileName);\n                }\n                return path;\n            });\n    }\n\n}\n\nclass SecurityInterceptor implements RequestInterceptor {\n\n    private initialized = false;\n    private static PAGE_URL_PATTERN = new RegExp('page.min.json$');\n    private publicPages;\n\n    constructor(private app: App, private file: File, private securityService: SecurityService) {}\n\n    public intercept(request: HttpRequest<any>): Promise<HttpRequest<any>> {\n        return new Promise<HttpRequest<any>>((resolve, reject) => {\n            if (SecurityInterceptor.PAGE_URL_PATTERN.test(request.url)) {\n                return Promise.resolve().then(() => {\n                    if (!this.initialized) {\n                        return this.init();\n                    }\n                }).then(() => {\n                    const urlSplits = _.split(request.url, '/');\n                    const pageName = urlSplits[urlSplits.length - 2];\n                    if (!this.publicPages || this.publicPages[pageName]) {\n                        return Promise.resolve(request);\n                    } else {\n                        this.securityService.getConfig(config => {\n                            if (!config.securityEnabled || config.authenticated) {\n                                resolve(request);\n                            } else {\n                                reject(`Page '${pageName}' is not accessible to the user.`);\n                                this.app.notify('http401', { page: pageName});\n                            }\n                        }, () => reject(`Security call failed.`));\n                    }\n                    return Promise.resolve(request);\n                }).then(resolve, reject);\n            }\n            return resolve(request);\n        });\n    }\n\n    /**\n     * loads public pages from 'metadata/app/public-pages.info' and overrides canAccess method SecurityService\n     */\n    private init(): Promise<any> {\n        const folderPath = cordova.file.applicationDirectory + 'www/metadata/app',\n            fileName = 'public-pages.json';\n        return this.file.readAsText(folderPath, fileName).then(text => {\n            if (!this.initialized) {\n                this.publicPages = {};\n                this.initialized = true;\n                _.forEach(JSON.parse(text), pageName => this.publicPages[pageName] = true);\n            }\n        }).catch(() => {\n            this.initialized = true;\n        });\n    }\n}\n","import { Injectable } from '@angular/core';\n\nimport { App, AbstractHttpService } from '@wm/core';\nimport { ExtAppMessageService } from '@wm/mobile/core';\n\nimport { CookieService } from './cookie.service';\n\ndeclare const cordova;\n\n@Injectable()\nexport class WebProcessService {\n\n    constructor(\n        private app: App,\n        private cookieService: CookieService,\n        private httpService: AbstractHttpService,\n        private extAppMessageService: ExtAppMessageService\n    ) {}\n\n    public execute(process: string, hookUrl: string, useSystemBrowser = false): Promise<any> {\n        return this.httpService.get(`/services/webprocess/prepare?processName=${process}&hookUrl=${hookUrl}&requestSourceType=MOBILE`)\n            .then((processInfo) => {\n                if (useSystemBrowser) {\n                    return this.executeWithSystemBrowser(processInfo);\n                } else {\n                    return this.executeWithInAppBrowser(processInfo, process);\n                }\n            }).then(output => {\n                return this.httpService.get('/services/webprocess/decode?encodedProcessdata=' + output);\n            });\n    }\n\n    private executeWithSystemBrowser(processInfo: string): Promise<any> {\n        return new Promise((resolve) => {\n            const oauthAdress = '^services/webprocess/LOGIN';\n            const deregister = this.extAppMessageService.subscribe(oauthAdress, message => {\n                resolve(message.data['process_output']);\n                deregister();\n            });\n            window.open(this.app.deployedUrl + 'services/webprocess/start?process=' + encodeURIComponent(processInfo), '_system');\n        });\n    }\n\n    private executeWithInAppBrowser(processInfo: string, process: string): Promise<any> {\n        return new Promise((resolve, reject) => {\n            const ref = cordova.InAppBrowser.open(this.app.deployedUrl + 'services/webprocess/start?process=' + encodeURIComponent(processInfo), '_blank', 'location=yes,clearcache=yes');\n            let isSuccess = false;\n            ref.addEventListener('loadstop', () => {\n                ref.executeScript({ code: this.getScriptToInject(process)}, output => {\n                    if (output && output[0]) {\n                        isSuccess = true;\n                        ref.close();\n                        resolve(output[0]);\n                    }\n                });\n            });\n            ref.addEventListener('exit', () => {\n                if (!isSuccess) {\n                    reject('Login process is stopped');\n                }\n            });\n        }).then((output) => {\n            let url = this.app.deployedUrl;\n            if (url.endsWith('/')) {\n                url = url.substr(0, url.length - 1);\n            }\n            return this.cookieService.setCookie(url, 'WM_WEB_PROCESS', processInfo)\n                .then(() => output);\n        });\n    }\n\n    private getScriptToInject(process: string): string {\n        return `\n            (function() {\n                var elements = document.querySelectorAll('body.flex>a.link');\n                for (var i = 0; i < elements.length; i++) {\n                    var href = elements[i].href;\n                    if (href && href.indexOf('://services/webprocess/${process}?process_output=')) {\n                        return href.split('process_output=')[1];\n                    }\n                }\n                window.isWebLoginProcess = true;\n            })();\n        `;\n    }\n}\n","import { HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { ModuleWithProviders, NgModule } from '@angular/core';\n\nimport { AppVersion } from '@ionic-native/app-version';\nimport { BarcodeScanner } from '@ionic-native/barcode-scanner';\nimport { Calendar } from '@ionic-native/calendar';\nimport { Camera } from '@ionic-native/camera';\nimport { Contacts } from '@ionic-native/contacts';\nimport { File } from '@ionic-native/file';\nimport { FileOpener } from '@ionic-native/file-opener';\nimport { Device } from '@ionic-native/device';\nimport { MediaCapture } from '@ionic-native/media-capture';\nimport { Geolocation } from '@ionic-native/geolocation';\nimport { Network } from '@ionic-native/network';\nimport { SQLite } from '@ionic-native/sqlite';\nimport { Vibration } from '@ionic-native/vibration';\n\n\nimport {\n    App,\n    AbstractHttpService,\n    fetchContent,\n    hasCordova,\n    insertAfter,\n    isIpad,\n    isIphone,\n    isIpod,\n    isObject,\n    loadStyleSheet,\n    noop,\n    removeNode\n} from '@wm/core';\nimport { FileExtensionFromMimePipe } from '@wm/components';\nimport { WmMobileComponentsModule } from '@wm/mobile/components';\nimport { DeviceFileOpenerService, DeviceService, ExtAppMessageService, MobileCoreModule, NetworkService } from '@wm/mobile/core';\nimport { PushService, PushServiceImpl } from '@wm/mobile/offline';\nimport { SecurityService } from '@wm/security';\nimport { VariablesModule } from '@wm/mobile/variables';\nimport { $rootScope, CONSTANTS } from '@wm/variables';\n\nimport { AppExtComponent } from './components/app-ext.component';\nimport { CookieService } from './services/cookie.service';\nimport { MobileHttpInterceptor } from './services/http-interceptor.service';\nimport { WebProcessService } from './services/webprocess.service';\n\ndeclare const $, navigator, _;\n\nexport const MAX_WAIT_TIME_4_OAUTH_MESSAGE = 60000;\n\nenum OS {\n    IOS = 'ios',\n    ANDROID = 'android'\n}\nconst MINIMUM_TAB_WIDTH = 768;\nconst KEYBOARD_CLASS = 'keyboard';\n\nconst ionicServices = [\n    AppVersion,\n    BarcodeScanner,\n    Calendar,\n    Camera,\n    Contacts,\n    File,\n    FileOpener,\n    Device,\n    Geolocation,\n    MediaCapture,\n    Network,\n    SQLite,\n    Vibration\n];\n\n@NgModule({\n    declarations: [\n        AppExtComponent\n    ],\n    exports: [\n        AppExtComponent,\n        WmMobileComponentsModule\n    ],\n    imports: [\n        MobileCoreModule,\n        VariablesModule,\n        WmMobileComponentsModule\n    ],\n    bootstrap: []\n})\nexport class MobileRuntimeModule {\n\n    static forRoot(): ModuleWithProviders {\n        /* add all providers that are required for mobile here. This is to simplify placeholder.*/\n        return {\n            ngModule: MobileRuntimeModule,\n            providers: [\n                WebProcessService,\n                {\n                    provide: HTTP_INTERCEPTORS,\n                    useClass: MobileHttpInterceptor,\n                    multi: true\n                },\n                ...ionicServices,\n                FileExtensionFromMimePipe,\n                {provide: PushService, useClass: PushServiceImpl}\n            ]\n        };\n    }\n\n    private static initialized = false;\n    // Startup services have to be added only once in the app life-cycle.\n    private static initializeRuntime(runtimeModule: MobileRuntimeModule,\n                      app: App,\n                      cookieService: CookieService,\n                      deviceFileOpenerService: DeviceFileOpenerService,\n                      deviceService: DeviceService) {\n        if (this.initialized) {\n            return;\n        }\n        this.initialized = true;\n        app.deployedUrl = runtimeModule.getDeployedUrl();\n        runtimeModule.getDeviceOS().then(os => {\n            app.selectedViewPort = {\n                os: os\n            };\n            runtimeModule.applyOSTheme(os);\n        });\n        if (hasCordova()) {\n            runtimeModule.handleKeyBoardClass();\n            deviceService.addStartUpService(cookieService);\n            app.subscribe('userLoggedIn', () => {\n                let url = $rootScope.project.deployedUrl;\n                if (url.endsWith('/')) {\n                    url = url.substr(0, url.length - 1);\n                }\n                cookieService.persistCookie(url, 'JSESSIONID').catch(noop);\n                cookieService.persistCookie(url, 'SPRING_SECURITY_REMEMBER_ME_COOKIE').catch(noop);\n            });\n            app.subscribe('device-file-download', (data) => {\n                deviceFileOpenerService.openRemoteFile(data.url, data.extension, data.name).then(data.successCb, data.errorCb);\n            });\n            const __zone_symbol__FileReader = window['__zone_symbol__FileReader'];\n            if (__zone_symbol__FileReader && __zone_symbol__FileReader.READ_CHUNK_SIZE) {\n                // cordova File Reader is required. Otherwise, file operations are failing.\n                window['FileReader'] = __zone_symbol__FileReader;\n            }\n            if (!CONSTANTS.isWaveLens) {\n                (window as any).remoteSync = (flag = true) => {\n                    localStorage.setItem('remoteSync', flag ? 'true' : 'false');\n                };\n            }\n            runtimeModule.addAuthInBrowser();\n        }\n        deviceService.start();\n        deviceService.whenReady().then(() => {\n            if (hasCordova()) {\n                runtimeModule._$appEl.addClass('cordova');\n                runtimeModule.exposeOAuthService();\n                navigator.splashscreen.hide();\n                // Fix for issue: ios device is not considering the background style, eventhough value is set in config.xml.\n                if (window['StatusBar']) {\n                    window['StatusBar'].overlaysWebView(false);\n                }\n            }\n        });\n    }\n\n    private _$appEl;\n\n    constructor(\n        private app: App,\n        private cookieService: CookieService,\n        private deviceFileOpenerService: DeviceFileOpenerService,\n        private deviceService: DeviceService,\n        private securityService: SecurityService,\n        private httpService: AbstractHttpService,\n        private extAppMessageService: ExtAppMessageService,\n        private networkService: NetworkService,\n        private webProcessService: WebProcessService\n    ) {\n        this._$appEl = $('.wm-app:first');\n        if (this._$appEl.width() >= MINIMUM_TAB_WIDTH) {\n            app.isTabletApplicationType =  true;\n            this._$appEl.addClass('wm-tablet-app');\n        } else {\n            this._$appEl.addClass('wm-mobile-app');\n        }\n        MobileRuntimeModule.initializeRuntime(this, this.app, this.cookieService, this.deviceFileOpenerService, this.deviceService);\n    }\n\n    private exposeOAuthService() {\n        window['OAuthInMobile'] = (providerId) => {\n            return new Promise<string>((resolve, reject) => {\n                const oauthAdress = '^services/oauth/' + providerId + '$';\n                const deregister = this.extAppMessageService.subscribe(oauthAdress, message => {\n                        resolve(message.data['access_token']);\n                        deregister();\n                        clearTimeout(timerId);\n                    });\n                const timerId = setTimeout(function () {\n                    deregister();\n                    reject(`Time out for oauth message after ${MAX_WAIT_TIME_4_OAUTH_MESSAGE % 1000} seconds`);\n                }, MAX_WAIT_TIME_4_OAUTH_MESSAGE);\n            });\n        };\n        const handleOpenURL = window['handleOpenURL'];\n        handleOpenURL.isReady = true;\n        handleOpenURL(handleOpenURL.lastURL);\n    }\n\n    private applyOSTheme(os) {\n        let oldStyleSheet = $('link[theme=\"wmtheme\"]:first');\n        const themeUrl = oldStyleSheet.attr('href').replace(new RegExp('/[a-z]*/style.css$'), `/${os.toLowerCase()}/style.css`),\n            newStyleSheet = loadStyleSheet(themeUrl, {name: 'theme', value: 'wmtheme'});\n        oldStyleSheet = oldStyleSheet.length > 0 && oldStyleSheet[0];\n        if (newStyleSheet && oldStyleSheet) {\n            insertAfter(newStyleSheet, oldStyleSheet);\n            removeNode(oldStyleSheet);\n        }\n    }\n\n    private handleKeyBoardClass() {\n        const initialScreenSize = window.innerHeight;\n        // keyboard class is added when keyboard is open.\n        window.addEventListener('resize', () => {\n            if (window.innerHeight < initialScreenSize) {\n                this._$appEl.addClass(KEYBOARD_CLASS);\n            } else {\n                this._$appEl.removeClass(KEYBOARD_CLASS);\n            }\n        });\n    }\n\n    private getDeployedUrl(): string {\n        const waveLensAppUrl = window['WaveLens'] && window['WaveLens']['appUrl'];\n        let deployedUrl = $rootScope.project.deployedUrl;\n        if (hasCordova()) {\n            if (waveLensAppUrl) {\n                // TODO: Temporary Fix for WMS-13072, baseUrl is {{DEVELOPMENT_URL}} in wavelens\n                deployedUrl = waveLensAppUrl;\n            } else {\n                fetchContent('json', './config.json', true, (response => {\n                    if (!response.error && response.baseUrl) {\n                        deployedUrl = response.baseUrl;\n                    }\n                }));\n            }\n        }\n        if (!deployedUrl.endsWith('/')) {\n            deployedUrl = deployedUrl + '/';\n        }\n        $rootScope.project.deployedUrl = deployedUrl;\n        return deployedUrl;\n    }\n\n    private getDeviceOS(): Promise<string> {\n        return new Promise<string>(function (resolve, reject) {\n            const msgContent = {key: 'on-load'};\n            // Notify preview window that application is ready. Otherwise, identify the OS.\n            if (window.top !== window) {\n                window.top.postMessage(msgContent, '*');\n                // This is for preview page\n                window.onmessage = function (msg) {\n                    const data = msg.data;\n                    if (isObject(data) && data.key === 'switch-device') {\n                        resolve(data.device.os);\n                    }\n                };\n            } else if (isIphone() || isIpod() || isIpad()) {\n                resolve(OS.IOS);\n            } else {\n                resolve(OS.ANDROID);\n            }\n        });\n    }\n\n    private addAuthInBrowser() {\n        this.securityService.authInBrowser = (): Promise<any> => {\n            if (!this.networkService.isConnected()) {\n                return Promise.reject('In offline, app cannot contact the server.');\n            }\n            return this.webProcessService.execute('LOGIN', '/')\n                .then(output => {\n                    let url = this.app.deployedUrl;\n                    if (url.endsWith('/')) {\n                        url = url.substr(0, url.length - 1);\n                    }\n                    output = JSON.parse(output);\n                    if (output[CONSTANTS.XSRF_COOKIE_NAME]) {\n                        localStorage.setItem(CONSTANTS.XSRF_COOKIE_NAME, output[CONSTANTS.XSRF_COOKIE_NAME]);\n                    }\n                    return this.cookieService.clearAll()\n                        .then(() => {\n                            const  promises = _.keys(output).map(k => {\n                                return this.cookieService.setCookie(url, k, output[k]);\n                            });\n                            return Promise.all(promises);\n                        });\n                })\n                .then(() => this.app.notify('userLoggedIn', {}));\n        };\n    }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n\nexport {AppExtComponent as Éµa} from './components/app-ext.component';\nexport {CookieService as Éµb} from './services/cookie.service';\nexport {MobileHttpInterceptor as Éµd} from './services/http-interceptor.service';\nexport {WebProcessService as Éµc} from './services/webprocess.service';"],"names":["hasCordova","Component","ElementRef","FileSelectorService","ProcessManagementService","ViewChild","FileBrowserComponent","ProcessManagerComponent","Injectable","file","CONSTANTS","Subject","getWmProjectProperties","from","executePromiseChain","mergeMap","App","File","DeviceFileDownloadService","DeviceService","NetworkService","SecurityService","removeExtraSlashes","noop","AbstractHttpService","ExtAppMessageService","AppVersion","BarcodeScanner","Calendar","Camera","Contacts","FileOpener","Device","Geolocation","MediaCapture","Network","SQLite","Vibration","HTTP_INTERCEPTORS","FileExtensionFromMimePipe","PushService","PushServiceImpl","$rootScope","loadStyleSheet","insertAfter","removeNode","fetchContent","isObject","isIphone","isIpod","isIpad","NgModule","WmMobileComponentsModule","MobileCoreModule","VariablesModule","DeviceFileOpenerService"],"mappings":"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"}
