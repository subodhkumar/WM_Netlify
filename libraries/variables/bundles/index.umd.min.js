!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("angular2-websocket/angular2-websocket"),require("@angular/router"),require("@wm/core"),require("@angular/core"),require("@angular/common"),require("@angular/common/http"),require("ngx-toastr"),require("@wm/http"),require("@wm/security"),require("@wm/oAuth")):"function"==typeof define&&define.amd?define("@wm/variables",["exports","angular2-websocket/angular2-websocket","@angular/router","@wm/core","@angular/core","@angular/common","@angular/common/http","ngx-toastr","@wm/http","@wm/security","@wm/oAuth"],t):t((e.wm=e.wm||{},e.wm.variables={}),e.angularWebSocket,e.ng.router,e.wm.core,e.ng.core,e.ng.common,e.ng.common.http,e.ngxToastr,e.wm.http,e.wm.security,e.wm.oAuth)}(this,function(E,n,t,U,r,i,a,e,o,s,u){"use strict";var M={hasCordova:window.cordova!==undefined,isWaveLens:window.WaveLens!==undefined,isStudioMode:!1,isRunMode:!0,XSRF_COOKIE_NAME:"wm_xsrf_token",DEFAULT_TIMER_DELAY:500,WIDGET_DOESNT_EXIST:"The widget you're trying to navigate to doesn't exist on this page"},F={CATEGORY:{MODEL:"wm.Variable",LIVE:"wm.LiveVariable",SERVICE:"wm.ServiceVariable",WEBSOCKET:"wm.WebSocketVariable",NAVIGATION:"wm.NavigationVariable",NOTIFICATION:"wm.NotificationVariable",TIMER:"wm.TimerVariable",LOGIN:"wm.LoginVariable",LOGOUT:"wm.LogoutVariable",DEVICE:"wm.DeviceVariable"},EVENTS:["onBefore","onBeforeUpdate","onResult","onBeforeOpen","onOpen","onBeforeMessageSend","onMessageReceive","onProgress","onError","onBeforeDatasetReady","onCanUpdate","onClick","onHide","onOk","onCancel","onBeforeClose","onClose","onTimerFire","onSuccess","onOnline","onOffline"],EVENT:{CAN_UPDATE:"onCanUpdate",BEFORE:"onBefore",BEFORE_UPDATE:"onBeforeUpdate",PREPARE_SETDATA:"onBeforeDatasetReady",RESULT:"onResult",ERROR:"onError",ABORT:"onAbort",PROGRESS:"onProgress",CLICK:"onClick",HIDE:"onHide",OK:"onOk",CANCEL:"onCancel",CLOSE:"onClose",TIMER_FIRE:"onTimerFire",SUCCESS:"onSuccess",BEFORE_OPEN:"onBeforeOpen",OPEN:"onOpen",BEFORE_SEND:"onBeforeMessageSend",MESSAGE_RECEIVE:"onMessageReceive",BEFORE_CLOSE:"onBeforeClose"},OWNER:{APP:"App",PAGE:"Page"},REST_SUPPORTED_SERVICES:["JavaService","SoapService","FeedService","RestService","SecurityServiceType","DataService","WebSocketService"],PAGINATION_PARAMS:["page","size","sort"],REST_SERVICE:{BASE_PATH_KEY:"x-WM-BASE_PATH",RELATIVE_PATH_KEY:"x-WM-RELATIVE_PATH",OAUTH_PROVIDER_KEY:"x-WM-PROVIDER_ID",AUTH_HDR_KEY:"Authorization",SECURITY_DEFN:{BASIC:"basic",OAUTH2:"oauth2"},AUTH_TYPE:{BASIC:"BASIC",OAUTH:"OAUTH2",NONE:"NONE"},CONTENT_TYPE_KEY:"x-WM-CONTENT_TYPE",ACCESSTOKEN_PLACEHOLDER:{LEFT:"",RIGHT:".access_token"},ERR_TYPE:{NO_ACCESSTOKEN:"missing_accesstoken",NO_CREDENTIALS:"no_credentials",METADATA_MISSING:"metadata_missing",USER_UNAUTHORISED:"user_unauthorised",REQUIRED_FIELD_MISSING:"required_field_missing"},ERR_MSG:{NO_ACCESSTOKEN:"Access token missing",NO_CREDENTIALS:"No credentials present",METADATA_MISSING:"Metadata missing",USER_UNAUTHORISED:"Unauthorized User",REQUIRED_FIELD_MISSING:'Required field(s) missing: "${0}"'},UNCLOAKED_HEADERS:["CONTENT-TYPE","ACCEPT","CONTENT-LENGTH","ACCEPT-ENCODING","ACCEPT-LANGUAGE"],PREFIX:{AUTH_HDR_VAL:{BASIC:"Basic",OAUTH:"Bearer"},CLOAK_HEADER_KEY:"X-WM-"}},SERVICE_TYPE:{JAVA:"JavaService",REST:"RestService",SOAP:"SoapService",FEED:"FeedService",DATA:"DataService",SECURITY:"SecurityServiceType",WEBSOCKET:"WebSocketService"},CONTROLLER_TYPE:{QUERY:"QueryExecution",PROCEDURE:"ProcedureExecution"},HTTP_STATUS_CODE:{CORS_FAILURE:-1,UNAUTHORIZED:401,FORBIDDEN:403},EXPORT_TYPES_MAP:{EXCEL:".xlsx",CSV:".csv"},DEFAULT_VAR:{NOTIFICATION:"appNotification"}},w={NON_BODY_HTTP_METHODS:["GET","HEAD"],CONTENT_TYPES:{FORM_URL_ENCODED:"application/x-www-form-urlencoded",MULTIPART_FORMDATA:"multipart/form-data",OCTET_STREAM:"application/octet-stream"}},m={DATABASE_MATCH_MODES:{like:"LIKE",start:"STARTING_WITH",startignorecase:"STARTING_WITH_IGNORECASE",end:"ENDING_WITH",endignorecase:"ENDING_WITH_IGNORECASE",anywhere:"CONTAINING",anywhereignorecase:"CONTAINING_IGNORECASE",exact:"EQUALS",exactignorecase:"EQUALS_IGNORECASE",notequals:"NOT_EQUALS",notequalsignorecase:"NOT_EQUALS_IGNORECASE",between:"BETWEEN","in":"IN",notin:"NOTIN",lessthan:"LESS_THAN",lessthanequal:"LESS_THAN_OR_EQUALS",greaterthan:"GREATER_THAN",greaterthanequal:"GREATER_THAN_OR_EQUALS","null":"NULL",isnotnull:"IS_NOT_NULL",empty:"EMPTY",isnotempty:"IS_NOT_EMPTY",nullorempty:"NULL_OR_EMPTY"},DATABASE_EMPTY_MATCH_MODES:["NULL","IS_NOT_NULL","EMPTY","IS_NOT_EMPTY","NULL_OR_EMPTY"],DATABASE_RANGE_MATCH_MODES:["IN","NOTIN","BETWEEN","LESS_THAN","LESS_THAN_OR_EQUALS","GREATER_THAN","GREATER_THAN_OR_EQUALS","NOT_EQUALS"],DATABASE_NULL_EMPTY_MATCH:{NULL:"NULL",IS_NOT_NULL:"IS_NOT_NULL",EMPTY:"NULL",IS_NOT_EMPTY:"IS_NOT_NULL",NULL_OR_EMPTY:"NULL"},DATABASE_MATCH_MODES_WITH_QUERY:{LIKE:"${0} like ${1}",STARTING_WITH:"${0} like ${1}",STARTING_WITH_IGNORECASE:"${0} like ${1}",ENDING_WITH:"${0} like ${1}",ENDING_WITH_IGNORECASE:"${0} like ${1}",CONTAINING:"${0} like ${1}",CONTAINING_IGNORECASE:"${0} like ${1}",EQUALS:"${0}=${1}",EQUALS_IGNORECASE:"${0}=${1}",NOT_EQUALS:"${0}!=${1}",NOT_EQUALS_IGNORECASE:"${0}!=${1}",BETWEEN:"${0} between ${1}",IN:"${0} in ${1}",NOTIN:"${0} not in ${1}",LESS_THAN:"${0}<${1}",LESS_THAN_OR_EQUALS:"${0}<=${1}",GREATER_THAN:"${0}>${1}",GREATER_THAN_OR_EQUALS:"${0}>=${1}",NULL:"${0} is null",IS_NOT_NULL:"${0} is not null",EMPTY:"${0}=''",IS_NOT_EMPTY:"${0}<>''",NULL_OR_EMPTY:"${0} is null or ${0}=''"},DATABASE_STRING_MODES:["LIKE","STARTING_WITH","STARTING_WITH_IGNORECASE","ENDING_WITH","ENDING_WITH_IGNORECASE","CONTAINING","CONTAINING_IGNORECASE","EQUALS","EQUALS_IGNORECASE","NOT_EQUALS","NOT_EQUALS_IGNORECASE"]},k={WM_DATA_JSON:"wm_data_json",WM_HTTP_JSON:"wm_httpRequestDetails"},c={DATABASE:{searchTableData:{url:"/:service/:dataModelName/:entityName/search?page=:page&size=:size&:sort",method:"POST"},searchTableDataWithQuery:{url:"/:service/:dataModelName/:entityName/filter?page=:page&size=:size&:sort",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}},readTableData:{url:"/:service/:dataModelName/:entityName?page=:page&size=:size&:sort",method:"GET"},insertTableData:{url:"/:service/:dataModelName/:entityName",method:"POST"},insertMultiPartTableData:{url:"/:service/:dataModelName/:entityName",method:"POST",headers:{}},updateTableData:{url:"/:service/:dataModelName/:entityName/:id",method:"PUT"},updateMultiPartTableData:{url:"/:service/:dataModelName/:entityName/:id",method:"POST",headers:{}},deleteTableData:{url:"/:service/:dataModelName/:entityName/:id",method:"DELETE"},updateCompositeTableData:{url:"/:service/:dataModelName/:entityName/composite-id?:id",method:"PUT"},periodUpdateCompositeTableData:{url:"/:service/:dataModelName/:entityName/composite-id/periods?:id",method:"PUT"},updateMultiPartCompositeTableData:{url:"/:service/:dataModelName/:entityName/composite-id?:id",method:"POST",headers:{}},deleteCompositeTableData:{url:"/:service/:dataModelName/:entityName/composite-id?:id",method:"DELETE"},periodDeleteCompositeTableData:{url:"/:service/:dataModelName/:entityName/composite-id/periods?:id",method:"DELETE"},getDistinctDataByFields:{url:"/:service/:dataModelName/:entityName/aggregations?page=:page&size=:size&:sort",method:"POST"},exportTableData:{url:"/services/:dataModelName/:entityName/export?:sort",method:"POST"},readTableRelatedData:{url:"/:service/:dataModelName/:entityName/:id/:relatedFieldName?page=:page&size=:size&:sort",method:"GET"},executeNamedQuery:{url:"/:service/:dataModelName/queryExecutor/queries/:queryName?page=:page&size=:size&:queryParams",method:"GET"},executeCustomQuery:{url:"/:service/:dataModelName/queries/execute?page=:page&size=:size",method:"POST"},executeAggregateQuery:{url:"/services/:dataModelName/:entityName/aggregations?page=:page&size=:size&sort=:sort",method:"POST"},executeNamedProcedure:{url:"/:service/:dataModelName/procedureExecutor/procedure/execute/:procedureName?page=:page&size=:size&:procedureParams",method:"GET"},countTableDataWithQuery:{url:"/:service/:dataModelName/:entityName/count",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}},oauthConfiguration:{getAuthorizationUrl:{url:"services/oauth2/:providerId/authorizationUrl",method:"GET"}}},L={project:{deployedUrl:"./",id:"temp_id"},projectName:"test_project_name",isApplicationType:!0},p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};function l(e,t){function r(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var d,f,g,T,h={EXCEL:".xlsx",CSV:".csv"},S=/^\[("|')[\w\W]*(\1)\]$/,y=new Map,A=new Map,R=function(e,t){var r,n,i=_.noop;A.has(e)&&(i=A.get(e).cancel),i(),r=_.debounce(function(){(n=e[t]())instanceof Promise&&n["catch"](_.noop)},100),A.set(e,r),r()},O=function(e,t,r,n,i){switch(n.category){case F.CATEGORY.LIVE:"read"===n.operation?("dataBinding"===e?_.forEach(t,function(e,t){n.filterFields[t]={value:e}}):n.filterFields[e]={value:t,type:r},n.autoUpdate&&!_.isUndefined(t)&&_.isFunction(n.listRecords)&&!i&&R(n,"listRecords")):("dataBinding"===e?n.inputFields=t:n.inputFields[e]=t,n.autoUpdate&&!_.isUndefined(t)&&_.isFunction(n[n.operation+"Record"])&&!i&&R(n,n.operation+"Record"));break;case F.CATEGORY.SERVICE:case F.CATEGORY.LOGIN:n.autoUpdate&&!_.isUndefined(t)&&_.isFunction(n.invoke)&&!i&&R(n,"invoke");break;case F.CATEGORY.DEVICE:n[e]=t,n.autoUpdate&&!_.isUndefined(t)&&_.isFunction(n.invoke)&&!i&&R(n,"invoke")}},D=O,v=function(e,t){switch(e){case"appManager":E.appManager=t;break;case"http":E.httpService=t;break;case"metadata":E.metadataService=t;break;case"navigationService":E.navigationService=t;break;case"router":E.routerService=t;break;case"toaster":E.toasterService=t;break;case"oAuth":E.oauthService=t;break;case"security":E.securityService=t;break;case"dialog":E.dialogService=t}},N=function(e,t,r,n,i){var a,o=t[e],s=t._context;e!==F.EVENT.ERROR||i||o||(a=s.Actions[F.DEFAULT_VAR.NOTIFICATION])&&(r=a.getMessage()||r,r=_.isString(r)?r:"An error has occured. Please check the app logs.",a.invoke({message:r},undefined,undefined));var u=U.$parseEvent(t[e]);return e===F.EVENT.BEFORE_UPDATE?"wm.LiveVariable"===t.category&&"read"===t.operation?u(t._context,{variable:t,dataFilter:r}):u(t._context,{variable:t,inputData:r}):u(t._context,{variable:t,data:r,options:n})},b=function(e){setTimeout(function(){U.triggerFn(e)},500)},C=b,I=function(e,t,r,n){var i,a,o,s,u,c="",p=t.get("Content-Disposition");if(p&&-1!==p.indexOf("attachment")&&null!==(i=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(p))&&i[1]&&(c=i[1].replace(/['"]/g,"")),a=t.get("Content-Type"),o=new Blob([e],{type:a}),"undefined"!=typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(o,c)?b(r):U.triggerFn(n);else{if(s=window.URL||window.webkitURL,u=s.createObjectURL(o),c){var l,d=document.createElement("a");"undefined"==typeof d.download?((l=new FileReader).onloadend=function(){var e=l.result.replace(/^data:[^;]*;/,"data:attachment/file;");window.open(e,"_blank")||(window.location.href=e)},l.onload=b.bind(undefined,r),l.onerror=n,l.readAsDataURL(o)):(d.href=u,d.download=c,document.body.appendChild(d),d.click(),b(r))}else window.open(u,"_blank")||(window.location.href=u);setTimeout(function(){s.revokeObjectURL(u)},100)}},P=I,B=function(e){if(e)return e},V=function(e,t){e=_.split(e,"&"),_.forEach(e,function(e){e=_.split(e,"="),t[e[0]]=decodeURIComponent(_.join(_.slice(e,1),"="))})},x=V,j=function(e,t){"/"===e.url[1]&&"/"===e.url[2]&&(e.url=e.url.slice(0,1)+e.url.slice(2));var r,n,i,a="",o="fileDownloadIFrame",s="fileDownloadForm",u="Content-Type",c=e.url,p=_.get(e.headers,u),l=_.pickBy(e.headers,function(e,t){return t!==u});(r=$("#"+o)).length&&r.first().remove(),r=$('<iframe id="'+o+'" name="'+o+'" class="ng-hide"></iframe>'),(n=$('<form id="'+s+'" name="'+s+'"></form>')).attr({target:r.attr("name"),action:c,method:e.method,enctype:p}),a+=-1!==c.indexOf("?")?c.substring(c.indexOf("?")+1):"",a+=p===w.CONTENT_TYPES.FORM_URL_ENCODED?(a?"&":"")+e.dataParams:"",_.includes(w.NON_BODY_HTTP_METHODS,_.toUpper(e.method))&&V(a,l),V(e.data,l),_.forEach(l,function(e,t){(i=$('<input type="hidden">')).attr({name:t,value:e}),n.append(i)}),$("body").append(r),setTimeout(function(){r.contents().find("body").append(n),n.submit(),U.triggerFn(t)},100)},G=j,H=function(e,t,r){var n=e.url,i=e.method,a=e.dataParams||e.data,o=e.headers;o["Content-Type"]=o["Content-Type"]||"application/x-www-form-urlencoded",E.httpService.send({target:"WebService",action:"invokeRuntimeRestCall",method:i,url:n,headers:o,data:a,responseType:"arraybuffer"}).then(function(e){setTimeout(function(){I(e.body,e.headers,t,r)},900)},function(e){U.triggerFn(r,e)})},Y=H,q=function(e,t){var r,n=Date.now();return t?r=h[t]:(r="."+_.last(_.split(e,".")),e=_.replace(e,r,"")),e+"_"+n+r},Q=function(e){return"cookie"},W=function(){return!!M.hasCordova&&localStorage.getItem(M.XSRF_COOKIE_NAME)},K=W,z=function(e,t,r){var n=e.target,i=r[t];return S.test(n)?i:(n=n.substr(0,n.lastIndexOf(".")),e.target===t?r:n?U.findValueOf(i,n,!0):i)},X=z,J=function(e){return S.test(e)?e.replace(/^(\[["'])|(["']\])$/g,""):e.split(".").pop()},Z=J,ee=function(e,t,r,n,i,a){var o=J(e),s=z(t,r,n);i=_.isUndefined(i)?t.value:i,s&&(s[o]=i),O(o,i,t.type,n,a)},te=ee,re=function(e,t,r){var n,i=_.keys(_.get(y.get(r),[r.name,t])),a=J(e);(n=function o(){return _.filter(i,function(e){return e!==a&&_.includes(e,a)||(a===t||"dataBinding"===a)&&e!==a})}()).length&&_.forEach(n,function(e){ee(e,{target:e},t,r,_.get(y.get(r),[r.name,t,e]))})},ne=re,ie=function(r,e,n,i){var a=r.target,o=z(r,n,i),s=J(a),t=e.registerDestroyListener?e.registerDestroyListener.bind(e):_.noop;U.stringStartsWith(r.value,"bind:")?t(U.$watch(r.value.replace("bind:",""),e,{},function(e,t){e===t&&_.isUndefined(e)||!(!_.isUndefined(e)||_.isUndefined(t)&&_.isUndefined(o[s]))||(_.includes(["blob","file"],r.type)||(e=U.getClonedObject(e)),ee(a,r,n,i,e),y.has(i)||y.set(i,{}),_.set(y.get(i),[i.name,n,a],e),_.isObject(e)&&re(a,n,i))})):_.isUndefined(r.value)||(ee(a,r,n,i,r.value,!0),n!==s&&(y.has(i)||y.set(i,{}),_.set(y.get(i),[i.name,n,a],r.value)))},ae=ie,oe=function(t,r,e,n){n=n||"dataBinding";var i=t[e=e||"dataBinding"];t[e]={},(t["_bind"+e]=i)&&i.forEach(function(e){"wm.Variable"===t.category&&"dataBinding"===e.target&&(e.target="dataSet"),ie(e,r,n,t)})},se=function(e,t,r,n,i){if(M.hasCordova){var a=void 0;r&&(a=h[r]),E.appManager.notify("device-file-download",{url:e.url,name:t,extension:a,successCb:n,errorCb:i})}else!_.isEmpty(e.headers)||W()?H(e,n,i):j(e,n)},ue=function(r,e,t,n){r=r||{};var i,a,o={};if(_.isObject(n))switch(n.type){case"file":t=U.getBlob(t,n.contentType);break;case"number":t=_.isNumber(t)?t:parseInt(t,10)}return _.isObject(e)?o=e:-1<e.indexOf(".")?(a=(i=e.split(".")).pop(),r=U.findValueOf(r,i.join("."),!0),o[e=a]=t):o[e]=t,_.forEach(o,function(e,t){r[t]=e}),r},ce=function(){return window.File&&window.FileReader&&window.FileList&&window.Blob},pe=function(e,t){var r,n;return!t||_.isEmpty(t)?e:e?(e=_.split(e,","),t=_.split(t,","),r=_.map(t,function(e){return _.split(_.trim(e)," ")[0]}),_.remove(e,function(e){return _.includes(r,_.split(_.trim(e)," ")[0])}),n=e.length?","+_.join(e,","):"",_.join(t,",")+n):t},le=function(e){return _.forEach(e,function(e){e.expression&&(e.expression="${"+e.expression+"}")}),e},de=R,fe=function(e){return U.DEFAULT_FORMATS[_.toUpper(e)]},Ee=fe,ge=function(e,t){var r;return r=_.isDate(e)?e.getTime():(isNaN(e)||(e=parseInt(e,10)),e&&moment(e).valueOf()),t===U.DataType.TIMESTAMP?r:(t!==U.DataType.TIME||r||(r=moment((new Date).toDateString()+" "+e).valueOf()),e&&E.appManager.getPipe("date").transform(r,fe(t)))},_e=ge,Te=function(e,t){return _.includes(t,".")&&(t=_.toLower(U.extractType(t))),_.isArray(e)?_.map(e,function(e){return ge(e,t)}):ge(e,t)},he=function(){function e(){}return e.prototype.initBinding=function(e,t,r){oe(e,e._context,t,r)},e.prototype.notifyInflight=function(e,t,r){E.appManager.notify("toggle-variable-state",{variable:e,active:t,data:r})},e.prototype.httpCall=function(e,n,i){var a=this;return new Promise(function(t,r){n._observable=E.httpService.sendCallAsObservable(e,i).subscribe(function(e){e&&e.type&&t(e)},function(e){E.httpService.isPlatformSessionTimeout(e)?(a.notifyInflight(n,!1,e),e._401Subscriber.asObservable().subscribe(function(e){return t(e)},function(e){return r(e)})):r(e)})})},e.prototype.prepareCallbackOptions=function(e,t){var r={};return r.xhrObj=e,t&&_.extend(r,t),r},e}(),me=function(e){var t=!0;return _.forEach(e,function(e){if(!_.isEmpty(e))return t=!!_.isObject(e)&&(_.isArray(e)?_.isEmpty(e)||1===e.length&&_.isEmpty(e[0]):me(e))}),t},Se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.removeFirstEmptyObject=function(e){_.isArray(e.dataSet)&&1===e.dataSet.length&&me(e.dataSet[0])&&(e.dataSet=[])},t}(he),ye=function Rt(r){var n=[],i=function(t){n.forEach(function(e){e(t)})},a=function(){n.length=0},o=new Promise(function(e,t){r(e,t,i)});return o.superThen=o.then.bind(o),o.then=function(t,e,r){o.superThen(function(e){t(e),a()},function(e){t(e),a()}),r&&n.push(r)},o};(f=d||(d={}))[f.Sent=0]="Sent",f[f.UploadProgress=1]="UploadProgress",f[f.ResponseHeader=2]="ResponseHeader",f[f.DownloadProgress=3]="DownloadProgress",f[f.Response=4]="Response",f[f.User=5]="User",(T=g||(g={})).QUEUED="queued",T.IN_PROGRESS="inprogress",T.SUCCESS="success",T.ERROR="error",T.ABORTED="abort";!function(i){function e(e,t,r,n){return i.call(this,e,t,r,n)||this}l(e,i)}(function(){function e(e,t,r,n){this.name=e.name,this.size=e.size||"",this.status=g.QUEUED,this.transferFn=t,this.promise=r,this.abortFn=n}return e.prototype.start=function(){this.status===g.QUEUED&&(this.status=g.IN_PROGRESS,U.triggerFn(this.transferFn))},e.prototype.then=function(t,r,n){var i=this;return this.promise.then(function(e){i.status=g.SUCCESS,U.triggerFn(t,e)},function(e){i.status=g.ERROR,U.triggerFn(r,e)},function(e){i.progress=Math.round(e.loaded/e.total*100),U.triggerFn(n,e)}),this},e.prototype["finally"]=function(e){this.promise["finally"](e)},e.prototype.abort=function(){this.status=g.ABORTED,U.triggerFn(this.abortFn),this["finally"]()},e}());function Ae(i,e,a,t){var o=new FormData,r=function(e,t){var r=_.isArray(e)?e[0]:e;r instanceof File||r instanceof Blob||o.append(t,e)};return e.forEach?e.forEach(r):_.forEach(e,r),function n(e,t,r){_.isArray(e)?_.forEach(e,function(e){t.append(r.paramName,e.content||e,e.name)}):_.isObject(e)&&t.append(r.paramName,e.content||e,e.name)}(i,o,t),new ye(function(r,e,n){var t=E.httpService.upload(a,o).subscribe(function(e){if(e.type===d.UploadProgress){var t=Math.round(100*e.loaded/e.total);n(t)}e.type===d.Response&&r(e.body)});i._uploadProgress=t})}var Re=function(e,t){return E.oauthService.getAccessToken(e,t)},Oe=function(t,r,e){var n=_.toLower(U.extractType(_.get(r,"items.type")||r.type)),i=M.isStudioMode?r["x-WM-CONTENT_TYPE"]:r.contentType;if(ce())return"file"===n||"string"!==i&&i?_.isArray(e)&&"file"===n?_.forEach(e,function(e){t.append(r.name,e&&e.content||U.getBlob(e),e.name)}):t.append(r.name,U.getBlob(e,i),e&&e.name):(_.isObject(e)&&(e=JSON.stringify(e)),t.append(r.name,e)),t},De=function(t,e){var r,n={},i=[];return _.forEach(e,function(e){r=_.get(t,e.name),_.isUndefined(r)||""===r||null===r||e.readOnly?e.required&&i.push(e.name||e.id):(r=U.isDateTimeType(e.type)?Te(r,e.type):r,_.isArray(r)&&"string"===_.toLower(U.extractType(e.type))&&(r=_.join(r,",")),n[e.name]=r)}),{requestBody:n,missingParams:i}},ve=function(){function e(){}return e.constructRequestParams=function(a,o,s){if(a=a||{},null===o)return{error:{type:F.REST_SERVICE.ERR_TYPE.USER_UNAUTHORISED,message:F.REST_SERVICE.ERR_MSG.USER_UNAUTHORISED,field:"_wmServiceOperationInfo"}};if(_.isEmpty(o))return{error:{type:F.REST_SERVICE.ERR_TYPE.METADATA_MISSING,message:F.REST_SERVICE.ERR_MSG.METADATA_MISSING,field:"_wmServiceOperationInfo"}};var e,u,c,p,t,l,r,n,i,d,f,E,g,T,h,m,S,y,A,R,O=o.directPath||"",D=o.basePath?o.basePath+o.relativePath:o.relativePath,v=(e=a,_.includes(["QueryExecution","ProcedureExecution"],e.controller)&&_.includes(["put","post"],e.operationType)),N="",b={},C=[],I=null;function P(){return d||(d=new FormData)}if(T=_.get(o.securityDefinitions,"0"))switch(T.type){case F.REST_SERVICE.SECURITY_DEFN.OAUTH2:if(!(h=Re(T[F.REST_SERVICE.OAUTH_PROVIDER_KEY],null)))return{error:{type:F.REST_SERVICE.ERR_TYPE.NO_ACCESSTOKEN,message:F.REST_SERVICE.ERR_MSG.NO_ACCESSTOKEN},securityDefnObj:T};b[F.REST_SERVICE.AUTH_HDR_KEY]=F.REST_SERVICE.PREFIX.AUTH_HDR_VAL.OAUTH+" "+h;break;case F.REST_SERVICE.SECURITY_DEFN.BASIC:if(r=s.wm_auth_username,n=s.wm_auth_password,!r||!n)return{error:{type:F.REST_SERVICE.ERR_TYPE.NO_CREDENTIALS,message:F.REST_SERVICE.ERR_MSG.NO_CREDENTIALS},securityDefnObj:T};b[F.REST_SERVICE.AUTH_HDR_KEY]=F.REST_SERVICE.PREFIX.AUTH_HDR_VAL.BASIC+" "+btoa(r+":"+n),I={type:F.REST_SERVICE.AUTH_TYPE.BASIC}}return o.proxySettings=o.proxySettings||{web:!0,mobile:!1},i=o.httpMethod||o.methodType,f=M.hasCordova?o.proxySettings.mobile:o.proxySettings.web,m=o.proxySettings.withCredentials,p=f?D:O,_.forEach(o.parameters,function(e){function t(){g=s?(E=s[e.name]&&_.isObject(s[e.name])?s[e.name]:s,_.get(o,["definitions",e.type])):(E=i||{},e.children)}var r,n,i=e.sampleValue;if(U.isDefined(i)&&null!==i&&""!==i||v&&"file"!==e.type)switch(a.serviceType===F.SERVICE_TYPE.DATA&&U.isDateTimeType(e.type)&&(i=Te(i,e.type)),_.isArray(i)&&"string"===_.toLower(U.extractType(e.type))&&a.serviceType===F.SERVICE_TYPE.DATA&&(i=_.join(i,",")),e.parameterType.toUpperCase()){case"QUERY":if(_.isNull(i)&&(r=a.controller,n=a.serviceType,r===F.CONTROLLER_TYPE.QUERY&&n===F.SERVICE_TYPE.DATA))break;N?N+="&"+e.name+"="+encodeURIComponent(i):N="?"+e.name+"="+encodeURIComponent(i);break;case"PATH":l=new RegExp("\\s*\\{\\s*"+e.name+"(:\\.\\+)?\\s*\\}\\s*"),p=p.replace(l,i);break;case"HEADER":b[e.name]=i;break;case"BODY":v?(t(),u=De(E,g),c=u.requestBody,C=_.concat(C,u.missingParams)):c=i;break;case"FORMDATA":v&&e.name===k.WM_DATA_JSON?(t(),u=De(E,g),c=Oe(P(),e,u.requestBody),C=_.concat(C,u.missingParams)):c=Oe(P(),e,i)}else e.required&&C.push(e.name||e.id)}),C.length?{error:{type:F.REST_SERVICE.ERR_TYPE.REQUIRED_FIELD_MISSING,field:C.join(","),message:U.replace(F.REST_SERVICE.ERR_MSG.REQUIRED_FIELD_MISSING,[C.join(",")]),skipDefaultNotification:!0}}:(_.includes(w.NON_BODY_HTTP_METHODS,_.toUpper(i))||o.consumes&&o.consumes[0]===w.CONTENT_TYPES.MULTIPART_FORMDATA||(b["Content-Type"]=o.consumes&&o.consumes[0]||"application/json"),_.includes(o.consumes,w.CONTENT_TYPES.FORM_URL_ENCODED)&&!_.includes(w.NON_BODY_HTTP_METHODS,(i||"").toUpperCase())?(N&&(c=(c?c+"&":"")+N.substring(1)),b["Content-Type"]=w.CONTENT_TYPES.FORM_URL_ENCODED):p+=N,f&&(b=a.serviceType!==F.SERVICE_TYPE.REST||o.skipCloakHeaders?b:(S=b,y={},A=F.REST_SERVICE.UNCLOAKED_HEADERS,R=F.REST_SERVICE.PREFIX.CLOAK_HEADER_KEY,_.forEach(S,function(e,t){_.includes(A,t.toUpperCase())?y[t]=e:y[R+t]=e}),y),a.getPrefabName()&&-1!==F.REST_SUPPORTED_SERVICES.indexOf(a.serviceType)?(p="prefabs/"+a.getPrefabName()+p,t="invokePrefabRestService"):a.getPrefabName()||(p="services"+p),p=L.project.deployedUrl+p),{projectID:L.project.id,url:p,target:t,method:i,headers:b,data:c,authDetails:I,isDirectCall:!f,isExtURL:a.serviceType===F.SERVICE_TYPE.REST,withCredentials:m})},e.isFileUploadRequest=function(e){return"FileService"===e.service&&"uploadFile"===e.operation},e.excludePaginationParams=function(e){return _.map(_.reject(e,function(e){return _.includes(F.PAGINATION_PARAMS,e.name)}),function(e){return e.name})},e}(),Ne=new(function(){function e(){this.requestsQueue=new Map}return e.prototype.addToQueue=function(e,t){if(this.requestsQueue.has(e))this.requestsQueue.get(e).push(t);else{var r=[];r.push({resolve:t.resolve,reject:t.reject,active:!1}),this.requestsQueue.set(e,r)}},e.prototype.rejectProcess=function(e){e.reject('Process rejected in the queue. Check the "Inflight behavior" for more info.')},e.prototype.clear=function(e){this.requestsQueue["delete"](e)},e.prototype.process=function(e){var t,r=this.requestsQueue.get(e);if(r&&r.length)if(1!==r.length)switch(e.inFlightBehavior){case"executeLast":for(var n=0;n<r.length-2;n++)this.rejectProcess(r[n]);r.splice(0,r.length-1),this.process(e);break;case"executeAll":(t=r.splice(0,1)[0]).active&&(t=r.splice(0,1)[0]),t.active=!0,t.resolve();break;default:for(n=0;n<r.length-1;n++)this.rejectProcess(r[n]);this.clear(e)}else(t=r[0]).active?this.clear(e):(t.active=!0,t.resolve());else this.clear(e)},e.prototype.submit=function(r){var n=this;return new Promise(function(e,t){n.addToQueue(r,{resolve:e,reject:t}),1===n.requestsQueue.get(r).length&&n.process(r)})},e}()),be=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fileUploadResponse=[],e.fileUploadCount=0,e.totalFilesCount=0,e.successFileUploadCount=0,e.failedFileUploadCount=0,e}return l(e,t),e.prototype.processErrorResponse=function(e,t,r,n,i,a){var o,s=this.getMethodInfo(e,{},{}),u=_.get(s,"securityDefinitions.0"),c=this.prepareCallbackOptions(n);i||N(F.EVENT.ERROR,e,t,c,a),_.get(u,"type")===F.REST_SERVICE.SECURITY_DEFN.OAUTH2&&_.includes([F.HTTP_STATUS_CODE.UNAUTHORIZED,F.HTTP_STATUS_CODE.FORBIDDEN],_.get(n,"status"))&&(o=u["x-WM-PROVIDER_ID"],E.oauthService.removeAccessToken(o)),U.triggerFn(r,t),M.isStudioMode||(e.canUpdate=!0,Ne.process(e),N(F.EVENT.CAN_UPDATE,e,t,c))},e.prototype.processSuccessResponse=function(e,t,r,n){var i,a,o,s={},u=U.getValidJSON(e);e=U.isDefined(u)?u:U.xmlToJson(e)||e;var c=U.isPageable(e);return c?(i=e.content,s=_.omit(e,"content")):i=e,o=this.prepareCallbackOptions(r.xhrObj,{pagination:s,rawData:i}),N(F.EVENT.RESULT,t,e,o),U.triggerFn(n,e,s),t.transformationColumns&&this.transformData(e,t),i=_.isObject(i)?i:{value:i},a=N(F.EVENT.PREPARE_SETDATA,t,i,o),U.isDefined(a)&&(i=a),r.forceRunMode||r.skipDataSetUpdate||(t.pagination=s,t.dataSet=i,c&&Object.defineProperty(t.dataSet,"content",{get:function(){return t.dataSet}})),U.$invokeWatchers(!0),setTimeout(function(){N(F.EVENT.SUCCESS,t,i,o),M.isStudioMode||(t.canUpdate=!0,Ne.process(t)),N(F.EVENT.CAN_UPDATE,t,i,o)}),{data:t.dataSet,pagination:t.pagination}},e.prototype.uploadFileInFormData=function(t,r,n,i,a,e){var o=this,s=function u(e,t,r,n){return n=_.extend({paramName:r.fileParamName},n),Ae(e,t,r.url,n)}(a,e.data,{fileParamName:"files",url:e.url});return s.then(function(e){return o.fileUploadCount++,o.successFileUploadCount++,o.fileUploadResponse.push(e[0]),o.totalFilesCount===o.fileUploadCount&&(0===o.failedFileUploadCount?(o.processSuccessResponse(o.fileUploadResponse,t,r,n),o.fileUploadResponse=[],E.appManager.notifyApp(E.appManager.getAppLocale().MESSAGE_FILE_UPLOAD_SUCCESS,"success")):(N(F.EVENT.ERROR,t,o.fileUploadResponse),o.fileUploadResponse=[],E.appManager.notifyApp(E.appManager.getAppLocale().MESSAGE_FILE_UPLOAD_ERROR,"error")),o.fileUploadCount=0,o.successFileUploadCount=0,o.totalFilesCount=0),e},function(e){return o.fileUploadCount++,o.failedFileUploadCount++,o.fileUploadResponse.push(e),o.totalFilesCount===o.fileUploadCount&&(o.processErrorResponse(t,o.fileUploadResponse,i,r.xhrObj,r.skipNotification),N(F.EVENT.ERROR,t,o.fileUploadResponse),o.fileUploadResponse=[],o.fileUploadCount=0,o.failedFileUploadCount=0,o.totalFilesCount=0),e},function(e){return t._progressObservable&&t._progressObservable.next({progress:e,status:F.EVENT.PROGRESS,fileName:a.name}),N(F.EVENT.PROGRESS,t,e),e}),s},e.prototype.handleAuthError=function(e,t,r,n){var i;return _.get(E.securityService.get(),"authenticated")?i={error:{message:"You're not authorised to access the resource \""+e.service+'".'}}:(i={error:{message:"You're not authenticated to access the resource \""+e.service+'".',skipDefaultNotification:!0}},E.appManager.pushToSessionFailureRequests(e.invoke.bind(e,n,t,r)),E.appManager.handle401()),i},e.prototype.handleRequestMetaError=function(e,t,r,n,i){var a,o,s,u;switch(_.get(e,"error.type")){case F.REST_SERVICE.ERR_TYPE.NO_ACCESSTOKEN:a=undefined,o=e.securityDefnObj[F.REST_SERVICE.OAUTH_PROVIDER_KEY],s=this.invoke.bind(this,t,i,null,n),u=null,E.oauthService.perfromOAuthorization(a,o,s,u),this.processErrorResponse(t,e.error.message,n,i.xhrObj,!0,!0);break;case F.REST_SERVICE.ERR_TYPE.USER_UNAUTHORISED:e=this.handleAuthError(t,r,n,i),this.processErrorResponse(t,e.error.message,n,i.xhrObj,i.skipNotification,e.error.skipDefaultNotification);break;case F.REST_SERVICE.ERR_TYPE.METADATA_MISSING:this.processErrorResponse(t,e.error.message,n,i.xhrObj,i.skipNotification,e.error.skipDefaultNotification);break;default:e.error.message&&(console.warn(e.error.message,t.name),this.processErrorResponse(t,e.error.message,n,i.xhrObj,i.skipNotification,e.error.skipDefaultNotification))}return e},e.prototype.transformData=function(e,t){e.wmTransformedData=[];var i=t.transformationColumns,r=_.get(e,t.dataField)||[],a=e.wmTransformedData;_.forEach(r,function(r,n){a[n]={},_.forEach(i,function(e,t){a[n][e]=r[t]})})},e.prototype.getMethodInfo=function(t,r,n){var e=U.getClonedObject(E.metadataService.getByOperationId(t.operationId,t.getPrefabName())),i=null===e?null:_.get(e,"wmServiceOperationInfo");if(!i)return i;var a=_.get(i.securityDefinitions,"0"),o=a&&a.type===F.REST_SERVICE.SECURITY_DEFN.OAUTH2;return i.parameters&&i.parameters.forEach(function(e){e.readOnly||(e.sampleValue=r[e.name],-1!==F.PAGINATION_PARAMS.indexOf(e.name)?"size"===e.name?e.sampleValue=n.size||e.sampleValue||parseInt(t.maxResults,10):"page"===e.name?e.sampleValue=n.page||e.sampleValue||1:"sort"===e.name&&(e.sampleValue=pe(t.orderBy,n.orderBy)||e.sampleValue||""):"access_token"===e.name&&o&&(e.sampleValue=Re(a[F.REST_SERVICE.OAUTH_PROVIDER_KEY],null)))}),i},e.prototype.isFileUploadInProgress=function(e){var t=!1;return _.forEach(e,function(e){_.isArray(e)&&e[0]instanceof File&&_.forEach(e,function(e){"onProgress"!==e.status||(t=!0)})}),t},e.prototype.uploadFile=function(t,r,n,i,e,a){var o=this,s=0,u=[],c=[];if(_.forEach(e,function(e){_.isArray(e)?(e[0]instanceof File&&s++,_.forEach(e,function(e){(e instanceof File||_.find(_.values(e),function(e){return e instanceof Blob}))&&(u.push(e),o.totalFilesCount++,s=s||1)})):e instanceof File&&(s++,o.totalFilesCount++,u.push(e))}),1===s)return 1<e.files.length?(_.forEach(u,function(e){c.push(o.uploadFileInFormData(t,r,n,i,e,a))}),Promise.all(c)):this.uploadFileInFormData(t,r,n,i,u[0],a)},e.prototype._invoke=function(n,i,a,o){var s,u,c=this,e=U.getClonedObject(i.inputFields||n.dataBinding),t=N(F.EVENT.BEFORE_UPDATE,n,e,i);if(!1===t)return Ne.process(n),void U.triggerFn(o);_.isObject(t)&&(e=t);var r=this.getMethodInfo(n,e,i),p=ve.constructRequestParams(n,r,e);if(p.error){var l=this.handleRequestMetaError(p,n,a,o,i),d=(_.get(l,"error.message")||"An error occurred while triggering the variable: ")+": "+n.name;return U.triggerFn(o),Promise.reject(d)}if(ve.isFileUploadRequest(n)){var f=this.uploadFile(n,i,a,o,e,p);if(f)return f}return r&&_.isArray(r.produces)&&_.includes(r.produces,w.CONTENT_TYPES.OCTET_STREAM)?se(p,n.dataBinding.file||n.name,n.dataBinding.exportType,function(){N(F.EVENT.SUCCESS,n,null,null,null),Ne.process(n),U.triggerFn(a)},function(){N(F.EVENT.ERROR,n,null,null,null),U.triggerFn(o)}):(this.notifyInflight(n,!i.skipToggleState),s=function(e,t){if(e&&e.type){var r=c.processSuccessResponse(e.body,n,_.extend(i,{xhrObj:e}),a);c.notifyInflight(n,!1,r),t(e)}},u=function(e,t){var r=E.httpService.getErrMessage(e);c.notifyInflight(n,!1),c.processErrorResponse(n,r,o,e,i.skipNotification),t({error:r,details:e})},new Promise(function(t,r){p.responseType="text",c.httpCall(p,n).then(function(e){s(e,t)},function(e){u(e,r)})}))},e.prototype.invoke=function(e,t,r,n){return(t=t||{}).inputFields=t.inputFields||U.getClonedObject(e.dataBinding),Ne.submit(e).then(this._invoke.bind(this,e,t,r,n),n)},e.prototype.download=function(r,e,t,n){e=e||{};var i,a=U.getClonedObject(r.dataBinding),o=e.data||{},s=this.getMethodInfo(r,a,e);return s.relativePath+="/export",(i=ve.constructRequestParams(r,s,a)).data=o,i.data.fields=le(o.fields||[]),i.method=e.httpMethod||"POST",i.url=e.url||i.url,_.hasIn(i,"error.message")?(U.triggerFn(n,i.error.message),Promise.reject(i.error.message)):E.httpService.send(i).then(function(e){e&&U.isValidWebURL(e.body.result)?(window.location.href=e.body.result,U.triggerFn(t,e)):(N(F.EVENT.ERROR,r,e),U.triggerFn(n,e))},function(e,t){N(F.EVENT.ERROR,r,e,t),U.triggerFn(n,e)})},e.prototype.getInputParms=function(e){var t=_.get(E.metadataService.getByOperationId(e.operationId),"wmServiceOperationInfo");return _.get(t,"parameters")},e.prototype.setInput=function(e,t,r,n){return ue(e.dataBinding,t,r,n)},e.prototype.cancel=function(e,t){Ne.requestsQueue.has(e)&&(ve.isFileUploadRequest(e)?(t._uploadProgress.unsubscribe(),t.status="abort",this.totalFilesCount--,N(F.EVENT.ABORT,e,t),this.isFileUploadInProgress(e.dataBinding)||0!==this.totalFilesCount||(Ne.process(e),this.notifyInflight(e,!1))):e._observable&&(e._observable.unsubscribe(),Ne.process(e),this.notifyInflight(e,!1)))},e.prototype.defineFirstLastRecord=function(t){t.isList&&(Object.defineProperty(t,"firstRecord",{configurable:!0,get:function(){var e=t.dataSet;return _.head(e&&e.content)||_.head(e)||{}}}),Object.defineProperty(t,"lastRecord",{configurable:!0,get:function(){var e=t.dataSet;return _.last(e&&e.content)||_.last(e)||{}}}))},e.prototype.getQueryParams=function(e,t,r){var n=this.getInputParms(r),i=ve.excludePaginationParams(n),a={};return _.map(r.dataBinding,function(e,t){a[t]=e}),_.forEach(e,function(e){_.includes(i,e)&&(a[e]=t)}),a},e.prototype.searchRecords=function(e,t,r,n){var i=this.getQueryParams(_.split(t.searchKey,","),t.query,e),a={page:t.page,pagesize:t.pagesize,skipDataSetUpdate:!0,skipToggleState:!0,inFlightBehavior:"executeAll",inputFields:i};return t.onBeforeservicecall&&t.onBeforeservicecall(i),this.invoke(e,a,r,n)["catch"](U.noop)},e}(he),Ce=function(){function d(){}return d.isCompositeKey=function(e){return!e||e&&(!e.length||1<e.length)},d.isNoPrimaryKey=function(e){return!e||e&&!e.length},d.getCompositeIDURL=function(e){var r="";return _.forEach(e,function(e,t){r+=t+"="+encodeURIComponent(e)+"&"}),r=r.slice(0,-1)},d.hasBlob=function(e){return _.find(_.get(e,["propertiesMap","columns"]),{type:"blob"})},d.getPrimaryKey=function(e){if(!e.propertiesMap)return[];if(e.propertiesMap.primaryFields)return e.propertiesMap.primaryFields;var r=[];return _.forEach(e.propertiesMap.columns,function(e,t){t.isPrimaryKey&&(t.isRelated&&!_.includes(t.relatedFieldName,r)?r.push(t.relatedFieldName):_.includes(t.fieldName,r)||r.push(t.fieldName))}),r},d.processBlobColumns=function(e,t){if(e){var n,i=_.map(_.filter(t.propertiesMap.columns,{type:"blob"}),"fieldName"),r=_.trim(L.project.deployedUrl),a="";_.isEmpty(i)||(U.hasCordova()&&(a+=_.endsWith(r,"/")?r:r+"/"),a+=(""!==t._prefabName&&t._prefabName!==undefined?"prefabs/"+t._prefabName:"services")+"/"+t.liveSource+"/"+t.type+"/",n=t.propertiesMap.primaryFields||t.propertiesMap.primaryKeys,_.forEach(e,function(r){r&&_.forEach(i,function(e){var t={};null!==r[e]&&_.isEmpty(_.trim(r[e]))&&(d.isCompositeKey(n)?(n.forEach(function(e){t[e]=r[e]}),r[e]=a+"composite-id/content/"+e+"?"+d.getCompositeIDURL(t)):r[e]=a+r[_.join(n)]+"/content/"+e)})}))}},d.getHibernateOrSqlType=function(e,t,r,n){var i,a,o,s=e.propertiesMap.columns;if(_.includes(t,"."))return a=(i=_.find(s,function(e){return e.fieldName===t.split(".")[0]}))&&i.columns,(o=_.find(a,function(e){return e.fieldName===t.split(".")[1]}))&&o[r];if(!(i=_.find(s,function(e){return e.fieldName===t||e.relatedColumnName===t}))&&n){var u=_.find(s,function(e){return e.relatedEntityName===n});i=_.find(u.columns,function(e){return e.fieldName===t||e.relatedColumnName===t})}return i&&i[r]},d.getSqlType=function(e,t,r){return d.getHibernateOrSqlType(e,t,"type",r)},d.isRelatedFieldMany=function(e,t){var r,n=e.propertiesMap.columns,i=n.length;for(r=0;r<i;r+=1)if(n[r].fieldName===t)return!1;return!0},d.isStringType=function(e){return _.includes(["text","string"],_.toLower(e))},d.getSQLFieldType=function(e,t){return _.includes(["timestamp","datetime","date"],t.type)?t.type:d.getSqlType(e,t.fieldName)||t.type},d.getAttributeName=function(e,t){var r=t;return e.propertiesMap.columns.forEach(function(e){e.fieldName===t&&e.isRelated&&(r=e.relatedFieldName)}),r},d.getFilterCondition=function(e){return _.includes(m.DATABASE_RANGE_MATCH_MODES,e)?e:m.DATABASE_MATCH_MODES.exact},d.getFilterOption=function(e,t,r){var n,i,a,o=t.value,s=m.DATABASE_MATCH_MODES,u=t.fieldName,c=t.required||!1,p=d.getSQLFieldType(e,t);if(a=s[t.matchMode]||s[t.filterCondition]||t.filterCondition,t.type=p,_.isObject(o)&&!_.isArray(o)){var l=[];return _.forEach(o,function(e,t){e&&!_.isObject(e)&&l.push(u+"."+t+"="+e)}),l}if(_.includes(m.DATABASE_EMPTY_MATCH_MODES,a))return n=d.getAttributeName(e,u),p&&!d.isStringType(p)&&(a=m.DATABASE_NULL_EMPTY_MATCH[a]),i={attributeName:n,attributeValue:"",attributeType:_.toUpper(p),filterCondition:a,required:c},r.searchWithQuery&&(i.isVariableFilter=t.isVariableFilter),i;if(U.isDefined(o)&&null!==o&&""!==o){if(p)switch(p){case"integer":o=_.isArray(o)?_.reduce(o,function(e,t){return t=parseInt(t,10),_.isNaN(t)||e.push(t),e},[]):parseInt(o,10),a=a?d.getFilterCondition(a):s.exact;break;case"date":case"datetime":case"timestamp":o=Te(o,p),a=a?d.getFilterCondition(a):s.exact;break;case"text":case"string":a=_.isArray(o)?_.includes([s["in"],s.notin],a)?a:s.exact:a||s.anywhereignorecase;break;default:a=a?d.getFilterCondition(a):s.exact}else a=_.isString(o)?s.anywhereignorecase:s.exact;return i={attributeName:n=d.getAttributeName(e,u),attributeValue:o,attributeType:_.toUpper(p),filterCondition:a,required:c},r.searchWithQuery&&(i.isVariableFilter=t.isVariableFilter),i}},d.getFilterOptions=function(r,e,n){var i=[];return _.each(e,function(e){var t=d.getFilterOption(r,e,n);_.isNil(t)||(_.isArray(t)?i=i.concat(t):i.push(t))}),i},d.wrapInLowerCase=function(e,t,r,n){var i=_.toLower(t.attributeType);if(!n){if("datetime"===i)return"wm_dt("+e+")";if("timestamp"===i)return"wm_ts("+e+")";if("float"===i)return"wm_float("+e+")";if("boolean"===i)return"wm_bool("+e+")"}return r&&(!i||d.isStringType(i))&&_.includes(m.DATABASE_STRING_MODES,t.filterCondition)?"lower("+e+")":e},d.encodeAndAddQuotes=function(e,t,r){var n=r?e:encodeURIComponent(e);return t=_.toLower(t),n=_.replace(n,/'/g,"''"),U.isNumberType(t)&&"float"!==t?n:"'"+n+"'"},d.getParamValue=function(e,t,r,n){var i,a=t.filterCondition,o=m.DATABASE_MATCH_MODES,s=t.attributeType;if(_.includes(m.DATABASE_EMPTY_MATCH_MODES,a))return"";switch(a){case o.startignorecase:case o.start:i=d.encodeAndAddQuotes(e+"%",s,n),i=d.wrapInLowerCase(i,t,r);break;case o.endignorecase:case o.end:i=d.encodeAndAddQuotes("%"+e,s,n),i=d.wrapInLowerCase(i,t,r);break;case o.anywhereignorecase:case o.anywhere:i=d.encodeAndAddQuotes("%"+e+"%",s,n),i=d.wrapInLowerCase(i,t,r);break;case o.between:i=_.join(_.map(e,function(e){return d.wrapInLowerCase(d.encodeAndAddQuotes(e,s,n),t,r)})," and ");break;case o["in"]:case o.notin:i="("+(i=_.join(_.map(e,function(e){return d.wrapInLowerCase(d.encodeAndAddQuotes(e,s,n),t,r)}),", "))+")";break;default:i=d.encodeAndAddQuotes(e,s,n),i=d.wrapInLowerCase(i,t,r)}return U.isDefined(i)?i:""},d.getSearchQuery=function(e,t,u,c){var p=[];return _.forEach(e,function(e){var t,r,n=e.attributeValue,i=m.DATABASE_MATCH_MODES,a=_.isArray(n),o=e.attributeName,s=e.filterCondition;a&&_.isEmpty(n)||!a&&isNaN(n)&&U.isNumberType(e.attributeType)||(a&&(s=s===i.between||s===i.notin?s:i["in"],e.filterCondition=s),t=m.DATABASE_MATCH_MODES_WITH_QUERY[s],r=d.getParamValue(n,e,u,c),o=d.wrapInLowerCase(o,e,u,!0),p.push(U.replace(t,[o,r])))}),_.join(p,t)},d.processFilterFields=function(n,i,a){_.remove(n,function(e){return e&&(_.isString(e.value)&&0===e.value.indexOf("bind:")||"between"===e.matchMode&&(_.isString(e.secondvalue)&&0===e.secondvalue.indexOf("bind:")))}),_.forEach(n,function(e,t){if(e)if(e.rules)d.processFilterFields(e.rules,i,a);else if(!_.isNull(e.target)){var r=e.matchMode.toLowerCase()===m.DATABASE_MATCH_MODES.between.toLowerCase()?_.isArray(e.value)?e.value:[e.value,e.secondvalue]:e.matchMode.toLowerCase()===m.DATABASE_MATCH_MODES["in"].toLowerCase()||e.matchMode.toLowerCase()===m.DATABASE_MATCH_MODES.notin.toLowerCase()?_.isArray(e.value)?e.value:e.value?e.value.split(",").map(function(e){return e.trim()}):"":e.value;n[t]=d.getFilterOption(i,{fieldName:e.target,type:e.type,value:r,required:e.required,filterCondition:e.matchMode||a.matchMode||i.matchMode},a)}})},d.getSearchField=function(e,t,r){var n,i,a=e.attributeName,o=e.filterCondition,s=e.attributeValue,u=_.isArray(s),c=m.DATABASE_MATCH_MODES;if(!(u&&_.isEmpty(s)||u&&_.some(s,function(e){return _.isNull(e)||_.isNaN(e)||""===e})||!u&&isNaN(s)&&U.isNumberType(e.attributeType)))return u&&(o=o===c.between||o===c.notin?o:c["in"],e.filterCondition=o),n=m.DATABASE_MATCH_MODES_WITH_QUERY[o],i=d.getParamValue(s,e,t,r),a=d.wrapInLowerCase(a,e,t,!0),U.replace(n,[a,i])},d.getIgnoreCase=function(e,t){var r=m.DATABASE_MATCH_MODES;return-1===_.indexOf([r.anywhere,r.start,r.end,r.exact],e)&&(-1!==_.indexOf([r.anywhereignorecase,r.startignorecase,r.endignorecase,r.exactignorecase],e)||t)},d.generateSearchQuery=function(e,t,n,i){var a=[];return _.forEach(e,function(e){if(e)if(e.rules){var t=d.generateSearchQuery(e.rules,e.condition,n,i);""!==t&&a.push("("+t+")")}else{var r=d.getSearchField(e,d.getIgnoreCase(e.filterCondition,n),i);_.isNil(r)||a.push(r)}}),_.join(a," "+t+" ")},d.prepareTableOptionsForFilterExps=function(a,o,e){U.isDefined(o.searchWithQuery)||(o.searchWithQuery=!0);var t,r,s=m.DATABASE_MATCH_MODES,n=e||U.getClonedObject(a.filterExpressions);o.filterExpr&&!_.isEmpty(o.filterExpr)&&(n=o.filterExpr);var u={};if(_.isEmpty(o.filterFields)||(u={condition:o.logicalOp||"AND",rules:[]},_.forEach(o.filterFields,function(e,t){var r=s[e.matchMode]||s[e.filterCondition]||e.filterCondition;if(_.includes(m.DATABASE_EMPTY_MATCH_MODES,r)||!_.isNil(e.value)&&""!==e.value){var n=e.type||d.getSqlType(a,t,o.entityName),i={target:t,type:n,matchMode:e.matchMode||(d.isStringType(n)?"startignorecase":"exact"),value:e.value,required:e.required||!1};u.rules.push(i)}})),_.isEmpty(n))n=u;else if(!_.isNil(u.rules)&&u.rules.length){var i={condition:"AND",rules:[]};i.rules.push(U.getClonedObject(n)),i.rules.push(u),n=i}return d.processFilterFields(n.rules,a,o),r=d.generateSearchQuery(n.rules,n.condition,a.ignoreCase,o.skipEncode),{filter:[],sort:(t=pe(a.orderBy,o.orderBy))?"sort="+t:"",query:r}},d.prepareTableOptions=function(r,n,e){if("read"===r.operation)return d.prepareTableOptionsForFilterExps(r,n,e);U.isDefined(n.searchWithQuery)||(n.searchWithQuery=!0);var t,i,a,o=[],s=[];return e=e||r.filterFields,_.forEach(e,function(e,t){!_.isObject(e)||n.filterFields&&n.filterFields[t]&&"AND"!==n.filterFields[t].logicalOp||(e.fieldName=t,d.isStringType(d.getSQLFieldType(r,e))&&(e.filterCondition=m.DATABASE_MATCH_MODES[e.matchMode||r.matchMode]),e.isVariableFilter=!0,o.push(e))}),_.forEach(n.filterFields,function(e,t){e.fieldName=t,e.filterCondition=m.DATABASE_MATCH_MODES[e.matchMode||n.matchMode||r.matchMode],o.push(e)}),"read"!==r.operation&&"read"!==n.operation||(s=d.getFilterOptions(r,o,n)),n.searchWithQuery&&s.length&&(i=d.getSearchQuery(_.filter(s,{isVariableFilter:!0})," AND ",r.ignoreCase,n.skipEncode),(a=d.getSearchQuery(_.filter(s,{isVariableFilter:undefined})," "+(n.logicalOp||"AND")+" ",r.ignoreCase,n.skipEncode))&&(i=i?i+" AND ( "+a+" )":a)),{filter:s,sort:(t=pe(r.orderBy,n.orderBy))?"sort="+t:"",query:i}},d.getFieldType=function(t,e,r){var n,i,a;return e.propertiesMap&&(i=e.propertiesMap.columns||[],a=_.find(i,function(e){return e.fieldName===t}),r&&a&&(a=_.find(a.columns,function(e){return e.fieldName===r})),n=a&&a.type),n},d.prepareFormData=function(r,n){var i=new FormData;return i.rowData=_.clone(n),_.forEach(n,function(e,t){"blob"===d.getFieldType(t,r)&&(_.isObject(e)&&(_.isArray(e)?_.forEach(e,function(e){i.append(t,e,e.name)}):i.append(t,e,e.name)),n[t]=null!==e?"":null)}),i.append(k.WM_DATA_JSON,new Blob([JSON.stringify(n)],{type:"application/json"})),i},d.traverseFilterExpressions=function(r,n){r&&r.rules&&_.forEach(r.rules,function(e,t){if(!e.rules)return U.triggerFn(n,r,e);d.traverseFilterExpressions(e,n)})},d.getFilterExprFields=function(e){var r=!1;return d.traverseFilterExpressions(e,function(e,t){if(t&&t.required&&-1===_.indexOf(["null","isnotnull","empty","isnotempty","nullorempty"],t.matchMode)&&""===t.value)return!(r=!0)}),r?!r:e},d.getWhereClauseGenerator=function(n,i,a){return function(e,t){var r=d.getFilterExprFields(U.getClonedObject(a||n.filterExpressions));return U.isDefined(t)&&(i.skipEncode=t),e&&(i.filterFields?e(r,i):e(r)),d.prepareTableOptions(n,i,r).query}},d}(),Ie=function(e){var t,r,n,i=e.urlParams;if(c.hasOwnProperty(e.target)&&c[e.target].hasOwnProperty(e.action)){if(n=U.getClonedObject(c[e.target][e.action]),e.config)for(var a in n.url=(e.config.url||"")+n.url,n.method=e.config.method||n.method,n.headers=n.headers||{},e.config.headers)t=e.config.headers[a],n.headers[a]=t;if(i)for(r in i)i.hasOwnProperty(r)&&(t=i[r],_.isUndefined(t)||null===t||(n.url=n.url.replace(new RegExp(":"+r,"g"),t)));return e.params&&(n.params=e.params),_.isUndefined(e.data)||(n.data=e.data),e.dataParams&&(n.data.params=e.dataParams),e.headers&&(n.headers=e.headers),n.byPassResult=e.byPassResult,n.isDirectCall=e.isDirectCall,n.isExtURL=e.isExtURL,n.preventMultiple=e.preventMultiple,n.responseType=e.responseType,n}return null},Pe=function(e,t){var r,n;return n=e.data,r={target:"DATABASE",action:t,urlParams:{projectID:e.projectID,service:_.isUndefined(e.service)?"services":e.service,dataModelName:e.dataModelName,entityName:e.entityName,queryName:e.queryName,queryParams:e.queryParams,procedureName:e.procedureName,procedureParams:e.procedureParams,id:e.id,relatedFieldName:e.relatedFieldName,page:e.page,size:e.size,sort:e.sort},data:n||"",config:{url:e.url}},(r=Ie(r)).url=U.removeExtraSlashes(r.url),r},Ue=function(e,t,r,n,i){var a;return t.url,a=Pe(t,e),t.operation=e,E.httpService.sendCallAsObservable({url:a.url,method:a.method,data:a.data,headers:a.headers},t)},Me=Ue,Fe={searchTableDataWithQuery:function(e,t,r){return Ue("searchTableDataWithQuery",e)},executeAggregateQuery:function(e,t,r){return Ue("executeAggregateQuery",e)},searchTableData:function(e,t,r){return Ue("searchTableData",e)},readTableData:function(e,t,r){return Ue("readTableData",e)},insertTableData:function(e,t,r){return Ue("insertTableData",e)},insertMultiPartTableData:function(e,t,r){return Ue("insertMultiPartTableData",e)},updateTableData:function(e,t,r){return Ue("updateTableData",e)},updateCompositeTableData:function(e,t,r){return Ue("updateCompositeTableData",e)},periodUpdateCompositeTableData:function(e,t,r){return Ue("periodUpdateCompositeTableData",e)},updateMultiPartTableData:function(e,t,r){return Ue("updateMultiPartTableData",e)},updateMultiPartCompositeTableData:function(e,t,r){return Ue("updateMultiPartCompositeTableData",e)},deleteTableData:function(e,t,r){return Ue("deleteTableData",e)},deleteCompositeTableData:function(e,t,r){return Ue("deleteCompositeTableData",e)},periodDeleteCompositeTableData:function(e,t,r){return Ue("periodDeleteCompositeTableData",e)},exportTableData:function(e){return Ue("exportTableData",e)},getDistinctDataByFields:function(e){return Ue("getDistinctDataByFields",e)},countTableDataWithQuery:function(e,t,r){return Ue("countTableDataWithQuery",e)}},we=[],ke=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.getFilterExprFields=function(e){var r=!1;return Ce.traverseFilterExpressions(e,function(e,t){if(t&&t.required&&-1===_.indexOf(["null","isnotnull","empty","isnotempty","nullorempty"],t.matchMode)&&""===t.value)return!(r=!0)}),r?!r:e},e.getDataFilterObj=function(e){return t=e,{getFilterFields:function r(){return t},getCriteria:function i(r){var n=[];return Ce.traverseFilterExpressions(t,function(e,t){r===t.target&&n.push(t)}),n}};var t},e}return l(e,t),e.prototype.initFilterExpressionBinding=function(t){var e=t._context,r=e.registerDestroyListener?e.registerDestroyListener.bind(e):_.noop,n=U.processFilterExpBindNode(e,t.filterExpressions).subscribe(function(e){"read"===t.operation?t.autoUpdate&&!_.isUndefined(e.newVal)&&_.isFunction(t.update)&&de(t,"update"):t.autoUpdate&&!_.isUndefined(e.newVal)&&_.isFunction(t[t.operation+"Record"])&&de(t,t.operation+"Record")});r(function(){return n.unsubscribe()})},e.prototype.updateDataset=function(e,t,r,n){e.pagination=n,e.dataSet=t,Object.defineProperty(e.dataSet,"data",{get:function(){return e.dataSet}}),Object.defineProperty(e.dataSet,"pagination",{get:function(){return e.pagination}})},e.prototype.setVariableOptions=function(e,t){e._options=e._options||{},e._options.orderBy=t&&t.orderBy,e._options.filterFields=t&&t.filterFields},e.prototype.handleError=function(e,t,r,n,i){var a;U.triggerFn(t,r),N(F.EVENT.RESULT,e,r,i),n.skipDataSetUpdate||this.updateDataset(e,we,e.propertiesMap,null),a=this.prepareCallbackOptions(n.errorDetails),N(F.EVENT.ERROR,e,r,a),e.canUpdate=!0,N(F.EVENT.CAN_UPDATE,e,r,i)},e.prototype.makeCall=function(a,t,r){var o=this;return new Promise(function(n,i){var e=Pe(r,t);e={url:e.url,method:e.method,data:e.data,headers:e.headers},r.operation=t,o.httpCall(e,a,r).then(function(e){var t,r;r=n,(t=e)&&t.type&&r(t)},function(e){var t,r,n;t=e,r=i,n=E.httpService.getErrMessage(t),o.notifyInflight(a,!1),r({error:n,details:t})})})},e.prototype.getEntityData=function(n,i,a,o){var e,s,t,u,r,c,p,l,d,f=this,E={};r=this.getFilterExprFields(U.getClonedObject(n.filterExpressions||{})),t=N(F.EVENT.BEFORE_UPDATE,n,this.getDataFilterObj(r),i);var g=_.isObject(t)?U.getClonedObject(t):undefined;return!1===t?(Ne.process(n),U.triggerFn(o,"Call stopped from the event: "+F.EVENT.BEFORE_UPDATE),Promise.reject("Call stopped from the event: "+F.EVENT.BEFORE_UPDATE)):(n.canUpdate=!1,e=Ce.prepareTableOptions(n,i,_.isObject(t)?t:r),c=i.searchWithQuery?(s="searchTableDataWithQuery",e.query?"q="+e.query:""):(s=e.filter&&e.filter.length?"searchTableData":"readTableData",e.filter),p={projectID:L.project.id,service:n.getPrefabName()?"":"services",dataModelName:n.liveSource,entityName:n.type,page:i.page||1,size:i.pagesize||(M.isRunMode?n.maxResults||20:n.designMaxResults||20),sort:e.sort,data:c,filter:Ce.getWhereClauseGenerator(n,i,g),url:n.getPrefabName()?L.project.deployedUrl+"/prefabs/"+n.getPrefabName():L.project.deployedUrl},l=function(e,t){if(e&&e.type){e=e.body,E.data=e.content,E.pagination=_.omit(e,"content");var r=f.prepareCallbackOptions(e,{pagination:E.pagination});return e&&e.error||!e||!_.isArray(e.content)?(f.handleError(n,o,e.error,i,r),Promise.reject(e.error)):(Ce.processBlobColumns(e.content,n),i.skipDataSetUpdate||(N(F.EVENT.RESULT,n,E.data,r),(u=N(F.EVENT.PREPARE_SETDATA,n,E.data,r))&&(E.data=u),f.updateDataset(n,E.data,n.propertiesMap,E.pagination),f.setVariableOptions(n,i),U.$invokeWatchers(!0),setTimeout(function(){U.triggerFn(a,E.data,n.propertiesMap,E.pagination),N(F.EVENT.SUCCESS,n,E.data,r),n.canUpdate=!0,N(F.EVENT.CAN_UPDATE,n,E.data,r)})),t({data:E.data,pagination:E.pagination}))}},d=function(e,t){return f.setVariableOptions(n,i),f.handleError(n,o,e.error,_.extend(i,{errorDetails:e.details})),t(e.error)},new Promise(function(t,r){f.makeCall(n,s,p).then(function(e){l(e,t)},function(e){d(e,r)})}))},e.prototype.performCUD=function(e,t,r,n,i){var a=this;return(r=r||{}).inputFields=r.inputFields||U.getClonedObject(t.inputFields),Ne.submit(t).then(function(){return a.notifyInflight(t,!r.skipToggleState),a.doCUD(e,t,r,n,i).then(function(e){return Ne.process(t),a.notifyInflight(t,!1,e),Promise.resolve(e)},function(e){return Ne.process(t),a.notifyInflight(t,!1,e),Promise.reject(e)})},i)},e.prototype.doCUD=function(i,a,o,s,u){var e,t,r,n,c,p,l,d,f=this,E=L.project.id||L.projectName,g=Ce.getPrimaryKey(a),T=window.File&&window.FileReader&&window.FileList&&window.Blob,h="",m={},S={},y={},A=o.inputFields||a.inputFields;if(c=U.getClonedObject(A),!1===(p=N(F.EVENT.BEFORE_UPDATE,a,c,o)))return U.triggerFn(u),Promise.reject("Call stopped from the event: "+F.EVENT.BEFORE_UPDATE);switch(A=_.isObject(p)?p:c,a.canUpdate=!1,o.row?(m=o.row,_.forEach(m,function(e,t){var r,n=Ce.getFieldType(t,a);U.isDateTimeType(n)?(r=Te(e,n),m[t]=r):_.isArray(e)&&Ce.isStringType(n)&&(r=_.join(e,","),m[t]=r)}),_.forEach(A,function(e,t){!U.isDefined(e)||""===e||U.isDefined(m[t])&&""!==m[t]||(m[t]=e)})):_.forEach(A,function(r,n){var e,t=a.propertiesMap.primaryFields||a.propertiesMap.primaryKeys;_.isUndefined(r)||""===r||("deleteTableData"===i&&(h=r),"updateTableData"===i&&t.forEach(function(e){n===e&&(h=r)}),("deleteTableData"!==i||Ce.isCompositeKey(g))&&(e=Ce.getFieldType(n,a),U.isDateTimeType(e)?r=Te(r,e):_.isArray(r)&&Ce.isStringType(e)&&(r=_.join(r,",")),m[n]=r),_.isObject(r)&&!_.isArray(r)&&_.forEach(r,function(e,t){"blob"===Ce.getFieldType(n,a,t)&&(r[t]=null===e?e:"")}))}),i){case"updateTableData":t=o.prevData||{},Ce.isCompositeKey(g)?(Ce.isNoPrimaryKey(g)?(y=t||o.rowData||m,S=m):g.forEach(function(e){S[e]=m[e],o.period?y[e]=m[e]:y[e]=t[e]||o.rowData&&o.rowData[e]||m[e]}),o.row=S,o.compositeKeysData=y):(g.forEach(function(e){r=-1===e.indexOf(".")?t[e]||o.rowData&&o.rowData[e]||m[e]:(n=e.split("."),t[n[0]][n[1]])}),o.id=r,o.row=m);break;case"deleteTableData":Ce.isCompositeKey(g)?(Ce.isNoPrimaryKey(g)?S=m:g.forEach(function(e){S[e]=m[e]}),o.compositeKeysData=S):_.isEmpty(m)||(g.forEach(function(e){r=-1===e.indexOf(".")?m[e]:(n=e.split("."),m[n[0]][n[1]])}),o.id=r)}if(("updateTableData"===i||"insertTableData"===i)&&Ce.hasBlob(a)&&T&&(i="updateTableData"===i?"updateMultiPartTableData":"insertMultiPartTableData",m=Ce.prepareFormData(a,m)),o.compositeKeysData){switch(i){case"updateTableData":i="updateCompositeTableData";break;case"deleteTableData":i="deleteCompositeTableData";break;case"updateMultiPartTableData":i="updateMultiPartCompositeTableData"}h=Ce.getCompositeIDURL(o.compositeKeysData)}e=a.liveSource,_.isEmpty(m)&&"deleteTableData"===i&&(m=undefined),"updateCompositeTableData"!==i&&"deleteCompositeTableData"!==i||!o.period||(i="period"+i.charAt(0).toUpperCase()+i.substr(1));var R={projectID:E,service:a._prefabName?"":"services",dataModelName:e,entityName:a.type,id:_.isUndefined(o.id)?h:encodeURIComponent(o.id),data:m,url:a._prefabName?L.project.deployedUrl+"/prefabs/"+a._prefabName:L.project.deployedUrl};return l=function(e,t){var r=e.error,n=f.prepareCallbackOptions(e);N(F.EVENT.RESULT,a,r,n),o.skipNotification||N(F.EVENT.ERROR,a,r,n),a.canUpdate=!0,N(F.EVENT.CAN_UPDATE,a,r,n),U.triggerFn(u,r),t(r)},d=function(e,t){var r=e.body,n=f.prepareCallbackOptions(e);if(Ne.process(a),r&&r.error)return N(F.EVENT.RESULT,a,r,n),N(F.EVENT.ERROR,a,r.error,n),a.canUpdate=!0,N(F.EVENT.CAN_UPDATE,a,r.error,n),U.triggerFn(u,r.error),Promise.reject(r.error);if(N(F.EVENT.RESULT,a,r,n),"read"!==a.operation){var i=N(F.EVENT.PREPARE_SETDATA,a,r,n);i&&(r=i),a.dataSet=r}U.$invokeWatchers(!0),setTimeout(function(){N(F.EVENT.SUCCESS,a,r,n),a.canUpdate=!0,N(F.EVENT.CAN_UPDATE,a,r,n)}),U.triggerFn(s,r),t(r)},new Promise(function(t,r){f.makeCall(a,i,R).then(function(e){d(e,t)},function(e){l(e,r)})})},e.prototype.aggregateData=function(e,n,t,r,i){var a,o,s,u,c=this;return(t=t||{}).skipEncode=!0,n.filterFields&&(a=Ce.prepareTableOptions(n,t),t.aggregations.filter=a.query),o={dataModelName:n.liveSource,entityName:n.type,page:t.page||1,size:t.size||n.maxResults,sort:t.sort||"",url:e,data:t.aggregations},s=function(e,t){if(e&&e.type){if(e&&e.error||!e)return void U.triggerFn(i,e.error);U.triggerFn(r,e),t(e)}},u=function(e,t){U.triggerFn(i,e),t(e)},new Promise(function(t,r){c.makeCall(n,"executeAggregateQuery",o).then(function(e){s(e,t)},function(e){u(e,r)})})},e.prototype.listRecords=function(t,e,r,n){var i=this;return(e=e||{}).filterFields=e.filterFields||U.getClonedObject(t.filterFields),Ne.submit(t).then(function(){return i.notifyInflight(t,!e.skipToggleState),i.getEntityData(t,e,r,n).then(function(e){return Ne.process(t),i.notifyInflight(t,!1,e),Promise.resolve(e)},function(e){return Ne.process(t),i.notifyInflight(t,!1,e),Promise.reject(e)})},n)},e.prototype.insertRecord=function(e,t,r,n){return this.performCUD("insertTableData",e,t,r,n)},e.prototype.updateRecord=function(e,t,r,n){return this.performCUD("updateTableData",e,t,r,n)},e.prototype.deleteRecord=function(e,t,r,n){return this.performCUD("deleteTableData",e,t,r,n)},e.prototype.setInput=function(e,t,r,n){return e.inputFields=e.inputFields||{},ue(e.inputFields,t,r,n)},e.prototype.setFilter=function(e,t,r){var n={},a={};return _.isObject(t)?n=t:n[t]=r,e.filterExpressions||(e.filterExpressions={condition:"AND",rules:[]}),a=e.filterExpressions,_.forEach(n,function(e,t){var r=function i(r){var n=null;return Ce.traverseFilterExpressions(a,function(e,t){if(r===t.target)return n=t}),n}(t);null!==r?r.value=e:a.rules.push({target:t,type:"",matchMode:"",value:e,required:!1})}),a},e.prototype.download=function(n,e,r,i){var t,a,o,s,u=this;e=e||{};var c={},p=L.project.id||L.projectName;return e.data.searchWithQuery=!0,e.data.skipEncode=!0,t=Ce.prepareTableOptions(n,e.data,undefined),c.query=t.query?t.query:"",c.exportSize=e.data.exportSize,c.exportType=e.data.exportType,c.fields=le(e.data.fields),e.data.fileName&&(c.fileName=e.data.fileName),a={projectID:p,service:n.getPrefabName()?"":"services",dataModelName:n.liveSource,entityName:n.type,sort:t.sort,url:n.getPrefabName()?L.project.deployedUrl+"/prefabs/"+n.getPrefabName():L.project.deployedUrl,data:c,filter:Ce.getWhereClauseGenerator(n,e)},o=function(e,t){e&&e.type&&(window.location.href=e.body.result,U.triggerFn(r,e),t(e))},s=function(e,t){var r=u.prepareCallbackOptions(e.details);N(F.EVENT.ERROR,n,e.error,r),U.triggerFn(i,e.error),t(e)},new Promise(function(t,r){u.makeCall(n,"exportTableData",a).then(function(e){o(e,t)},function(e){s(e,r)})})},e.prototype.getRelatedTablePrimaryKeys=function(e,t){var r,n,i;if(e.propertiesMap&&(n=_.find(e.propertiesMap.columns||[],{fieldName:t}))){if(i=n.columns,(r=_.map(_.filter(i,"isPrimaryKey"),"fieldName")).length)return r;if(i&&i.length)return(i=_.find(i,{isRelated:!1}))&&i.fieldName}},e.prototype.getRelatedTableData=function(n,r,e,o,i){var t,a,s,u,c,p,l=this,d=L.project.id||L.projectName,f=_.find(n.relatedTables,function(e){return e.relationName===r||e.columnName===r}),E=_.map(_.filter(n.relatedTables,function(e){return e.type===n.type}),"relationName"),g=[];if(_.forEach(e.filterFields,function(e,t){e.fieldName=t,e.type=Ce.getFieldType(r,n,t),e.filterCondition!==m.DATABASE_MATCH_MODES["in"].toLowerCase()&&e.filterCondition!==m.DATABASE_MATCH_MODES.between.toLowerCase()||(e.value=e.value.split(",")),g.push(e)}),a=Ce.getFilterOptions(n,g,e),s=Ce.getSearchQuery(a," "+(e.logicalOp||"AND")+" ",n.ignoreCase),e.filterExpr){var T=U.getClonedObject(_.isObject(e.filterExpr)?e.filterExpr:JSON.parse(e.filterExpr));Ce.processFilterFields(T.rules,n,e);var h=Ce.generateSearchQuery(T.rules,T.condition,n.ignoreCase,e.skipEncode);""!==s?""!==h&&(s="("+s+") AND ("+h+")"):""!==h&&(s=h)}return s=s?"q="+s:"","searchTableDataWithQuery",t=_.isEmpty(e.orderBy)?"":"sort="+e.orderBy,u={projectID:d,service:n.getPrefabName()?"":"services",dataModelName:n.liveSource,entityName:f?f.type:"",page:e.page||1,size:e.pagesize||undefined,url:n.getPrefabName()?L.project.deployedUrl+"/prefabs/"+n.getPrefabName():L.project.deployedUrl,data:s||"",filter:Ce.getWhereClauseGenerator(n,e),sort:t},c=function(e,t){if(e&&e.type){var r=e.body,n=_.map(r.content,function(e){return _.omit(e,E)}),i=Object.assign({},r);delete i.content;var a={data:n,pagination:i};U.triggerFn(o,a),t(a)}},p=function(e,t){U.triggerFn(i,e),t(e)},new Promise(function(t,r){l.makeCall(n,"searchTableDataWithQuery",u).then(function(e){c(e,t)},function(e){p(e,r)})})},e.prototype.getDistinctDataByFields=function(r,e,i,a){var t,n,o,s,u,c=this,p=L.project.id||L.projectName,l={};return e.skipEncode=!0,e.operation="read",e=e||{},(n=Ce.prepareTableOptions(r,e)).query&&(l.filter=n.query),l.groupByFields=_.isArray(e.fields)?e.fields:[e.fields],t=(t=e.sort||l.groupByFields[0]+" asc")?"sort="+t:"",o={projectID:p,service:r.getPrefabName()?"":"services",dataModelName:r.liveSource,entityName:e.entityName||r.type,page:e.page||1,size:e.pagesize,sort:t,data:l,filter:Ce.getWhereClauseGenerator(r,e),url:r.getPrefabName()?L.project.deployedUrl+"/prefabs/"+r.getPrefabName():L.project.deployedUrl},s=function(e,t){if(e&&e.type){if(e&&e.error||!e)return U.triggerFn(a,e.error),Promise.reject(e.error);var r=e.body,n=Object.assign({},e.body);delete n.content,r={data:r.content,pagination:n},U.triggerFn(i,r),t(r)}},u=function(e,t){U.triggerFn(a,e),t(e)},new Promise(function(t,e){c.makeCall(r,"getDistinctDataByFields",o).then(function(e){s(e,t)},function(){u(a,e)})})},e.prototype.getAggregatedData=function(e,t,r,n){var i=E.appManager.getDeployedURL();if(i)return this.aggregateData(i,e,t,r,n)},e.prototype.defineFirstLastRecord=function(t){"read"===t.operation&&(Object.defineProperty(t,"firstRecord",{configurable:!0,get:function(){return _.get(t.dataSet,"data[0]",{})}}),Object.defineProperty(t,"lastRecord",{configurable:!0,get:function(){var e=_.get(t.dataSet,"data",[]);return e[e.length-1]}}))},e.prototype.getPrimaryKey=function(e){return Ce.getPrimaryKey(e)},e.prototype.prepareRequestParams=function(r){var e,t=_.split(r.searchKey,","),n=_.split(r.matchMode,","),i={};return _.forEach(t,function(e,t){i[e]={value:r.query,logicalOp:"AND",matchMode:n[t]||n[0]||"startignorecase"}}),e={filterFields:i,page:r.page,pagesize:r.limit||r.pagesize,skipDataSetUpdate:!0,skipToggleState:!0,inFlightBehavior:"executeAll",logicalOp:"OR",orderBy:r.orderby?_.replace(r.orderby,/:/g," "):""},r.onBeforeservicecall&&r.onBeforeservicecall(i),e},e.prototype.searchRecords=function(e,t,r,n){var i=this.prepareRequestParams(t);return this.listRecords(e,i,r,n)},e.prototype.upgradeInputDataToFilterExpressions=function(e,t,n){_.isObject(t)&&((n=t).condition="AND",n.rules=[]);var i=_.cloneDeep(n.rules);return n.rules=[],_.forEach(n,function(e,t){if("condition"!==t&&"rules"!==t){var r=_.find(i,function(e){return e.target===t});r?(r.value=e.value,r.matchMode=e.matchMode||e.filterCondition||r.matchMode||"",n.rules.push(r)):n.rules.push({target:t,type:"",matchMode:e.matchMode||e.filterCondition||"",value:e.value,required:!1}),delete n[t]}}),n},e.prototype.downgradeFilterExpressionsToInputData=function(e,t){return t.hasOwnProperty("getFilterFields")&&(t=t.getFilterFields()),_.forEach(t.rules,function(e){_.isNil(e.target)||""===e.target||(t[e.target]={value:e.value,matchMode:e.matchMode})}),t},e.prototype.cancel=function(e,t){Ne.requestsQueue.has(e)&&e._observable&&(e._observable.unsubscribe(),Ne.process(e),this.notifyInflight(e,!1))},e}(he),Le=function(){function e(){}return e.prototype.initBinding=function(e,t,r){oe(e,e._context,t,r)},e.prototype.notifyInflight=function(e,t,r){E.appManager.notify("toggle-variable-state",{variable:e,active:t,data:r})},e}(),Be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.invoke=function(e,t){!function(e,t){var r;e.dataSet=t&&t.data||e.dataSet;var n=e.dataBinding.pageName||e.pageName,i=e.operation,a=e.dataSet;switch(t=t||{},i){case"goToPreviousPage":E.navigationService.goToPrevious();break;case"gotoPage":E.navigationService.goToPage(n,{transition:e.pageTransitions,$event:t.$event,urlParams:a});break;case"gotoView":r=e.dataBinding&&e.dataBinding.viewName||e.viewName;break;case"gotoTab":r=e.dataBinding&&e.dataBinding.tabName||e.tabName;break;case"gotoAccordion":r=e.dataBinding&&e.dataBinding.accordionName||e.accordionName;break;case"gotoSegment":r=e.dataBinding&&e.dataBinding.segmentName||e.segmentName}r&&E.navigationService.goToView(r,{pageName:n,transition:e.pageTransitions,$event:t.$event,urlParams:a},e)}(e,t)},t}(Le),Ve=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.onToasterClick=function(e){N("onClick",e,"")},t.prototype.onToasterHide=function(e){N("onHide",e,"")},t.prototype.notifyViaToaster=function(e,t){var r,n=(t["class"]||e.dataBinding["class"]||"info").toLowerCase(),i=t.message||e.dataBinding.text,a=t.title,o="toast-"+(t.position||e.dataBinding.toasterPosition||"bottom right").replace(" ","-"),s=e.dataBinding.page,u=parseInt(e.dataBinding.duration||t.duration,null);u||(u=0!==u&&"success"===n?3e3:0),r=e.dataBinding.content&&"page"===e.dataBinding.content&&s?E.toasterService.showCustom(s,{positionClass:o,timeOut:u,partialParams:e._binddataSet,context:e._context}):E.toasterService.show(n,a,i||null,{positionClass:o,timeOut:u,enableHtml:!0}),e.onClick&&r.onTap.subscribe(this.onToasterClick.bind(this,e)),e.onHide&&r.onHidden.subscribe(this.onToasterHide.bind(this,e))},t.prototype.notifyViaDialog=function(e,t){var r="Common"+_.capitalize(e.operation)+"Dialog",n=e.owner===F.OWNER.APP?r:"notification"+e.operation+"dialog";E.dialogService.open(n,e._context,{notification:{title:t.title||e.dataBinding.title,text:t.message||e.dataBinding.text,okButtonText:t.okButtonText||e.dataBinding.okButtonText||"OK",cancelButtonText:t.cancelButtonText||e.dataBinding.cancelButtonText||"CANCEL",alerttype:t.alerttype||e.dataBinding.alerttype||"information",onOk:function(){N("onOk",e,t.data),E.dialogService.close(n,e._context)},onCancel:function(){N("onCancel",e,t.data),E.dialogService.close(n,e._context)},onClose:function(){N("onClose",e,t.data)}}})},t.prototype.notify=function(e,t,r,n){t=t||{},"toast"===e.operation?this.notifyViaToaster(e,t):this.notifyViaDialog(e,t)},t.prototype.getMessage=function(e){return e.dataBinding.text},t.prototype.setMessage=function(e,t){return _.isString(t)&&(e.dataBinding.text=t),e.dataBinding.text},t.prototype.getOkButtonText=function(e){return e.dataBinding.okButtonText},t.prototype.setOkButtonText=function(e,t){return _.isString(t)&&(e.dataBinding.okButtonText=t),e.dataBinding.okButtonText},t.prototype.getToasterDuration=function(e){return e.dataBinding.duration},t.prototype.setToasterDuration=function(e,t){return e.dataBinding.duration=t,e.dataBinding.duration},t.prototype.getToasterClass=function(e){return e.dataBinding["class"]},t.prototype.setToasterClass=function(e,t){return _.isString(t)&&(e.dataBinding["class"]=t),e.dataBinding["class"]},t.prototype.getToasterPosition=function(e){return e.dataBinding["class"]},t.prototype.setToasterPosition=function(e,t){return _.isString(t)&&(e.dataBinding.position=t),e.dataBinding.position},t.prototype.getAlertType=function(e){return e.dataBinding.alerttype},t.prototype.setAlertType=function(e,t){return _.isString(t)&&(e.dataBinding.alerttype=t),e.dataBinding.alerttype},t.prototype.getCancelButtonText=function(e){return e.dataBinding.cancelButtonText},t.prototype.setCancelButtonText=function(e,t){return _.isString(t)&&(e.dataBinding.cancelButtonText=t),e.dataBinding.cancelButtonText},t}(Le),xe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.validate=function(t){var e,r,n;for(r in["rememberme","remembermecheck"].forEach(function(e){_.isBoolean(t[e])&&(n=e)}),t[n=n||"j_rememberme"]=!!_.isBoolean(t[n])&&t[n],t)if(t.hasOwnProperty(r)&&(""===t[r]||t[r]===undefined)){e="Please provide required credentials";break}return e},t.prototype.migrateOldParams=function(e){var r={},n={usernametext:"j_username",username:"j_username",passwordtext:"j_password",password:"j_password",remembermecheck:"j_rememberme",rememberme:"j_rememberme"};return _.each(e,function(e,t){n[t]?r[n[t]]=e:r[t]=e}),r},t.prototype.login=function(s,e,t,n){var r,i=this,a=(e=e||{}).loginInfo||e.input||s.dataBinding,o=this.validate(a);if(o)return U.triggerFn(n,o),void N("onError",s,o);var u=U.getClonedObject(a),c=N(F.EVENT.BEFORE_UPDATE,s,u);if(_.isObject(c))u=c;else if(!1===c)return void U.triggerFn(n);u=this.migrateOldParams(u);var p=_.get(E.securityService.get(),"userInfo.userName");this.notifyInflight(s,!0),s.promise=E.securityService.appLogin(u,function(e){E.dialogService.close("CommonLoginDialog"),E.appManager.reloadAppData().then(function(o){N(F.EVENT.RESULT,s,_.get(o,"userInfo")),(r=N(F.EVENT.PREPARE_SETDATA,s,_.get(o,"userInfo")))&&_.set(o,"userInfo",r),i.notifyInflight(s,!1,e),U.triggerFn(t),setTimeout(function(){if(N(F.EVENT.SUCCESS,s,_.get(o,"userInfo")),s.useDefaultSuccessHandler){var e=p===u.j_username;p&&!e||E.appManager.executeSessionFailureRequests();var t=E.securityService.getCurrentRouteQueryParam("redirectTo"),r=E.appManager.noRedirect(),n=E.securityService.getRedirectedRouteQueryParams();if(n.redirectTo&&delete n.redirectTo,E.appManager.noRedirect(!1),p)if(_.isEmpty(t)){var i=E.securityService.get(),a=_.get(i,"loginConfig.sessionTimeout.type")||"PAGE";e&&"DIALOG"===a||(E.routerService.navigate(["/"]),window.location.reload())}else p===u.j_username?E.routerService.navigate(["/"+t],{queryParams:n}):(E.routerService.navigate(["/"]),window.location.reload());else _.isEmpty(t)?r||E.routerService.navigate(["/"]):E.routerService.navigate(["/"+t],{queryParams:n})}N(F.EVENT.CAN_UPDATE,s,_.get(o,"userInfo"))})})},function(e){N(F.EVENT.RESULT,s,e),i.notifyInflight(s,!1,e);var t=e.error||"Invalid credentials.",r=e.details;M.isRunMode&&N("onError",s,t,r,!0),U.triggerFn(n,t,r),N(F.EVENT.CAN_UPDATE,s,e)})},t}(Le),je=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.logout=function(n,e,r,i){var t,a,o,s=this;!(t=function(e,t,r){M.isStudioMode||N("onError",n,e,r),U.triggerFn(i,e,r)})!==N(F.EVENT.BEFORE_UPDATE,n,null)?E.securityService.isAuthenticated(function(e){e?(s.notifyInflight(n,!0),n.promise=E.securityService.appLogout(function(e){var t=e.body;t=U.getValidJSON(t),E.appManager.reloadAppData().then(function(){s.notifyInflight(n,!1,t),N(F.EVENT.RESULT,n,t),(o=N(F.EVENT.PREPARE_SETDATA,n,t))&&(t=o),setTimeout(function(){N(F.EVENT.SUCCESS,n,t),N(F.EVENT.CAN_UPDATE,n,t)})}),t&&t.result?window.location.href=t.result:n.useDefaultSuccessHandler&&((a=n.redirectTo)&&"login.html"!==a&&"index.html"!==a||(a=""),E.routerService.navigate(["/"+a]),window.cordova||setTimeout(function(){window.location.reload()})),U.triggerFn(r)},t)):t("No authenticated user to logout.")},function(e){s.notifyInflight(n,!1,e),t(e)}):U.triggerFn(i)},t}(Le),Ge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.trigger=function(e,t,r,n){if(!U.isDefined(e._promise)&&!M.isStudioMode){var i=e.repeating,a=e.delay||M.DEFAULT_TIMER_DELAY,o=function(){N("onTimerFire",e,{})};return e._promise=i?setInterval(o,a):setTimeout(function(){o(),e._promise=undefined},a),e._promise}},t.prototype.cancel=function(e){U.isDefined(e._promise)&&(e.repeating?clearInterval(e._promise):clearTimeout(e._promise),e._promise=undefined)},t}(Le),He=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.serviceRegistry=new Map,e}return l(e,t),e.prototype.invoke=function(t,e){var r=this,n=this.serviceRegistry.get(t.service);return null==n?(N("onError",t,null),Promise.reject("Could not find service '"+n+"'")):(this.notifyInflight(t,!0),n.invoke(t,e).then(function(e){return r.notifyInflight(t,!1,e),e},function(e){return r.notifyInflight(t,!1,e),Promise.reject(e)}))},e.prototype.registerService=function(e){this.serviceRegistry.set(e.name,e)},e}(he),Ye=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scope_var_socket_map=new Map,e.PROPERTY={SERVICE:"service",DATA_UPDATE_STRATEGY:"dataUpdateStrategy",DATA_LIMIT:"dataLimit"},e.DATA_UPDATE_STRATEGY={REFRESH:"refresh",PREPEND:"prepend",APPEND:"append"},e}return l(e,t),e.prototype.shouldAppendData=function(e){return(e=e||this)[this.PROPERTY.DATA_UPDATE_STRATEGY]!==this.DATA_UPDATE_STRATEGY.REFRESH},e.prototype.shouldAppendLast=function(e){return e[this.PROPERTY.DATA_UPDATE_STRATEGY]===this.DATA_UPDATE_STRATEGY.APPEND},e.prototype.getDataLimit=function(e){return e.dataLimit},e.prototype.getURL=function(e){var t,r=e.getPrefabName(),n=r?_.get(E.metadataService.getByOperationId(e.operationId,r),"wmServiceOperationInfo"):_.get(E.metadataService.getByOperationId(e.operationId),"wmServiceOperationInfo"),i=e.dataBinding;if(_.forEach(n.parameters,function(e){e.sampleValue=i[e.name]}),$.extend(n,{skipCloakHeaders:!0}),!(t=ve.constructRequestParams(e,n,i)).error||!t.error.message)return t.url;this._onSocketError(e,{data:t.error.message})},e.prototype._onSocketMessage=function(e,t){var r,n,i,a,o,s=_.get(t,"data");s=U.getValidJSON(s)||U.xmlToJson(s)||s,r=N(F.EVENT.MESSAGE_RECEIVE,e,s,t),s=U.isDefined(r)?r:s,this.shouldAppendData(e)?(e.dataSet=e.dataSet||[],n=e.dataSet.length,i=this.getDataLimit(e),a=this.shouldAppendLast(e),i&&i<=n&&(a?e.dataSet.shift():e.dataSet.pop()),o=a?n:0,e.dataSet.splice(o,0,s)):e.dataSet=U.isDefined(r)?r:s},e.prototype._onBeforeSend=function(e,t){return N(F.EVENT.BEFORE_SEND,e,t)},e.prototype._onBeforeSocketClose=function(e,t){return N(F.EVENT.BEFORE_CLOSE,e,_.get(t,"data"),t)},e.prototype._onBeforeSocketOpen=function(e,t){return N(F.EVENT.BEFORE_OPEN,e,_.get(t,"data"),t)},e.prototype._onSocketOpen=function(e,t){e._socketConnected=!0,N(F.EVENT.OPEN,e,_.get(t,"data"),t)},e.prototype.freeSocket=function(e){this.scope_var_socket_map.set(e,undefined)},e.prototype._onSocketClose=function(e,t){e._socketConnected=!1,this.freeSocket(e),N(F.EVENT.CLOSE,e,_.get(t,"data"),t)},e.prototype._onSocketError=function(e,t){e._socketConnected=!1,this.freeSocket(e),N(F.EVENT.ERROR,e,_.get(t,"data")||"Error while connecting with "+e.service,t)},e.prototype.getSocket=function(e){var t=this.getURL(e),r=this.scope_var_socket_map.get(e);return r||(M.hasCordova||!U.isInsecureContentRequest(t)?((r=new n.$WebSocket(t)).onOpen(this._onSocketOpen.bind(this,e)),r.onError(this._onSocketError.bind(this,e)),r.onMessage(this._onSocketMessage.bind(this,e)),r.onClose(this._onSocketClose.bind(this,e)),this.scope_var_socket_map.set(e,r),e._socket=r):void U.triggerFn(this._onSocketError.bind(this,e)))},e.prototype.open=function(e,t,r){var n;if(!1!==this._onBeforeSocketOpen(e))return n=this.getSocket(e),U.triggerFn(t),n;U.triggerFn(r)},e.prototype.close=function(e){var t=this._onBeforeSocketClose(e),r=this.getSocket(e);!1!==t&&r.close()},e.prototype.send=function(e,t){var r,n=this.getSocket(e);t=t||_.get(e,"dataBinding.RequestBody"),!1!==(r=this._onBeforeSend(e,t))&&(t=U.isDefined(r)?r:t,t=U.isObject(t)?JSON.stringify(t):t,n.send(t,0))},e}(he),qe=new Map,Qe={Variable:he,Action:Le,"wm.Variable":Se,"wm.ServiceVariable":be,"wm.LiveVariable":ke,"wm.NavigationVariable":Be,"wm.NotificationVariable":Ve,"wm.LoginVariable":xe,"wm.LogoutVariable":je,"wm.TimerVariable":Ge,"wm.DeviceVariable":He,"wm.WebSocketVariable":Ye},We=function(){function e(){}return e.get=function(e){return qe.has(e)?qe.get(e):qe.set(e,new Qe[e]).get(e)},e}(),Ke=function(){function e(){}return e.prototype.invoke=function(t,e){var r=this.operations.find(function(e){return e.name===t.operation});if(null==r)return N(F.EVENT.ERROR,t,null),Promise.reject("Could not find operation '"+t.operation+"' in service '"+this.name+"'");if(M.hasCordova){var n=new Map;return t.dataBinding!==undefined&&(Object.entries(t).forEach(function(e){n.set(e[0],e[1])}),Object.entries(t.dataBinding).forEach(function(e){n.set(e[0],e[1])})),r.invoke(t,e,n).then(function(e){return t.dataSet=e,U.$invokeWatchers(!0),N(F.EVENT.SUCCESS,t,e),e},function(e){return t.dataSet={},U.$invokeWatchers(!0),N(F.EVENT.ERROR,t,null),e})}return Promise.resolve().then(function(){return N(F.EVENT.SUCCESS,t,r.model),r.model})},e}(),$e=function(){function e(){}return e.isValidDataset=function(e,t){return!!e&&(!(t&&!_.isArray(e))&&e)},e.getValue=function(e,t,r,n){return r=r||0,n?e[r][t]:e[t]},e.setValue=function(e,t,r,n){return t&&!n&&(e[t]=r),e},e.getItem=function(e,t,r){return r?e[t]:e},e.setItem=function(e,t,r,n){var i;return _.isUndefined(t)||!n||-1<(i=_.isObject(t)?_.findIndex(e,t):t)&&(e[i]=r),e},e.addItem=function(e,t,r,n){return _.isUndefined(t)||!n||(r=r!==undefined?r:e.length,e.splice(r,0,t)),e},e.removeItem=function(e,t,r){var n;return t=t!==undefined?t:e.length-1,_.isObject(t)?-1<(n=_.findIndex(e,t))&&(!r||r&&_.isEqual(e[n],t))&&e.splice(n,1):e.splice(t,1),e},e.getValidDataset=function(e){return e?[]:{}},e.getCount=function(e,t){return t?e.length:Object.keys(e).length},e}(),ze=function(){function e(){}return e.prototype.execute=function(e,t){var r;switch(e){case U.DataSource.Operation.GET_NAME:r=this.name;break;case U.DataSource.Operation.GET_UNIQUE_IDENTIFIER:r=this._id;break;case U.DataSource.Operation.GET_CONTEXT_IDENTIFIER:r=this._context;break;case U.DataSource.Operation.ADD_ITEM:r=this.addItem(t.item);break;case U.DataSource.Operation.SET_ITEM:r=this.setItem(t.prevItem,t.item);break;case U.DataSource.Operation.REMOVE_ITEM:r=this.removeItem(t.item)}return r},e.prototype.getData=function(){return this.dataSet},e.prototype.setData=function(e){return $e.isValidDataset(e,this.isList)&&(this.dataSet=e),this.dataSet},e.prototype.getValue=function(e,t){return $e.getValue(this.dataSet,e,t,this.isList)},e.prototype.setValue=function(e,t){return $e.setValue(this.dataSet,e,t,this.isList)},e.prototype.getItem=function(e){return $e.getItem(this.dataSet,e,this.isList)},e.prototype.setItem=function(e,t){return $e.setItem(this.dataSet,e,t,this.isList)},e.prototype.addItem=function(e,t){return $e.addItem(this.dataSet,e,t,this.isList)},e.prototype.removeItem=function(e,t){return $e.removeItem(this.dataSet,e,t)},e.prototype.clearData=function(){return this.dataSet=$e.getValidDataset(this.isList),this.dataSet},e.prototype.getCount=function(){return $e.getCount(this.dataSet,this.isList)},e.prototype.getPrefabName=function(){return this._context&&"__self__"!==this._context.prefabName&&this._context.prefabName},e}(),Xe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t}(ze),Je=function(){return We.get(F.CATEGORY.DEVICE)},Ze=function(r){function e(e){var t=r.call(this)||this;return Object.assign(t,e),t}return l(e,r),e.prototype.init=function(){Je().initBinding(this)},e.prototype.invoke=function(e,t,r){Je().invoke(this,e).then(t,r)},e}(Xe),et=function(){return We.get(F.CATEGORY.LIVE)},tt=function(n){function e(e){var t=n.call(this)||this;return Object.assign(t,e),t}return l(e,n),e.prototype.execute=function(e,t){var r=n.prototype.execute.call(this,e,t);if(U.isDefined(r))return r;switch(e){case U.DataSource.Operation.IS_API_AWARE:case U.DataSource.Operation.SUPPORTS_CRUD:case U.DataSource.Operation.SUPPORTS_DISTINCT_API:case U.DataSource.Operation.IS_PAGEABLE:case U.DataSource.Operation.SUPPORTS_SERVER_FILTER:r=!0;break;case U.DataSource.Operation.GET_OPERATION_TYPE:r=this.operation;break;case U.DataSource.Operation.GET_RELATED_PRIMARY_KEYS:r=this.getRelatedTablePrimaryKeys(t);break;case U.DataSource.Operation.GET_ENTITY_NAME:r=this.propertiesMap.entityName;break;case U.DataSource.Operation.LIST_RECORDS:r=this.listRecords(t);break;case U.DataSource.Operation.UPDATE_RECORD:r=this.updateRecord(t);break;case U.DataSource.Operation.INSERT_RECORD:r=this.insertRecord(t);break;case U.DataSource.Operation.DELETE_RECORD:r=this.deleteRecord(t);break;case U.DataSource.Operation.INVOKE:r=this.invoke(t);break;case U.DataSource.Operation.UPDATE:r=this.update(t);break;case U.DataSource.Operation.GET_RELATED_TABLE_DATA:r=this.getRelatedTableData(t.relatedField,t);break;case U.DataSource.Operation.GET_DISTINCT_DATA_BY_FIELDS:r=this.getDistinctDataByFields(t);break;case U.DataSource.Operation.GET_AGGREGATED_DATA:r=this.getAggregatedData(t);break;case U.DataSource.Operation.GET_MATCH_MODE:r=this.matchMode;break;case U.DataSource.Operation.DOWNLOAD:r=this.download(t);break;case U.DataSource.Operation.GET_PROPERTIES_MAP:r=this.propertiesMap;break;case U.DataSource.Operation.GET_PRIMARY_KEY:r=this.getPrimaryKey();break;case U.DataSource.Operation.GET_BLOB_URL:r="services/"+this.liveSource+"/"+this.type+"/"+t.primaryValue+"/content/"+t.columnName;break;case U.DataSource.Operation.GET_OPTIONS:r=this._options||{};break;case U.DataSource.Operation.SEARCH_RECORDS:r=this.searchRecords(t);break;case U.DataSource.Operation.GET_REQUEST_PARAMS:r=this.getRequestParams(t);break;case U.DataSource.Operation.GET_PAGING_OPTIONS:r=this.pagination;break;case U.DataSource.Operation.IS_UPDATE_REQUIRED:r=!0;break;case U.DataSource.Operation.IS_BOUND_TO_LOCALE:case U.DataSource.Operation.CANCEL:r=!1;break;default:r={}}return r},e.prototype.listRecords=function(e,t,r){return et().listRecords(this,e,t,r)},e.prototype.updateRecord=function(e,t,r){return et().updateRecord(this,e,t,r)},e.prototype.insertRecord=function(e,t,r){return et().insertRecord(this,e,t,r)},e.prototype.deleteRecord=function(e,t,r){return et().deleteRecord(this,e,t,r)},e.prototype.setInput=function(e,t,r){return et().setInput(this,e,t,r)},e.prototype.setFilter=function(e,t){return et().setFilter(this,e,t)},e.prototype.download=function(e,t,r){return et().download(this,e,t,r)},e.prototype.invoke=function(e,t,r){switch(this.operation){case"insert":return this.insertRecord(e,t,r);case"update":return this.updateRecord(e,t,r);case"delete":return this.deleteRecord(e,t,r);default:return this.listRecords(e,t,r)}},e.prototype.getRelatedTablePrimaryKeys=function(e){return et().getRelatedTablePrimaryKeys(this,e)},e.prototype.getRelatedTableData=function(e,t,r,n){return et().getRelatedTableData(this,e,t,r,n)},e.prototype.getDistinctDataByFields=function(e,t,r){return et().getDistinctDataByFields(this,e,t,r)},e.prototype.getAggregatedData=function(e,t,r){return et().getAggregatedData(this,e,t,r)},e.prototype.getPrimaryKey=function(){return et().getPrimaryKey(this)},e.prototype.searchRecords=function(e,t,r){return et().searchRecords(this,e,t,r)},e.prototype.getRequestParams=function(e){return et().prepareRequestParams(e)},e.prototype._downgradeInputData=function(e){return et().downgradeFilterExpressionsToInputData(this,e)},e.prototype._upgradeInputData=function(e,t){return et().upgradeInputDataToFilterExpressions(this,e,t)},e.prototype.setOrderBy=function(e){return this.orderBy=e,this.autoUpdate&&this.update(),this.orderBy},e.prototype.update=function(e,t,r){return this.invoke(e,t,r)},e.prototype.createRecord=function(e,t,r){return this.insertRecord(e,t,r)},e.prototype.init=function(){et().initBinding(this,"dataBinding","read"===this.operation?"filterFields":"inputFields"),"read"===this.operation&&et().initFilterExpressionBinding(this),et().defineFirstLastRecord(this)},e.prototype.cancel=function(e){return et().cancel(this,e)},e}(Xe),rt=function(){function e(){}return e.prototype.execute=function(e,t){var r;switch(e){case U.DataSource.Operation.GET_NAME:r=this.name;break;case U.DataSource.Operation.GET_UNIQUE_IDENTIFIER:r=this._id;break;case U.DataSource.Operation.GET_CONTEXT_IDENTIFIER:r=this._context}return r},e.prototype.getData=function(){return this.dataSet},e.prototype.setData=function(e){return $e.isValidDataset(e)&&(this.dataSet=e),this.dataSet},e.prototype.getValue=function(e,t){return $e.getValue(this.dataSet,e,t)},e.prototype.setValue=function(e,t){return $e.setValue(this.dataSet,e,t)},e.prototype.getItem=function(e){return $e.getItem(this.dataSet,e)},e.prototype.setItem=function(e,t){return $e.setItem(this.dataSet,e,t)},e.prototype.addItem=function(e,t){return $e.addItem(this.dataSet,e,t)},e.prototype.removeItem=function(e,t){return $e.removeItem(this.dataSet,e,t)},e.prototype.clearData=function(){return this.dataSet=$e.getValidDataset(),this.dataSet},e.prototype.getCount=function(){return $e.getCount(this.dataSet)},e.prototype.init=function(){},e}(),nt=function(){return We.get(F.CATEGORY.NAVIGATION)},it=function(r){function e(e){var t=r.call(this)||this;return Object.assign(t,e),t}return l(e,r),e.prototype.invoke=function(e){nt().invoke(this,e)},e.prototype.navigate=function(e){this.invoke(e)},e.prototype.init=function(){nt().initBinding(this,"dataBinding","dataBinding"),nt().initBinding(this,"dataSet","dataSet")},e}(rt),at=function(){return We.get(F.CATEGORY.MODEL)},ot=function(n){function e(e){var t=n.call(this)||this;return Object.assign(t,e),t}return l(e,n),e.prototype.init=function(){this.isList&&at().removeFirstEmptyObject(this),at().initBinding(this,"dataBinding","dataSet")},e.prototype.execute=function(e,t){var r=n.prototype.execute.call(this,e,t);if(U.isDefined(r))return r;switch(e){case U.DataSource.Operation.IS_API_AWARE:case U.DataSource.Operation.SUPPORTS_CRUD:case U.DataSource.Operation.SUPPORTS_DISTINCT_API:case U.DataSource.Operation.IS_PAGEABLE:case U.DataSource.Operation.SUPPORTS_SERVER_FILTER:r=!1;break;case U.DataSource.Operation.IS_BOUND_TO_LOCALE:r=this.isBoundToLocale();break;case U.DataSource.Operation.GET_DEFAULT_LOCALE:r=this.getDefaultLocale();break;default:r={}}return r},e.prototype.isBoundToLocale=function(){return"supportedLocale"===this.name},e.prototype.getDefaultLocale=function(){return E.appManager.getSelectedLocale()},e}(ze),st=function(){return We.get(F.CATEGORY.SERVICE)},ut=function(n){function e(e){var t=n.call(this)||this;return Object.assign(t,e),t}return l(e,n),e.prototype.execute=function(e,t){var r=n.prototype.execute.call(this,e,t);if(U.isDefined(r))return r;switch(e){case U.DataSource.Operation.IS_API_AWARE:r=!0;break;case U.DataSource.Operation.SUPPORTS_CRUD:case U.DataSource.Operation.SUPPORTS_DISTINCT_API:r=!1;break;case U.DataSource.Operation.IS_PAGEABLE:r=this.controller===F.CONTROLLER_TYPE.QUERY||!_.isEmpty(this.pagination);break;case U.DataSource.Operation.SUPPORTS_SERVER_FILTER:r=!1;break;case U.DataSource.Operation.SET_INPUT:r=this.setInput(t);break;case U.DataSource.Operation.LIST_RECORDS:case U.DataSource.Operation.INVOKE:r=this.invoke(t);break;case U.DataSource.Operation.UPDATE:r=this.update(t);break;case U.DataSource.Operation.SEARCH_RECORDS:r=this.searchRecords(t);break;case U.DataSource.Operation.DOWNLOAD:r=this.download(t);break;case U.DataSource.Operation.GET_PAGING_OPTIONS:r=this.pagination;break;case U.DataSource.Operation.IS_UPDATE_REQUIRED:r=this.isUpdateRequired(t);break;case U.DataSource.Operation.IS_BOUND_TO_LOCALE:r=!1;break;case U.DataSource.Operation.CANCEL:r=this.cancel(t);break;default:r={}}return r},e.prototype.invoke=function(e,t,r){return st().invoke(this,e,t,r)},e.prototype.update=function(e,t,r){return st().invoke(this,e,t,r)},e.prototype.download=function(e,t,r){return st().download(this,e,t,r)},e.prototype.setInput=function(e,t,r){return st().setInput(this,e,t,r)},e.prototype.searchRecords=function(t,e,r){var n=this;return new Promise(function(r,e){st().searchRecords(n,t,function(e,t){r({data:e.content||e,pagination:t})},e)})},e.prototype.isUpdateRequired=function(e){var t=st().getInputParms(this);return!(!ve.excludePaginationParams(t).length&&e)},e.prototype.cancel=function(e){return st().cancel(this,e)},e.prototype.init=function(){st().initBinding(this),st().defineFirstLastRecord(this)},e}(Xe),ct=function(){return We.get(F.CATEGORY.NOTIFICATION)},pt=function(a){function e(e){var t=a.call(this)||this;return Object.assign(t,e),t}return l(e,a),e.prototype.execute=function(r,n){var i=this,e=a.prototype.execute.call(this,r,n);return U.isDefined(e)?e:new Promise(function(e,t){switch(r){case U.DataSource.Operation.INVOKE:i.invoke(n,e,t);break;case U.DataSource.Operation.NOTIFY:i.notify(n,e,t);break;default:t(r+" operation is not supported on this data source")}})},e.prototype.notify=function(e,t,r){ct().notify(this,e,t,r)},e.prototype.invoke=function(e,t,r){this.notify(e,t,r)},e.prototype.getMessage=function(){return ct().getMessage(this)},e.prototype.setMessage=function(e){return ct().setMessage(this,e)},e.prototype.clearMessage=function(){return ct().setMessage(this,"")},e.prototype.getOkButtonText=function(){return ct().getOkButtonText(this)},e.prototype.setOkButtonText=function(e){return ct().setOkButtonText(this,e)},e.prototype.getToasterDuration=function(){return ct().getToasterDuration(this)},e.prototype.setToasterDuration=function(e){return ct().setToasterDuration(this,e)},e.prototype.getToasterClass=function(){return ct().getToasterClass(this)},e.prototype.setToasterClass=function(e){return ct().setToasterClass(this,e)},e.prototype.getToasterPosition=function(){return ct().getToasterPosition(this)},e.prototype.setToasterPosition=function(e){return ct().setToasterPosition(this,e)},e.prototype.getAlertType=function(){return ct().getAlertType(this)},e.prototype.setAlertType=function(e){return ct().setAlertType(this,e)},e.prototype.getCancelButtonText=function(){return ct().getCancelButtonText(this)},e.prototype.setCancelButtonText=function(e){return ct().setCancelButtonText(this,e)},e.prototype.init=function(){ct().initBinding(this,"dataBinding","dataBinding"),ct().initBinding(this,"dataSet","dataSet")},e}(rt),lt=function(){return We.get(F.CATEGORY.LOGIN)},dt=function(r){function e(e){var t=r.call(this)||this;return Object.assign(t,e),t}return l(e,r),e.prototype.login=function(e,t,r){return lt().login(this,e,t,r)},e.prototype.invoke=function(e,t,r){return this.login(e,t,r)},e.prototype.cancel=function(){},e.prototype.init=function(){lt().initBinding(this,"dataBinding","dataBinding")},e}(rt),ft=function(r){function e(e){var t=r.call(this)||this;return Object.assign(t,e),t}return l(e,r),e.prototype.logout=function(e,t,r){We.get(F.CATEGORY.LOGOUT).logout(this,e,t,r)},e.prototype.invoke=function(e,t,r){this.logout(e,t,r)},e.prototype.cancel=function(){},e}(rt),Et=function(){return We.get(F.CATEGORY.TIMER)},gt=function(r){function e(e){var t=r.call(this)||this;return Object.assign(t,e),t}return l(e,r),e.prototype.fire=function(e,t,r){return Et().trigger(this,e,t,r)},e.prototype.invoke=function(e,t,r){return this.fire(e,t,r)},e.prototype.cancel=function(){return Et().cancel(this)},e}(rt),_t=function(){return We.get(F.CATEGORY.WEBSOCKET)},Tt=function(r){function e(e){var t=r.call(this)||this;return Object.assign(t,e),t}return l(e,r),e.prototype.open=function(e,t){return _t().open(this,e,t)},e.prototype.close=function(){return _t().close(this)},e.prototype.update=function(){return _t().update(this)},e.prototype.send=function(e){return _t().send(this,e)},e.prototype.cancel=function(){return this.close()},e.prototype.invoke=function(e,t,r){this.open(t,r)},e.prototype.init=function(){_t().initBinding(this)},e}(Xe),ht=function(){function e(){}return e.create=function(e,t){var r;switch(e.category){case F.CATEGORY.MODEL:r=new ot(e);break;case F.CATEGORY.SERVICE:r=new ut(e);break;case F.CATEGORY.LIVE:r=new tt(e);break;case F.CATEGORY.DEVICE:r=new Ze(e);break;case F.CATEGORY.NAVIGATION:r=new it(e);break;case F.CATEGORY.NOTIFICATION:r=new pt(e);break;case F.CATEGORY.LOGIN:r=new dt(e);break;case F.CATEGORY.LOGOUT:r=new ft(e);break;case F.CATEGORY.TIMER:r=new gt(e);break;case F.CATEGORY.WEBSOCKET:r=new Tt(e)}return r._context=t,r.__cloneable__=!1,r},e}(),mt=function(){function e(e){this.$http=e,this.CONTEXT_APP="app"}return e.prototype.isLoaded=function(){return!!this.metadataMap&&this.metadataMap.has(this.CONTEXT_APP)},e.prototype.load=function(r){var n,i=this;return n=U.hasCordova()?"metadata/"+(r?"prefabs/"+r+"/":"app/")+"service-definitions.json":"./services/"+(r?"prefabs/"+r+"/":"")+"servicedefs",new Promise(function(t,e){i.$http.send({url:n,method:"GET"}).then(function(e){i.metadataMap=i.metadataMap||new Map,i.metadataMap.set(r||i.CONTEXT_APP,e.body),t(e.body)},e)})},e.prototype.getByOperationId=function(e,t){t=t||this.CONTEXT_APP;var r=this.metadataMap.get(t);return r&&r[e]},e.decorators=[{type:r.Injectable}],e.ctorParameters=function(){return[{type:U.AbstractHttpService}]},e}(),St=function(){function e(e,t,r,n,i,a,o,s){this.httpService=e,this.metadataService=t,this.navigationService=r,this.routerService=n,this.toasterService=i,this.oAuthService=a,this.securityService=o,this.dialogService=s,v("http",this.httpService),v("metadata",this.metadataService),v("navigationService",this.navigationService),v("router",this.routerService),v("toaster",this.toasterService),v("oAuth",this.oAuthService),v("security",this.securityService),v("dialog",this.dialogService)}return e.prototype.bulkCancel=function(r){Object.keys(r).forEach(function(e){var t=r[e];_.isFunction(t.cancel)&&t.cancel()})},e.prototype.triggerStartUpdate=function(t){return Promise.all(Object.keys(t).map(function(e){return t[e]}).filter(function(e){return e.startUpdate&&e.invoke}).map(function(e){return e.invoke()}))},e.prototype.register=function(e,t,r){var n,i=this,a={Variables:{},Actions:{},callback:this.triggerStartUpdate};for(var o in t)(n=ht.create(t[o],r)).init(),n instanceof rt?a.Actions[o]=n:a.Variables[o]=n;return r.registerDestroyListener&&r.registerDestroyListener(function(){i.bulkCancel(a.Variables),i.bulkCancel(a.Actions)}),a},e.prototype.destroy=function(){},e.prototype.registerDependency=function(e,t){v(e,t)},e.decorators=[{type:r.Injectable}],e.ctorParameters=function(){return[{type:U.AbstractHttpService},{type:mt},{type:U.AbstractNavigationService},{type:t.Router},{type:U.AbstractToasterService},{type:u.OAuthService},{type:s.SecurityService},{type:U.AbstractDialogService}]},e}(),yt=e.ToastrModule.forRoot({maxOpened:1,autoDismiss:!0}),At=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[St,mt,i.Location,{provide:i.LocationStrategy,useClass:i.HashLocationStrategy}]}},e.decorators=[{type:r.NgModule,args:[{imports:[i.CommonModule,yt,a.HttpClientModule,o.HttpServiceModule,u.OAuthModule,s.SecurityModule],declarations:[]}]}],e}();E.ɵb=Le,E.ɵh=xe,E.ɵi=je,E.ɵf=Be,E.ɵg=Ve,E.ɵj=Ge,E.ɵa=he,E.ɵe=ke,E.ɵc=Se,E.ɵd=be,E.ɵk=Ye,E.CONSTANTS=M,E.VARIABLE_CONSTANTS=F,E.WS_CONSTANTS=w,E.DB_CONSTANTS=m,E.SWAGGER_CONSTANTS=k,E.VARIABLE_URLS=c,E.$rootScope=L,E.VariableManagerFactory=We,E.DeviceVariableManager=He,E.DeviceVariableService=Ke,E.VariablesService=St,E.MetadataService=mt,E.parseConfig=Ie,E.generateConnectionParams=Pe,E.LVService=Fe,E.ɵ0=Me,E.LiveVariableUtils=Ce,E.setDependency=v,E.initiateCallback=N,E.processBinding=oe,E.simulateFileDownload=se,E.setInput=ue,E.isFileUploadSupported=ce,E.getEvaluatedOrderBy=pe,E.formatExportExpression=le,E.debounceVariableCall=de,E.formatDate=Te,E.ɵ1=D,E.ɵ2=C,E.ɵ3=P,E.ɵ4=B,E.ɵ5=x,E.ɵ6=G,E.ɵ7=Y,E.ɵ8=q,E.ɵ9=Q,E.ɵ10=K,E.ɵ11=X,E.ɵ12=Z,E.ɵ13=te,E.ɵ14=ne,E.ɵ15=ae,E.ɵ16=Ee,E.ɵ17=_e,E.toastrModule=yt,E.VariablesModule=At,Object.defineProperty(E,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.min.js.map