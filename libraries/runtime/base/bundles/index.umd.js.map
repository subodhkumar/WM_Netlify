{"version":3,"file":"index.umd.js.map","sources":["ng://@wm/runtime/base/types/types.ts","ng://@wm/runtime/base/services/app.manager.service.ts","ng://@wm/runtime/base/util/utils.ts","ng://@wm/runtime/base/services/prefab-manager.service.ts","node_modules/tslib/tslib.es6.js","ng://@wm/runtime/base/util/fragment-monitor.ts","ng://@wm/runtime/base/components/base-partial.component.ts","ng://@wm/runtime/base/components/base-page.component.ts","ng://@wm/runtime/base/components/base-prefab.component.ts","ng://@wm/runtime/base/directives/accessroles.directive.ts","ng://@wm/runtime/base/directives/partial-container.directive.ts","ng://@wm/runtime/base/components/app-spinner.component.ts","ng://@wm/runtime/base/components/custom-toaster.component.ts","ng://@wm/runtime/base/components/empty-component/empty-page.component.ts","ng://@wm/runtime/base/directives/prefab.directive.ts","ng://@wm/runtime/base/services/app.service.ts","ng://@wm/runtime/base/services/toaster.service.ts","ng://@wm/runtime/base/services/i18n.service.ts","ng://@wm/runtime/base/services/spinner.service.ts","ng://@wm/runtime/base/services/navigation.service.ts","ng://@wm/runtime/base/services/app-defaults.service.ts","ng://@wm/runtime/base/guards/auth.guard.ts","ng://@wm/runtime/base/guards/role.guard.ts","ng://@wm/runtime/base/guards/page-not-found.gaurd.ts","ng://@wm/runtime/base/resolves/app-js.resolve.ts","ng://@wm/runtime/base/resolves/i18n.resolve.ts","ng://@wm/runtime/base/services/pipe-provider.service.ts","ng://@wm/runtime/base/components/app-component/app.component.ts","ng://@wm/runtime/base/services/http-interceptor.services.ts","ng://@wm/runtime/base/components/prefab-preview.component.ts","ng://@wm/runtime/base/services/dynamic-component-ref-provider.service.ts","ng://@wm/runtime/base/guards/can-deactivate-page.guard.ts","ng://@wm/runtime/base/runtime-base.module.ts","ng://@wm/runtime/base/resolves/app-variables.resolve.ts","ng://@wm/runtime/base/resolves/metadata.resolve.ts","ng://@wm/runtime/base/resolves/security-config.resolve.ts","ng://@wm/runtime/base/index.ts"],"sourcesContent":["export enum ComponentType {\n    PAGE,\n    PREFAB,\n    PARTIAL\n}\n\nexport abstract class ComponentRefProvider {\n    abstract async getComponentFactoryRef(componentName: string, componentType: ComponentType): Promise<any>;\n    clearComponentFactoryRefCache():void {};\n}\n\nexport abstract class PrefabConfigProvider {\n    abstract async getConfig(prefabName: string): Promise<any>;\n}\n\nexport abstract class AppJSProvider {\n    abstract async getAppScriptFn(): Promise<Function>;\n}\n\nexport abstract class AppVariablesProvider {\n    abstract async getAppVariables(): Promise<any>;\n}\n\nexport abstract class PartialRefProvider {\n    abstract async getComponentFactoryRef(partialName:string,componentType: ComponentType): Promise<any>;\n}\n","import { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { DatePipe } from '@angular/common';\n\nimport {\n    AbstractDialogService,\n    AbstractHttpService,\n    AbstractI18nService,\n    AbstractSpinnerService,\n    App,\n    fetchContent,\n    isDefined,\n    triggerFn,\n    $appDigest\n} from '@wm/core';\nimport { SecurityService } from '@wm/security';\nimport { CONSTANTS, $rootScope, routerService,  MetadataService, VariablesService } from '@wm/variables';\n\ndeclare const _;\n\nenum POST_MESSAGES {\n    HIDE_TEMPLATES_SHOW_CASE = 'hide-templates-show-case',\n    SHOW_TEMPLATES_SHOW_CASE = 'show-templates-show-case',\n    UPDATE_LOCATION          = 'update-location-path',\n    SELECT_TEMPLATE          = 'select-template',\n    TEMPLATEBUNDLE_CONFIG    = 'template-bundle-config',\n    ON_LOAD                  = 'on-load'\n}\n\n@Injectable()\nexport class AppManagerService {\n\n    private appVariablesLoaded = false;\n    private appVariablesFired = false;\n    private _noRedirect = false;\n    private templates: Array<any>;\n\n    constructor(\n        private $http: AbstractHttpService,\n        private $security: SecurityService,\n        private $dialog: AbstractDialogService,\n        private $router: Router,\n        private $app: App,\n        private $variables: VariablesService,\n        private $metadata: MetadataService,\n        private $spinner: AbstractSpinnerService,\n        private $i18n: AbstractI18nService,\n        private $datePipe: DatePipe\n    ) {\n        // register method to invoke on session timeout\n        this.$http.registerOnSessionTimeout(this.handle401.bind(this));\n\n        this.$variables.registerDependency('appManager', this);\n\n        this.$app.subscribe('toggle-variable-state', (data) => {\n            const variable = data.variable,\n                active = data.active;\n            if (!_.isEmpty(_.trim(variable.spinnerContext))) {\n                if (active) {\n                    variable._spinnerId = variable._spinnerId || [];\n                    const spinnerId = this.$spinner.show(variable.spinnerMessage,\n                        variable._id + '_' + Date.now(),\n                        variable.spinnerclass,\n                        variable.spinnerContext);\n                    variable._spinnerId.push(spinnerId);\n                } else {\n                    this.$spinner.hide(variable._spinnerId.shift());\n                }\n            }\n        });\n        this.$app.subscribe('userLoggedIn', () => this.setLandingPage());\n        this.$app.subscribe('userLoggedOut', () => this.setLandingPage().then(() => {\n            // navigate to the landing page without reloading the window in device.\n            if (window['cordova']) {\n                this.$router.navigate([`/`]);\n            }\n        }));\n        this.$app.subscribe('http401', (d = {}) => this.handle401(d.page, d.options));\n    }\n\n    /**\n     * On session timeout, if the session timeout config is set to a dialog, then open login dialog\n     */\n    private showLoginDialog() {\n        this.$spinner.hide('globalSpinner');\n        // Removing the close all dialogs call, so the existing dialogs remain open and\n        // the login dialog comes on top of it.\n        this.$dialog.open('CommonLoginDialog');\n        // Since the login dialog is closed and opened its updated property isn't read by angular.\n        // Hence we trigger the digest cycle\n        $appDigest();\n    }\n\n    loadAppJS() {\n\n    }\n\n    loadCommonPage() {\n\n    }\n\n    loadSecurityConfig() {\n        return this.$security.load().then((r) => {\n            if (!this.$app.landingPageName) {\n                this.setLandingPage();\n            }\n            return r;\n        });\n    }\n\n    loadMetadata() {\n        return this.$metadata.load();\n    }\n\n    loadAppVariables(variables?: any) {\n        if (this.appVariablesLoaded) {\n            return Promise.resolve();\n        }\n\n        const init = response => {\n            const data = this.$variables.register('app', response, this.$app);\n            // not assigning directly to this.$app to keep the reference in tact\n            _.extend(this.$app.Variables, data.Variables);\n            _.extend(this.$app.Actions, data.Actions);\n            this.updateLoggedInUserVariable();\n            this.updateSupportedLocaleVariable();\n            this.appVariablesLoaded = true;\n            this.appVariablesFired = false;\n        };\n\n        if (isDefined(variables)) {\n            init(variables);\n            return Promise.resolve();\n        }\n\n        return this.$http.get('./app.variables.json').then(response => init(response));\n    }\n\n    /**\n     * getter and setter for the property appVariablesFired\n     * this flag determines if the app variables(with startUpdate:true) have been fired\n     * they should get fired only once through app lifecycle\n     * @param {boolean} isFired\n     * @returns {boolean}\n     */\n    isAppVariablesFired(isFired?: boolean) {\n        if (isDefined(isFired)) {\n            this.appVariablesFired = isFired;\n        }\n        return this.appVariablesFired;\n    }\n\n    private clearLoggedInUserVariable(variable) {\n        variable.isAuthenticated = false;\n        variable.roles           = [];\n        variable.name            = undefined;\n        variable.id              = undefined;\n        variable.tenantId        = undefined;\n    }\n\n    private updateLoggedInUserVariable() {\n        const loggedInUser = _.get(this.$app, 'Variables.loggedInUser.dataSet');\n\n        // sanity check\n        if (!loggedInUser) {\n            return;\n        }\n        this.$security.load().then(()=>{\n            const securityConfig = this.$security.get();\n            if (securityConfig && securityConfig.securityEnabled && securityConfig.authenticated) {\n                loggedInUser.isAuthenticated = securityConfig.authenticated;\n                loggedInUser.roles           = securityConfig.userInfo.userRoles;\n                loggedInUser.name            = securityConfig.userInfo.userName;\n                loggedInUser.id              = securityConfig.userInfo.userId;\n                loggedInUser.tenantId        = securityConfig.userInfo.tenantId;\n            } else {\n                this.clearLoggedInUserVariable(loggedInUser);\n                loggedInUser.isSecurityEnabled = securityConfig && securityConfig.securityEnabled;\n                throw null;\n            }\n        }).catch(err => {\n            loggedInUser.isAuthenticated = false;\n            loggedInUser.roles           = [];\n            loggedInUser.name            = undefined;\n            loggedInUser.id              = undefined;\n            loggedInUser.tenantId        = undefined;\n        });\n    }\n\n    /**\n     * Overriding the app variable supported locale with the wmProperties i18n DataValues\n     *\n     * TODO[Vibhu]:\n     * Can write a simple migration to sync the supportedLocale variable with '_WM_APP_PROPERTIES.supportedLanguages'\n     * Hence, this may not be required\n     *\n     */\n    updateSupportedLocaleVariable() {\n        const supportedLocaleVar = _.get(this.$app, 'Variables.supportedLocale');\n    }\n\n    handleSSOLogin(config) {\n        const SSO_URL = 'services/security/ssologin',\n            PREVIEW_WINDOW_NAME = 'WM_PREVIEW_WINDOW';\n        let page,\n            pageParams;\n\n        // do not provide redirectTo page if fetching HOME page resulted 401\n        // on app load, by default Home page is loaded\n        page = this.$security.getRedirectPage(config);\n\n        if (CONSTANTS.hasCordova) {\n            // get previously loggedInUser name (if any)\n            const lastLoggedInUsername = _.get(this.$security.get(), 'userInfo.userName');\n            this.$security.authInBrowser()\n                .then(() => this.reloadAppData())\n                .then(() => {\n                    const presentLoggedInUsername = _.get(this.$security.get(), 'userInfo.userName');\n                    if (presentLoggedInUsername && presentLoggedInUsername === lastLoggedInUsername) {\n                        routerService.navigate([page]);\n                    } else {\n                        routerService.navigate([`/`]);\n                    }\n                });\n        } else {\n            page = page ? '?redirectPage=' + encodeURIComponent(page) : '';\n            pageParams = this.$security.getQueryString(this.$security.getRedirectedRouteQueryParams());\n            pageParams = pageParams ? '?' + pageParams : '';\n            // showing a redirecting message\n            document.body.textContent = _.get(this.getAppLocale(), ['MESSAGE_LOGIN_REDIRECTION']) || 'Redirecting to sso login...';\n            // appending redirect to page and page params\n            const ssoUrl = this.getDeployedURL() + SSO_URL + page + pageParams;\n            /*\n             * remove iFrame when redirected to IdP login page.\n             * this is being done as IDPs do not allow to get themselves loaded into iFrames.\n             * remove-toolbar has been assigned with a window name WM_PREVIEW_WINDOW, check if the iframe is our toolbar related and\n             * safely change the location of the parent toolbar with current url.\n             */\n            if (window.self !== window.top && window.parent.name === PREVIEW_WINDOW_NAME) {\n                window.parent.location.href = window.self.location.href;\n                window.parent.name = '';\n            } else {\n                window.location.href = ssoUrl;\n            }\n        }\n    }\n\n    /**\n     * Handles the app when a XHR request returns 401 response\n     * If no user was logged in before 401 occurred, First time Login is simulated\n     * Else, a session timeout has occurred and the same is simulated\n     * @param page  if provided, represents the page name for which XHR request returned 401, on re-login\n     *              if not provided, a service request returned 401\n     * @param onSuccess success handler\n     * @param onError error handler\n     */\n    handle401(page?, options?) {\n        let sessionTimeoutConfig,\n            sessionTimeoutMethod,\n            loginConfig,\n            loginMethod;\n        const LOGIN_METHOD = {\n                'DIALOG' : 'DIALOG',\n                'PAGE'   : 'PAGE',\n                'SSO'    : 'SSO'\n            };\n\n        const config = this.$security.get();\n        let queryParamsObj = {};\n        loginConfig = config.loginConfig;\n        // if user found, 401 was thrown after session time\n        if (config.userInfo && config.userInfo.userName) {\n            config.authenticated = false;\n            sessionTimeoutConfig = loginConfig.sessionTimeout || {'type': LOGIN_METHOD.DIALOG};\n            sessionTimeoutMethod = sessionTimeoutConfig.type.toUpperCase();\n            switch (sessionTimeoutMethod) {\n                case LOGIN_METHOD.DIALOG:\n                    this.showLoginDialog();\n                    break;\n                case LOGIN_METHOD.PAGE:\n                    if (!page) {\n                        page = this.$security.getCurrentRoutePage();\n                    }\n                    queryParamsObj['redirectTo'] = page;\n                    // Adding query params(page params of page being redirected to) to the URL.\n                    queryParamsObj = _.merge(queryParamsObj, this.$security.getRedirectedRouteQueryParams());\n                    // the redirect page should not be same as session timeout login page\n                    if ( page !== sessionTimeoutConfig.pageName) {\n                        this.$router.navigate([sessionTimeoutConfig.pageName], {queryParams: queryParamsObj});\n                    }\n                    break;\n                case LOGIN_METHOD.SSO:\n                    this.handleSSOLogin(config);\n                    break;\n            }\n            this.setLandingPage();\n        } else {\n            // if no user found, 401 was thrown for first time login\n            loginMethod = loginConfig.type.toUpperCase();\n            switch (loginMethod) {\n                case LOGIN_METHOD.DIALOG:\n                    // Through loginDialog, user will remain in the current state and failed calls will be executed post login through LoginVariableService.\n                    // NOTE: user will be redirected to respective landing page only if dialog is opened manually(not through a failed 401 call).\n                    this.noRedirect(true);\n                    this.showLoginDialog();\n                    break;\n                case LOGIN_METHOD.PAGE:\n                    // do not provide redirectTo page if fetching HOME page resulted 401\n                    // on app load, by default Home page is loaded\n                    page = this.$security.getRedirectPage(config);\n                    queryParamsObj['redirectTo'] = page;\n                    queryParamsObj = _.merge(queryParamsObj, this.$security.getRedirectedRouteQueryParams());\n                    this.$router.navigate([loginConfig.pageName], {queryParams: queryParamsObj});\n                    this.$app.landingPageName = loginConfig.pageName;\n                    break;\n                case LOGIN_METHOD.SSO:\n                    this.handleSSOLogin(config);\n                    break;\n            }\n        }\n    }\n\n    /**\n     * Updates data dependent on logged in user\n     * Reloads security config, metadata\n     * Updates the loggedInUserVariable\n     * @returns {Promise<void>}\n     */\n    reloadAppData() {\n        return this.loadSecurityConfig().then(() => {\n            return this.loadMetadata().then(() => {\n                this.updateLoggedInUserVariable();\n            });\n        });\n    }\n\n    noRedirect(value?: boolean) {\n        if (_.isUndefined(value)) {\n            return this._noRedirect;\n        }\n\n        this._noRedirect = value;\n        return this._noRedirect;\n    }\n\n    /**\n     * invokes session failure requests\n     */\n    executeSessionFailureRequests() {\n        this.$http.executeSessionFailureRequests();\n    }\n\n    pushToSessionFailureRequests(callback) {\n        this.$http.pushToSessionFailureQueue(callback);\n    }\n\n    public getDeployedURL() {\n        return this.$app.deployedUrl ? this.$app.deployedUrl : $rootScope.project.deployedUrl;\n    }\n\n    notify(eventName, data) {\n        this.$app.notify(eventName, data);\n    }\n\n    subscribe(eventName, data) {\n        return this.$app.subscribe(eventName, data);\n    }\n\n    getActivePage() {\n        return this.$app.activePage;\n    }\n\n    getAppLocale() {\n        return this.$app.appLocale;\n    }\n\n    getSelectedLocale() {\n        return this.$i18n.getSelectedLocale();\n    }\n\n    notifyApp(template, type, title?) {\n        this.$app.notifyApp(template, type, title);\n    }\n\n    /**\n     * Triggers the onBeforeService method defined in app.js of the app\n     * @param requestParams\n     */\n    appOnBeforeServiceCall(requestParams: any) {\n        return triggerFn(this.$app.onBeforeServiceCall, requestParams);\n    }\n\n    /**\n     * Triggers the onServiceSuccess method defined in app.js of the app\n     * @param data\n     * @param xhrObj\n     */\n    appOnServiceSuccess(data: any, xhrObj: any) {\n        return triggerFn(this.$app.onServiceSuccess, data, xhrObj);\n    }\n\n    /**\n     * Triggers the onServiceError method defined in app.js of the app\n     * @param data\n     * @param xhrOb\n     */\n    appOnServiceError(data: any, xhrOb?: any) {\n        return triggerFn(this.$app.onServiceError, data, xhrOb);\n    }\n\n    /**\n     * Triggers the appVariablesReady method defined in app.js of the app\n     */\n    appVariablesReady() {\n        triggerFn(this.$app.onAppVariablesReady);\n    }\n\n    /**\n     * Returns the pipe based on the input\n     */\n    getPipe(pipe) {\n        if (pipe === 'date') {\n            return this.$datePipe;\n        }\n    }\n\n    private setLandingPage() {\n        return this.$security.getPageByLoggedInUser().then(p => this.$app.landingPageName = <string> p);\n    }\n\n    /**\n     * return true if prefab type app\n     * @returns {boolean}\n     */\n    isPrefabType() {\n        return this.$app.isPrefabType;\n    }\n\n    /**\n     * return true if template bundle type app\n     * @returns {boolean}\n     */\n    isTemplateBundleType() {\n        return this.$app.isTemplateBundleType;\n    }\n\n    postMessage(content) {\n        window.top.postMessage(content, '*');\n    }\n\n    showTemplate(idx) {\n        const template = this.templates[idx];\n        // scope.activeTemplateIndex = idx;\n        this.$router.navigate([template.id]);\n    }\n    postTemplateBundleInfo() {\n\n        window.onmessage = (evt) => {\n            const msgData = evt.data;\n\n            if (!_.isObject(msgData)) {\n                return;\n            }\n\n            const key = msgData.key;\n\n            switch (key) {\n                case POST_MESSAGES.HIDE_TEMPLATES_SHOW_CASE:\n                    // scope.hideShowCase = true;\n                    break;\n                case POST_MESSAGES.SELECT_TEMPLATE:\n                    this.showTemplate(msgData.templateIndex);\n                    break;\n            }\n        };\n\n        setTimeout(() => {\n            this.postMessage({key: POST_MESSAGES.ON_LOAD});\n        });\n\n        return fetchContent('json', './config.json', true, response => {\n            this.templates = [];\n            if (!response.error) {\n                this.templates = response.templates;\n                this.postMessage({'key': POST_MESSAGES.TEMPLATEBUNDLE_CONFIG, 'config': response});\n            }\n        });\n    }\n\n    postAppTypeInfo() {\n        if (this.isTemplateBundleType()) {\n            return this.postTemplateBundleInfo();\n        }\n    }\n}\n","export const isPrefabInPreview = (prefabName: string) => prefabName === '__self__';\n\nexport const getPrefabBaseUrl = (prefabName: string) => isPrefabInPreview(prefabName) ? '.' : `app/prefabs/${prefabName}`;\n\nexport const getPrefabConfigUrl = (prefabName: string) => `${getPrefabBaseUrl(prefabName)}/config.json`;\n\nexport const getPrefabMinJsonUrl = (prefabName: string) => `${getPrefabBaseUrl(prefabName)}/pages/Main/page.min.json`;\n","import { Injectable } from '@angular/core';\n\nimport { loadScripts, loadStyleSheets, stringStartsWith } from '@wm/core';\nimport { MetadataService } from '@wm/variables';\n\nimport { PrefabConfigProvider } from '../types/types';\nimport { getPrefabBaseUrl, isPrefabInPreview } from '../util/utils';\n\ndeclare const _;\n\nconst prefabsWithError = new Set<string>();\nconst inProgress = new Map<string, Promise<any>>();\nconst resolvedPrefabs = new Set<string>();\n\nconst getPrefabResourceUrl = (resourcePath, resourceBasePath) => {\n    let _url = resourcePath;\n    if (!stringStartsWith(resourcePath, 'http://|https://|//')) {\n        _url = (resourceBasePath + _url).replace('//', '/');\n    }\n    return _url;\n};\n\n@Injectable()\nexport class PrefabManagerService {\n\n    constructor(\n        private $metadata: MetadataService,\n        private prefabConfigProvider: PrefabConfigProvider\n    ) {}\n\n    public getConfig(prefabName): Promise<any> {\n        return this.prefabConfigProvider.getConfig(prefabName);\n    }\n\n    public loadServiceDefs(prefabName): Promise<any> {\n        return isPrefabInPreview(prefabName) ? Promise.resolve() : this.$metadata.load(prefabName);\n    }\n\n    protected loadStyles(prefabName, {resources: {styles}} = {resources: {styles: []}}): Promise<void> {\n        const baseUrl = getPrefabBaseUrl(prefabName);\n        const _styles = styles.map(url => {\n            if (!_.endsWith(url, '/pages/Main/Main.css')) {\n                return getPrefabResourceUrl(url, baseUrl);\n            }\n            return undefined;\n        }).filter(url => !!url);\n\n        loadStyleSheets(_styles);\n\n        return Promise.resolve();\n    }\n\n    // TODO [Vinay] - implement onPrefabResourceLoad\n    protected loadScripts(prefabName, {resources: {scripts}} = {resources: {scripts: []}}): Promise<any> {\n        const baseUrl = getPrefabBaseUrl(prefabName);\n        const _scripts = scripts.map(url => getPrefabResourceUrl(url, baseUrl));\n\n        return loadScripts(_scripts);\n    }\n\n    private setInProgress(prefabName: string) {\n        let _res;\n        let _rej;\n        const _promise: any = new Promise((res, rej) => {\n            _res = res;\n            _rej = rej;\n        });\n\n        _promise.resolve = _res;\n        _promise.reject = _rej;\n\n        inProgress.set(prefabName, _promise);\n    }\n\n    private resolveInProgress(prefabName: string) {\n        if (inProgress.get(prefabName)) {\n            (inProgress.get(prefabName) as any).resolve();\n            inProgress.delete(prefabName);\n        }\n    }\n\n    public loadDependencies(prefabName): Promise<void> {\n\n        if (resolvedPrefabs.has(prefabName)) {\n            return Promise.resolve();\n        }\n\n        if (prefabsWithError.has(prefabName)) {\n            return Promise.reject('');\n        }\n\n        if (inProgress.get(prefabName)) {\n            return inProgress.get(prefabName);\n        }\n\n        this.setInProgress(prefabName);\n\n        return this.getConfig(prefabName)\n            .then(config => {\n                return Promise.all([\n                    this.loadStyles(prefabName, config),\n                    this.loadScripts(prefabName, config),\n                    this.loadServiceDefs(prefabName)\n                ]).then(() => {\n                    this.resolveInProgress(prefabName);\n                    resolvedPrefabs.add(prefabName);\n                });\n            });\n    }\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { if (o[n]) i[n] = function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; }; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator];\r\n    return m ? m.call(o) : typeof __values === \"function\" ? __values(o) : o[Symbol.iterator]();\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { noop } from '@wm/core';\n\nimport { Subject } from 'rxjs';\n\nexport abstract class FragmentMonitor {\n    fragments = 0;\n    viewInit$: Subject<any>;\n    isViewInitialized: boolean;\n\n    fragmentsLoaded$ = new Subject();\n\n    constructor() {}\n\n    init() {\n        // console.log(`inside fragmentMonitor: Page-${(this as any).pageName}, Partial-${(this as any).partialName}`);\n\n        this.viewInit$.subscribe(noop, noop, () => {\n            this.isViewInitialized = true;\n            this.isReady();\n        });\n    }\n\n    registerFragment() {\n        this.fragments++;\n    }\n\n    resolveFragment() {\n        this.fragments--;\n        this.isReady();\n    }\n\n    isReady() {\n        if (this.isViewInitialized && !this.fragments) {\n            this.registerFragment = noop;\n            this.resolveFragment = noop;\n            this.fragmentsLoaded$.complete();\n        }\n    }\n}\n","import { AfterViewInit, Injector, OnDestroy } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\n\nimport { Subject } from 'rxjs';\n\nimport { AbstractI18nService, AbstractNavigationService, App, noop, UtilsService } from '@wm/core';\nimport { WidgetRef } from '@wm/components';\nimport { VariablesService } from '@wm/variables';\n\nimport { FragmentMonitor } from '../util/fragment-monitor';\nimport { AppManagerService } from '../services/app.manager.service';\nimport { $invokeWatchers } from '@wm/core';\n\nexport const commonPartialWidgets = {};\n\nexport abstract class BasePartialComponent extends FragmentMonitor implements AfterViewInit, OnDestroy {\n    Widgets: any;\n    Variables: any;\n    Actions: any;\n    App: App;\n    injector: Injector;\n    partialName: string;\n    activePageName: string;\n    route: ActivatedRoute;\n    appManager: AppManagerService;\n    navigationService: AbstractNavigationService;\n    router: Router;\n    pageParams: any;\n    containerWidget: any;\n    i18nService: AbstractI18nService;\n    appLocale: any;\n\n    destroy$ = new Subject();\n    viewInit$ = new Subject();\n\n    abstract evalUserScript(prefabContext: any, appContext: any, utils: any);\n\n    abstract getVariables();\n\n    getContainerWidgetInjector() {\n        return this.containerWidget.inj || this.containerWidget.injector;\n    }\n\n    init() {\n\n        this.App = this.injector.get(App);\n        this.containerWidget = this.injector.get(WidgetRef);\n        this.i18nService = this.injector.get(AbstractI18nService);\n        if (this.getContainerWidgetInjector().view.component.registerFragment) {\n            this.getContainerWidgetInjector().view.component.registerFragment();\n        }\n\n        this.initUserScript();\n\n        this.registerWidgets();\n        this.initVariables();\n\n        this.activePageName = this.App.activePageName; // Todo: remove this\n        this.registerPageParams();\n\n        this.defineI18nProps();\n\n        this.viewInit$.subscribe(noop, noop, () => {\n            this.pageParams = this.containerWidget.partialParams;\n        });\n\n        super.init();\n    }\n\n    registerWidgets() {\n        if (this.partialName === 'Common') {\n            this.Widgets = commonPartialWidgets;\n        } else {\n            this.Widgets = Object.create(commonPartialWidgets);\n        }\n\n        this.containerWidget.Widgets = this.Widgets;\n    }\n\n    registerDestroyListener(fn: Function) {\n        this.destroy$.subscribe(noop, noop, () => fn());\n    }\n\n    initUserScript() {\n        try {\n            this.evalUserScript(this, this.App, this.injector.get(UtilsService));\n        } catch (e) {\n            console.error(`Error in evaluating partial (${this.partialName}) script\\n`, e);\n        }\n    }\n\n    initVariables() {\n        const variablesService = this.injector.get(VariablesService);\n\n        // get variables and actions instances for the page\n        const variableCollection = variablesService.register(this.partialName, this.getVariables(), this);\n\n        // create namespace for Variables nad Actions on page/partial, which inherits the Variables and Actions from App instance\n        this.Variables = Object.create(this.App.Variables);\n        this.Actions = Object.create(this.App.Actions);\n\n        this.containerWidget.Variables = this.Variables;\n        this.containerWidget.Actions = this.Actions;\n\n        // assign all the page variables to the pageInstance\n        Object.entries(variableCollection.Variables).forEach(([name, variable]) => this.Variables[name] = variable);\n        Object.entries(variableCollection.Actions).forEach(([name, action]) => this.Actions[name] = action);\n\n\n        this.viewInit$.subscribe(noop, noop, () => {\n            // TEMP: triggering watchers so variables watching over params are updated\n            $invokeWatchers(true, true);\n            variableCollection.callback(variableCollection.Variables).catch(noop);\n            variableCollection.callback(variableCollection.Actions);\n        });\n    }\n\n    registerPageParams() {\n        this.pageParams = this.containerWidget.partialParams;\n    }\n\n    defineI18nProps() {\n        this.appLocale = this.i18nService.getAppLocale();\n    }\n\n    invokeOnReady() {\n        this.onReady();\n        if (this.getContainerWidgetInjector().view.component.resolveFragment) {\n            this.getContainerWidgetInjector().view.component.resolveFragment();\n        }\n    }\n\n    ngAfterViewInit(): void {\n        setTimeout(() => {\n            this.viewInit$.complete();\n\n            this.fragmentsLoaded$.subscribe(noop, noop, () => this.invokeOnReady());\n\n        }, 100);\n    }\n\n    ngOnDestroy(): void {\n        this.destroy$.complete();\n    }\n\n    onReady() {\n    }\n}\n","import { AfterViewInit, Injector, OnDestroy } from '@angular/core';\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\n\nimport { Subject } from 'rxjs';\n\nimport {\n    AbstractI18nService,\n    AbstractNavigationService,\n    addClass,\n    App,\n    isMobileApp,\n    muteWatchers,\n    noop,\n    removeClass,\n    unMuteWatchers,\n    UtilsService\n} from '@wm/core';\nimport { commonPartialWidgets } from './base-partial.component';\n\n\nimport { VariablesService } from '@wm/variables';\nimport { AppManagerService } from '../services/app.manager.service';\nimport { FragmentMonitor } from '../util/fragment-monitor';\n\ndeclare const $;\n\nexport abstract class BasePageComponent extends FragmentMonitor implements AfterViewInit, OnDestroy {\n    Widgets: any;\n    Variables: any;\n    Actions: any;\n    App: App;\n    injector: Injector;\n    pageName: string;\n    activePageName: string;\n    route: ActivatedRoute;\n    appManager: AppManagerService;\n    navigationService: AbstractNavigationService;\n    router: Router;\n    pageParams: any;\n    showPageContent: boolean;\n    i18nService: AbstractI18nService;\n    appLocale: any;\n    startupVariablesLoaded = false;\n    pageTransitionCompleted = false;\n\n    destroy$ = new Subject();\n    viewInit$ = new Subject();\n\n    abstract evalUserScript(prefabContext: any, appContext: any, utils: any);\n    abstract getVariables();\n\n    init() {\n\n        muteWatchers();\n\n        this.App = this.injector.get(App);\n        this.route = this.injector.get(ActivatedRoute);\n        this.appManager = this.injector.get(AppManagerService);\n        this.navigationService = this.injector.get(AbstractNavigationService);\n        this.i18nService = this.injector.get(AbstractI18nService);\n        this.router = this.injector.get(Router);\n\n        this.initUserScript();\n\n        this.registerWidgets();\n        this.initVariables();\n\n        this.App.lastActivePageName = this.App.activePageName;\n        this.App.activePageName = this.pageName;\n        this.App.activePage = this;\n        this.activePageName = this.pageName; // Todo: remove this\n\n        this.registerPageParams();\n\n        this.defineI18nProps();\n\n        super.init();\n    }\n\n    registerWidgets() {\n        // common partial widgets should be accessible from page\n        this.Widgets = Object.create(commonPartialWidgets);\n\n        // expose current page widgets on app\n        (this.App as any).Widgets = Object.create(this.Widgets);\n    }\n\n    initUserScript() {\n        try {\n            this.evalUserScript(this, this.App, this.injector.get(UtilsService));\n        } catch (e) {\n            console.error(`Error in evaluating page (${this.pageName}) script\\n`, e);\n        }\n    }\n\n    registerPageParams() {\n        const subscription = this.route.queryParams.subscribe(params => this.pageParams = params);\n        this.registerDestroyListener(() => subscription.unsubscribe());\n    }\n\n    registerDestroyListener(fn: Function) {\n        this.destroy$.subscribe(noop, noop, () => fn());\n    }\n\n    defineI18nProps() {\n        this.appLocale = this.i18nService.getAppLocale();\n    }\n\n    initVariables() {\n        const variablesService = this.injector.get(VariablesService);\n\n        // get variables and actions instances for the page\n        const variableCollection = variablesService.register(this.pageName, this.getVariables(), this);\n\n        // create namespace for Variables nad Actions on page/partial, which inherits the Variables and Actions from App instance\n        this.Variables = Object.create(this.App.Variables);\n        this.Actions = Object.create(this.App.Actions);\n\n        // assign all the page variables to the pageInstance\n        Object.entries(variableCollection.Variables).forEach(([name, variable]) => this.Variables[name] = variable);\n        Object.entries(variableCollection.Actions).forEach(([name, action]) => this.Actions[name] = action);\n\n\n        const subscription = this.viewInit$.subscribe(noop, noop, () => {\n\n            if (!this.appManager.isAppVariablesFired()) {\n                variableCollection.callback(this.App.Variables).catch(noop).then(() => {\n                    this.appManager.notify('app-variables-data-loaded', {pageName: this.pageName});\n                });\n                variableCollection.callback(this.App.Actions);\n                this.appManager.appVariablesReady();\n                this.appManager.isAppVariablesFired(true);\n            }\n\n            variableCollection.callback(variableCollection.Variables)\n                .catch(noop)\n                .then(() => {\n                    this.appManager.notify('page-variables-data-loaded', {pageName: this.pageName});\n                    this.startupVariablesLoaded = true;\n                    // hide the loader only after the some setTimeout for smooth page load.\n                    setTimeout(() => {\n                        this.showPageContent = true;\n                    }, 100);\n                });\n            variableCollection.callback(variableCollection.Actions);\n\n            subscription.unsubscribe();\n        });\n    }\n\n    runPageTransition(transition: string): Promise<void> {\n        return new Promise(resolve => {\n            const $target = $('app-page-outlet:first');\n            if (transition) {\n                const onTransitionEnd = () => {\n                    if (resolve) {\n                        $target.off('animationend', onTransitionEnd);\n                        $target.removeClass(transition);\n                        $target.children().first().remove();\n                        resolve();\n                        resolve = null;\n                    }\n                };\n                transition = 'page-transition page-transition-' + transition;\n                $target.addClass(transition);\n                $target.on('animationend', onTransitionEnd);\n                // Wait for a maximum of 1 second for transition to end.\n                setTimeout(onTransitionEnd, 1000);\n            } else {\n                resolve();\n            }\n        });\n    }\n\n    invokeOnReady() {\n        this.onReady();\n        (this.App.onPageReady || noop)(this.pageName, this);\n        this.appManager.notify('pageReady', {'name' : this.pageName, instance: this});\n    }\n\n    ngAfterViewInit(): void {\n        const transition = this.navigationService.getPageTransition();\n        if (transition) {\n            const pageOutlet = $('app-page-outlet:first');\n            pageOutlet.prepend(pageOutlet.children().first().clone());\n        }\n        this.runPageTransition(transition).then(() => {\n            this.pageTransitionCompleted = true;\n            (this as any).compilePageContent = true;\n        });\n        setTimeout(() => {\n            unMuteWatchers();\n            this.viewInit$.complete();\n            if (isMobileApp()) {\n                this.onPageContentReady = () => {\n                    this.fragmentsLoaded$.subscribe(noop, noop, () => {\n                        this.invokeOnReady();\n                    });\n                    this.onPageContentReady = noop;\n                };\n            } else {\n                this.fragmentsLoaded$.subscribe(noop, noop, () => this.invokeOnReady());\n            }\n        }, 300);\n    }\n\n    ngOnDestroy(): void {\n        this.destroy$.complete();\n    }\n\n    onReady() {}\n\n    onBeforePageLeave() {}\n\n    onPageContentReady() {}\n}\n","import { AfterViewInit, Injector, OnDestroy } from '@angular/core';\nimport { Subject } from 'rxjs';\n\nimport { $watch, AbstractI18nService, App, isIE, noop, UtilsService, $invokeWatchers } from '@wm/core';\nimport { WidgetRef } from '@wm/components';\nimport { VariablesService } from '@wm/variables';\n\nimport { PrefabManagerService } from '../services/prefab-manager.service';\nimport {FragmentMonitor} from \"../util/fragment-monitor\";\n\ndeclare const _;\n\nexport abstract class BasePrefabComponent extends FragmentMonitor implements AfterViewInit, OnDestroy {\n    Widgets: any;\n    Variables: any;\n    Actions: any;\n    App: App;\n    injector: Injector;\n    containerWidget: any;\n    prefabMngr: PrefabManagerService;\n    displayName: string;\n    prefabName: string;\n    i18nService: AbstractI18nService;\n    appLocale: any;\n\n    destroy$ = new Subject();\n    viewInit$ = new Subject();\n\n    abstract evalUserScript(prefabContext: any, appContext: any, utils: any);\n    abstract getVariables();\n\n    getContainerWidgetInjector() {\n        return this.containerWidget.inj || this.containerWidget.injector;\n    }\n\n    init() {\n        this.App = this.injector.get(App);\n\n        this.containerWidget = this.injector.get(WidgetRef);\n        this.prefabMngr = this.injector.get(PrefabManagerService);\n        this.i18nService = this.injector.get(AbstractI18nService);\n        if (this.getContainerWidgetInjector().view.component.registerFragment) {\n            this.getContainerWidgetInjector().view.component.registerFragment()\n        }\n\n        this.initUserScript();\n\n        this.registerWidgets();\n        this.initVariables();\n        this.registerProps();\n        this.defineI18nProps();\n        super.init();\n    }\n\n    registerWidgets() {\n        this.Widgets = {};\n    }\n\n    initUserScript() {\n        try {\n            this.evalUserScript(this, this.App, this.injector.get(UtilsService));\n        } catch (e) {\n            console.error(`Error in evaluating prefab (${this.prefabName}) script\\n`, e);\n        }\n    }\n\n    registerChangeListeners() {\n        this.containerWidget.registerPropertyChangeListener(this.onPropertyChange);\n        this.containerWidget.registerStyleChangeListener(this.onPropertyChange);\n    }\n\n    registerDestroyListener(fn: Function) {\n        this.destroy$.subscribe(noop, noop, () => fn());\n    }\n\n    defineI18nProps() {\n        this.appLocale = this.i18nService.getPrefabLocaleBundle(this.prefabName);\n    }\n\n    registerProps() {\n        this.prefabMngr.getConfig(this.prefabName)\n            .then(config => {\n\n                if (config) {\n                    this.displayName = config.displayName;\n                    Object.entries((config.properties || {}))\n                        .forEach(([key, prop]: [string, any]) => {\n                            let expr;\n                            const value = _.trim(prop.value);\n\n                            if (_.startsWith(value, 'bind:')) {\n                                expr = value.replace('bind:', '');\n                            }\n\n                            Object.defineProperty(this, key, {\n                                get: () => this.containerWidget[key],\n                                set: nv => this.containerWidget.widget[key] = nv\n                            });\n\n                            if (expr) {\n                                this.registerDestroyListener(\n                                    $watch(expr, this, {}, nv => this.containerWidget.widget[key] = nv)\n                                );\n                            }\n                        });\n\n                    Object.entries((config.events || {}))\n                        .forEach(([key, prop]: [string, any]) => {\n                            this[key] = (...args) => {\n                                const eventName = key.substr(2).toLowerCase();\n                                this.containerWidget.invokeEventCallback(eventName, {$event: args[0], $data: args[1]});\n                            };\n                        });\n\n                    Object.entries((config.methods || {}))\n                        .forEach(([key, prop]: [string, any]) => {\n                            this.containerWidget[key] = (...args) => {\n                                try {\n                                    if (this[key]) {\n                                        return this[key].apply(this, args);\n                                    }\n                                } catch (e) {\n                                    console.warn(`error in executing prefab-${this.prefabName} method-${key}`);\n                                }\n                            };\n                        });\n                }\n                this.containerWidget.setProps(config);\n                // Reassigning the proxy handler for prefab inbound properties as we\n                // will get them only after the prefab config call.\n                if (isIE()) {\n                    this.containerWidget.widget = this.containerWidget.createProxy();\n                }\n            });\n    }\n\n    initVariables() {\n        const variablesService = this.injector.get(VariablesService);\n\n        // get variables and actions instances for the page\n        const variableCollection = variablesService.register(this.prefabName, this.getVariables(), this);\n\n        // create namespace for Variables nad Actions on page/partial, which inherits the Variables and Actions from App instance\n        this.Variables = {};\n        this.Actions = {};\n\n        // assign all the page variables to the pageInstance\n        Object.entries(variableCollection.Variables).forEach(([name, variable]) => this.Variables[name] = variable);\n        Object.entries(variableCollection.Actions).forEach(([name, action]) => this.Actions[name] = action);\n\n\n        this.viewInit$.subscribe(noop, noop, () => {\n            variableCollection.callback(variableCollection.Variables).catch(noop);\n            variableCollection.callback(variableCollection.Actions);\n        });\n    }\n\n    invokeOnReady() {\n        // triggering watchers so variables and propertiers watching over an expression are updated\n        $invokeWatchers(true, true);\n        this.onReady();\n        if (this.getContainerWidgetInjector().view.component.resolveFragment) {\n            this.getContainerWidgetInjector().view.component.resolveFragment();\n        }\n        this.containerWidget.invokeEventCallback('load');\n    }\n\n\n    ngAfterViewInit(): void {\n        this.viewInit$.complete();\n        this.registerChangeListeners();\n        setTimeout(() => {\n            this.fragmentsLoaded$.subscribe(noop, noop, () => this.invokeOnReady());\n        }, 100);\n    }\n\n    ngOnDestroy(): void {\n        this.containerWidget.invokeEventCallback('destroy');\n        this.destroy$.complete();\n    }\n\n    // user overrides this\n    onPropertyChange() {}\n\n    onReady() {}\n\n}\n","import { Directive, Input, TemplateRef, ViewContainerRef } from '@angular/core';\n\nimport { SecurityService } from '@wm/security';\n\ndeclare const _;\n\nenum USER_ROLE {\n    EVERYONE = 'Everyone',\n    ANONYMOUS = 'Anonymous',\n    AUTHENTICATED = 'Authenticated'\n}\n\n@Directive({\n    selector: '[accessroles]'\n})\nexport class AccessrolesDirective {\n\n    private processed = false;\n    private readonly isUserAuthenticated;\n    private readonly userRoles;\n    private securityEnabled: boolean;\n\n    constructor(\n        private templateRef: TemplateRef<any>,\n        private viewContainerRef: ViewContainerRef,\n        private securityService: SecurityService\n    ) {\n        const securityConfig = this.securityService.get();\n        this.securityEnabled = _.get(securityConfig, 'securityEnabled');\n        this.isUserAuthenticated = _.get(securityConfig, 'authenticated');\n        this.userRoles = _.get(securityConfig, 'userInfo.userRoles');\n    }\n\n    /**\n     * Returns array of roles from comma separated string of roles\n     * Handles encoded commas\n     * @param val\n     * @returns {any}\n     */\n    private getWidgetRolesArrayFromStr(val) {\n        const UNICODE_COMMA_REGEX = /&#44;/g;\n\n        val = val || '';\n        if (val === '') {\n            return [];\n        }\n        // replace the unicode equivalent of comma with comma\n        return _.split(val, ',').map(function (v) {\n            return _.trim(v).replace(UNICODE_COMMA_REGEX, ',');\n        });\n    }\n\n    /**\n     * Returns true if roles in first arrays is\n     * @param widgetRoles\n     * @param userRoles\n     * @returns {any}\n     */\n    private matchRoles(widgetRoles, userRoles) {\n        return widgetRoles.some(function (item) {\n            return _.includes(userRoles, item);\n        });\n    }\n\n    /**\n     * Decides whether the current logged in user has access to widget or not\n     * @param widgetRoles\n     * @param userRoles\n     * @returns {any}\n     */\n    private hasAccessToWidget(widgetRoles, userRoles) {\n        // access the widget when 'Everyone' is chosen\n        if (_.includes(widgetRoles, USER_ROLE.EVERYONE)) {\n            return true;\n        }\n\n        // access the widget when 'Anonymous' is chosen and user is not authenticated\n        if (_.includes(widgetRoles, USER_ROLE.ANONYMOUS) && !this.isUserAuthenticated) {\n            return true;\n        }\n\n        // access the widget when 'Only Authenticated Users' is chosen and user is authenticated\n        if (_.includes(widgetRoles, USER_ROLE.AUTHENTICATED) && this.isUserAuthenticated) {\n            return true;\n        }\n\n        // access the widget when widget role and logged in user role matches\n        return this.isUserAuthenticated && this.matchRoles(widgetRoles, userRoles);\n    }\n\n    @Input() set accessroles(roles) {\n        // flag to compute the directive only once\n        if (this.processed) {\n            return;\n        }\n\n        this.processed = true;\n        const widgetRoles = this.getWidgetRolesArrayFromStr(roles);\n        const isAccessible = !this.securityEnabled || this.hasAccessToWidget(widgetRoles, this.userRoles);\n        if (isAccessible) {\n            this.viewContainerRef.createEmbeddedView(this.templateRef);\n        } else {\n            this.viewContainerRef.clear();\n        }\n    }\n}\n","import { Attribute, ComponentFactoryResolver, Directive, ElementRef, Inject, Injector, Self, ViewContainerRef } from '@angular/core';\n\nimport { debounceTime, filter } from 'rxjs/operators';\n\nimport { App, $invokeWatchers, noop } from '@wm/core';\n\nimport { WidgetRef } from '@wm/components';\n\nimport { ComponentRefProvider, ComponentType, PartialRefProvider } from '../types/types';\n\ndeclare const _;\n\n@Directive({\n    selector: '[partialContainer]'\n})\nexport class PartialContainerDirective {\n\n    private contentInitialized = false;\n    private $target;\n\n    get name() {\n        return this.componentInstance.name;\n    }\n\n    async _renderPartial(nv) {\n        // destroy the existing partial\n        this.vcRef.clear();\n        // when the container-target is inside the component template, it can be queried after viewInit of the component.\n        $invokeWatchers(true);\n\n        const componentFactory = await this.partialRefProvider.getComponentFactoryRef(nv, ComponentType.PARTIAL);\n        if (componentFactory) {\n            const instanceRef = this.vcRef.createComponent(componentFactory, 0, this.inj);\n\n            if (!this.$target) {\n                this.$target = this.elRef.nativeElement.querySelector('[partial-container-target]') || this.elRef.nativeElement;\n            }\n\n            this.$target.innerHTML = '';\n            this.$target.appendChild(instanceRef.location.nativeElement);\n            this.contentInitialized = true;\n            setTimeout(() => this.onLoadSuccess(), 200);\n        }\n    }\n\n    renderPartial = _.debounce(this._renderPartial, 200, {leading: true});\n\n    onLoadSuccess() {\n        this.componentInstance.invokeEventCallback('load');\n\n        this.app.notify('partialLoaded');\n    }\n\n    constructor(\n        @Self() @Inject(WidgetRef) public componentInstance,\n        public vcRef: ViewContainerRef,\n        public elRef: ElementRef,\n        public inj: Injector,\n        private app: App,\n        @Attribute('content') _content: string,\n        private resolver: ComponentFactoryResolver,\n        private componentRefProvider: ComponentRefProvider,\n        private partialRefProvider: PartialRefProvider\n    ) {\n\n        componentInstance.registerPropertyChangeListener((key: string, nv: any, ov?: any) => {\n            if (key === 'content') {\n                if (componentInstance.$lazyLoad) {\n                    componentInstance.$lazyLoad = () => {\n                        this.renderPartial(nv);\n                        componentInstance.$lazyLoad = noop;\n                    };\n                } else {\n                    this.renderPartial(nv);\n                }\n            }\n        });\n\n        const subscription = componentInstance.params$\n            .pipe(\n                filter(() => this.contentInitialized),\n                debounceTime(200)\n            )\n            .subscribe(() => this.renderPartial(componentInstance.content));\n        // reload the partial content on partial param change\n        componentInstance.registerDestroyListener(() => subscription.unsubscribe());\n    }\n}\n","import { Component, Input } from '@angular/core';\n\n@Component({\n    selector: 'app-spinner',\n    template: `\n        <div class=\"app-spinner\" *ngIf=\"show\">\n            <div class=\"spinner-message\" aria-label=\"loading gif\">\n                <i class=\"spinner-image animated infinite fa fa-circle-o-notch fa-spin\"></i>\n                <div class=\"spinner-messages\">\n                    <p *ngFor=\"let value of spinnermessages\" [textContent]=\"value\"></p>\n                </div>\n            </div>\n        </div>\n    `\n})\nexport class AppSpinnerComponent {\n    @Input() show: boolean;\n    @Input() spinnermessages: Array<string>;\n    constructor() {}\n}\n","import { AfterViewInit, Component, ViewChild, ViewContainerRef, TemplateRef, OnDestroy } from '@angular/core';\n\nimport { Toast, ToastPackage, ToastrService } from 'ngx-toastr';\n\nimport { $watch, $appDigest } from '@wm/core';\n\ndeclare const _, $;\n\n@Component({\n    selector: '[custom-toaster-component]',\n    template: `\n        <div class=\"parent-custom-toast\"></div>\n        <ng-container #customToast></ng-container>\n        <ng-template #customToastTmpl>\n            <div wmContainer partialContainer content.bind=\"pagename\">\n                <div *ngFor=\"let param of params | keyvalue\" wmParam hidden\n                    [name]=\"param.key\" [value]=\"param.value\"></div>\n            </div>\n        </ng-template>`,\n    preserveWhitespaces: false\n})\nexport class CustomToasterComponent extends Toast implements AfterViewInit, OnDestroy {\n\n    @ViewChild('customToast', {read: ViewContainerRef}) customToastRef: ViewContainerRef;\n    @ViewChild('customToastTmpl') customToastTmpl: TemplateRef<any>;\n    pagename: any;\n    watchers: any = [];\n    params: any = {};\n\n    // constructor is only necessary when not using AoT\n    constructor(\n        protected toastrService: ToastrService,\n        public toastPackage: ToastPackage\n    ) {\n        super(toastrService, toastPackage);\n        this.pagename = this.message || '';\n        this.generateParams();\n    }\n\n    // Generate the params for partial page. If bound, watch the expression and set the value\n    generateParams() {\n        _.forEach((<any>this.options).partialParams, (param) => {\n            if (_.isString(param.value) && param.value.indexOf('bind:') === 0) {\n                this.watchers.push($watch(\n                    param.value.substr(5),\n                    (<any>this.options).context,\n                    {},\n                    nv => {\n                        this.params[param.name] = nv;\n                        $appDigest();\n                    }\n                ));\n            } else {\n                this.params[param.name] = param.value;\n            }\n        });\n    }\n\n    async generateDynamicComponent() {\n        const $targetLayout = $('.parent-custom-toast');\n\n        this.customToastRef.clear();\n\n        $targetLayout[0].appendChild(this.customToastRef.createEmbeddedView(this.customToastTmpl).rootNodes[0]);\n    }\n\n    ngAfterViewInit() {\n        this.generateDynamicComponent();\n    }\n\n    ngOnDestroy() {\n        _.forEach(this.watchers, watcher => watcher());\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\n\nimport { App, getWmProjectProperties } from '@wm/core';\nimport { SecurityService } from '@wm/security';\n\nimport { AppManagerService } from '../../services/app.manager.service';\n\n@Component({\n    selector: 'app-empty-page',\n    template: '<div></div>'\n})\nexport class EmptyPageComponent implements OnInit {\n\n    constructor(\n        private route: ActivatedRoute,\n        private securityService: SecurityService,\n        private router: Router,\n        private app: App,\n        private appManger: AppManagerService\n    ) {}\n\n    ngOnInit() {\n        if (this.app.isPrefabType) {\n            // there is only one route\n            this.router.navigate(['prefab-preview']);\n        } else  if (this.app.isApplicationType) {\n            this.securityService.getPageByLoggedInUser().then(page => {\n                this.router.navigate([page]);\n            });\n        } else {\n            this.router.navigate([getWmProjectProperties().homePage]);\n            this.appManger.postAppTypeInfo();\n        }\n    }\n}\n","import {\n    ComponentFactoryResolver,\n    Directive,\n    ElementRef,\n    Inject,\n    Injector,\n    Self,\n    ViewContainerRef\n} from '@angular/core';\n\nimport { WidgetRef } from '@wm/components';\n\nimport { PrefabManagerService } from '../services/prefab-manager.service';\nimport { ComponentRefProvider, ComponentType } from '../types/types';\n\n@Directive({\n    selector: '[wmPrefab][prefabname]'\n})\nexport class PrefabDirective {\n\n    constructor(\n        @Self() @Inject(WidgetRef) public componentInstance,\n        public vcRef: ViewContainerRef,\n        public elRef: ElementRef,\n        private prefabMngr: PrefabManagerService,\n        private resolver: ComponentFactoryResolver,\n        private injector: Injector,\n        private componentRefProvider: ComponentRefProvider\n    ) {\n        const prefabName = this.componentInstance.prefabName;\n\n        this.prefabMngr.loadDependencies(prefabName)\n            .then(async () => {\n                const componentFactory = await this.componentRefProvider.getComponentFactoryRef(prefabName, ComponentType.PREFAB);\n                if (componentFactory) {\n                    const instanceRef = this.vcRef.createComponent(componentFactory, 0, injector);\n                    this.elRef.nativeElement.appendChild(instanceRef.location.nativeElement);\n                }\n            });\n    }\n}\n","import { Injectable, Injector } from '@angular/core';\n\nimport {\n    AbstractDialogService,\n    AbstractHttpService,\n    AbstractI18nService,\n    AbstractSpinnerService,\n    AbstractToasterService,\n    EventNotifier,\n    FieldTypeService,\n    FieldWidgetService,\n    getWmProjectProperties,\n    isDefined,\n    isString,\n    UtilsService,\n    DynamicComponentRefProvider\n} from '@wm/core';\nimport { SecurityService } from '@wm/security';\n\ndeclare const _;\n\nconst injectorMap = {\n    DialogService: AbstractDialogService,\n    i18nService: AbstractI18nService,\n    SpinnerService: AbstractSpinnerService,\n    ToasterService: AbstractToasterService,\n    Utils: UtilsService,\n    FIELD_TYPE: FieldTypeService,\n    FIELD_WIDGET: FieldWidgetService,\n    DynamicComponentService: DynamicComponentRefProvider\n};\n\nconst enum PROJECT_TYPE {\n    APPLICATION = 'APPLICATION',\n    PREFAB = 'PREFAB',\n    TEMPLATE_BUNDLE = 'TEMPLATEBUNDLE'\n}\n\nconst noop = (...args) => {};\n\n// Wraps httpService to behave as angular 1.x $http service.\nconst getHttpDependency = function() {\n    const httpService = this.httpService;\n    const fn = function (key, options?) {\n        const args = Array.from(arguments).slice(1);\n        return Promise.resolve(httpService[key].apply(httpService, args));\n    };\n    const $http = function () {\n        return fn.apply(undefined, ['send', ...Array.from(arguments)]);\n    };\n    ['get', 'post', 'head', 'put', 'delete', 'jsonp', 'patch'].forEach(key => $http[key] = fn.bind(undefined, key));\n    return $http;\n};\n\n@Injectable()\nexport class AppRef {\n    Variables: any = {};\n    Actions: any = {};\n    onAppVariablesReady = noop;\n    onSessionTimeout = noop;\n    onPageReady = noop;\n    onBeforePageLeave = noop;\n    onBeforeServiceCall =  noop;\n    onServiceSuccess =  noop;\n    onServiceError =  noop;\n    dynamicComponentContainerRef = {};\n\n    projectName: string;\n    isPrefabType: boolean;\n    isApplicationType: boolean;\n    isTabletApplicationType: boolean;\n    isTemplateBundleType: boolean;\n\n    appLocale: any;\n\n    changeLocale = this.i18nService.setSelectedLocale.bind(this.i18nService);\n    getSelectedLocale = this.i18nService.getSelectedLocale.bind(this.i18nService);\n\n    private _eventNotifier = new EventNotifier();\n\n    landingPageName: string;\n\n    reload() {\n        window.location.reload();\n    }\n\n    constructor(\n        private inj: Injector,\n        private i18nService: AbstractI18nService,\n        private httpService: AbstractHttpService,\n        private securityService: SecurityService\n    ) {\n\n        const wmProjectProperties = getWmProjectProperties();\n\n        this.projectName = wmProjectProperties.name;\n        this.isPrefabType = wmProjectProperties.type === PROJECT_TYPE.PREFAB;\n        this.isApplicationType = wmProjectProperties.type === PROJECT_TYPE.APPLICATION;\n        this.isTemplateBundleType = wmProjectProperties.type === PROJECT_TYPE.TEMPLATE_BUNDLE;\n\n        this.httpService.registerOnSessionTimeout(this.on401.bind(this));\n\n        this.appLocale = this.i18nService.getAppLocale();\n        this.httpService.setLocale(this.appLocale);\n    }\n\n    public notify(eventName: string, ...data: Array<any>) {\n        this._eventNotifier.notify.apply(this._eventNotifier, arguments);\n    }\n\n    public getDependency(injToken) {\n        if (isString(injToken)) {\n            if (injToken === 'HttpService') {\n                return getHttpDependency.call(this);\n            }\n            let providerInstance = injectorMap[injToken] && this.inj.get(injectorMap[injToken]);\n            if (!providerInstance && this.inj['_providers']) {\n                this.inj['_providers'].forEach( e => {\n                    if (e && e.__proto__.constructor.toString().indexOf('function ' + injToken + '(') === 0) {\n                        providerInstance = this.inj.get(e.__proto__.constructor);\n                    }\n                });\n            }\n            return providerInstance;\n        }\n        return this.inj.get(injToken);\n    }\n\n    /**\n     * triggers the onSessionTimeout callback in app.js\n     */\n    on401() {\n        const userInfo = _.get(this.securityService.get(), 'userInfo');\n        // if a previous user exists, a session time out triggered\n        if (!_.isEmpty(userInfo)) {\n            this.onSessionTimeout();\n        }\n    }\n\n    public subscribe(eventName, callback: (data: any) => void): () => void {\n        return this._eventNotifier.subscribe(eventName, callback);\n    }\n\n    public notifyApp(template, type, title) {\n        const notificationAction = _.get(this, 'Actions.appNotification');\n        if (notificationAction) {\n            type = type || 'success';\n            notificationAction.invoke({\n                message: template,\n                title: isDefined(title) ? title : type.toUpperCase(),\n                class: type,\n                // If the type is error do not close the toastr\n                duration: type.toUpperCase() === 'ERROR' ? 0 : undefined\n            });\n        } else {\n            console.warn('The default Action \"appNotification\" doesn\\'t exist in the app.');\n        }\n    }\n}\n","import { Injectable } from '@angular/core';\n\nimport { ToastrService } from 'ngx-toastr';\n\nimport { AbstractToasterService, isDefined } from '@wm/core';\n\nimport { CustomToasterComponent } from '../components/custom-toaster.component';\n\ndeclare const _;\n\n@Injectable()\nexport class ToasterServiceImpl extends AbstractToasterService {\n\n    constructor(private toaster: ToastrService) {\n        super();\n    }\n\n    private _showToaster (type: string, title: string, desc: string, options?: any) {\n        // backward compatibility (in 9.x, 4th param is timeout value).\n        if (_.isNumber(options)) {\n            options = {timeOut: options};\n        }\n\n        options = options || {};\n        options.timeOut = isDefined(options.timeOut) ? options.timeOut : 0;\n        options.enableHtml = isDefined(options.enableHtml);\n        options.positionClass = options.positionClass || 'toast-bottom-right';\n        options.toastClass = 'toast';\n        // pop the toaster only if either title or description are defined\n        if (title || desc) {\n            // if the desc is an object, stringify it.\n            if (!options.bodyOutputType && _.isObject(desc)) {\n                desc = JSON.stringify(desc);\n            }\n            const fn = this.toaster[type];\n            if (fn) {\n                return fn.call(this.toaster, desc, title, options);\n            }\n        }\n    }\n\n    public success (title, desc) {\n        return this._showToaster('success', title, desc, {timeOut: 5000});\n    }\n\n    public error (title, desc) {\n        return this._showToaster('error', title, desc, {timeOut: 0});\n    }\n\n    public info (title, desc) {\n        return this._showToaster('info', title, desc, {timeOut: 0});\n    }\n\n    public warn (title, desc) {\n        return this._showToaster('warning', title, desc, {timeOut: 0});\n    }\n\n    public show (type, title, desc, options) {\n        return this._showToaster(type, title, desc, options);\n    }\n\n    public hide (toasterObj) {\n        // in studio just ignore the toasterObj and hide all the toasters\n        if (!toasterObj) {\n            this.toaster.clear();\n            return;\n        }\n        this.toaster.clear(toasterObj.toastId);\n    }\n\n    public showCustom(page, options) {\n        if (!page) {\n            return;\n        }\n        options = options || {};\n        options.toastComponent = CustomToasterComponent;\n        options.toastClass = 'custom-toaster';\n        options.timeOut = isDefined(options.timeOut) ? options.timeOut : 0;\n        options.enableHtml = isDefined(options.enableHtml);\n        options.positionClass = options.positionClass || 'toast-bottom-right';\n        options.toastClass = 'toast';\n        return this.toaster.show(page, '', options);\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { registerLocaleData } from '@angular/common';\n\nimport { BsLocaleService, defineLocale } from 'ngx-bootstrap';\n\nimport {\n    _WM_APP_PROJECT,\n    AbstractI18nService,\n    AppDefaults,\n    getSessionStorageItem,\n    getWmProjectProperties,\n    isMobile,\n    isMobileApp,\n    replace,\n    setCSS,\n    setSessionStorageItem\n} from '@wm/core';\nimport { CONSTANTS } from '@wm/variables';\n\ndeclare const _, moment;\n\nconst APP_LOCALE_ROOT_PATH = 'resources/i18n';\nconst RTL_LANGUAGE_CODES = ['ar', 'ar-001', 'ar-ae', 'ar-bh', 'ar-dz', 'ar-eg', 'ar-iq', 'ar-jo', 'ar-kw', 'ar-lb', 'ar-ly',\n    'ar-ma', 'ar-om', 'ar-qa', 'ar-sa', 'ar-sd', 'ar-sy', 'ar-tn', 'ar-ye', 'arc', 'bcc', 'bqi', 'ckb', 'dv', 'fa', 'glk',\n    'he', 'ku', 'mzn', 'pnb', 'ps', 'sd', 'ug', 'ur', 'yi'];\n\n@Injectable()\nexport class I18nServiceImpl extends AbstractI18nService {\n\n    private selectedLocale: string;\n    private defaultSupportedLocale = 'en';\n    private readonly appLocale: any;\n    private readonly prefabLocale: Map<String, any>;\n    private messages: any;\n    private _isAngularLocaleLoaded = false;\n\n    constructor(\n        private $http: HttpClient,\n        private bsLocaleService: BsLocaleService,\n        private appDefaults: AppDefaults\n    ) {\n        super();\n        this.appLocale = {};\n        this.prefabLocale = new Map();\n    }\n\n    private updateLocaleDirection() {\n        let direction: 'ltr' | 'rtl' = 'ltr';\n        if (RTL_LANGUAGE_CODES.includes(this.selectedLocale)) {\n            direction = 'rtl';\n        }\n\n        setCSS(document.body, 'direction', direction);\n    }\n\n    private init() {\n        this.messages = {};\n\n        Object.setPrototypeOf(this.appLocale, this.messages);\n    }\n\n    public getSelectedLocale(): string {\n        return this.selectedLocale;\n    }\n\n    public getDefaultSupportedLocale(): string {\n        return this.defaultSupportedLocale;\n    }\n\n    public getAppLocale(): any {\n        return this.appLocale;\n    }\n\n    public getPrefabLocaleBundle(prefabName: string): any {\n        if (!this.prefabLocale.has(prefabName)) {\n            this.prefabLocale.set(prefabName, Object.create(this.appLocale));\n        }\n        return this.prefabLocale.get(prefabName);\n    }\n\n    private extendPrefabMessages(messages: any): void {\n        if (!messages.prefabMessages) {\n            return;\n        }\n\n        Object.keys(messages.prefabMessages).forEach((prefabName: string) => {\n            let bundle = this.prefabLocale.get(prefabName);\n            if (!bundle) {\n                bundle = Object.create(this.appLocale);\n                this.prefabLocale.set(prefabName, bundle);\n            }\n            Object.assign(bundle, messages.prefabMessages[prefabName]);\n        });\n    }\n\n    private extendMessages(messages: any): void {\n        Object.assign(this.messages, messages);\n    }\n\n    private loadResource(path): Promise<any> {\n        return this.$http.get(path)\n            .toPromise()\n            .catch(() => {\n                console.warn(`error loading locale resource from ${path}`);\n                Promise.resolve({});\n            });\n    }\n\n    protected loadAppLocaleBundle() {\n        this.loadResource(`${APP_LOCALE_ROOT_PATH}/${this.selectedLocale}.json`)\n            .then(bundle => {\n                this.extendMessages(bundle.messages);\n                this.extendPrefabMessages(bundle);\n                this.appDefaults.setFormats(bundle.formats);\n            });\n    }\n\n    protected loadMomentLocaleBundle(momentLocale) {\n        const _cdnUrl = _WM_APP_PROJECT.cdnUrl || _WM_APP_PROJECT.ngDest;\n        if (this.selectedLocale === this.defaultSupportedLocale) {\n            moment.locale(this.defaultSupportedLocale);\n            return;\n        }\n        const path = _cdnUrl + `locales/moment/${momentLocale}.js`;\n        this.$http.get(path, {responseType: 'text'})\n            .toPromise()\n            .then((response: any) => {\n                const fn = new Function(response);\n\n                // Call the script. In script, moment defines the loaded locale\n                fn();\n                moment.locale(this.selectedLocale);\n\n                // For ngx bootstrap locale, get the config from script and apply locale\n                let _config;\n                fn.apply({moment: {defineLocale: (code, config) => _config = config}});\n                defineLocale(this.selectedLocale, _config);\n                this.bsLocaleService.use(this.getSelectedLocale() || this.defaultSupportedLocale);\n            });\n    }\n\n    protected loadAngularLocaleBundle(angLocale) {\n        return new Promise(resolve => {\n            const _cdnUrl = _WM_APP_PROJECT.cdnUrl || _WM_APP_PROJECT.ngDest;\n            if (this.selectedLocale === this.defaultSupportedLocale) {\n                resolve();\n                return;\n            }\n            const path = _cdnUrl + `locales/angular/${angLocale}.js`;\n\n            this.$http.get(path, {responseType: 'text'})\n                .toPromise()\n                .then((response: any) => {\n                    const module: any = {}, exports: any = {};\n                    module.exports = exports;\n                    const fn = new Function('module', 'exports', response);\n                    fn(module, exports);\n                    registerLocaleData(exports.default);\n                    this._isAngularLocaleLoaded = true;\n                    resolve();\n                }, () => resolve());\n        });\n    }\n\n    protected loadCalendarLocaleBundle(calendarLocale) {\n        const _cdnUrl = _WM_APP_PROJECT.cdnUrl || _WM_APP_PROJECT.ngDest;\n        let path: string;\n        if (calendarLocale) {\n            path = _cdnUrl + `locales/fullcalendar/${calendarLocale}.js`;\n        } else {\n            return Promise.resolve();\n        }\n\n        // return in case of mobile app or if selected locale is default supported locale.\n        if (isMobile() || isMobileApp() || this.selectedLocale === this.defaultSupportedLocale) {\n            return;\n        }\n\n        this.$http.get(path, {responseType: 'text'})\n            .toPromise()\n            .then((response: any) => {\n                const fn = new Function(response);\n                // Call the script. In script, moment defines the loaded locale\n                fn();\n            });\n    }\n\n    protected loadLocaleBundles(libLocale) {\n        if (libLocale.moment) {\n            this.loadMomentLocaleBundle(libLocale.moment);\n        }\n        if (libLocale.fullCalendar) {\n            this.loadCalendarLocaleBundle(libLocale.fullCalendar);\n        }\n        if (libLocale.angular) {\n            this.loadAppLocaleBundle();\n        }\n        return this.loadAngularLocaleBundle(libLocale.angular);\n    }\n\n    public setSelectedLocale(locale) {\n\n        // check if the event is propagated from the select or any such widget\n        if (_.isObject(locale)) {\n            locale = locale.datavalue;\n        }\n\n        const libLocale = getWmProjectProperties().supportedLanguages[locale];\n        const supportedLocale = Object.keys(getWmProjectProperties().supportedLanguages);\n\n        if (!_.includes(supportedLocale, locale)) {\n            return Promise.resolve();\n        }\n\n        if (!locale || locale === this.selectedLocale) {\n            return Promise.resolve();\n        }\n\n        setSessionStorageItem('selectedLocale', locale);\n\n        this.selectedLocale = locale;\n\n        // reset the localeData object\n        this.init();\n\n        // load the locale bundles of the selected locale\n        return this.loadLocaleBundles(libLocale).then(() => this.updateLocaleDirection());\n    }\n\n    public loadDefaultLocale() {\n        const _acceptLang = this.getAcceptedLanguages();\n        _acceptLang.push(getWmProjectProperties().defaultLanguage);\n\n        let _supportedLang = Object.keys(getWmProjectProperties().supportedLanguages) || [this.defaultSupportedLocale];\n\n        // check for the session storage to load any pre-requested locale\n        const _defaultLang = getSessionStorageItem('selectedLocale') || _.intersection(_acceptLang, _supportedLang)[0] || this.defaultSupportedLocale;\n\n        // if the supportedLocale is not available set it to defaultLocale\n        _supportedLang = _supportedLang || [_defaultLang];\n\n        const defaultLanguage = _defaultLang || _supportedLang[0];\n        return this.setSelectedLocale(defaultLanguage);\n    }\n\n    public getLocalizedMessage(message, ...args) {\n        return replace(this.appLocale[message], args);\n    }\n\n    // This function returns the accepted languages list\n    public getAcceptedLanguages() {\n        let languages;\n        if (CONSTANTS.hasCordova) {\n            languages = navigator.languages || [navigator.language];\n        } else {\n            languages = getWmProjectProperties().preferredLanguage || '';\n            /**\n             * Accept-Language Header will contain set of supported locale, so try splitting the string to proper locale set\n             * Ex: en,en-US;q=0.9,de;q=0.6,ar;q=0.2,hi\n             *\n             * Split the above into [en,en-us,de,ar,hi]\n             * @type {Array}\n             */\n            languages = languages.split(',').map(function(locale) {\n                return locale.split(';')[0];\n            });\n        }\n        return _.map(languages, _.toLower);\n    }\n\n    public isAngularLocaleLoaded() {\n        return this._isAngularLocaleLoaded;\n    }\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { Subject } from 'rxjs';\n\nimport { AbstractSpinnerService } from '@wm/core';\n\ndeclare const _, $;\n\nconst spinnerTemplate = `<div class=\"app-spinner\">\n                            <div class=\"spinner-message\" aria-label=\"loading gif\">\n                                <i class=\"spinner-image animated infinite fa fa-circle-o-notch fa-spin\"></i>\n                                <div class=\"spinner-messages\">\n                                    <p class=\"spinner-messages-container\"></p>\n                               </div>\n                            </div>\n                         </div>`;\n\n@Injectable()\nexport class SpinnerServiceImpl extends AbstractSpinnerService {\n    spinnerId = 0;\n    messageSource = new Subject();\n    messagesByContext = {};\n\n    constructor() {\n        super();\n    }\n\n    /**\n     * returns the message source subject\n     * @returns {Subject<any>}\n     */\n    getMessageSource() {\n        return this.messageSource;\n    }\n\n    /**\n     * show spinner on a container element\n     */\n    showContextSpinner(ctx: string, message: string, id: string) {\n        const ctxMarkup = $('[name=\"' + ctx + '\"]');\n        this.messagesByContext[ctx] = this.messagesByContext[ctx] || {};\n        // If the spinner already exists on the context\n        // then just append the message to the existing spinner message\n        // else add a new spinner\n        if (Object.keys(this.messagesByContext[ctx]).length !== 0 ) {\n            this.messagesByContext[ctx][id] = message;\n            this.messagesByContext[ctx]['finalMessage'] = this.messagesByContext[ctx]['finalMessage'] + ' ' + this.messagesByContext[ctx][id];\n            ctxMarkup.find('.spinner-messages-container').html(this.messagesByContext[ctx]['finalMessage']);\n        } else {\n            const ctxSpinnerTemp = $(spinnerTemplate);\n            this.messagesByContext[ctx][id] = message;\n            this.messagesByContext[ctx]['finalMessage'] = this.messagesByContext[ctx][id];\n            ctxSpinnerTemp.find('.spinner-messages-container').html(this.messagesByContext[ctx]['finalMessage']);\n            ctxMarkup.prepend(ctxSpinnerTemp);\n        }\n        return id;\n    }\n\n    /**\n     * show the app spinner with provided message\n     * @param msg\n     * @returns {string}\n     */\n    showAppSpinner(msg, id) {\n        const ctx = 'page';\n        this.messagesByContext[ctx] = this.messagesByContext[ctx] || {};\n        this.messagesByContext[ctx][id] = msg;\n\n        this.messageSource.next({\n            show: true,\n            message: msg,\n            messages: _.values(this.messagesByContext[ctx])\n        });\n    }\n\n    /**\n     * hides the spinner on a particular container(context)\n     * @param ctx\n     * @param id\n     */\n    hideContextSpinner(ctx, id) {\n        delete this.messagesByContext[ctx][id];\n        if (Object.keys(this.messagesByContext[ctx]).length === 1) {\n            this.messagesByContext[ctx] = {};\n        }\n        const ctxMarkup = $('[name=\"' + ctx + '\"]');\n        ctxMarkup.find('.app-spinner').remove();\n    }\n\n    /**\n     * show spinner\n     * @param message\n     * @param id\n     * @param spinnerClass\n     * @param spinnerContext\n     * @param variableScopeId\n     * @returns {any}\n     */\n    show(message, id?, spinnerClass?, spinnerContext?, variableScopeId?) {\n        id      = id || ++this.spinnerId;\n        // if spinnerContext is passed, then append the spinner to the element(default method for variable calls).\n        if (spinnerContext && spinnerContext !== 'page') {\n            // return after the compiled spinner is appended to the element reference\n            return this.showContextSpinner(spinnerContext, message, id);\n        }\n\n        this.showAppSpinner(message, id);\n        return id;\n    }\n\n    /**\n     * hide the spinner\n     * @param spinnerId\n     */\n    hide(id) {\n        // find the spinner context of the id from the messagesByContext\n        const ctx = _.findKey(this.messagesByContext, function (obj) {\n            return _.includes(_.keys(obj), id);\n        }) || 'page';\n\n        // if spinnerContext exists just remove the spinner from the reference and destroy the scope associated.\n        if (ctx !== 'page') {\n            this.hideContextSpinner(ctx, id);\n            return;\n        }\n\n        if (id) {\n            delete this.messagesByContext[ctx][id];\n            const messages = _.values(this.messagesByContext[ctx]);\n            const pageSpinnerCount = Object.keys(this.messagesByContext[ctx]).length;\n            this.messageSource.next({\n                show: messages.length ? true : false,\n                messages: _.values(this.messagesByContext[ctx])\n            });\n            // If a page spinner has id and no messages left to display then remove that spinner.\n            if (pageSpinnerCount === 0) {\n                $('.app-spinner').remove();\n            }\n        } else {\n            this.messagesByContext[ctx] = {};\n        }\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { NavigationStart, Router } from '@angular/router';\n\nimport { App, NavigationOptions, AbstractNavigationService } from '@wm/core';\nimport { CONSTANTS } from '@wm/variables';\n\ndeclare const _, $;\n\nconst parentSelector = 'body:first >app-root:last';\n\n@Injectable()\nexport class NavigationServiceImpl implements AbstractNavigationService {\n    private history = new History();\n    private transition: string;\n    private isPageAddedToHistory = false;\n\n    constructor(private app: App, private router: Router) {\n        this.router.events.subscribe(event => {\n            if (event instanceof NavigationStart) {\n                const url = event.url;\n                const urlParams = {};\n                let pageName;\n                if (!this.isPageAddedToHistory) {\n                    this.isPageAddedToHistory = false;\n                    if (url.indexOf('?') > 0) {\n                        url.substr(url.indexOf('?') + 1)\n                            .split('&')\n                            .forEach(s => {\n                                const splits = s.split('=');\n                                urlParams[splits[0]] = splits[1];\n                            });\n                        pageName = url.substr(0, url.indexOf('?'));\n                    } else {\n                        pageName = url;\n                    }\n                    if (pageName[0] === '/') {\n                        pageName = pageName.substr(1);\n                    }\n                    if (pageName) {\n                        /*\n                         * Commenting this code, one client project has Home_Page configured as Login Page.\n                         * So redirection to Home_Page post login is failing\n                         // if login page is being loaded and user is logged in, cancel that.\n                            if ($rs.isApplicationType) {\n                                stopLoginPagePostLogin($p);\n                            }\n                         */\n                        delete urlParams['name'];\n\n                        this.history.push(new PageInfo(pageName, urlParams, this.transition));\n                    }\n                }\n            }\n        });\n    }\n\n    public getPageTransition() {\n        if (_.isEmpty(this.transition) || _.isEqual('none', this.transition)) {\n            return null;\n        }\n        return this.transition;\n    }\n\n    /**\n     * Navigates to particular page\n     * @param pageName\n     * @param options\n     */\n    public goToPage(pageName: string, options: NavigationOptions) {\n        this.transition = options.transition || '';\n        // page is added to stack only when currentPage is available.\n        if (this.history.getCurrentPage()) {\n            this.isPageAddedToHistory = true;\n        }\n        this.history.push( new PageInfo(pageName, options.urlParams, this.transition));\n        if (CONSTANTS.isWaveLens) {\n            const location = window['location'];\n            const strQueryParams = _.map(options.urlParams || [], (value, key) => key + '=' + value);\n\n            const strQuery = (strQueryParams.length > 0 ? '?' + strQueryParams.join('&') : '');\n\n            location.href = location.origin\n                + location.pathname\n                + '#/' + pageName\n                + strQuery;\n            return;\n        }\n        return this.router.navigate([`/${pageName}`], { queryParams: options.urlParams});\n    }\n\n    /**\n     * Navigates to last visited page.\n     */\n    public goToPrevious() {\n        if (this.history.getPagesCount()) {\n            this.transition = this.history.getCurrentPage().transition;\n            if (!_.isEmpty(this.transition)) {\n                this.transition += '-exit';\n            }\n            this.history.pop();\n            this.isPageAddedToHistory = true;\n            window.history.back();\n        }\n    }\n\n    /** Todo[Shubham] Need to handle gotoElement in other partials\n     * Navigates to particular view\n     * @param viewName\n     * @param options\n     * @param variable\n     */\n    public goToView(viewName: string, options: NavigationOptions, variable: any) {\n        options = options || {};\n        const pageName = options.pageName;\n        const transition = options.transition || '';\n        const $event = options.$event;\n        const activePage = this.app.activePage;\n        const prefabName = variable && variable._context && variable._context.prefabName;\n\n        // Check if app is Prefab\n        if (this.app.isPrefabType) {\n            this.goToElementView($(parentSelector).find('[name=\"' + viewName + '\"]'), viewName, pageName, variable);\n        } else {\n            // checking if the element is present in the page or not, if no show an error toaster\n            // if yes check if it is inside a partial/prefab in the page and then highlight the respective element\n            // else goto the page in which the element exists and highlight the element\n            if (pageName !== activePage.activePageName && !prefabName) {\n                if (this.isPartialWithNameExists(pageName)) {\n                    this.goToElementView($('[partialcontainer][content=\"' + pageName + '\"]').find('[name=\"' + viewName + '\"]'), viewName, pageName, variable);\n                } else {\n                    // Todo[Shubham]: Make an API call to get all pages and check if the page name\n                    //  is a page and then do this call else show an error as:\n                    //  this.app.notifyApp(CONSTANTS.WIDGET_DOESNT_EXIST, 'error');\n                    this.goToPage(pageName, {\n                        viewName: viewName,\n                        $event: $event,\n                        transition: transition,\n                        urlParams: options.urlParams\n                    });\n                    // subscribe to an event named pageReady which notifies this subscriber\n                    // when all widgets in page are loaded i.e when page is ready\n                    const pageReadySubscriber = this.app.subscribe('pageReady', (page) => {\n                        this.goToElementView($(parentSelector).find('[name=\"' + viewName + '\"]'), viewName, pageName, variable);\n                        pageReadySubscriber();\n                    });\n                }\n            } else if (prefabName && this.isPrefabWithNameExists(prefabName)) {\n                this.goToElementView($('[prefabName=\"' + prefabName + '\"]').find('[name=\"' + viewName + '\"]'), viewName, pageName, variable);\n            } else if (!pageName || pageName === activePage.activePageName) {\n                this.goToElementView($(parentSelector).find('[name=\"' + viewName + '\"]'), viewName, pageName, variable);\n            } else {\n                this.app.notifyApp(CONSTANTS.WIDGET_DOESNT_EXIST, 'error');\n            }\n        }\n    }\n\n    /*\n     * navigates the user to a view element with given name\n     * if the element not found in the compiled markup, the same is searched in the available dialogs in the page\n     */\n    private goToElementView(viewElement, viewName: string, pageName: string, variable: any) {\n        let $el, parentDialog;\n        const activePage = this.app.activePage;\n        if (viewElement.length) {\n            if (!this.app.isPrefabType && pageName === activePage.activePageName) {\n                viewElement = this.getViewElementInActivePage(viewElement);\n            }\n\n            $el = viewElement[0].widget;\n            switch ($el.widgetType) {\n                case 'wm-accordionpane':\n                    this.showAncestors(viewElement, variable);\n                    $el.expand();\n                    break;\n                case 'wm-tabpane':\n                    this.showAncestors(viewElement, variable);\n                    $el.select();\n                    break;\n                case 'wm-segment-content':\n                    this.showAncestors(viewElement, variable);\n                    $el.navigate();\n                    break;\n                case 'wm-panel':\n                    /* flip the active flag */\n                    $el.expanded = true;\n                    break;\n            }\n        } else {\n            parentDialog = this.showAncestorDialog(viewName);\n            setTimeout(() => {\n                if (parentDialog) {\n                    this.goToElementView($('[name=\"' + viewName + '\"]'), viewName, pageName, variable);\n                }\n            });\n        }\n    }\n\n    /* If page name is equal to active pageName, this function returns the element in the page.\n     The element in the partial page is not selected.*/\n    private getViewElementInActivePage($el) {\n        let selector;\n        if ($el.length > 1) {\n            selector = _.filter($el, (childSelector) => {\n                if (_.isEmpty($(childSelector).closest('[data-role = \"partial\"]')) && _.isEmpty($(childSelector).closest('[wmprefabcontainer]'))) {\n                    return childSelector;\n                }\n            });\n            if (selector) {\n                $el = $(selector);\n            }\n        }\n        return $el;\n    }\n\n    /**\n     * checks if the pagecontainer has the pageName.\n     */\n    private isPartialWithNameExists(name: string) {\n        return $('[partialcontainer][content=\"' + name + '\"]').length;\n    }\n\n    /**\n     * checks if the pagecontainer has the prefab.\n     */\n    private isPrefabWithNameExists(prefabName: string) {\n        return $('[prefabName=\"' + prefabName + '\"]').length;\n    }\n\n    /*\n     * shows all the parent container view elements for a given view element\n     */\n    private showAncestors(element, variable) {\n        const ancestorSearchQuery = '[wm-navigable-element=\"true\"]';\n\n        element\n            .parents(ancestorSearchQuery)\n            .toArray()\n            .reverse()\n            .forEach((parent) => {\n                const $el = parent.widget;\n                switch ($el.widgetType) {\n                    case 'wm-accordionpane':\n                        $el.expand();\n                        break;\n                    case 'wm-tabpane':\n                        $el.select();\n                        break;\n                    case 'wm-segment-content':\n                        $el.navigate();\n                        break;\n                    case 'wm-panel':\n                        /* flip the active flag */\n                        $el.expanded = true;\n                        break;\n                }\n            });\n    }\n\n\n\n    /*\n     * searches for a given view element inside the available dialogs in current page\n     * if found, the dialog is displayed, the dialog id is returned.\n     */\n    private showAncestorDialog(viewName: string) {\n        let dialogId;\n        $('app-root [dialogtype]')\n            .each(function () {\n                const dialog = $(this);\n                if ($(dialog.html()).find('[name=\"' + viewName + '\"]').length) {\n                    dialogId = dialog.attr('name');\n                    return false;\n                }\n            });\n        return dialogId;\n    }\n}\n\nclass PageInfo {\n\n    constructor(public name, public urlParams?, public transition?) {\n        this.transition = _.isEmpty(this.transition) ? null : this.transition;\n    }\n\n    public isEqual(page1: PageInfo) {\n        return page1 && page1.name === this.name && _.isEqual(page1.urlParams, this.urlParams);\n    }\n}\n\nclass History {\n    private stack: Array<PageInfo> = [];\n    private currentPage: PageInfo;\n\n    public getCurrentPage() {\n        return this.currentPage;\n    }\n\n    public getPagesCount() {\n        return this.stack.length;\n    }\n\n    public isLastVisitedPage(page: PageInfo) {\n        return this.getLastPage().isEqual(page);\n    }\n\n    public push(pageInfo: PageInfo) {\n        if (this.currentPage) {\n            this.stack.push(this.currentPage);\n        }\n        this.currentPage = pageInfo;\n    }\n\n    public pop() {\n        this.currentPage = this.stack.pop();\n        return this.currentPage;\n    }\n\n    public getLastPage() {\n        return this.stack.length > 0 ? this.stack[this.stack.length - 1] : undefined;\n    }\n}\n","import { Injectable } from '@angular/core';\n\nimport { AppDefaults } from '@wm/core';\n\ndeclare const _;\n\n@Injectable()\nexport class AppDefaultsService implements AppDefaults {\n\n    constructor() {\n    }\n\n    dateFormat: string;\n    timeFormat: string;\n    dateTimeFormat: string;\n\n    setFormats(formats: any) {\n        const dateFormat = formats.date;\n        const timeFormat = formats.time;\n        const dateTimeFormat = (dateFormat && timeFormat) ? dateFormat + ' ' + timeFormat : undefined;\n\n        this.dateFormat = dateFormat;\n        this.timeFormat = timeFormat;\n        this.dateTimeFormat = dateTimeFormat;\n    }\n}","import { ActivatedRouteSnapshot, CanActivate } from '@angular/router';\nimport { Injectable } from '@angular/core';\n\nimport { SecurityService } from '@wm/security';\n\nimport { AppManagerService } from '../services/app.manager.service';\n\nlet securityConfigLoaded = false;\n\n@Injectable()\nexport class AuthGuard implements CanActivate {\n\n    constructor(private securityService: SecurityService, private appManager: AppManagerService) {}\n\n    loadSecurityConfig(): Promise<boolean> {\n        if (securityConfigLoaded) {\n            return Promise.resolve(true);\n        }\n\n        return this.appManager.loadSecurityConfig().then(() => securityConfigLoaded = true);\n    }\n\n    isAuthenticated(): Promise<any> {\n        return this.loadSecurityConfig()\n            .then(() => {\n                return new Promise((resolve, reject) => {\n                    this.securityService.isAuthenticated(resolve, reject);\n                });\n            });\n    }\n\n    canActivate(route: ActivatedRouteSnapshot): Promise<any> {\n        return this.isAuthenticated()\n            .then(isLoggedIn => {\n                if (isLoggedIn) {\n                    return Promise.resolve(true);\n                }\n\n                this.appManager.handle401(route.routeConfig.path);\n\n                return Promise.resolve(false);\n            });\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate } from '@angular/router';\n\nimport { AbstractToasterService, App } from '@wm/core';\nimport { SecurityService } from '@wm/security';\n\nimport { AuthGuard } from './auth.guard';\nimport { AppManagerService } from '../services/app.manager.service';\n\ndeclare const _: any;\n\n@Injectable()\nexport class RoleGuard implements CanActivate {\n\n    constructor(\n        private securityService: SecurityService,\n        private authGuard: AuthGuard,\n        private toasterService: AbstractToasterService,\n        private app: App,\n        private appManager: AppManagerService\n    ) {}\n\n    canActivate(route: ActivatedRouteSnapshot): Promise<boolean> {\n        const allowedRoles = route.data.allowedRoles;\n\n        return this.authGuard.isAuthenticated()\n            .then((isLoggedIn: boolean) => {\n                if (isLoggedIn) {\n                    const userRoles = this.securityService.get().userInfo.userRoles;\n                    const hasAccess = _.intersection(allowedRoles, userRoles).length > 0;\n\n                    if (hasAccess) {\n                        return Promise.resolve(true);\n                    }\n\n                    // current loggedin user doesn't have access to the page that the user is trying to view\n                    this.appManager.notifyApp(\n                        this.app.appLocale.LABEL_ACCESS_DENIED || 'Access Denied',\n                        'error'\n                    );\n\n                    return Promise.resolve(false);\n\n                } else {\n                    // redirect to Login\n                    this.appManager.handle401(route.routeConfig.path);\n\n                    return Promise.resolve(false);\n                }\n            });\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate } from '@angular/router';\n\nimport { App } from '@wm/core';\nimport { AppManagerService } from '../services/app.manager.service';\n\ndeclare const _: any;\n\n@Injectable()\nexport class PageNotFoundGaurd implements CanActivate {\n\n    constructor(\n        private app: App,\n        private appManager: AppManagerService\n    ) {}\n\n    canActivate(route: ActivatedRouteSnapshot): Promise<boolean> {\n        this.appManager.notifyApp(\n            this.app.appLocale.MESSAGE_PAGE_NOT_FOUND || 'The page you are trying to reach is not available',\n            'error'\n        );\n        return Promise.resolve(false);\n    }\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { Resolve } from '@angular/router';\n\nimport { App, UtilsService } from '@wm/core';\n\nimport { AppJSProvider } from '../types/types';\n\nlet appJsLoaded = false;\n\n@Injectable()\nexport class AppJSResolve implements Resolve<any> {\n\n    constructor(\n        private inj: Injector,\n        private app: App,\n        private utilService: UtilsService,\n        private appJsProvider: AppJSProvider\n    ) {}\n\n    async resolve() {\n        if (appJsLoaded) {\n            return true;\n        }\n\n        try {\n            // execute app.js\n            const appScriptFn = await this.appJsProvider.getAppScriptFn();\n            appScriptFn(this.app, this.utilService, this.inj);\n        } catch (e) {\n            console.warn('Error in executing app.js', e);\n        }\n\n        appJsLoaded = true;\n\n        return true;\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Resolve } from '@angular/router';\n\nimport { AbstractI18nService } from '@wm/core';\n\n@Injectable()\nexport class I18nResolve implements Resolve<any> {\n\n    constructor(private i18nService: AbstractI18nService) {}\n\n    resolve() {\n        return this.i18nService.loadDefaultLocale();\n    }\n}\n","import { Compiler, Injectable, Injector, ChangeDetectorRef, InjectionToken, KeyValueDiffers, Pipe } from '@angular/core';\nimport {\n    AsyncPipe,\n    UpperCasePipe,\n    LowerCasePipe,\n    JsonPipe,\n    SlicePipe,\n    DecimalPipe,\n    PercentPipe,\n    TitleCasePipe,\n    CurrencyPipe,\n    DatePipe,\n    I18nPluralPipe,\n    I18nSelectPipe,\n    KeyValuePipe,\n    NgLocalization\n} from '@angular/common'\nimport {\n    SuffixPipe,\n    ToDatePipe,\n    FileIconClassPipe,\n    FileExtensionFromMimePipe,\n    FilterPipe,\n    FileSizePipe,\n    ToNumberPipe,\n    ToCurrencyPipe,\n    PrefixPipe,\n    TimeFromNowPipe,\n    NumberToStringPipe,\n    StateClassPipe,\n    StringToNumberPipe\n} from '@wm/components';\nimport { getSessionStorageItem } from '@wm/core';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class PipeProvider {\n    _pipeMeta;\n    _locale = getSessionStorageItem('selectedLocale') || 'en';\n    preparePipeMeta = (\n        reference: Pipe,\n        name: string,\n        pure: boolean,\n        diDeps = []\n    ) => ({\n        type: { reference, diDeps },\n        name,\n        pure\n    })\n    _pipeData = [\n        // TODO | NEED TO BE TESTED\n        this.preparePipeMeta(AsyncPipe, 'async', false, [ChangeDetectorRef]),\n        this.preparePipeMeta(SlicePipe, 'slice', false),\n        this.preparePipeMeta(PercentPipe, 'percent', true, [this._locale]),\n        this.preparePipeMeta(I18nPluralPipe, 'i18nPlural', true, [\n            NgLocalization\n        ]),\n        this.preparePipeMeta(I18nSelectPipe, 'i18nSelect', true),\n        this.preparePipeMeta(KeyValuePipe, 'keyvalue', false, [\n            KeyValueDiffers\n        ]),\n        this.preparePipeMeta(FileIconClassPipe, 'fileIconClass', true),\n        this.preparePipeMeta(\n            FileExtensionFromMimePipe,\n            'fileExtensionFromMime',\n            true\n        ),\n        this.preparePipeMeta(StateClassPipe, 'stateClass', true),\n        this.preparePipeMeta(FileSizePipe, 'filesize', true),\n        // TESTED\n        this.preparePipeMeta(FilterPipe, 'filter', true),\n        this.preparePipeMeta(UpperCasePipe, 'uppercase', true),\n        this.preparePipeMeta(LowerCasePipe, 'lowercase', true),\n        this.preparePipeMeta(JsonPipe, 'json', false),\n        this.preparePipeMeta(DecimalPipe, 'number', true, [this._locale]),\n        this.preparePipeMeta(TitleCasePipe, 'titlecase', true),\n        this.preparePipeMeta(CurrencyPipe, 'currency', true, [this._locale]),\n        this.preparePipeMeta(DatePipe, 'date', true, [this._locale]),\n        this.preparePipeMeta(ToDatePipe, 'toDate', true, [\n            new DatePipe(this._locale)\n        ]),\n        this.preparePipeMeta(ToNumberPipe, 'toNumber', true, [\n            new DecimalPipe(this._locale)\n        ]),\n        this.preparePipeMeta(ToCurrencyPipe, 'toCurrency', true, [\n            new DecimalPipe(this._locale)\n        ]),\n        this.preparePipeMeta(PrefixPipe, 'prefix', true),\n        this.preparePipeMeta(SuffixPipe, 'suffix', true),\n        this.preparePipeMeta(TimeFromNowPipe, 'timeFromNow', true),\n        this.preparePipeMeta(NumberToStringPipe, 'numberToString', true, [\n            new DecimalPipe(this._locale)\n        ]),\n        this.preparePipeMeta(StringToNumberPipe, 'stringToNumber', true)\n    ];\n\n    unknownPipe(name) {\n        throw Error(`The pipe '${name}' could not be found`);\n    }\n\n    constructor(private compiler: Compiler, private injector: Injector) {\n        this._pipeMeta = new Map();\n        this._pipeData.forEach(v => {\n            this._pipeMeta.set(v.name, v);\n        });\n    }\n\n    meta(name) {\n        const meta = this._pipeMeta.get(name);\n        if (!meta) {\n            this.unknownPipe(name);\n        }\n        return meta;\n    }\n\n    getPipeNameVsIsPureMap() {\n        const _map = new Map();\n        this._pipeMeta.forEach((v, k) => {\n            _map.set(k, v.pure);\n        });\n        return _map;\n    }\n\n    resolveDep(dep) {\n        return this.injector.get(dep.token.identifier.reference);\n    }\n\n    getInstance(name) {\n        const {\n            type: { reference: ref, diDeps: deps }\n        } = this.meta(name);\n        if (!ref) {\n            this.unknownPipe(name);\n        }\n\n        if (!deps.length) {\n            return new ref();\n        } else {\n            const args = [];\n            for (const dep of deps) {\n                args.push(dep);\n            }\n            return new ref(...args);\n        }\n    }\n}\n","import { ApplicationRef, Component, DoCheck, ElementRef, NgZone, ViewEncapsulation, ViewChild, ViewContainerRef, AfterViewInit } from '@angular/core';\nimport { NavigationCancel, NavigationEnd, NavigationError, NavigationStart, Router } from '@angular/router';\n\nimport { setTheme } from 'ngx-bootstrap';\n\nimport { $invokeWatchers, AbstractDialogService, AbstractSpinnerService, getWmProjectProperties, hasCordova, setAppRef, setNgZone, setPipeProvider, App, addClass, removeClass } from '@wm/core';\nimport { OAuthService } from '@wm/oAuth';\nimport { PipeProvider } from '../../services/pipe-provider.service';\n\ninterface SPINNER {\n    show: boolean;\n    messages: Array<string>;\n}\n\n@Component({\n    selector: 'app-root',\n    templateUrl: './app.component.html',\n    encapsulation: ViewEncapsulation.None\n})\nexport class AppComponent implements DoCheck, AfterViewInit {\n    public startApp = false;\n    public isApplicationType = false;\n\n    @ViewChild('dynamicComponent', {read: ViewContainerRef}) dynamicComponentContainerRef: ViewContainerRef;\n\n    spinner: SPINNER = {show: false, messages: []};\n    constructor(\n        _pipeProvider: PipeProvider,\n        _appRef: ApplicationRef,\n        private elRef: ElementRef,\n        private oAuthService: OAuthService,\n        private dialogService: AbstractDialogService,\n        private spinnerService: AbstractSpinnerService,\n        ngZone: NgZone,\n        private router: Router,\n        private app: App\n    ) {\n        setPipeProvider(_pipeProvider);\n        setNgZone(ngZone);\n        setAppRef(_appRef);\n\n        this.isApplicationType = getWmProjectProperties().type === 'APPLICATION';\n\n        // subscribe to OAuth changes\n        oAuthService.getOAuthProvidersAsObservable().subscribe((providers: any) => {\n            this.providersConfig = providers;\n            if (providers.length) {\n                this.showOAuthDialog();\n            } else {\n                this.closeOAuthDialog();\n            }\n        });\n\n        // Subscribe to the message source to show/hide app spinner\n        this.spinnerService.getMessageSource().asObservable().subscribe((data: any) => {\n            // setTimeout is to avoid 'ExpressionChangedAfterItHasBeenCheckedError'\n            setTimeout(() => {\n                this.spinner.show = data.show;\n                this.spinner.messages = data.messages;\n            });\n        });\n\n        // set theme to bs3 on ngx-bootstrap. This avoids runtime calculation to determine bs theme. Thus resolves performance.\n        setTheme('bs3');\n        if (hasCordova() && !window['wmDeviceReady']) {\n            document.addEventListener('wmDeviceReady' , () => this.startApp = true);\n        } else {\n            this.startApp = true;\n        }\n\n        let spinnerId;\n\n        this.router.events.subscribe(e => {\n            if (e instanceof NavigationStart) {\n                spinnerId = this.spinnerService.show('', 'globalSpinner');\n                const node = document.querySelector('app-page-outlet') as HTMLElement;\n                if (node) {\n                    addClass(node, 'page-load-in-progress');\n                }\n            } else if (e instanceof NavigationEnd || e instanceof NavigationCancel || e instanceof NavigationError) {\n                setTimeout(() => {\n                    this.spinnerService.hide(spinnerId);\n                    const node = document.querySelector('app-page-outlet') as HTMLElement;\n                    if (node) {\n                        removeClass(node, 'page-load-in-progress');\n                    }\n                }, 1000);\n            }\n        });\n    }\n\n    providersConfig;\n    isOAuthDialogOpen = false;\n\n    showOAuthDialog() {\n        if (!this.isOAuthDialogOpen) {\n            this.isOAuthDialogOpen = true;\n            this.dialogService.open('oAuthLoginDialog', this);\n        }\n    }\n\n    closeOAuthDialog() {\n        if (this.isOAuthDialogOpen) {\n            this.isOAuthDialogOpen = false;\n            this.dialogService.close('oAuthLoginDialog', this);\n        }\n    }\n\n    ngAfterViewInit() {\n        this.app.dynamicComponentContainerRef = this.dynamicComponentContainerRef;\n    }\n\n    ngDoCheck() {\n        $invokeWatchers();\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpEvent, HttpHandler, HttpInterceptor, HttpRequest, HttpResponse } from '@angular/common/http';\n\nimport { Observable } from 'rxjs/Observable';\nimport { tap } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\n\nimport { httpService, appManager } from '@wm/variables';\nimport { WmHttpRequest, WmHttpResponse } from '@wm/http';\n\ndeclare const _;\n\n/**\n * This Interceptor intercepts all network calls and if a network call fails\n * due to session timeout, then it calls a function to handle session timeout.\n */\n@Injectable()\nexport class HttpCallInterceptor implements HttpInterceptor {\n\n    wmHttpRequest: any;\n    wmHttpResponse: any;\n    \n    constructor() {\n        this.wmHttpRequest = new WmHttpRequest();\n        this.wmHttpResponse = new WmHttpResponse();\n    }\n\n    createSubject() {\n        return new Subject();\n    }\n    intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n        let modifiedReq;\n        let modifiedResp;\n        if (appManager && appManager.appOnBeforeServiceCall) {\n            // Convert the angular HttpRequest to wm HttpRequest\n            const req = this.wmHttpRequest.angularToWmRequest(request);\n            // trigger the common onBeforeServiceCall handler present in app.js\n            modifiedReq =  appManager.appOnBeforeServiceCall(req);\n            if (modifiedReq) {\n                // Convert the wm HttpRequest to angular HttpRequest\n                modifiedReq = this.wmHttpRequest.wmToAngularRequest(modifiedReq);\n                request = modifiedReq;\n            }\n        }\n        return next.handle(request).pipe(\n            tap((response: any) => {\n                    if (response && response.type === 4 && appManager &&  appManager.appOnServiceSuccess) {\n                        // Convert the angular HttpResponse to wm HttpResponse\n                        const resp = this.wmHttpResponse.angularToWmResponse(response);\n                        // trigger the common success handler present in app.js\n                        modifiedResp = appManager.appOnServiceSuccess(resp.body, resp);\n                        if (modifiedResp) {\n                            // Convert the wm HttpResponse to angular HttpResponse\n                            modifiedResp = this.wmHttpResponse.wmToAngularResponse(modifiedResp);\n                            _.extend(response, modifiedResp);\n                        }\n                    }\n                },\n                error => {\n                    error._401Subscriber = this.createSubject();\n                    if (httpService.isPlatformSessionTimeout(error)) {\n                        httpService.handleSessionTimeout(request, error._401Subscriber);\n                    }\n                    if (appManager && appManager.appOnServiceError) {\n                        // Convert the angular HttpResponse to wm HttpResponse\n                        const err = this.wmHttpResponse.angularToWmResponse(error);\n                        // trigger the common error handler present in app.js\n                        modifiedResp = appManager.appOnServiceError(err.message, err);\n                        if (modifiedResp) {\n                            // Convert the wm HttpResponse to angular HttpResponse\n                            modifiedResp = this.wmHttpResponse.wmToAngularResponse(modifiedResp);\n                            _.extend(error, modifiedResp);\n                        }\n                    }\n                }\n            )\n        );\n    }\n}\n","import { AfterViewInit, Component, ViewChild } from '@angular/core';\n\nimport { PrefabDirective } from '@wm/components';\n\nimport { PrefabManagerService } from '../services/prefab-manager.service';\n\nconst PREFAB = 'PREFAB';\n\n@Component({\n    selector: 'wm-prefab-preview',\n    template: `\n        <div class=\"prefab-preview row\">\n            <section wmPrefab name=\"prefab-preview\" prefabname=\"__self__\"></section>\n        </div>\n    `\n})\nexport class PrefabPreviewComponent implements AfterViewInit {\n    private config: any;\n    private previewMode: boolean;\n\n    @ViewChild(PrefabDirective) prefabInstance;\n\n    constructor(private prefabManager: PrefabManagerService) {\n\n        window.addEventListener('message', e => {\n            const context = e.data && e.data.context;\n\n            if (context !== PREFAB) {\n                return;\n            }\n\n            const action = e.data.action;\n            const payload = e.data.payload;\n\n            if (action === 'init') {\n                this.init();\n            } else if (action === 'set-property') {\n                this.setProperty(payload);\n            } else if (action === 'get-outbound-properties') {\n                this.getOutboundProps();\n            } else if (action === 'invoke-script') {\n                this.invokeScript(payload);\n            }\n        });\n    }\n\n    postMessage(action, payload?: any) {\n        const data = {\n            context: PREFAB,\n            action,\n            payload\n        };\n        window.top.postMessage(data, '*');\n    }\n\n    setupEventListeners() {\n        this.prefabInstance.invokeEventCallback = (eventName, locals = {}) => {\n            this.postMessage('event-log', { name: eventName, data: locals });\n        };\n    }\n\n    init() {\n        this.previewMode = true;\n\n        this.prefabInstance.readyState.subscribe(\n            () => {},\n            () => {},\n            () => {\n                this.prefabManager.getConfig('__self__')\n                    .then(config => {\n                        this.config = config;\n                        this.postMessage('config', config);\n\n                        this.setupEventListeners();\n                    });\n            }\n        );\n    }\n\n    setProperty(payload: any) {\n        this.prefabInstance.widget[payload.name] = payload.value;\n    }\n\n    isOutBoundProp(info) {\n        return info.bindable === 'out-bound' || info.bindable === 'in-out-bound';\n    }\n\n    getOutboundProps() {\n        const payload = {};\n        for (const [name, info] of Object.entries(this.config.properties || {})) {\n            if (this.isOutBoundProp(info)) {\n                payload[name] = this.prefabInstance.widget[name];\n            }\n        }\n\n        this.postMessage('outbound-properties', payload);\n    }\n\n    invokeScript(payload: any) {\n        const script = `\\n return ${payload.script};`;\n\n        const fn = new Function('Prefab', script);\n\n        const retVal = fn(this.prefabInstance);\n\n        this.postMessage('method-output', { methodName: payload.methodName, output: retVal });\n    }\n\n    ngAfterViewInit() {\n        this.setupEventListeners();\n        this.postMessage('init');\n    }\n}\n\n","import {\n    Compiler,\n    Component,\n    CUSTOM_ELEMENTS_SCHEMA,\n    Injectable,\n    NgModule,\n    NO_ERRORS_SCHEMA,\n    ViewEncapsulation\n} from '@angular/core';\n\nimport { App, extendProto, isDefined } from '@wm/core';\nimport { transpile } from '@wm/transpiler';\nimport { initComponentsBuildTask } from '@wm/build-task';\n\nimport { AppManagerService } from './app.manager.service';\nimport { RuntimeBaseModule } from '../runtime-base.module';\n\ninitComponentsBuildTask();\n\nconst componentFactoryRefCache = new Map<string, any>();\n\nconst getDynamicModule = (componentRef: any) => {\n    @NgModule({\n        declarations: [componentRef],\n        imports: [\n            RuntimeBaseModule\n        ],\n        schemas: [CUSTOM_ELEMENTS_SCHEMA, NO_ERRORS_SCHEMA]\n    })\n    class DynamicModule {}\n\n    return DynamicModule;\n};\n\nconst getDynamicComponent = (\n    selector,\n    template: string,\n    css: string = '') => {\n\n    const componentDef = {\n        template,\n        styles: [css],\n        encapsulation: ViewEncapsulation.None\n    };\n\n    @Component({\n        ...componentDef,\n        selector\n    })\n    class DynamicComponent {\n    }\n\n    return DynamicComponent;\n};\n\n@Injectable()\nexport class DynamicComponentRefProviderService {\n    private counter = 1;\n\n    constructor(\n        private app: App,\n        private appManager: AppManagerService,\n        private compiler: Compiler\n    ) {}\n\n    public async getComponentFactoryRef(selector: string, markup: string, options: any = {}): Promise<any> {\n        // check in the cache.\n        let componentFactoryRef = componentFactoryRefCache.get(selector);\n\n        markup = options.transpile ? transpile(markup) : markup;\n        if (!componentFactoryRef || options.noCache) {\n            const componentDef = getDynamicComponent(selector, markup, options.styles);\n            const moduleDef = getDynamicModule(componentDef);\n\n            componentFactoryRef = this.compiler\n                .compileModuleAndAllComponentsSync(moduleDef)\n                .componentFactories\n                .filter(factory => factory.componentType === componentDef)[0];\n\n            componentFactoryRefCache.set(selector, componentFactoryRef);\n        }\n        return componentFactoryRef;\n    }\n\n    /**\n     * Creates the component dynamically and add it to the DOM\n     * @param target: HTML element where we need to append the created component\n     * @param markup: Template of the component\n     * @param context: Scope of the component\n     * @param options: We have options like\n                       selector: selector of the component\n                       transpile: flag for transpiling HTML. By default it is true\n                       nocache: flag for render it from cache or not. By default it is true\n     */\n    public async addComponent(target: HTMLElement, markup: string, context = {}, options: any = {}) {\n        options.transpile = isDefined(options.transpile) ? options.transpile : true;\n        options.noCache = isDefined(options.noCache) ? options.noCache : true;\n        options.selector = isDefined(options.selector) ? options.selector : 'wm-dynamic-component-'+ this.counter++;\n        const componentFactoryRef = await this.getComponentFactoryRef(options.selector, markup, options);\n        const component = this.app.dynamicComponentContainerRef.createComponent(componentFactoryRef, 0);\n        extendProto(component.instance, context);\n        target.appendChild(component.location.nativeElement);\n    }\n}\n","import {ActivatedRouteSnapshot, CanDeactivate, Resolve, RouterStateSnapshot} from \"@angular/router\";\nimport {Injectable, Injector} from \"@angular/core\";\nimport {Observable} from \"rxjs/Observable\";\n\n\nexport interface CanComponentDeactivate  {\n    canDeactivate: () => Observable<boolean> | Promise<boolean> | boolean;\n}\n\n@Injectable()\nexport class CanDeactivatePageGuard implements CanDeactivate<CanComponentDeactivate> {\n    canDeactivate(component: CanComponentDeactivate, route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\n        return component.canDeactivate ? component.canDeactivate() : true;\n    }\n}\n","import {APP_INITIALIZER, LOCALE_ID, ModuleWithProviders, NgModule} from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { CommonModule, DatePipe, DecimalPipe } from '@angular/common';\nimport { HTTP_INTERCEPTORS, HttpClientModule } from '@angular/common/http';\n\nimport { BsDropdownModule, CarouselModule, ModalModule, PopoverModule, TooltipModule } from 'ngx-bootstrap';\n\nimport {\n    _WM_APP_PROJECT,\n    $parseExpr,\n    AbstractI18nService,\n    AbstractNavigationService,\n    AbstractSpinnerService,\n    AbstractToasterService,\n    App,\n    AppDefaults,\n    CoreModule,\n    DynamicComponentRefProvider\n} from '@wm/core';\nimport { WmComponentsModule } from '@wm/components';\nimport { MobileRuntimeModule } from '@wm/mobile/runtime';\nimport { SecurityModule } from '@wm/security';\nimport { HttpServiceModule } from '@wm/http';\nimport { VariablesModule } from '@wm/variables';\nimport { OAuthModule } from '@wm/oAuth';\n\nimport { AccessrolesDirective } from './directives/accessroles.directive';\nimport { PartialContainerDirective } from './directives/partial-container.directive';\nimport { AppSpinnerComponent } from './components/app-spinner.component';\nimport { CustomToasterComponent } from './components/custom-toaster.component';\nimport { EmptyPageComponent } from './components/empty-component/empty-page.component';\nimport { PrefabDirective } from './directives/prefab.directive';\nimport { AppRef } from './services/app.service';\nimport { ToasterServiceImpl } from './services/toaster.service';\nimport { I18nServiceImpl } from './services/i18n.service';\nimport { SpinnerServiceImpl } from './services/spinner.service';\nimport { NavigationServiceImpl } from './services/navigation.service';\nimport { AppDefaultsService } from './services/app-defaults.service';\nimport { AppManagerService } from './services/app.manager.service';\nimport { PrefabManagerService } from './services/prefab-manager.service';\nimport { AuthGuard } from './guards/auth.guard';\nimport { RoleGuard } from './guards/role.guard';\nimport { PageNotFoundGaurd } from './guards/page-not-found.gaurd';\nimport { AppJSResolve } from './resolves/app-js.resolve';\nimport { I18nResolve } from './resolves/i18n.resolve';\nimport { AppComponent } from './components/app-component/app.component';\nimport { HttpCallInterceptor } from './services/http-interceptor.services';\nimport { PrefabPreviewComponent } from './components/prefab-preview.component';\nimport { DynamicComponentRefProviderService } from './services/dynamic-component-ref-provider.service';\nimport {CanDeactivatePageGuard} from './guards/can-deactivate-page.guard';\n\nexport function InitializeApp(I18nService) {\n    return () => {\n        _WM_APP_PROJECT.id = location.href.split('/')[3];\n        _WM_APP_PROJECT.cdnUrl = document.querySelector('[name=\"cdnUrl\"]') && document.querySelector('[name=\"cdnUrl\"]').getAttribute('content');\n        _WM_APP_PROJECT.ngDest = 'ng-bundle/';\n        return I18nService.loadDefaultLocale();\n    };\n}\n\nexport function setAngularLocale(I18nService) {\n    return I18nService.isAngularLocaleLoaded() ? I18nService.getSelectedLocale() : I18nService.getDefaultSupportedLocale();\n}\n\nconst definitions = [\n    AccessrolesDirective,\n    PartialContainerDirective,\n    AppSpinnerComponent,\n    CustomToasterComponent,\n    PrefabDirective,\n    AppComponent,\n    PrefabPreviewComponent,\n    EmptyPageComponent\n];\n\nexport const carouselModule = CarouselModule.forRoot();\nexport const bsDropDownModule = BsDropdownModule.forRoot();\nexport const popoverModule = PopoverModule.forRoot();\nexport const tooltipModule = TooltipModule.forRoot();\n\n// setting parseExpr as exprEvaluator for swipeAnimation\n($.fn as any).swipeAnimation.expressionEvaluator = $parseExpr;\n\n@NgModule({\n    declarations: definitions,\n    imports: [\n        CommonModule,\n        FormsModule,\n        RouterModule,\n        ReactiveFormsModule,\n        HttpClientModule,\n\n        carouselModule,\n        bsDropDownModule,\n        popoverModule,\n        tooltipModule,\n\n        ModalModule,\n        WmComponentsModule,\n        MobileRuntimeModule,\n        CoreModule,\n        SecurityModule,\n        OAuthModule,\n        VariablesModule,\n        HttpServiceModule,\n    ],\n    exports: [\n        definitions,\n\n        CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n\n        ModalModule,\n        CarouselModule,\n        BsDropdownModule,\n        PopoverModule,\n        TooltipModule,\n\n        WmComponentsModule,\n        MobileRuntimeModule,\n        CoreModule,\n        SecurityModule,\n        OAuthModule,\n        VariablesModule,\n        HttpServiceModule\n    ],\n    entryComponents: [CustomToasterComponent]\n})\nexport class RuntimeBaseModule {\n\n    // this polyfill is to add support for CustomEvent in IE11\n    static addCustomEventPolyfill() {\n            if ( typeof window['CustomEvent'] === 'function' ) {\n                return false;\n            }\n\n            const CustomEvent = (event, params) => {\n                params = params || { bubbles: false, cancelable: false, detail: null };\n                const evt = document.createEvent( 'CustomEvent' );\n                evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\n                return evt;\n            };\n\n            CustomEvent.prototype = window['Event'].prototype;\n\n            window['CustomEvent'] = CustomEvent;\n    }\n\n    static forRoot(): ModuleWithProviders {\n        return {\n            ngModule: RuntimeBaseModule,\n            providers: [\n                {provide: App, useClass: AppRef},\n                {provide: AbstractToasterService, useClass: ToasterServiceImpl},\n                {provide: AbstractI18nService, useClass: I18nServiceImpl},\n                {provide: AbstractSpinnerService, useClass: SpinnerServiceImpl},\n                {provide: AbstractNavigationService, useClass: NavigationServiceImpl},\n                {provide: AppDefaults, useClass: AppDefaultsService},\n                {provide: DynamicComponentRefProvider, useClass: DynamicComponentRefProviderService},\n                {\n                    provide: APP_INITIALIZER,\n                    useFactory: InitializeApp,\n                    deps: [AbstractI18nService],\n                    multi: true\n                },\n                {\n                    provide: LOCALE_ID,\n                    useFactory: setAngularLocale,\n                    deps: [AbstractI18nService]\n                },\n                {\n                    provide: HTTP_INTERCEPTORS,\n                    useClass: HttpCallInterceptor,\n                    multi: true\n                },\n                DecimalPipe,\n                DatePipe,\n                AppManagerService,\n                PrefabManagerService,\n                AuthGuard,\n                RoleGuard,\n                PageNotFoundGaurd,\n                CanDeactivatePageGuard,\n                AppJSResolve,\n                I18nResolve\n            ]\n        };\n    }\n\n    constructor() {\n        RuntimeBaseModule.addCustomEventPolyfill();\n    }\n}\n\nexport const WM_MODULES_FOR_ROOT = [\n    WmComponentsModule.forRoot(),\n    MobileRuntimeModule.forRoot(),\n    ModalModule.forRoot(),\n    CoreModule.forRoot(),\n    SecurityModule.forRoot(),\n    OAuthModule.forRoot(),\n    VariablesModule.forRoot(),\n    HttpServiceModule.forRoot(),\n    RuntimeBaseModule.forRoot()\n];\n","import { Injectable } from '@angular/core';\nimport { Resolve } from '@angular/router';\n\nimport { AppManagerService } from '../services/app.manager.service';\nimport { AppVariablesProvider } from '../types/types';\n\nlet appVariablesLoaded = false;\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class AppVariablesResolve implements Resolve<any> {\n\n    constructor(\n        private appManager: AppManagerService,\n        private appVariablesProvider: AppVariablesProvider\n    ) {}\n\n    resolve() {\n        // execute app.js\n        if (appVariablesLoaded) {\n            return true;\n        }\n\n        return this.appVariablesProvider.getAppVariables()\n            .then((variables) => this.appManager.loadAppVariables(variables))\n            .then(() => appVariablesLoaded = true);\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Resolve } from '@angular/router';\n\nimport { AppManagerService } from '../services/app.manager.service';\n\nlet metadataResolved = false;\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class MetadataResolve implements Resolve<any> {\n    constructor(private appManager: AppManagerService) {}\n\n    resolve() {\n        return metadataResolved || this.appManager.loadMetadata().then(() => metadataResolved = true);\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Resolve } from '@angular/router';\n\nimport { getWmProjectProperties } from '@wm/core';\n\nimport { AppManagerService } from '../services/app.manager.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class SecurityConfigResolve implements Resolve<any> {\n    loaded: boolean;\n\n    constructor(private appManager: AppManagerService) {\n\n        // if the project type is PREFAB, setting this flag will not trigger security/info call\n        this.loaded = this.appManager.isPrefabType() || this.appManager.isTemplateBundleType() || !getWmProjectProperties().securityEnabled;\n    }\n\n    resolve() {\n        return this.loaded || this.appManager.loadSecurityConfig().then(() => {\n            this.loaded = true;\n        });\n    }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n\nexport {AppSpinnerComponent as d} from './components/app-spinner.component';\nexport {CustomToasterComponent as e} from './components/custom-toaster.component';\nexport {AccessrolesDirective as b} from './directives/accessroles.directive';\nexport {PartialContainerDirective as c} from './directives/partial-container.directive';\nexport {PrefabDirective as f} from './directives/prefab.directive';\nexport {AppDefaultsService as m} from './services/app-defaults.service';\nexport {AppRef as h} from './services/app.service';\nexport {DynamicComponentRefProviderService as n} from './services/dynamic-component-ref-provider.service';\nexport {HttpCallInterceptor as o} from './services/http-interceptor.services';\nexport {I18nServiceImpl as j} from './services/i18n.service';\nexport {NavigationServiceImpl as l} from './services/navigation.service';\nexport {PipeProvider as g} from './services/pipe-provider.service';\nexport {SpinnerServiceImpl as k} from './services/spinner.service';\nexport {ToasterServiceImpl as i} from './services/toaster.service';\nexport {FragmentMonitor as a} from './util/fragment-monitor';"],"names":["ComponentType","$appDigest","variables","isDefined","CONSTANTS","routerService","$rootScope","triggerFn","fetchContent","Injectable","AbstractHttpService","SecurityService","AbstractDialogService","Router","App","VariablesService","MetadataService","AbstractSpinnerService","AbstractI18nService","DatePipe","stringStartsWith","loadStyleSheets","loadScripts","Subject","noop","tslib_1.__extends","WidgetRef","UtilsService","$invokeWatchers","muteWatchers","ActivatedRoute","AbstractNavigationService","unMuteWatchers","isMobileApp","$watch","isIE","Directive","TemplateRef","ViewContainerRef","Input","filter","debounceTime","Self","Inject","ElementRef","Injector","Attribute","ComponentFactoryResolver","Component","ToastrService","ToastPackage","ViewChild","Toast","router","getWmProjectProperties","AbstractToasterService","FieldTypeService","FieldWidgetService","DynamicComponentRefProvider","EventNotifier","isString","setCSS","_WM_APP_PROJECT","defineLocale","registerLocaleData","isMobile","setSessionStorageItem","getSessionStorageItem","replace","HttpClient","BsLocaleService","AppDefaults","NavigationStart","AsyncPipe","ChangeDetectorRef","SlicePipe","PercentPipe","I18nPluralPipe","NgLocalization","I18nSelectPipe","KeyValuePipe","KeyValueDiffers","FileIconClassPipe","FileExtensionFromMimePipe","StateClassPipe","FileSizePipe","FilterPipe","UpperCasePipe","LowerCasePipe","JsonPipe","DecimalPipe","TitleCasePipe","CurrencyPipe","ToDatePipe","ToNumberPipe","ToCurrencyPipe","PrefixPipe","SuffixPipe","TimeFromNowPipe","NumberToStringPipe","StringToNumberPipe","tslib_1.__values","Compiler","setPipeProvider","setNgZone","setAppRef","setTheme","hasCordova","addClass","NavigationEnd","NavigationCancel","NavigationError","removeClass","ViewEncapsulation","ApplicationRef","OAuthService","NgZone","WmHttpRequest","WmHttpResponse","appManager","tap","httpService","PrefabDirective","initComponentsBuildTask","NgModule","CUSTOM_ELEMENTS_SCHEMA","NO_ERRORS_SCHEMA","transpile","extendProto","CarouselModule","BsDropdownModule","PopoverModule","TooltipModule","$parseExpr","APP_INITIALIZER","LOCALE_ID","HTTP_INTERCEPTORS","CommonModule","FormsModule","RouterModule","ReactiveFormsModule","HttpClientModule","ModalModule","WmComponentsModule","MobileRuntimeModule","CoreModule","SecurityModule","OAuthModule","VariablesModule","HttpServiceModule"],"mappings":";;;;;;IAAA,WAAY,aAAa;QACrB,iDAAI,CAAA;QACJ,qDAAM,CAAA;QACN,uDAAO,CAAA;IACX,CAAC,EAJWA,qBAAa,KAAbA,qBAAa,QAIxB;AAED;QAAA;SAGC;QADG,4DAA6B,GAA7B,eAAuC;QAC3C,2BAAC;IAAD,CAAC,IAAA;;QAED;SAEC;QAAD,2BAAC;IAAD,CAAC,IAAA;;QAED;SAEC;QAAD,oBAAC;IAAD,CAAC,IAAA;;QAED;SAEC;QAAD,2BAAC;IAAD,CAAC,IAAA;;QAED;SAEC;QAAD,yBAAC;IAAD,CAAC;;ICLD,IAAK,aAOJ;IAPD,WAAK,aAAa;QACd,sEAAqD,CAAA;QACrD,sEAAqD,CAAA;QACrD,yDAAiD,CAAA;QACjD,oDAA4C,CAAA;QAC5C,iEAAmD,CAAA;QACnD,oCAAoC,CAAA;IACxC,CAAC,EAPI,aAAa,KAAb,aAAa,QAOjB;AAED;QAQI,2BACY,KAA0B,EAC1B,SAA0B,EAC1B,OAA8B,EAC9B,OAAe,EACf,IAAS,EACT,UAA4B,EAC5B,SAA0B,EAC1B,QAAgC,EAChC,KAA0B,EAC1B,SAAmB;YAV/B,iBAyCC;YAxCW,UAAK,GAAL,KAAK,CAAqB;YAC1B,cAAS,GAAT,SAAS,CAAiB;YAC1B,YAAO,GAAP,OAAO,CAAuB;YAC9B,YAAO,GAAP,OAAO,CAAQ;YACf,SAAI,GAAJ,IAAI,CAAK;YACT,eAAU,GAAV,UAAU,CAAkB;YAC5B,cAAS,GAAT,SAAS,CAAiB;YAC1B,aAAQ,GAAR,QAAQ,CAAwB;YAChC,UAAK,GAAL,KAAK,CAAqB;YAC1B,cAAS,GAAT,SAAS,CAAU;YAfvB,uBAAkB,GAAG,KAAK,CAAC;YAC3B,sBAAiB,GAAG,KAAK,CAAC;YAC1B,gBAAW,GAAG,KAAK,CAAC;;YAgBxB,IAAI,CAAC,KAAK,CAAC,wBAAwB,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YAE/D,IAAI,CAAC,UAAU,CAAC,kBAAkB,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;YAEvD,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,uBAAuB,EAAE,UAAC,IAAI;gBAC9C,IAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,EAC1B,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;gBACzB,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC,EAAE;oBAC7C,IAAI,MAAM,EAAE;wBACR,QAAQ,CAAC,UAAU,GAAG,QAAQ,CAAC,UAAU,IAAI,EAAE,CAAC;wBAChD,IAAM,SAAS,GAAG,KAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,EACxD,QAAQ,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,EAC/B,QAAQ,CAAC,YAAY,EACrB,QAAQ,CAAC,cAAc,CAAC,CAAC;wBAC7B,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;qBACvC;yBAAM;wBACH,KAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC,CAAC;qBACnD;iBACJ;aACJ,CAAC,CAAC;YACH,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,cAAc,EAAE,cAAM,OAAA,KAAI,CAAC,cAAc,EAAE,GAAA,CAAC,CAAC;YACjE,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,eAAe,EAAE;gBAAM,OAAA,KAAI,CAAC,cAAc,EAAE,CAAC,IAAI,CAAC;;oBAElE,IAAI,MAAM,CAAC,SAAS,CAAC,EAAE;wBACnB,KAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;qBAChC;iBACJ,CAAC;aAAA,CAAC,CAAC;YACJ,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,UAAC,CAAM;gBAAN,kBAAA;oBAAA,MAAM;;gBAAK,OAAA,KAAI,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,OAAO,CAAC;aAAA,CAAC,CAAC;SACjF;;;;QAKO,2CAAe,GAAvB;YACI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;;;YAGpC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;;;YAGvCC,eAAU,EAAE,CAAC;SAChB;QAED,qCAAS,GAAT;SAEC;QAED,0CAAc,GAAd;SAEC;QAED,8CAAkB,GAAlB;YAAA,iBAOC;YANG,OAAO,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,CAAC;gBAChC,IAAI,CAAC,KAAI,CAAC,IAAI,CAAC,eAAe,EAAE;oBAC5B,KAAI,CAAC,cAAc,EAAE,CAAC;iBACzB;gBACD,OAAO,CAAC,CAAC;aACZ,CAAC,CAAC;SACN;QAED,wCAAY,GAAZ;YACI,OAAO,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;SAChC;QAED,4CAAgB,GAAhB,UAAiBC,YAAe;YAAhC,iBAsBC;YArBG,IAAI,IAAI,CAAC,kBAAkB,EAAE;gBACzB,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;aAC5B;YAED,IAAM,IAAI,GAAG,UAAA,QAAQ;gBACjB,IAAM,IAAI,GAAG,KAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,EAAE,QAAQ,EAAE,KAAI,CAAC,IAAI,CAAC,CAAC;;gBAElE,CAAC,CAAC,MAAM,CAAC,KAAI,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;gBAC9C,CAAC,CAAC,MAAM,CAAC,KAAI,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;gBAC1C,KAAI,CAAC,0BAA0B,EAAE,CAAC;gBAClC,KAAI,CAAC,6BAA6B,EAAE,CAAC;gBACrC,KAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;gBAC/B,KAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;aAClC,CAAC;YAEF,IAAIC,cAAS,CAACD,YAAS,CAAC,EAAE;gBACtB,IAAI,CAACA,YAAS,CAAC,CAAC;gBAChB,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;aAC5B;YAED,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC,IAAI,CAAC,UAAA,QAAQ,IAAI,OAAA,IAAI,CAAC,QAAQ,CAAC,GAAA,CAAC,CAAC;SAClF;;;;;;;;QASD,+CAAmB,GAAnB,UAAoB,OAAiB;YACjC,IAAIC,cAAS,CAAC,OAAO,CAAC,EAAE;gBACpB,IAAI,CAAC,iBAAiB,GAAG,OAAO,CAAC;aACpC;YACD,OAAO,IAAI,CAAC,iBAAiB,CAAC;SACjC;QAEO,qDAAyB,GAAjC,UAAkC,QAAQ;YACtC,QAAQ,CAAC,eAAe,GAAG,KAAK,CAAC;YACjC,QAAQ,CAAC,KAAK,GAAa,EAAE,CAAC;YAC9B,QAAQ,CAAC,IAAI,GAAc,SAAS,CAAC;YACrC,QAAQ,CAAC,EAAE,GAAgB,SAAS,CAAC;YACrC,QAAQ,CAAC,QAAQ,GAAU,SAAS,CAAC;SACxC;QAEO,sDAA0B,GAAlC;YAAA,iBA2BC;YA1BG,IAAM,YAAY,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,gCAAgC,CAAC,CAAC;;YAGxE,IAAI,CAAC,YAAY,EAAE;gBACf,OAAO;aACV;YACD,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC;gBACvB,IAAM,cAAc,GAAG,KAAI,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC;gBAC5C,IAAI,cAAc,IAAI,cAAc,CAAC,eAAe,IAAI,cAAc,CAAC,aAAa,EAAE;oBAClF,YAAY,CAAC,eAAe,GAAG,cAAc,CAAC,aAAa,CAAC;oBAC5D,YAAY,CAAC,KAAK,GAAa,cAAc,CAAC,QAAQ,CAAC,SAAS,CAAC;oBACjE,YAAY,CAAC,IAAI,GAAc,cAAc,CAAC,QAAQ,CAAC,QAAQ,CAAC;oBAChE,YAAY,CAAC,EAAE,GAAgB,cAAc,CAAC,QAAQ,CAAC,MAAM,CAAC;oBAC9D,YAAY,CAAC,QAAQ,GAAU,cAAc,CAAC,QAAQ,CAAC,QAAQ,CAAC;iBACnE;qBAAM;oBACH,KAAI,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC;oBAC7C,YAAY,CAAC,iBAAiB,GAAG,cAAc,IAAI,cAAc,CAAC,eAAe,CAAC;oBAClF,MAAM,IAAI,CAAC;iBACd;aACJ,CAAC,CAAC,KAAK,CAAC,UAAA,GAAG;gBACR,YAAY,CAAC,eAAe,GAAG,KAAK,CAAC;gBACrC,YAAY,CAAC,KAAK,GAAa,EAAE,CAAC;gBAClC,YAAY,CAAC,IAAI,GAAc,SAAS,CAAC;gBACzC,YAAY,CAAC,EAAE,GAAgB,SAAS,CAAC;gBACzC,YAAY,CAAC,QAAQ,GAAU,SAAS,CAAC;aAC5C,CAAC,CAAC;SACN;;;;;;;;;QAUD,yDAA6B,GAA7B;YACI,IAAM,kBAAkB,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,2BAA2B,CAAC,CAAC;SAC5E;QAED,0CAAc,GAAd,UAAe,MAAM;YAArB,iBA4CC;YA3CG,IAAM,OAAO,GAAG,4BAA4B,EACxC,mBAAmB,GAAG,mBAAmB,CAAC;YAC9C,IAAI,IAAI,EACJ,UAAU,CAAC;;;YAIf,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;YAE9C,IAAIC,mBAAS,CAAC,UAAU,EAAE;;gBAEtB,IAAM,sBAAoB,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,EAAE,mBAAmB,CAAC,CAAC;gBAC9E,IAAI,CAAC,SAAS,CAAC,aAAa,EAAE;qBACzB,IAAI,CAAC,cAAM,OAAA,KAAI,CAAC,aAAa,EAAE,GAAA,CAAC;qBAChC,IAAI,CAAC;oBACF,IAAM,uBAAuB,GAAG,CAAC,CAAC,GAAG,CAAC,KAAI,CAAC,SAAS,CAAC,GAAG,EAAE,EAAE,mBAAmB,CAAC,CAAC;oBACjF,IAAI,uBAAuB,IAAI,uBAAuB,KAAK,sBAAoB,EAAE;wBAC7EC,uBAAa,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;qBAClC;yBAAM;wBACHA,uBAAa,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;qBACjC;iBACJ,CAAC,CAAC;aACV;iBAAM;gBACH,IAAI,GAAG,IAAI,GAAG,gBAAgB,GAAG,kBAAkB,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;gBAC/D,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,SAAS,CAAC,6BAA6B,EAAE,CAAC,CAAC;gBAC3F,UAAU,GAAG,UAAU,GAAG,GAAG,GAAG,UAAU,GAAG,EAAE,CAAC;;gBAEhD,QAAQ,CAAC,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,EAAE,EAAE,CAAC,2BAA2B,CAAC,CAAC,IAAI,6BAA6B,CAAC;;gBAEvH,IAAM,MAAM,GAAG,IAAI,CAAC,cAAc,EAAE,GAAG,OAAO,GAAG,IAAI,GAAG,UAAU,CAAC;;;;;;;gBAOnE,IAAI,MAAM,CAAC,IAAI,KAAK,MAAM,CAAC,GAAG,IAAI,MAAM,CAAC,MAAM,CAAC,IAAI,KAAK,mBAAmB,EAAE;oBAC1E,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC;oBACxD,MAAM,CAAC,MAAM,CAAC,IAAI,GAAG,EAAE,CAAC;iBAC3B;qBAAM;oBACH,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,MAAM,CAAC;iBACjC;aACJ;SACJ;;;;;;;;;;QAWD,qCAAS,GAAT,UAAU,IAAK,EAAE,OAAQ;YACrB,IAAI,oBAAoB,EACpB,oBAAoB,EACpB,WAAW,EACX,WAAW,CAAC;YAChB,IAAM,YAAY,GAAG;gBACb,QAAQ,EAAG,QAAQ;gBACnB,MAAM,EAAK,MAAM;gBACjB,KAAK,EAAM,KAAK;aACnB,CAAC;YAEN,IAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC;YACpC,IAAI,cAAc,GAAG,EAAE,CAAC;YACxB,WAAW,GAAG,MAAM,CAAC,WAAW,CAAC;;YAEjC,IAAI,MAAM,CAAC,QAAQ,IAAI,MAAM,CAAC,QAAQ,CAAC,QAAQ,EAAE;gBAC7C,MAAM,CAAC,aAAa,GAAG,KAAK,CAAC;gBAC7B,oBAAoB,GAAG,WAAW,CAAC,cAAc,IAAI,EAAC,MAAM,EAAE,YAAY,CAAC,MAAM,EAAC,CAAC;gBACnF,oBAAoB,GAAG,oBAAoB,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;gBAC/D,QAAQ,oBAAoB;oBACxB,KAAK,YAAY,CAAC,MAAM;wBACpB,IAAI,CAAC,eAAe,EAAE,CAAC;wBACvB,MAAM;oBACV,KAAK,YAAY,CAAC,IAAI;wBAClB,IAAI,CAAC,IAAI,EAAE;4BACP,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,mBAAmB,EAAE,CAAC;yBAC/C;wBACD,cAAc,CAAC,YAAY,CAAC,GAAG,IAAI,CAAC;;wBAEpC,cAAc,GAAG,CAAC,CAAC,KAAK,CAAC,cAAc,EAAE,IAAI,CAAC,SAAS,CAAC,6BAA6B,EAAE,CAAC,CAAC;;wBAEzF,IAAK,IAAI,KAAK,oBAAoB,CAAC,QAAQ,EAAE;4BACzC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,oBAAoB,CAAC,QAAQ,CAAC,EAAE,EAAC,WAAW,EAAE,cAAc,EAAC,CAAC,CAAC;yBACzF;wBACD,MAAM;oBACV,KAAK,YAAY,CAAC,GAAG;wBACjB,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;wBAC5B,MAAM;iBACb;gBACD,IAAI,CAAC,cAAc,EAAE,CAAC;aACzB;iBAAM;;gBAEH,WAAW,GAAG,WAAW,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;gBAC7C,QAAQ,WAAW;oBACf,KAAK,YAAY,CAAC,MAAM;;;wBAGpB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;wBACtB,IAAI,CAAC,eAAe,EAAE,CAAC;wBACvB,MAAM;oBACV,KAAK,YAAY,CAAC,IAAI;;;wBAGlB,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;wBAC9C,cAAc,CAAC,YAAY,CAAC,GAAG,IAAI,CAAC;wBACpC,cAAc,GAAG,CAAC,CAAC,KAAK,CAAC,cAAc,EAAE,IAAI,CAAC,SAAS,CAAC,6BAA6B,EAAE,CAAC,CAAC;wBACzF,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,WAAW,CAAC,QAAQ,CAAC,EAAE,EAAC,WAAW,EAAE,cAAc,EAAC,CAAC,CAAC;wBAC7E,IAAI,CAAC,IAAI,CAAC,eAAe,GAAG,WAAW,CAAC,QAAQ,CAAC;wBACjD,MAAM;oBACV,KAAK,YAAY,CAAC,GAAG;wBACjB,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;wBAC5B,MAAM;iBACb;aACJ;SACJ;;;;;;;QAQD,yCAAa,GAAb;YAAA,iBAMC;YALG,OAAO,IAAI,CAAC,kBAAkB,EAAE,CAAC,IAAI,CAAC;gBAClC,OAAO,KAAI,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC;oBAC5B,KAAI,CAAC,0BAA0B,EAAE,CAAC;iBACrC,CAAC,CAAC;aACN,CAAC,CAAC;SACN;QAED,sCAAU,GAAV,UAAW,KAAe;YACtB,IAAI,CAAC,CAAC,WAAW,CAAC,KAAK,CAAC,EAAE;gBACtB,OAAO,IAAI,CAAC,WAAW,CAAC;aAC3B;YAED,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YACzB,OAAO,IAAI,CAAC,WAAW,CAAC;SAC3B;;;;QAKD,yDAA6B,GAA7B;YACI,IAAI,CAAC,KAAK,CAAC,6BAA6B,EAAE,CAAC;SAC9C;QAED,wDAA4B,GAA5B,UAA6B,QAAQ;YACjC,IAAI,CAAC,KAAK,CAAC,yBAAyB,CAAC,QAAQ,CAAC,CAAC;SAClD;QAEM,0CAAc,GAArB;YACI,OAAO,IAAI,CAAC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,GAAGC,oBAAU,CAAC,OAAO,CAAC,WAAW,CAAC;SACzF;QAED,kCAAM,GAAN,UAAO,SAAS,EAAE,IAAI;YAClB,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;SACrC;QAED,qCAAS,GAAT,UAAU,SAAS,EAAE,IAAI;YACrB,OAAO,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;SAC/C;QAED,yCAAa,GAAb;YACI,OAAO,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC;SAC/B;QAED,wCAAY,GAAZ;YACI,OAAO,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC;SAC9B;QAED,6CAAiB,GAAjB;YACI,OAAO,IAAI,CAAC,KAAK,CAAC,iBAAiB,EAAE,CAAC;SACzC;QAED,qCAAS,GAAT,UAAU,QAAQ,EAAE,IAAI,EAAE,KAAM;YAC5B,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;SAC9C;;;;;QAMD,kDAAsB,GAAtB,UAAuB,aAAkB;YACrC,OAAOC,cAAS,CAAC,IAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE,aAAa,CAAC,CAAC;SAClE;;;;;;QAOD,+CAAmB,GAAnB,UAAoB,IAAS,EAAE,MAAW;YACtC,OAAOA,cAAS,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC;SAC9D;;;;;;QAOD,6CAAiB,GAAjB,UAAkB,IAAS,EAAE,KAAW;YACpC,OAAOA,cAAS,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;SAC3D;;;;QAKD,6CAAiB,GAAjB;YACIA,cAAS,CAAC,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;SAC5C;;;;QAKD,mCAAO,GAAP,UAAQ,IAAI;YACR,IAAI,IAAI,KAAK,MAAM,EAAE;gBACjB,OAAO,IAAI,CAAC,SAAS,CAAC;aACzB;SACJ;QAEO,0CAAc,GAAtB;YAAA,iBAEC;YADG,OAAO,IAAI,CAAC,SAAS,CAAC,qBAAqB,EAAE,CAAC,IAAI,CAAC,UAAA,CAAC,IAAI,OAAA,KAAI,CAAC,IAAI,CAAC,eAAe,GAAY,CAAC,GAAA,CAAC,CAAC;SACnG;;;;;QAMD,wCAAY,GAAZ;YACI,OAAO,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC;SACjC;;;;;QAMD,gDAAoB,GAApB;YACI,OAAO,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC;SACzC;QAED,uCAAW,GAAX,UAAY,OAAO;YACf,MAAM,CAAC,GAAG,CAAC,WAAW,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;SACxC;QAED,wCAAY,GAAZ,UAAa,GAAG;YACZ,IAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;;YAErC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;SACxC;QACD,kDAAsB,GAAtB;YAAA,iBAgCC;YA9BG,MAAM,CAAC,SAAS,GAAG,UAAC,GAAG;gBACnB,IAAM,OAAO,GAAG,GAAG,CAAC,IAAI,CAAC;gBAEzB,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE;oBACtB,OAAO;iBACV;gBAED,IAAM,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC;gBAExB,QAAQ,GAAG;oBACP,KAAK,aAAa,CAAC,wBAAwB;;wBAEvC,MAAM;oBACV,KAAK,aAAa,CAAC,eAAe;wBAC9B,KAAI,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;wBACzC,MAAM;iBACb;aACJ,CAAC;YAEF,UAAU,CAAC;gBACP,KAAI,CAAC,WAAW,CAAC,EAAC,GAAG,EAAE,aAAa,CAAC,OAAO,EAAC,CAAC,CAAC;aAClD,CAAC,CAAC;YAEH,OAAOC,iBAAY,CAAC,MAAM,EAAE,eAAe,EAAE,IAAI,EAAE,UAAA,QAAQ;gBACvD,KAAI,CAAC,SAAS,GAAG,EAAE,CAAC;gBACpB,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE;oBACjB,KAAI,CAAC,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC;oBACpC,KAAI,CAAC,WAAW,CAAC,EAAC,KAAK,EAAE,aAAa,CAAC,qBAAqB,EAAE,QAAQ,EAAE,QAAQ,EAAC,CAAC,CAAC;iBACtF;aACJ,CAAC,CAAC;SACN;QAED,2CAAe,GAAf;YACI,IAAI,IAAI,CAAC,oBAAoB,EAAE,EAAE;gBAC7B,OAAO,IAAI,CAAC,sBAAsB,EAAE,CAAC;aACxC;SACJ;;oBAhdJC,aAAU;;;;;wBAvBPC,wBAAmB;wBASdC,wBAAe;wBAVpBC,0BAAqB;wBAJhBC,aAAM;wBAQXC,QAAG;wBAO0DC,0BAAgB;wBAAjCC,yBAAe;wBAR3DC,2BAAsB;wBADtBC,wBAAmB;wBALdC,eAAQ;;;QA4ejB,wBAAC;KAjdD;;QC7Ba,iBAAiB,GAAG,UAAC,UAAkB,IAAK,OAAA,UAAU,KAAK,UAAU,GAAA,CAAC;AAEnF,QAAa,gBAAgB,GAAG,UAAC,UAAkB,IAAK,OAAA,iBAAiB,CAAC,UAAU,CAAC,GAAG,GAAG,GAAG,iBAAe,UAAY,GAAA,CAAC;AAE1H,QAAa,kBAAkB,GAAG,UAAC,UAAkB,IAAK,OAAG,gBAAgB,CAAC,UAAU,CAAC,iBAAc,GAAA,CAAC;AAExG,QAAa,mBAAmB,GAAG,UAAC,UAAkB,IAAK,OAAG,gBAAgB,CAAC,UAAU,CAAC,8BAA2B,GAAA;;ICIrH,IAAM,gBAAgB,GAAG,IAAI,GAAG,EAAU,CAAC;IAC3C,IAAM,UAAU,GAAG,IAAI,GAAG,EAAwB,CAAC;IACnD,IAAM,eAAe,GAAG,IAAI,GAAG,EAAU,CAAC;IAE1C,IAAM,oBAAoB,GAAG,UAAC,YAAY,EAAE,gBAAgB;QACxD,IAAI,IAAI,GAAG,YAAY,CAAC;QACxB,IAAI,CAACC,qBAAgB,CAAC,YAAY,EAAE,qBAAqB,CAAC,EAAE;YACxD,IAAI,GAAG,CAAC,gBAAgB,GAAG,IAAI,EAAE,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;SACvD;QACD,OAAO,IAAI,CAAC;IAChB,CAAC,CAAC;;AAEF;QAGI,8BACY,SAA0B,EAC1B,oBAA0C;YAD1C,cAAS,GAAT,SAAS,CAAiB;YAC1B,yBAAoB,GAApB,oBAAoB,CAAsB;SAClD;QAEG,wCAAS,GAAhB,UAAiB,UAAU;YACvB,OAAO,IAAI,CAAC,oBAAoB,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;SAC1D;QAEM,8CAAe,GAAtB,UAAuB,UAAU;YAC7B,OAAO,iBAAiB,CAAC,UAAU,CAAC,GAAG,OAAO,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;SAC9F;QAES,yCAAU,GAApB,UAAqB,UAAU,EAAE,EAAiD;gBAApC,8EAAM;YAChD,IAAM,OAAO,GAAG,gBAAgB,CAAC,UAAU,CAAC,CAAC;YAC7C,IAAM,OAAO,GAAG,MAAM,CAAC,GAAG,CAAC,UAAA,GAAG;gBAC1B,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,GAAG,EAAE,sBAAsB,CAAC,EAAE;oBAC1C,OAAO,oBAAoB,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;iBAC7C;gBACD,OAAO,SAAS,CAAC;aACpB,CAAC,CAAC,MAAM,CAAC,UAAA,GAAG,IAAI,OAAA,CAAC,CAAC,GAAG,GAAA,CAAC,CAAC;YAExBC,oBAAe,CAAC,OAAO,CAAC,CAAC;YAEzB,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;SAC5B;;QAGS,0CAAW,GAArB,UAAsB,UAAU,EAAE,EAAmD;gBAAtC,iFAAO;YAClD,IAAM,OAAO,GAAG,gBAAgB,CAAC,UAAU,CAAC,CAAC;YAC7C,IAAM,QAAQ,GAAG,OAAO,CAAC,GAAG,CAAC,UAAA,GAAG,IAAI,OAAA,oBAAoB,CAAC,GAAG,EAAE,OAAO,CAAC,GAAA,CAAC,CAAC;YAExE,OAAOC,gBAAW,CAAC,QAAQ,CAAC,CAAC;SAChC;QAEO,4CAAa,GAArB,UAAsB,UAAkB;YACpC,IAAI,IAAI,CAAC;YACT,IAAI,IAAI,CAAC;YACT,IAAM,QAAQ,GAAQ,IAAI,OAAO,CAAC,UAAC,GAAG,EAAE,GAAG;gBACvC,IAAI,GAAG,GAAG,CAAC;gBACX,IAAI,GAAG,GAAG,CAAC;aACd,CAAC,CAAC;YAEH,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC;YACxB,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC;YAEvB,UAAU,CAAC,GAAG,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;SACxC;QAEO,gDAAiB,GAAzB,UAA0B,UAAkB;YACxC,IAAI,UAAU,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE;gBAC3B,UAAU,CAAC,GAAG,CAAC,UAAU,CAAS,CAAC,OAAO,EAAE,CAAC;gBAC9C,UAAU,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;aACjC;SACJ;QAEM,+CAAgB,GAAvB,UAAwB,UAAU;YAAlC,iBA2BC;YAzBG,IAAI,eAAe,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE;gBACjC,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;aAC5B;YAED,IAAI,gBAAgB,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE;gBAClC,OAAO,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;aAC7B;YAED,IAAI,UAAU,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE;gBAC5B,OAAO,UAAU,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;aACrC;YAED,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;YAE/B,OAAO,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC;iBAC5B,IAAI,CAAC,UAAA,MAAM;gBACR,OAAO,OAAO,CAAC,GAAG,CAAC;oBACf,KAAI,CAAC,UAAU,CAAC,UAAU,EAAE,MAAM,CAAC;oBACnC,KAAI,CAAC,WAAW,CAAC,UAAU,EAAE,MAAM,CAAC;oBACpC,KAAI,CAAC,eAAe,CAAC,UAAU,CAAC;iBACnC,CAAC,CAAC,IAAI,CAAC;oBACJ,KAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;oBACnC,eAAe,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;iBACnC,CAAC,CAAC;aACN,CAAC,CAAC;SACV;;oBAtFJb,aAAU;;;;;wBAnBFO,yBAAe;wBAEf,oBAAoB;;;QAwG7B,2BAAC;KAvFD;;ICtBA;;;;;;;;;;;;;;IAcA;IAEA,IAAI,aAAa,GAAG,MAAM,CAAC,cAAc;SACpC,EAAE,SAAS,EAAE,EAAE,EAAE,YAAY,KAAK,IAAI,UAAU,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,EAAE,CAAC;QAC5E,UAAU,CAAC,EAAE,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC;YAAE,IAAI,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;gBAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;AAE/E,aAAgB,SAAS,CAAC,CAAC,EAAE,CAAC;QAC1B,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACpB,SAAS,EAAE,KAAK,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,EAAE;QACvC,CAAC,CAAC,SAAS,GAAG,CAAC,KAAK,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,SAAS,GAAG,CAAC,CAAC,SAAS,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;IACzF,CAAC;AAED,IAAO,IAAI,QAAQ,GAAG,MAAM,CAAC,MAAM,IAAI,SAAS,QAAQ,CAAC,CAAC;QACtD,KAAK,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;YACjD,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;YACjB,KAAK,IAAI,CAAC,IAAI,CAAC;gBAAE,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;oBAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;SAChF;QACD,OAAO,CAAC,CAAC;IACb,CAAC,CAAA;AAED,aAyBgB,SAAS,CAAC,OAAO,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS;QACvD,OAAO,KAAK,CAAC,KAAK,CAAC,GAAG,OAAO,CAAC,EAAE,UAAU,OAAO,EAAE,MAAM;YACrD,SAAS,SAAS,CAAC,KAAK,IAAI,IAAI;gBAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;aAAE;YAAC,OAAO,CAAC,EAAE;gBAAE,MAAM,CAAC,CAAC,CAAC,CAAC;aAAE,EAAE;YAC3F,SAAS,QAAQ,CAAC,KAAK,IAAI,IAAI;gBAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;aAAE;YAAC,OAAO,CAAC,EAAE;gBAAE,MAAM,CAAC,CAAC,CAAC,CAAC;aAAE,EAAE;YAC9F,SAAS,IAAI,CAAC,MAAM,IAAI,MAAM,CAAC,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,CAAC,UAAU,OAAO,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,EAAE;YAC/I,IAAI,CAAC,CAAC,SAAS,GAAG,SAAS,CAAC,KAAK,CAAC,OAAO,EAAE,UAAU,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;SACzE,CAAC,CAAC;IACP,CAAC;AAED,aAAgB,WAAW,CAAC,OAAO,EAAE,IAAI;QACrC,IAAI,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,cAAa,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;gBAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACjH,OAAO,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,OAAO,MAAM,KAAK,UAAU,KAAK,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,cAAa,OAAO,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACzJ,SAAS,IAAI,CAAC,CAAC,IAAI,OAAO,UAAU,CAAC,IAAI,OAAO,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE;QAClE,SAAS,IAAI,CAAC,EAAE;YACZ,IAAI,CAAC;gBAAE,MAAM,IAAI,SAAS,CAAC,iCAAiC,CAAC,CAAC;YAC9D,OAAO,CAAC;gBAAE,IAAI;oBACV,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,QAAQ,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,OAAO,GAAG,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI;wBAAE,OAAO,CAAC,CAAC;oBACnH,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC;wBAAE,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC;oBAChC,QAAQ,EAAE,CAAC,CAAC,CAAC;wBACT,KAAK,CAAC,CAAC;wBAAC,KAAK,CAAC;4BAAE,CAAC,GAAG,EAAE,CAAC;4BAAC,MAAM;wBAC9B,KAAK,CAAC;4BAAE,CAAC,CAAC,KAAK,EAAE,CAAC;4BAAC,OAAO,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;wBACxD,KAAK,CAAC;4BAAE,CAAC,CAAC,KAAK,EAAE,CAAC;4BAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;4BAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;4BAAC,SAAS;wBACjD,KAAK,CAAC;4BAAE,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;4BAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;4BAAC,SAAS;wBACjD;4BACI,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE;gCAAE,CAAC,GAAG,CAAC,CAAC;gCAAC,SAAS;6BAAE;4BAC5G,IAAI,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;gCAAE,CAAC,CAAC,KAAK,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;gCAAC,MAAM;6BAAE;4BACtF,IAAI,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE;gCAAE,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;gCAAC,CAAC,GAAG,EAAE,CAAC;gCAAC,MAAM;6BAAE;4BACrE,IAAI,CAAC,IAAI,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE;gCAAE,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;gCAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gCAAC,MAAM;6BAAE;4BACnE,IAAI,CAAC,CAAC,CAAC,CAAC;gCAAE,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;4BACtB,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;4BAAC,SAAS;qBAC9B;oBACD,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;iBAC9B;gBAAC,OAAO,CAAC,EAAE;oBAAE,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;oBAAC,CAAC,GAAG,CAAC,CAAC;iBAAE;wBAAS;oBAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;iBAAE;YAC1D,IAAI,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC;gBAAE,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC;YAAC,OAAO,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC;SACpF;IACL,CAAC;AAED,aAIgB,QAAQ,CAAC,CAAC;QACtB,IAAI,CAAC,GAAG,OAAO,MAAM,KAAK,UAAU,IAAI,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;QAClE,IAAI,CAAC;YAAE,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACxB,OAAO;YACH,IAAI,EAAE;gBACF,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM;oBAAE,CAAC,GAAG,KAAK,CAAC,CAAC;gBACnC,OAAO,EAAE,KAAK,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC;aAC3C;SACJ,CAAC;IACN,CAAC;AAED,aAAgB,MAAM,CAAC,CAAC,EAAE,CAAC;QACvB,IAAI,CAAC,GAAG,OAAO,MAAM,KAAK,UAAU,IAAI,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QAC3D,IAAI,CAAC,CAAC;YAAE,OAAO,CAAC,CAAC;QACjB,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC;QACjC,IAAI;YACA,OAAO,CAAC,CAAC,KAAK,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,IAAI;gBAAE,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;SAC9E;QACD,OAAO,KAAK,EAAE;YAAE,CAAC,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC;SAAE;gBAC/B;YACJ,IAAI;gBACA,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC;oBAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aACpD;oBACO;gBAAE,IAAI,CAAC;oBAAE,MAAM,CAAC,CAAC,KAAK,CAAC;aAAE;SACpC;QACD,OAAO,EAAE,CAAC;IACd,CAAC;AAED,aAAgB,QAAQ;QACpB,KAAK,IAAI,EAAE,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE;YAC9C,EAAE,GAAG,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACzC,OAAO,EAAE,CAAC;IACd,CAAC;;;QCzHG;YANA,cAAS,GAAG,CAAC,CAAC;YAId,qBAAgB,GAAG,IAAIO,YAAO,EAAE,CAAC;SAEjB;QAEhB,8BAAI,GAAJ;;YAAA,iBAOC;YAJG,IAAI,CAAC,SAAS,CAAC,SAAS,CAACC,SAAI,EAAEA,SAAI,EAAE;gBACjC,KAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;gBAC9B,KAAI,CAAC,OAAO,EAAE,CAAC;aAClB,CAAC,CAAC;SACN;QAED,0CAAgB,GAAhB;YACI,IAAI,CAAC,SAAS,EAAE,CAAC;SACpB;QAED,yCAAe,GAAf;YACI,IAAI,CAAC,SAAS,EAAE,CAAC;YACjB,IAAI,CAAC,OAAO,EAAE,CAAC;SAClB;QAED,iCAAO,GAAP;YACI,IAAI,IAAI,CAAC,iBAAiB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;gBAC3C,IAAI,CAAC,gBAAgB,GAAGA,SAAI,CAAC;gBAC7B,IAAI,CAAC,eAAe,GAAGA,SAAI,CAAC;gBAC5B,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,CAAC;aACpC;SACJ;QACL,sBAAC;IAAD,CAAC;;QCzBY,oBAAoB,GAAG,EAAE,CAAC;AAEvC;QAAmDC,wCAAe;QAAlE;YAAA,qEAoIC;YAnHG,cAAQ,GAAG,IAAIF,YAAO,EAAE,CAAC;YACzB,eAAS,GAAG,IAAIA,YAAO,EAAE,CAAC;;SAkH7B;QA5GG,yDAA0B,GAA1B;YACI,OAAO,IAAI,CAAC,eAAe,CAAC,GAAG,IAAI,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC;SACpE;QAED,mCAAI,GAAJ;YAAA,iBAwBC;YAtBG,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAACT,QAAG,CAAC,CAAC;YAClC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAACY,oBAAS,CAAC,CAAC;YACpD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAACR,wBAAmB,CAAC,CAAC;YAC1D,IAAI,IAAI,CAAC,0BAA0B,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,gBAAgB,EAAE;gBACnE,IAAI,CAAC,0BAA0B,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,gBAAgB,EAAE,CAAC;aACvE;YAED,IAAI,CAAC,cAAc,EAAE,CAAC;YAEtB,IAAI,CAAC,eAAe,EAAE,CAAC;YACvB,IAAI,CAAC,aAAa,EAAE,CAAC;YAErB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC;YAC9C,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAE1B,IAAI,CAAC,eAAe,EAAE,CAAC;YAEvB,IAAI,CAAC,SAAS,CAAC,SAAS,CAACM,SAAI,EAAEA,SAAI,EAAE;gBACjC,KAAI,CAAC,UAAU,GAAG,KAAI,CAAC,eAAe,CAAC,aAAa,CAAC;aACxD,CAAC,CAAC;YAEH,iBAAM,IAAI,WAAE,CAAC;SAChB;QAED,8CAAe,GAAf;YACI,IAAI,IAAI,CAAC,WAAW,KAAK,QAAQ,EAAE;gBAC/B,IAAI,CAAC,OAAO,GAAG,oBAAoB,CAAC;aACvC;iBAAM;gBACH,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,oBAAoB,CAAC,CAAC;aACtD;YAED,IAAI,CAAC,eAAe,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;SAC/C;QAED,sDAAuB,GAAvB,UAAwB,EAAY;YAChC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAACA,SAAI,EAAEA,SAAI,EAAE,cAAM,OAAA,EAAE,EAAE,GAAA,CAAC,CAAC;SACnD;QAED,6CAAc,GAAd;YACI,IAAI;gBACA,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAACG,iBAAY,CAAC,CAAC,CAAC;aACxE;YAAC,OAAO,CAAC,EAAE;gBACR,OAAO,CAAC,KAAK,CAAC,kCAAgC,IAAI,CAAC,WAAW,eAAY,EAAE,CAAC,CAAC,CAAC;aAClF;SACJ;QAED,4CAAa,GAAb;YAAA,iBAwBC;YAvBG,IAAM,gBAAgB,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAACZ,0BAAgB,CAAC,CAAC;;YAG7D,IAAM,kBAAkB,GAAG,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,EAAE,EAAE,IAAI,CAAC,CAAC;;YAGlG,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;YACnD,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;YAE/C,IAAI,CAAC,eAAe,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;YAChD,IAAI,CAAC,eAAe,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;;YAG5C,MAAM,CAAC,OAAO,CAAC,kBAAkB,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC,UAAC,EAAgB;oBAAhB,kBAAgB,EAAf,YAAI,EAAE,gBAAQ;gBAAM,OAAA,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,QAAQ;aAAA,CAAC,CAAC;YAC5G,MAAM,CAAC,OAAO,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,UAAC,EAAc;oBAAd,kBAAc,EAAb,YAAI,EAAE,cAAM;gBAAM,OAAA,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,MAAM;aAAA,CAAC,CAAC;YAGpG,IAAI,CAAC,SAAS,CAAC,SAAS,CAACS,SAAI,EAAEA,SAAI,EAAE;;gBAEjCI,oBAAe,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;gBAC5B,kBAAkB,CAAC,QAAQ,CAAC,kBAAkB,CAAC,SAAS,CAAC,CAAC,KAAK,CAACJ,SAAI,CAAC,CAAC;gBACtE,kBAAkB,CAAC,QAAQ,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC;aAC3D,CAAC,CAAC;SACN;QAED,iDAAkB,GAAlB;YACI,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC;SACxD;QAED,8CAAe,GAAf;YACI,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;SACpD;QAED,4CAAa,GAAb;YACI,IAAI,CAAC,OAAO,EAAE,CAAC;YACf,IAAI,IAAI,CAAC,0BAA0B,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,eAAe,EAAE;gBAClE,IAAI,CAAC,0BAA0B,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,eAAe,EAAE,CAAC;aACtE;SACJ;QAED,8CAAe,GAAf;YAAA,iBAOC;YANG,UAAU,CAAC;gBACP,KAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC;gBAE1B,KAAI,CAAC,gBAAgB,CAAC,SAAS,CAACA,SAAI,EAAEA,SAAI,EAAE,cAAM,OAAA,KAAI,CAAC,aAAa,EAAE,GAAA,CAAC,CAAC;aAE3E,EAAE,GAAG,CAAC,CAAC;SACX;QAED,0CAAW,GAAX;YACI,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;SAC5B;QAED,sCAAO,GAAP;SACC;QACL,2BAAC;IAAD,CApIA,CAAmD,eAAe;;;QCWlBC,qCAAe;QAA/D;YAAA,qEA6LC;YA7KG,4BAAsB,GAAG,KAAK,CAAC;YAC/B,6BAAuB,GAAG,KAAK,CAAC;YAEhC,cAAQ,GAAG,IAAIF,YAAO,EAAE,CAAC;YACzB,eAAS,GAAG,IAAIA,YAAO,EAAE,CAAC;;SAyK7B;QApKG,gCAAI,GAAJ;YAEIM,iBAAY,EAAE,CAAC;YAEf,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAACf,QAAG,CAAC,CAAC;YAClC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAACgB,qBAAc,CAAC,CAAC;YAC/C,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;YACvD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAACC,8BAAyB,CAAC,CAAC;YACtE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAACb,wBAAmB,CAAC,CAAC;YAC1D,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAACL,aAAM,CAAC,CAAC;YAExC,IAAI,CAAC,cAAc,EAAE,CAAC;YAEtB,IAAI,CAAC,eAAe,EAAE,CAAC;YACvB,IAAI,CAAC,aAAa,EAAE,CAAC;YAErB,IAAI,CAAC,GAAG,CAAC,kBAAkB,GAAG,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC;YACtD,IAAI,CAAC,GAAG,CAAC,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC;YACxC,IAAI,CAAC,GAAG,CAAC,UAAU,GAAG,IAAI,CAAC;YAC3B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC;YAEpC,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAE1B,IAAI,CAAC,eAAe,EAAE,CAAC;YAEvB,iBAAM,IAAI,WAAE,CAAC;SAChB;QAED,2CAAe,GAAf;;YAEI,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,oBAAoB,CAAC,CAAC;;YAGlD,IAAI,CAAC,GAAW,CAAC,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SAC3D;QAED,0CAAc,GAAd;YACI,IAAI;gBACA,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAACc,iBAAY,CAAC,CAAC,CAAC;aACxE;YAAC,OAAO,CAAC,EAAE;gBACR,OAAO,CAAC,KAAK,CAAC,+BAA6B,IAAI,CAAC,QAAQ,eAAY,EAAE,CAAC,CAAC,CAAC;aAC5E;SACJ;QAED,8CAAkB,GAAlB;YAAA,iBAGC;YAFG,IAAM,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,CAAC,UAAA,MAAM,IAAI,OAAA,KAAI,CAAC,UAAU,GAAG,MAAM,GAAA,CAAC,CAAC;YAC1F,IAAI,CAAC,uBAAuB,CAAC,cAAM,OAAA,YAAY,CAAC,WAAW,EAAE,GAAA,CAAC,CAAC;SAClE;QAED,mDAAuB,GAAvB,UAAwB,EAAY;YAChC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAACH,SAAI,EAAEA,SAAI,EAAE,cAAM,OAAA,EAAE,EAAE,GAAA,CAAC,CAAC;SACnD;QAED,2CAAe,GAAf;YACI,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;SACpD;QAED,yCAAa,GAAb;YAAA,iBAwCC;YAvCG,IAAM,gBAAgB,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAACT,0BAAgB,CAAC,CAAC;;YAG7D,IAAM,kBAAkB,GAAG,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,YAAY,EAAE,EAAE,IAAI,CAAC,CAAC;;YAG/F,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;YACnD,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;;YAG/C,MAAM,CAAC,OAAO,CAAC,kBAAkB,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC,UAAC,EAAgB;oBAAhB,kBAAgB,EAAf,YAAI,EAAE,gBAAQ;gBAAM,OAAA,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,QAAQ;aAAA,CAAC,CAAC;YAC5G,MAAM,CAAC,OAAO,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,UAAC,EAAc;oBAAd,kBAAc,EAAb,YAAI,EAAE,cAAM;gBAAM,OAAA,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,MAAM;aAAA,CAAC,CAAC;YAGpG,IAAM,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAACS,SAAI,EAAEA,SAAI,EAAE;gBAEtD,IAAI,CAAC,KAAI,CAAC,UAAU,CAAC,mBAAmB,EAAE,EAAE;oBACxC,kBAAkB,CAAC,QAAQ,CAAC,KAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,KAAK,CAACA,SAAI,CAAC,CAAC,IAAI,CAAC;wBAC7D,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,2BAA2B,EAAE,EAAC,QAAQ,EAAE,KAAI,CAAC,QAAQ,EAAC,CAAC,CAAC;qBAClF,CAAC,CAAC;oBACH,kBAAkB,CAAC,QAAQ,CAAC,KAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;oBAC9C,KAAI,CAAC,UAAU,CAAC,iBAAiB,EAAE,CAAC;oBACpC,KAAI,CAAC,UAAU,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC;iBAC7C;gBAED,kBAAkB,CAAC,QAAQ,CAAC,kBAAkB,CAAC,SAAS,CAAC;qBACpD,KAAK,CAACA,SAAI,CAAC;qBACX,IAAI,CAAC;oBACF,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,4BAA4B,EAAE,EAAC,QAAQ,EAAE,KAAI,CAAC,QAAQ,EAAC,CAAC,CAAC;oBAChF,KAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;;oBAEnC,UAAU,CAAC;wBACP,KAAI,CAAC,eAAe,GAAG,IAAI,CAAC;qBAC/B,EAAE,GAAG,CAAC,CAAC;iBACX,CAAC,CAAC;gBACP,kBAAkB,CAAC,QAAQ,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC;gBAExD,YAAY,CAAC,WAAW,EAAE,CAAC;aAC9B,CAAC,CAAC;SACN;QAED,6CAAiB,GAAjB,UAAkB,UAAkB;YAChC,OAAO,IAAI,OAAO,CAAC,UAAA,OAAO;gBACtB,IAAM,OAAO,GAAG,CAAC,CAAC,uBAAuB,CAAC,CAAC;gBAC3C,IAAI,UAAU,EAAE;oBACZ,IAAM,iBAAe,GAAG;wBACpB,IAAI,OAAO,EAAE;4BACT,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE,iBAAe,CAAC,CAAC;4BAC7C,OAAO,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;4BAChC,OAAO,CAAC,QAAQ,EAAE,CAAC,KAAK,EAAE,CAAC,MAAM,EAAE,CAAC;4BACpC,OAAO,EAAE,CAAC;4BACV,OAAO,GAAG,IAAI,CAAC;yBAClB;qBACJ,CAAC;oBACF,UAAU,GAAG,kCAAkC,GAAG,UAAU,CAAC;oBAC7D,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;oBAC7B,OAAO,CAAC,EAAE,CAAC,cAAc,EAAE,iBAAe,CAAC,CAAC;;oBAE5C,UAAU,CAAC,iBAAe,EAAE,IAAI,CAAC,CAAC;iBACrC;qBAAM;oBACH,OAAO,EAAE,CAAC;iBACb;aACJ,CAAC,CAAC;SACN;QAED,yCAAa,GAAb;YACI,IAAI,CAAC,OAAO,EAAE,CAAC;YACf,CAAC,IAAI,CAAC,GAAG,CAAC,WAAW,IAAIA,SAAI,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;YACpD,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,WAAW,EAAE,EAAC,MAAM,EAAG,IAAI,CAAC,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAC,CAAC,CAAC;SACjF;QAED,2CAAe,GAAf;YAAA,iBAwBC;YAvBG,IAAM,UAAU,GAAG,IAAI,CAAC,iBAAiB,CAAC,iBAAiB,EAAE,CAAC;YAC9D,IAAI,UAAU,EAAE;gBACZ,IAAM,UAAU,GAAG,CAAC,CAAC,uBAAuB,CAAC,CAAC;gBAC9C,UAAU,CAAC,OAAO,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC,KAAK,EAAE,CAAC,KAAK,EAAE,CAAC,CAAC;aAC7D;YACD,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC;gBACpC,KAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;gBACnC,KAAY,CAAC,kBAAkB,GAAG,IAAI,CAAC;aAC3C,CAAC,CAAC;YACH,UAAU,CAAC;gBACPQ,mBAAc,EAAE,CAAC;gBACjB,KAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC;gBAC1B,IAAIC,gBAAW,EAAE,EAAE;oBACf,KAAI,CAAC,kBAAkB,GAAG;wBACtB,KAAI,CAAC,gBAAgB,CAAC,SAAS,CAACT,SAAI,EAAEA,SAAI,EAAE;4BACxC,KAAI,CAAC,aAAa,EAAE,CAAC;yBACxB,CAAC,CAAC;wBACH,KAAI,CAAC,kBAAkB,GAAGA,SAAI,CAAC;qBAClC,CAAC;iBACL;qBAAM;oBACH,KAAI,CAAC,gBAAgB,CAAC,SAAS,CAACA,SAAI,EAAEA,SAAI,EAAE,cAAM,OAAA,KAAI,CAAC,aAAa,EAAE,GAAA,CAAC,CAAC;iBAC3E;aACJ,EAAE,GAAG,CAAC,CAAC;SACX;QAED,uCAAW,GAAX;YACI,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;SAC5B;QAED,mCAAO,GAAP,eAAY;QAEZ,6CAAiB,GAAjB,eAAsB;QAEtB,8CAAkB,GAAlB,eAAuB;QAC3B,wBAAC;IAAD,CA7LA,CAAgD,eAAe;;;QCdbC,uCAAe;QAAjE;YAAA,qEA8KC;YAjKG,cAAQ,GAAG,IAAIF,YAAO,EAAE,CAAC;YACzB,eAAS,GAAG,IAAIA,YAAO,EAAE,CAAC;;SAgK7B;QA3JG,wDAA0B,GAA1B;YACI,OAAO,IAAI,CAAC,eAAe,CAAC,GAAG,IAAI,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC;SACpE;QAED,kCAAI,GAAJ;YACI,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAACT,QAAG,CAAC,CAAC;YAElC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAACY,oBAAS,CAAC,CAAC;YACpD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;YAC1D,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAACR,wBAAmB,CAAC,CAAC;YAC1D,IAAI,IAAI,CAAC,0BAA0B,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,gBAAgB,EAAE;gBACnE,IAAI,CAAC,0BAA0B,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,gBAAgB,EAAE,CAAA;aACtE;YAED,IAAI,CAAC,cAAc,EAAE,CAAC;YAEtB,IAAI,CAAC,eAAe,EAAE,CAAC;YACvB,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,IAAI,CAAC,eAAe,EAAE,CAAC;YACvB,iBAAM,IAAI,WAAE,CAAC;SAChB;QAED,6CAAe,GAAf;YACI,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;SACrB;QAED,4CAAc,GAAd;YACI,IAAI;gBACA,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAACS,iBAAY,CAAC,CAAC,CAAC;aACxE;YAAC,OAAO,CAAC,EAAE;gBACR,OAAO,CAAC,KAAK,CAAC,iCAA+B,IAAI,CAAC,UAAU,eAAY,EAAE,CAAC,CAAC,CAAC;aAChF;SACJ;QAED,qDAAuB,GAAvB;YACI,IAAI,CAAC,eAAe,CAAC,8BAA8B,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;YAC3E,IAAI,CAAC,eAAe,CAAC,2BAA2B,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;SAC3E;QAED,qDAAuB,GAAvB,UAAwB,EAAY;YAChC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAACH,SAAI,EAAEA,SAAI,EAAE,cAAM,OAAA,EAAE,EAAE,GAAA,CAAC,CAAC;SACnD;QAED,6CAAe,GAAf;YACI,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,qBAAqB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;SAC5E;QAED,2CAAa,GAAb;YAAA,iBAuDC;YAtDG,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC;iBACrC,IAAI,CAAC,UAAA,MAAM;gBAER,IAAI,MAAM,EAAE;oBACR,KAAI,CAAC,WAAW,GAAG,MAAM,CAAC,WAAW,CAAC;oBACtC,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC,UAAU,IAAI,EAAE,EAAE;yBACpC,OAAO,CAAC,UAAC,EAA0B;4BAA1B,kBAA0B,EAAzB,WAAG,EAAE,YAAI;wBAChB,IAAI,IAAI,CAAC;wBACT,IAAM,KAAK,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;wBAEjC,IAAI,CAAC,CAAC,UAAU,CAAC,KAAK,EAAE,OAAO,CAAC,EAAE;4BAC9B,IAAI,GAAG,KAAK,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;yBACrC;wBAED,MAAM,CAAC,cAAc,CAAC,KAAI,EAAE,GAAG,EAAE;4BAC7B,GAAG,EAAE,cAAM,OAAA,KAAI,CAAC,eAAe,CAAC,GAAG,CAAC,GAAA;4BACpC,GAAG,EAAE,UAAA,EAAE,IAAI,OAAA,KAAI,CAAC,eAAe,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,GAAA;yBACnD,CAAC,CAAC;wBAEH,IAAI,IAAI,EAAE;4BACN,KAAI,CAAC,uBAAuB,CACxBU,WAAM,CAAC,IAAI,EAAE,KAAI,EAAE,EAAE,EAAE,UAAA,EAAE,IAAI,OAAA,KAAI,CAAC,eAAe,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,GAAA,CAAC,CACtE,CAAC;yBACL;qBACJ,CAAC,CAAC;oBAEP,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC,MAAM,IAAI,EAAE,EAAE;yBAChC,OAAO,CAAC,UAAC,EAA0B;4BAA1B,kBAA0B,EAAzB,WAAG,EAAE,YAAI;wBAChB,KAAI,CAAC,GAAG,CAAC,GAAG;4BAAC,cAAO;iCAAP,UAAO,EAAP,qBAAO,EAAP,IAAO;gCAAP,yBAAO;;4BAChB,IAAM,SAAS,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;4BAC9C,KAAI,CAAC,eAAe,CAAC,mBAAmB,CAAC,SAAS,EAAE,EAAC,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC,EAAC,CAAC,CAAC;yBAC1F,CAAC;qBACL,CAAC,CAAC;oBAEP,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC,OAAO,IAAI,EAAE,EAAE;yBACjC,OAAO,CAAC,UAAC,EAA0B;4BAA1B,kBAA0B,EAAzB,WAAG,EAAE,YAAI;wBAChB,KAAI,CAAC,eAAe,CAAC,GAAG,CAAC,GAAG;4BAAC,cAAO;iCAAP,UAAO,EAAP,qBAAO,EAAP,IAAO;gCAAP,yBAAO;;4BAChC,IAAI;gCACA,IAAI,KAAI,CAAC,GAAG,CAAC,EAAE;oCACX,OAAO,KAAI,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,KAAI,EAAE,IAAI,CAAC,CAAC;iCACtC;6BACJ;4BAAC,OAAO,CAAC,EAAE;gCACR,OAAO,CAAC,IAAI,CAAC,+BAA6B,KAAI,CAAC,UAAU,gBAAW,GAAK,CAAC,CAAC;6BAC9E;yBACJ,CAAC;qBACL,CAAC,CAAC;iBACV;gBACD,KAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;;;gBAGtC,IAAIC,SAAI,EAAE,EAAE;oBACR,KAAI,CAAC,eAAe,CAAC,MAAM,GAAG,KAAI,CAAC,eAAe,CAAC,WAAW,EAAE,CAAC;iBACpE;aACJ,CAAC,CAAC;SACV;QAED,2CAAa,GAAb;YAAA,iBAmBC;YAlBG,IAAM,gBAAgB,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAACpB,0BAAgB,CAAC,CAAC;;YAG7D,IAAM,kBAAkB,GAAG,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,YAAY,EAAE,EAAE,IAAI,CAAC,CAAC;;YAGjG,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;YACpB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;;YAGlB,MAAM,CAAC,OAAO,CAAC,kBAAkB,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC,UAAC,EAAgB;oBAAhB,kBAAgB,EAAf,YAAI,EAAE,gBAAQ;gBAAM,OAAA,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,QAAQ;aAAA,CAAC,CAAC;YAC5G,MAAM,CAAC,OAAO,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,UAAC,EAAc;oBAAd,kBAAc,EAAb,YAAI,EAAE,cAAM;gBAAM,OAAA,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,MAAM;aAAA,CAAC,CAAC;YAGpG,IAAI,CAAC,SAAS,CAAC,SAAS,CAACS,SAAI,EAAEA,SAAI,EAAE;gBACjC,kBAAkB,CAAC,QAAQ,CAAC,kBAAkB,CAAC,SAAS,CAAC,CAAC,KAAK,CAACA,SAAI,CAAC,CAAC;gBACtE,kBAAkB,CAAC,QAAQ,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC;aAC3D,CAAC,CAAC;SACN;QAED,2CAAa,GAAb;;YAEII,oBAAe,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YAC5B,IAAI,CAAC,OAAO,EAAE,CAAC;YACf,IAAI,IAAI,CAAC,0BAA0B,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,eAAe,EAAE;gBAClE,IAAI,CAAC,0BAA0B,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,eAAe,EAAE,CAAC;aACtE;YACD,IAAI,CAAC,eAAe,CAAC,mBAAmB,CAAC,MAAM,CAAC,CAAC;SACpD;QAGD,6CAAe,GAAf;YAAA,iBAMC;YALG,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC;YAC1B,IAAI,CAAC,uBAAuB,EAAE,CAAC;YAC/B,UAAU,CAAC;gBACP,KAAI,CAAC,gBAAgB,CAAC,SAAS,CAACJ,SAAI,EAAEA,SAAI,EAAE,cAAM,OAAA,KAAI,CAAC,aAAa,EAAE,GAAA,CAAC,CAAC;aAC3E,EAAE,GAAG,CAAC,CAAC;SACX;QAED,yCAAW,GAAX;YACI,IAAI,CAAC,eAAe,CAAC,mBAAmB,CAAC,SAAS,CAAC,CAAC;YACpD,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;SAC5B;;QAGD,8CAAgB,GAAhB,eAAqB;QAErB,qCAAO,GAAP,eAAY;QAEhB,0BAAC;IAAD,CA9KA,CAAkD,eAAe;;ICNjE,IAAK,SAIJ;IAJD,WAAK,SAAS;QACV,kCAAqB,CAAA;QACrB,oCAAuB,CAAA;QACvB,4CAA+B,CAAA;IACnC,CAAC,EAJI,SAAS,KAAT,SAAS,QAIb;AAED;QAUI,8BACY,WAA6B,EAC7B,gBAAkC,EAClC,eAAgC;YAFhC,gBAAW,GAAX,WAAW,CAAkB;YAC7B,qBAAgB,GAAhB,gBAAgB,CAAkB;YAClC,oBAAe,GAAf,eAAe,CAAiB;YARpC,cAAS,GAAG,KAAK,CAAC;YAUtB,IAAM,cAAc,GAAG,IAAI,CAAC,eAAe,CAAC,GAAG,EAAE,CAAC;YAClD,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC,GAAG,CAAC,cAAc,EAAE,iBAAiB,CAAC,CAAC;YAChE,IAAI,CAAC,mBAAmB,GAAG,CAAC,CAAC,GAAG,CAAC,cAAc,EAAE,eAAe,CAAC,CAAC;YAClE,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC,GAAG,CAAC,cAAc,EAAE,oBAAoB,CAAC,CAAC;SAChE;;;;;;;QAQO,yDAA0B,GAAlC,UAAmC,GAAG;YAClC,IAAM,mBAAmB,GAAG,QAAQ,CAAC;YAErC,GAAG,GAAG,GAAG,IAAI,EAAE,CAAC;YAChB,IAAI,GAAG,KAAK,EAAE,EAAE;gBACZ,OAAO,EAAE,CAAC;aACb;;YAED,OAAO,CAAC,CAAC,KAAK,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC;gBACpC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,mBAAmB,EAAE,GAAG,CAAC,CAAC;aACtD,CAAC,CAAC;SACN;;;;;;;QAQO,yCAAU,GAAlB,UAAmB,WAAW,EAAE,SAAS;YACrC,OAAO,WAAW,CAAC,IAAI,CAAC,UAAU,IAAI;gBAClC,OAAO,CAAC,CAAC,QAAQ,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;aACtC,CAAC,CAAC;SACN;;;;;;;QAQO,gDAAiB,GAAzB,UAA0B,WAAW,EAAE,SAAS;;YAE5C,IAAI,CAAC,CAAC,QAAQ,CAAC,WAAW,EAAE,SAAS,CAAC,QAAQ,CAAC,EAAE;gBAC7C,OAAO,IAAI,CAAC;aACf;;YAGD,IAAI,CAAC,CAAC,QAAQ,CAAC,WAAW,EAAE,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE;gBAC3E,OAAO,IAAI,CAAC;aACf;;YAGD,IAAI,CAAC,CAAC,QAAQ,CAAC,WAAW,EAAE,SAAS,CAAC,aAAa,CAAC,IAAI,IAAI,CAAC,mBAAmB,EAAE;gBAC9E,OAAO,IAAI,CAAC;aACf;;YAGD,OAAO,IAAI,CAAC,mBAAmB,IAAI,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;SAC9E;QAED,sBAAa,6CAAW;iBAAxB,UAAyB,KAAK;;gBAE1B,IAAI,IAAI,CAAC,SAAS,EAAE;oBAChB,OAAO;iBACV;gBAED,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;gBACtB,IAAM,WAAW,GAAG,IAAI,CAAC,0BAA0B,CAAC,KAAK,CAAC,CAAC;gBAC3D,IAAM,YAAY,GAAG,CAAC,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,iBAAiB,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;gBAClG,IAAI,YAAY,EAAE;oBACd,IAAI,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;iBAC9D;qBAAM;oBACH,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,CAAC;iBACjC;aACJ;;;WAAA;;oBA5FJY,YAAS,SAAC;wBACP,QAAQ,EAAE,eAAe;qBAC5B;;;;;wBAd0BC,cAAW;wBAAEC,mBAAgB;wBAE/C3B,wBAAe;;;;kCAwFnB4B,QAAK;;QAeV,2BAAC;KA7FD;;;QCyCI,mCACsC,iBAAiB,EAC5C,KAAuB,EACvB,KAAiB,EACjB,GAAa,EACZ,GAAQ,EACM,QAAgB,EAC9B,QAAkC,EAClC,oBAA0C,EAC1C,kBAAsC;YATlD,iBAiCC;YAhCqC,sBAAiB,GAAjB,iBAAiB,CAAA;YAC5C,UAAK,GAAL,KAAK,CAAkB;YACvB,UAAK,GAAL,KAAK,CAAY;YACjB,QAAG,GAAH,GAAG,CAAU;YACZ,QAAG,GAAH,GAAG,CAAK;YAER,aAAQ,GAAR,QAAQ,CAA0B;YAClC,yBAAoB,GAApB,oBAAoB,CAAsB;YAC1C,uBAAkB,GAAlB,kBAAkB,CAAoB;YA7C1C,uBAAkB,GAAG,KAAK,CAAC;YA4BnC,kBAAa,GAAG,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,EAAE,GAAG,EAAE,EAAC,OAAO,EAAE,IAAI,EAAC,CAAC,CAAC;YAoBlE,iBAAiB,CAAC,8BAA8B,CAAC,UAAC,GAAW,EAAE,EAAO,EAAE,EAAQ;gBAC5E,IAAI,GAAG,KAAK,SAAS,EAAE;oBACnB,IAAI,iBAAiB,CAAC,SAAS,EAAE;wBAC7B,iBAAiB,CAAC,SAAS,GAAG;4BAC1B,KAAI,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;4BACvB,iBAAiB,CAAC,SAAS,GAAGf,SAAI,CAAC;yBACtC,CAAC;qBACL;yBAAM;wBACH,KAAI,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;qBAC1B;iBACJ;aACJ,CAAC,CAAC;YAEH,IAAM,YAAY,GAAG,iBAAiB,CAAC,OAAO;iBACzC,IAAI,CACDgB,gBAAM,CAAC,cAAM,OAAA,KAAI,CAAC,kBAAkB,GAAA,CAAC,EACrCC,sBAAY,CAAC,GAAG,CAAC,CACpB;iBACA,SAAS,CAAC,cAAM,OAAA,KAAI,CAAC,aAAa,CAAC,iBAAiB,CAAC,OAAO,CAAC,GAAA,CAAC,CAAC;;YAEpE,iBAAiB,CAAC,uBAAuB,CAAC,cAAM,OAAA,YAAY,CAAC,WAAW,EAAE,GAAA,CAAC,CAAC;SAC/E;QAlED,sBAAI,2CAAI;iBAAR;gBACI,OAAO,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC;aACtC;;;WAAA;QAEK,kDAAc,GAApB,UAAqB,EAAE;;;;;;;;4BAEnB,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;;4BAEnBb,oBAAe,CAAC,IAAI,CAAC,CAAC;4BAEG,qBAAM,IAAI,CAAC,kBAAkB,CAAC,sBAAsB,CAAC,EAAE,EAAE5B,qBAAa,CAAC,OAAO,CAAC,EAAA;;4BAAlG,gBAAgB,GAAG,SAA+E;4BACxG,IAAI,gBAAgB,EAAE;gCACZ,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,gBAAgB,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;gCAE9E,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;oCACf,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,aAAa,CAAC,4BAA4B,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC;iCACnH;gCAED,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,EAAE,CAAC;gCAC5B,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,WAAW,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;gCAC7D,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;gCAC/B,UAAU,CAAC,cAAM,OAAA,KAAI,CAAC,aAAa,EAAE,GAAA,EAAE,GAAG,CAAC,CAAC;6BAC/C;;;;;SACJ;QAID,iDAAa,GAAb;YACI,IAAI,CAAC,iBAAiB,CAAC,mBAAmB,CAAC,MAAM,CAAC,CAAC;YAEnD,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;SACpC;;oBAvCJoC,YAAS,SAAC;wBACP,QAAQ,EAAE,oBAAoB;qBACjC;;;;;wDAwCQM,OAAI,YAAIC,SAAM,SAACjB,oBAAS;wBAtD4DY,mBAAgB;wBAApDM,aAAU;wBAAUC,WAAQ;wBAI5E/B,QAAG;qDAuDHgC,YAAS,SAAC,SAAS;wBA3DRC,2BAAwB;wBAQnC,oBAAoB;wBAAiB,kBAAkB;;;QA+EhE,gCAAC;KA3ED;;;QCMI;SAAgB;;oBAhBnBC,YAAS,SAAC;wBACP,QAAQ,EAAE,aAAa;wBACvB,QAAQ,EAAE,+aAST;qBACJ;;;;;2BAEIT,QAAK;sCACLA,QAAK;;QAEV,0BAAC;KAjBD;;;QCmB4Cd,0CAAK;;QAS7C,gCACc,aAA4B,EAC/B,YAA0B;YAFrC,YAII,kBAAM,aAAa,EAAE,YAAY,CAAC,SAGrC;YANa,mBAAa,GAAb,aAAa,CAAe;YAC/B,kBAAY,GAAZ,YAAY,CAAc;YANrC,cAAQ,GAAQ,EAAE,CAAC;YACnB,YAAM,GAAQ,EAAE,CAAC;YAQb,KAAI,CAAC,QAAQ,GAAG,KAAI,CAAC,OAAO,IAAI,EAAE,CAAC;YACnC,KAAI,CAAC,cAAc,EAAE,CAAC;;SACzB;;QAGD,+CAAc,GAAd;YAAA,iBAgBC;YAfG,CAAC,CAAC,OAAO,CAAO,IAAI,CAAC,OAAQ,CAAC,aAAa,EAAE,UAAC,KAAK;gBAC/C,IAAI,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;oBAC/D,KAAI,CAAC,QAAQ,CAAC,IAAI,CAACS,WAAM,CACrB,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EACf,KAAI,CAAC,OAAQ,CAAC,OAAO,EAC3B,EAAE,EACF,UAAA,EAAE;wBACE,KAAI,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;wBAC7BjC,eAAU,EAAE,CAAC;qBAChB,CACJ,CAAC,CAAC;iBACN;qBAAM;oBACH,KAAI,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC;iBACzC;aACJ,CAAC,CAAC;SACN;QAEK,yDAAwB,GAA9B;;;;oBACU,aAAa,GAAG,CAAC,CAAC,sBAAsB,CAAC,CAAC;oBAEhD,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,CAAC;oBAE5B,aAAa,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,kBAAkB,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;;;;SAC3G;QAED,gDAAe,GAAf;YACI,IAAI,CAAC,wBAAwB,EAAE,CAAC;SACnC;QAED,4CAAW,GAAX;YACI,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,UAAA,OAAO,IAAI,OAAA,OAAO,EAAE,GAAA,CAAC,CAAC;SAClD;;oBAhEJ+C,YAAS,SAAC;wBACP,QAAQ,EAAE,4BAA4B;wBACtC,QAAQ,EAAE,+ZAQS;wBACnB,mBAAmB,EAAE,KAAK;qBAC7B;;;;;wBAlB6BC,uBAAa;wBAA3BC,sBAAY;;;;qCAqBvBC,YAAS,SAAC,aAAa,EAAE,EAAC,IAAI,EAAEb,mBAAgB,EAAC;sCACjDa,YAAS,SAAC,iBAAiB;;QAiDhC,6BAAC;KAAA,CApD2CC,eAAK;;;QCP7C,4BACY,KAAqB,EACrB,eAAgC,EAChCC,SAAc,EACd,GAAQ,EACR,SAA4B;YAJ5B,UAAK,GAAL,KAAK,CAAgB;YACrB,oBAAe,GAAf,eAAe,CAAiB;YAChC,WAAM,GAANA,SAAM,CAAQ;YACd,QAAG,GAAH,GAAG,CAAK;YACR,cAAS,GAAT,SAAS,CAAmB;SACpC;QAEJ,qCAAQ,GAAR;YAAA,iBAYC;YAXG,IAAI,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE;;gBAEvB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC;aAC5C;iBAAO,IAAI,IAAI,CAAC,GAAG,CAAC,iBAAiB,EAAE;gBACpC,IAAI,CAAC,eAAe,CAAC,qBAAqB,EAAE,CAAC,IAAI,CAAC,UAAA,IAAI;oBAClD,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;iBAChC,CAAC,CAAC;aACN;iBAAM;gBACH,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAACC,2BAAsB,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAC1D,IAAI,CAAC,SAAS,CAAC,eAAe,EAAE,CAAC;aACpC;SACJ;;oBA1BJN,YAAS,SAAC;wBACP,QAAQ,EAAE,gBAAgB;wBAC1B,QAAQ,EAAE,aAAa;qBAC1B;;;;;wBAVQlB,qBAAc;wBAGdnB,wBAAe;wBAHCE,aAAM;wBAEtBC,QAAG;wBAGH,iBAAiB;;;QA6B1B,yBAAC;KA3BD;;;QCYI,yBACsC,iBAAiB,EAC5C,KAAuB,EACvB,KAAiB,EAChB,UAAgC,EAChC,QAAkC,EAClC,QAAkB,EAClB,oBAA0C;YAPtD,iBAmBC;YAlBqC,sBAAiB,GAAjB,iBAAiB,CAAA;YAC5C,UAAK,GAAL,KAAK,CAAkB;YACvB,UAAK,GAAL,KAAK,CAAY;YAChB,eAAU,GAAV,UAAU,CAAsB;YAChC,aAAQ,GAAR,QAAQ,CAA0B;YAClC,aAAQ,GAAR,QAAQ,CAAU;YAClB,yBAAoB,GAApB,oBAAoB,CAAsB;YAElD,IAAM,UAAU,GAAG,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC;YAErD,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,UAAU,CAAC;iBACvC,IAAI,CAAC;;;;;oCACuB,qBAAM,IAAI,CAAC,oBAAoB,CAAC,sBAAsB,CAAC,UAAU,EAAEd,qBAAa,CAAC,MAAM,CAAC,EAAA;;gCAA3G,gBAAgB,GAAG,SAAwF;gCACjH,IAAI,gBAAgB,EAAE;oCACZ,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,gBAAgB,EAAE,CAAC,EAAE,QAAQ,CAAC,CAAC;oCAC9E,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,WAAW,CAAC,WAAW,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;iCAC5E;;;;;aACJ,CAAC,CAAC;SACV;;oBAxBJoC,YAAS,SAAC;wBACP,QAAQ,EAAE,wBAAwB;qBACrC;;;;;wDAIQM,OAAI,YAAIC,SAAM,SAACjB,oBAAS;wBAd7BY,mBAAgB;wBAJhBM,aAAU;wBASL,oBAAoB;wBAXzBG,2BAAwB;wBAIxBF,WAAQ;wBAQH,oBAAoB;;;QA2B7B,sBAAC;KAzBD;;ICMA,IAAM,WAAW,GAAG;QAChB,aAAa,EAAEjC,0BAAqB;QACpC,WAAW,EAAEM,wBAAmB;QAChC,cAAc,EAAED,2BAAsB;QACtC,cAAc,EAAEsC,2BAAsB;QACtC,KAAK,EAAE5B,iBAAY;QACnB,UAAU,EAAE6B,qBAAgB;QAC5B,YAAY,EAAEC,uBAAkB;QAChC,uBAAuB,EAAEC,gCAA2B;KACvD,CAAC;IAQF,IAAM,IAAI,GAAG;QAAC,cAAO;aAAP,UAAO,EAAP,qBAAO,EAAP,IAAO;YAAP,yBAAO;;IAAM,CAAC,CAAC;IAE7B;IACA,IAAM,iBAAiB,GAAG;QACtB,IAAM,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;QACrC,IAAM,EAAE,GAAG,UAAU,GAAG,EAAE,OAAQ;YAC9B,IAAM,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAC5C,OAAO,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC,CAAC;SACrE,CAAC;QACF,IAAM,KAAK,GAAG;YACV,OAAO,EAAE,CAAC,KAAK,CAAC,SAAS,YAAG,MAAM,GAAK,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC;SAClE,CAAC;QACF,CAAC,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC,OAAO,CAAC,UAAA,GAAG,IAAI,OAAA,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,SAAS,EAAE,GAAG,CAAC,GAAA,CAAC,CAAC;QAChH,OAAO,KAAK,CAAC;IACjB,CAAC,CAAC;;QAkCE,gBACY,GAAa,EACb,WAAgC,EAChC,WAAgC,EAChC,eAAgC;YAHhC,QAAG,GAAH,GAAG,CAAU;YACb,gBAAW,GAAX,WAAW,CAAqB;YAChC,gBAAW,GAAX,WAAW,CAAqB;YAChC,oBAAe,GAAf,eAAe,CAAiB;YAlC5C,cAAS,GAAQ,EAAE,CAAC;YACpB,YAAO,GAAQ,EAAE,CAAC;YAClB,wBAAmB,GAAG,IAAI,CAAC;YAC3B,qBAAgB,GAAG,IAAI,CAAC;YACxB,gBAAW,GAAG,IAAI,CAAC;YACnB,sBAAiB,GAAG,IAAI,CAAC;YACzB,wBAAmB,GAAI,IAAI,CAAC;YAC5B,qBAAgB,GAAI,IAAI,CAAC;YACzB,mBAAc,GAAI,IAAI,CAAC;YACvB,iCAA4B,GAAG,EAAE,CAAC;YAUlC,iBAAY,GAAG,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YACzE,sBAAiB,GAAG,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YAEtE,mBAAc,GAAG,IAAIC,kBAAa,EAAE,CAAC;YAezC,IAAM,mBAAmB,GAAGL,2BAAsB,EAAE,CAAC;YAErD,IAAI,CAAC,WAAW,GAAG,mBAAmB,CAAC,IAAI,CAAC;YAC5C,IAAI,CAAC,YAAY,GAAG,mBAAmB,CAAC,IAAI,2BAAyB;YACrE,IAAI,CAAC,iBAAiB,GAAG,mBAAmB,CAAC,IAAI,qCAA8B;YAC/E,IAAI,CAAC,oBAAoB,GAAG,mBAAmB,CAAC,IAAI,4CAAkC;YAEtF,IAAI,CAAC,WAAW,CAAC,wBAAwB,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YAEjE,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;YACjD,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SAC9C;QAtBD,uBAAM,GAAN;YACI,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;SAC5B;QAsBM,uBAAM,GAAb,UAAc,SAAiB;YAAE,cAAmB;iBAAnB,UAAmB,EAAnB,qBAAmB,EAAnB,IAAmB;gBAAnB,6BAAmB;;YAChD,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;SACpE;QAEM,8BAAa,GAApB,UAAqB,QAAQ;YAA7B,iBAgBC;YAfG,IAAIM,aAAQ,CAAC,QAAQ,CAAC,EAAE;gBACpB,IAAI,QAAQ,KAAK,aAAa,EAAE;oBAC5B,OAAO,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBACvC;gBACD,IAAI,kBAAgB,GAAG,WAAW,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACpF,IAAI,CAAC,kBAAgB,IAAI,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,EAAE;oBAC7C,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,OAAO,CAAE,UAAA,CAAC;wBAC7B,IAAI,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,WAAW,GAAG,QAAQ,GAAG,GAAG,CAAC,KAAK,CAAC,EAAE;4BACrF,kBAAgB,GAAG,KAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;yBAC5D;qBACJ,CAAC,CAAC;iBACN;gBACD,OAAO,kBAAgB,CAAC;aAC3B;YACD,OAAO,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;SACjC;;;;QAKD,sBAAK,GAAL;YACI,IAAM,QAAQ,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,GAAG,EAAE,EAAE,UAAU,CAAC,CAAC;;YAE/D,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;gBACtB,IAAI,CAAC,gBAAgB,EAAE,CAAC;aAC3B;SACJ;QAEM,0BAAS,GAAhB,UAAiB,SAAS,EAAE,QAA6B;YACrD,OAAO,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;SAC7D;QAEM,0BAAS,GAAhB,UAAiB,QAAQ,EAAE,IAAI,EAAE,KAAK;YAClC,IAAM,kBAAkB,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,yBAAyB,CAAC,CAAC;YAClE,IAAI,kBAAkB,EAAE;gBACpB,IAAI,GAAG,IAAI,IAAI,SAAS,CAAC;gBACzB,kBAAkB,CAAC,MAAM,CAAC;oBACtB,OAAO,EAAE,QAAQ;oBACjB,KAAK,EAAEzD,cAAS,CAAC,KAAK,CAAC,GAAG,KAAK,GAAG,IAAI,CAAC,WAAW,EAAE;oBACpD,KAAK,EAAE,IAAI;;oBAEX,QAAQ,EAAE,IAAI,CAAC,WAAW,EAAE,KAAK,OAAO,GAAG,CAAC,GAAG,SAAS;iBAC3D,CAAC,CAAC;aACN;iBAAM;gBACH,OAAO,CAAC,IAAI,CAAC,iEAAiE,CAAC,CAAC;aACnF;SACJ;;oBAvGJM,aAAU;;;;;wBAtDUoC,WAAQ;wBAKzB3B,wBAAmB;wBADnBR,wBAAmB;wBAadC,wBAAe;;;QA6IxB,aAAC;KAxGD;;;QC3CwCc,sCAAsB;QAE1D,4BAAoB,OAAsB;YAA1C,YACI,iBAAO,SACV;YAFmB,aAAO,GAAP,OAAO,CAAe;;SAEzC;QAEO,yCAAY,GAApB,UAAsB,IAAY,EAAE,KAAa,EAAE,IAAY,EAAE,OAAa;;YAE1E,IAAI,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE;gBACrB,OAAO,GAAG,EAAC,OAAO,EAAE,OAAO,EAAC,CAAC;aAChC;YAED,OAAO,GAAG,OAAO,IAAI,EAAE,CAAC;YACxB,OAAO,CAAC,OAAO,GAAGtB,cAAS,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,OAAO,CAAC,OAAO,GAAG,CAAC,CAAC;YACnE,OAAO,CAAC,UAAU,GAAGA,cAAS,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;YACnD,OAAO,CAAC,aAAa,GAAG,OAAO,CAAC,aAAa,IAAI,oBAAoB,CAAC;YACtE,OAAO,CAAC,UAAU,GAAG,OAAO,CAAC;;YAE7B,IAAI,KAAK,IAAI,IAAI,EAAE;;gBAEf,IAAI,CAAC,OAAO,CAAC,cAAc,IAAI,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;oBAC7C,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;iBAC/B;gBACD,IAAM,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;gBAC9B,IAAI,EAAE,EAAE;oBACJ,OAAO,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,CAAC,CAAC;iBACtD;aACJ;SACJ;QAEM,oCAAO,GAAd,UAAgB,KAAK,EAAE,IAAI;YACvB,OAAO,IAAI,CAAC,YAAY,CAAC,SAAS,EAAE,KAAK,EAAE,IAAI,EAAE,EAAC,OAAO,EAAE,IAAI,EAAC,CAAC,CAAC;SACrE;QAEM,kCAAK,GAAZ,UAAc,KAAK,EAAE,IAAI;YACrB,OAAO,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE,EAAC,OAAO,EAAE,CAAC,EAAC,CAAC,CAAC;SAChE;QAEM,iCAAI,GAAX,UAAa,KAAK,EAAE,IAAI;YACpB,OAAO,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,EAAC,OAAO,EAAE,CAAC,EAAC,CAAC,CAAC;SAC/D;QAEM,iCAAI,GAAX,UAAa,KAAK,EAAE,IAAI;YACpB,OAAO,IAAI,CAAC,YAAY,CAAC,SAAS,EAAE,KAAK,EAAE,IAAI,EAAE,EAAC,OAAO,EAAE,CAAC,EAAC,CAAC,CAAC;SAClE;QAEM,iCAAI,GAAX,UAAa,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO;YACnC,OAAO,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;SACxD;QAEM,iCAAI,GAAX,UAAa,UAAU;;YAEnB,IAAI,CAAC,UAAU,EAAE;gBACb,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;gBACrB,OAAO;aACV;YACD,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;SAC1C;QAEM,uCAAU,GAAjB,UAAkB,IAAI,EAAE,OAAO;YAC3B,IAAI,CAAC,IAAI,EAAE;gBACP,OAAO;aACV;YACD,OAAO,GAAG,OAAO,IAAI,EAAE,CAAC;YACxB,OAAO,CAAC,cAAc,GAAG,sBAAsB,CAAC;YAChD,OAAO,CAAC,UAAU,GAAG,gBAAgB,CAAC;YACtC,OAAO,CAAC,OAAO,GAAGA,cAAS,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,OAAO,CAAC,OAAO,GAAG,CAAC,CAAC;YACnE,OAAO,CAAC,UAAU,GAAGA,cAAS,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;YACnD,OAAO,CAAC,aAAa,GAAG,OAAO,CAAC,aAAa,IAAI,oBAAoB,CAAC;YACtE,OAAO,CAAC,UAAU,GAAG,OAAO,CAAC;YAC7B,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,EAAE,OAAO,CAAC,CAAC;SAC/C;;oBAxEJM,aAAU;;;;;wBARFwC,uBAAa;;;QAiFtB,yBAAC;KAAA,CAxEuCM,2BAAsB;;ICW9D,IAAM,oBAAoB,GAAG,gBAAgB,CAAC;IAC9C,IAAM,kBAAkB,GAAG,CAAC,IAAI,EAAE,QAAQ,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO;QACvH,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK;QACrH,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;AAE5D;QACqC9B,mCAAmB;QASpD,yBACY,KAAiB,EACjB,eAAgC,EAChC,WAAwB;YAHpC,YAKI,iBAAO,SAGV;YAPW,WAAK,GAAL,KAAK,CAAY;YACjB,qBAAe,GAAf,eAAe,CAAiB;YAChC,iBAAW,GAAX,WAAW,CAAa;YAT5B,4BAAsB,GAAG,IAAI,CAAC;YAI9B,4BAAsB,GAAG,KAAK,CAAC;YAQnC,KAAI,CAAC,SAAS,GAAG,EAAE,CAAC;YACpB,KAAI,CAAC,YAAY,GAAG,IAAI,GAAG,EAAE,CAAC;;SACjC;QAEO,+CAAqB,GAA7B;YACI,IAAI,SAAS,GAAkB,KAAK,CAAC;YACrC,IAAI,kBAAkB,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,EAAE;gBAClD,SAAS,GAAG,KAAK,CAAC;aACrB;YAEDoC,WAAM,CAAC,QAAQ,CAAC,IAAI,EAAE,WAAW,EAAE,SAAS,CAAC,CAAC;SACjD;QAEO,8BAAI,GAAZ;YACI,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;YAEnB,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;SACxD;QAEM,2CAAiB,GAAxB;YACI,OAAO,IAAI,CAAC,cAAc,CAAC;SAC9B;QAEM,mDAAyB,GAAhC;YACI,OAAO,IAAI,CAAC,sBAAsB,CAAC;SACtC;QAEM,sCAAY,GAAnB;YACI,OAAO,IAAI,CAAC,SAAS,CAAC;SACzB;QAEM,+CAAqB,GAA5B,UAA6B,UAAkB;YAC3C,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE;gBACpC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,UAAU,EAAE,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;aACpE;YACD,OAAO,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;SAC5C;QAEO,8CAAoB,GAA5B,UAA6B,QAAa;YAA1C,iBAaC;YAZG,IAAI,CAAC,QAAQ,CAAC,cAAc,EAAE;gBAC1B,OAAO;aACV;YAED,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,UAAC,UAAkB;gBAC5D,IAAI,MAAM,GAAG,KAAI,CAAC,YAAY,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;gBAC/C,IAAI,CAAC,MAAM,EAAE;oBACT,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,KAAI,CAAC,SAAS,CAAC,CAAC;oBACvC,KAAI,CAAC,YAAY,CAAC,GAAG,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;iBAC7C;gBACD,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,QAAQ,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,CAAC;aAC9D,CAAC,CAAC;SACN;QAEO,wCAAc,GAAtB,UAAuB,QAAa;YAChC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;SAC1C;QAEO,sCAAY,GAApB,UAAqB,IAAI;YACrB,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC;iBACtB,SAAS,EAAE;iBACX,KAAK,CAAC;gBACH,OAAO,CAAC,IAAI,CAAC,wCAAsC,IAAM,CAAC,CAAC;aAE9D,CAAC,CAAC;SACV;QAES,6CAAmB,GAA7B;YAAA,iBAOC;YANG,IAAI,CAAC,YAAY,CAAI,oBAAoB,SAAI,IAAI,CAAC,cAAc,UAAO,CAAC;iBACnE,IAAI,CAAC,UAAA,MAAM;gBACR,KAAI,CAAC,cAAc,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;gBACrC,KAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC;gBAClC,KAAI,CAAC,WAAW,CAAC,UAAU,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;aAC/C,CAAC,CAAC;SACV;QAES,gDAAsB,GAAhC,UAAiC,YAAY;YAA7C,iBAsBC;YArBG,IAAM,OAAO,GAAGC,oBAAe,CAAC,MAAM,IAAIA,oBAAe,CAAC,MAAM,CAAC;YACjE,IAAI,IAAI,CAAC,cAAc,KAAK,IAAI,CAAC,sBAAsB,EAAE;gBACrD,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;gBAC3C,OAAO;aACV;YACD,IAAM,IAAI,GAAG,OAAO,IAAG,oBAAkB,YAAY,QAAK,CAAA,CAAC;YAC3D,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,EAAC,YAAY,EAAE,MAAM,EAAC,CAAC;iBACvC,SAAS,EAAE;iBACX,IAAI,CAAC,UAAC,QAAa;gBAChB,IAAM,EAAE,GAAG,IAAI,QAAQ,CAAC,QAAQ,CAAC,CAAC;;gBAGlC,EAAE,EAAE,CAAC;gBACL,MAAM,CAAC,MAAM,CAAC,KAAI,CAAC,cAAc,CAAC,CAAC;;gBAGnC,IAAI,OAAO,CAAC;gBACZ,EAAE,CAAC,KAAK,CAAC,EAAC,MAAM,EAAE,EAAC,YAAY,EAAE,UAAC,IAAI,EAAE,MAAM,IAAK,OAAA,OAAO,GAAG,MAAM,GAAA,EAAC,EAAC,CAAC,CAAC;gBACvEC,yBAAY,CAAC,KAAI,CAAC,cAAc,EAAE,OAAO,CAAC,CAAC;gBAC3C,KAAI,CAAC,eAAe,CAAC,GAAG,CAAC,KAAI,CAAC,iBAAiB,EAAE,IAAI,KAAI,CAAC,sBAAsB,CAAC,CAAC;aACrF,CAAC,CAAC;SACV;QAES,iDAAuB,GAAjC,UAAkC,SAAS;YAA3C,iBAqBC;YApBG,OAAO,IAAI,OAAO,CAAC,UAAA,OAAO;gBACtB,IAAM,OAAO,GAAGD,oBAAe,CAAC,MAAM,IAAIA,oBAAe,CAAC,MAAM,CAAC;gBACjE,IAAI,KAAI,CAAC,cAAc,KAAK,KAAI,CAAC,sBAAsB,EAAE;oBACrD,OAAO,EAAE,CAAC;oBACV,OAAO;iBACV;gBACD,IAAM,IAAI,GAAG,OAAO,IAAG,qBAAmB,SAAS,QAAK,CAAA,CAAC;gBAEzD,KAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,EAAC,YAAY,EAAE,MAAM,EAAC,CAAC;qBACvC,SAAS,EAAE;qBACX,IAAI,CAAC,UAAC,QAAa;oBAChB,IAAM,MAAM,GAAQ,EAAE,EAAE,OAAO,GAAQ,EAAE,CAAC;oBAC1C,MAAM,CAAC,OAAO,GAAG,OAAO,CAAC;oBACzB,IAAM,EAAE,GAAG,IAAI,QAAQ,CAAC,QAAQ,EAAE,SAAS,EAAE,QAAQ,CAAC,CAAC;oBACvD,EAAE,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;oBACpBE,yBAAkB,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;oBACpC,KAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;oBACnC,OAAO,EAAE,CAAC;iBACb,EAAE,cAAM,OAAA,OAAO,EAAE,GAAA,CAAC,CAAC;aAC3B,CAAC,CAAC;SACN;QAES,kDAAwB,GAAlC,UAAmC,cAAc;YAC7C,IAAM,OAAO,GAAGF,oBAAe,CAAC,MAAM,IAAIA,oBAAe,CAAC,MAAM,CAAC;YACjE,IAAI,IAAY,CAAC;YACjB,IAAI,cAAc,EAAE;gBAChB,IAAI,GAAG,OAAO,IAAG,0BAAwB,cAAc,QAAK,CAAA,CAAC;aAChE;iBAAM;gBACH,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;aAC5B;;YAGD,IAAIG,aAAQ,EAAE,IAAIhC,gBAAW,EAAE,IAAI,IAAI,CAAC,cAAc,KAAK,IAAI,CAAC,sBAAsB,EAAE;gBACpF,OAAO;aACV;YAED,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,EAAC,YAAY,EAAE,MAAM,EAAC,CAAC;iBACvC,SAAS,EAAE;iBACX,IAAI,CAAC,UAAC,QAAa;gBAChB,IAAM,EAAE,GAAG,IAAI,QAAQ,CAAC,QAAQ,CAAC,CAAC;;gBAElC,EAAE,EAAE,CAAC;aACR,CAAC,CAAC;SACV;QAES,2CAAiB,GAA3B,UAA4B,SAAS;YACjC,IAAI,SAAS,CAAC,MAAM,EAAE;gBAClB,IAAI,CAAC,sBAAsB,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;aACjD;YACD,IAAI,SAAS,CAAC,YAAY,EAAE;gBACxB,IAAI,CAAC,wBAAwB,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;aACzD;YACD,IAAI,SAAS,CAAC,OAAO,EAAE;gBACnB,IAAI,CAAC,mBAAmB,EAAE,CAAC;aAC9B;YACD,OAAO,IAAI,CAAC,uBAAuB,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;SAC1D;QAEM,2CAAiB,GAAxB,UAAyB,MAAM;YAA/B,iBA2BC;;YAxBG,IAAI,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;gBACpB,MAAM,GAAG,MAAM,CAAC,SAAS,CAAC;aAC7B;YAED,IAAM,SAAS,GAAGqB,2BAAsB,EAAE,CAAC,kBAAkB,CAAC,MAAM,CAAC,CAAC;YACtE,IAAM,eAAe,GAAG,MAAM,CAAC,IAAI,CAACA,2BAAsB,EAAE,CAAC,kBAAkB,CAAC,CAAC;YAEjF,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,eAAe,EAAE,MAAM,CAAC,EAAE;gBACtC,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;aAC5B;YAED,IAAI,CAAC,MAAM,IAAI,MAAM,KAAK,IAAI,CAAC,cAAc,EAAE;gBAC3C,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;aAC5B;YAEDY,0BAAqB,CAAC,gBAAgB,EAAE,MAAM,CAAC,CAAC;YAEhD,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC;;YAG7B,IAAI,CAAC,IAAI,EAAE,CAAC;;YAGZ,OAAO,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,cAAM,OAAA,KAAI,CAAC,qBAAqB,EAAE,GAAA,CAAC,CAAC;SACrF;QAEM,2CAAiB,GAAxB;YACI,IAAM,WAAW,GAAG,IAAI,CAAC,oBAAoB,EAAE,CAAC;YAChD,WAAW,CAAC,IAAI,CAACZ,2BAAsB,EAAE,CAAC,eAAe,CAAC,CAAC;YAE3D,IAAI,cAAc,GAAG,MAAM,CAAC,IAAI,CAACA,2BAAsB,EAAE,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;;YAG/G,IAAM,YAAY,GAAGa,0BAAqB,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC,YAAY,CAAC,WAAW,EAAE,cAAc,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,sBAAsB,CAAC;;YAG9I,cAAc,GAAG,cAAc,IAAI,CAAC,YAAY,CAAC,CAAC;YAElD,IAAM,eAAe,GAAG,YAAY,IAAI,cAAc,CAAC,CAAC,CAAC,CAAC;YAC1D,OAAO,IAAI,CAAC,iBAAiB,CAAC,eAAe,CAAC,CAAC;SAClD;QAEM,6CAAmB,GAA1B,UAA2B,OAAO;YAAE,cAAO;iBAAP,UAAO,EAAP,qBAAO,EAAP,IAAO;gBAAP,6BAAO;;YACvC,OAAOC,YAAO,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC,CAAC;SACjD;;QAGM,8CAAoB,GAA3B;YACI,IAAI,SAAS,CAAC;YACd,IAAIhE,mBAAS,CAAC,UAAU,EAAE;gBACtB,SAAS,GAAG,SAAS,CAAC,SAAS,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;aAC3D;iBAAM;gBACH,SAAS,GAAGkD,2BAAsB,EAAE,CAAC,iBAAiB,IAAI,EAAE,CAAC;;;;;;;;gBAQ7D,SAAS,GAAG,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,UAAS,MAAM;oBAChD,OAAO,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;iBAC/B,CAAC,CAAC;aACN;YACD,OAAO,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC;SACtC;QAEM,+CAAqB,GAA5B;YACI,OAAO,IAAI,CAAC,sBAAsB,CAAC;SACtC;;oBAtPJ7C,aAAU;;;;;wBA1BF4D,eAAU;wBAGVC,4BAAe;wBAKpBC,gBAAW;;;QA0Qf,sBAAC;KAAA,CAvPoCrD,wBAAmB;;ICpBxD,IAAM,eAAe,GAAG,qeAOQ,CAAC;AAEjC;QACwCO,sCAAsB;QAK1D;YAAA,YACI,iBAAO,SACV;YAND,eAAS,GAAG,CAAC,CAAC;YACd,mBAAa,GAAG,IAAIF,YAAO,EAAE,CAAC;YAC9B,uBAAiB,GAAG,EAAE,CAAC;;SAItB;;;;;QAMD,6CAAgB,GAAhB;YACI,OAAO,IAAI,CAAC,aAAa,CAAC;SAC7B;;;;QAKD,+CAAkB,GAAlB,UAAmB,GAAW,EAAE,OAAe,EAAE,EAAU;YACvD,IAAM,SAAS,GAAG,CAAC,CAAC,SAAS,GAAG,GAAG,GAAG,IAAI,CAAC,CAAC;YAC5C,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;;;;YAIhE,IAAI,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,KAAK,CAAC,EAAG;gBACxD,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC;gBAC1C,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,cAAc,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,cAAc,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;gBAClI,SAAS,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;aACnG;iBAAM;gBACH,IAAM,cAAc,GAAG,CAAC,CAAC,eAAe,CAAC,CAAC;gBAC1C,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC;gBAC1C,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,cAAc,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;gBAC9E,cAAc,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;gBACrG,SAAS,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;aACrC;YACD,OAAO,EAAE,CAAC;SACb;;;;;;QAOD,2CAAc,GAAd,UAAe,GAAG,EAAE,EAAE;YAClB,IAAM,GAAG,GAAG,MAAM,CAAC;YACnB,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;YAChE,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC;YAEtC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC;gBACpB,IAAI,EAAE,IAAI;gBACV,OAAO,EAAE,GAAG;gBACZ,QAAQ,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC;aAClD,CAAC,CAAC;SACN;;;;;;QAOD,+CAAkB,GAAlB,UAAmB,GAAG,EAAE,EAAE;YACtB,OAAO,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;YACvC,IAAI,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,KAAK,CAAC,EAAE;gBACvD,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;aACpC;YACD,IAAM,SAAS,GAAG,CAAC,CAAC,SAAS,GAAG,GAAG,GAAG,IAAI,CAAC,CAAC;YAC5C,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,MAAM,EAAE,CAAC;SAC3C;;;;;;;;;;QAWD,iCAAI,GAAJ,UAAK,OAAO,EAAE,EAAG,EAAE,YAAa,EAAE,cAAe,EAAE,eAAgB;YAC/D,EAAE,GAAQ,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC;;YAEjC,IAAI,cAAc,IAAI,cAAc,KAAK,MAAM,EAAE;;gBAE7C,OAAO,IAAI,CAAC,kBAAkB,CAAC,cAAc,EAAE,OAAO,EAAE,EAAE,CAAC,CAAC;aAC/D;YAED,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;YACjC,OAAO,EAAE,CAAC;SACb;;;;;QAMD,iCAAI,GAAJ,UAAK,EAAE;;YAEH,IAAM,GAAG,GAAG,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,iBAAiB,EAAE,UAAU,GAAG;gBACvD,OAAO,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC;aACtC,CAAC,IAAI,MAAM,CAAC;;YAGb,IAAI,GAAG,KAAK,MAAM,EAAE;gBAChB,IAAI,CAAC,kBAAkB,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;gBACjC,OAAO;aACV;YAED,IAAI,EAAE,EAAE;gBACJ,OAAO,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;gBACvC,IAAM,QAAQ,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,CAAC;gBACvD,IAAM,gBAAgB,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC;gBACzE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC;oBACpB,IAAI,EAAE,QAAQ,CAAC,MAAM,GAAG,IAAI,GAAG,KAAK;oBACpC,QAAQ,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC;iBAClD,CAAC,CAAC;;gBAEH,IAAI,gBAAgB,KAAK,CAAC,EAAE;oBACxB,CAAC,CAAC,cAAc,CAAC,CAAC,MAAM,EAAE,CAAC;iBAC9B;aACJ;iBAAM;gBACH,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;aACpC;SACJ;;oBA5HJd,aAAU;;;;QA6HX,yBAAC;KAAA,CA5HuCQ,2BAAsB;;ICV9D,IAAM,cAAc,GAAG,2BAA2B,CAAC;AAEnD;QAMI,+BAAoB,GAAQ,EAAUoC,SAAc;YAApD,iBAsCC;YAtCmB,QAAG,GAAH,GAAG,CAAK;YAAU,WAAM,GAANA,SAAM,CAAQ;YAJ5C,YAAO,GAAG,IAAI,OAAO,EAAE,CAAC;YAExB,yBAAoB,GAAG,KAAK,CAAC;YAGjC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,UAAA,KAAK;gBAC9B,IAAI,KAAK,YAAYmB,sBAAe,EAAE;oBAClC,IAAM,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC;oBACtB,IAAM,WAAS,GAAG,EAAE,CAAC;oBACrB,IAAI,QAAQ,SAAA,CAAC;oBACb,IAAI,CAAC,KAAI,CAAC,oBAAoB,EAAE;wBAC5B,KAAI,CAAC,oBAAoB,GAAG,KAAK,CAAC;wBAClC,IAAI,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;4BACtB,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;iCAC3B,KAAK,CAAC,GAAG,CAAC;iCACV,OAAO,CAAC,UAAA,CAAC;gCACN,IAAM,MAAM,GAAG,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gCAC5B,WAAS,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;6BACpC,CAAC,CAAC;4BACP,QAAQ,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;yBAC9C;6BAAM;4BACH,QAAQ,GAAG,GAAG,CAAC;yBAClB;wBACD,IAAI,QAAQ,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;4BACrB,QAAQ,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;yBACjC;wBACD,IAAI,QAAQ,EAAE;;;;;;;;;4BASV,OAAO,WAAS,CAAC,MAAM,CAAC,CAAC;4BAEzB,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,QAAQ,CAAC,QAAQ,EAAE,WAAS,EAAE,KAAI,CAAC,UAAU,CAAC,CAAC,CAAC;yBACzE;qBACJ;iBACJ;aACJ,CAAC,CAAC;SACN;QAEM,iDAAiB,GAAxB;YACI,IAAI,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,UAAU,CAAC,EAAE;gBAClE,OAAO,IAAI,CAAC;aACf;YACD,OAAO,IAAI,CAAC,UAAU,CAAC;SAC1B;;;;;;QAOM,wCAAQ,GAAf,UAAgB,QAAgB,EAAE,OAA0B;YACxD,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,IAAI,EAAE,CAAC;;YAE3C,IAAI,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,EAAE;gBAC/B,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;aACpC;YACD,IAAI,CAAC,OAAO,CAAC,IAAI,CAAE,IAAI,QAAQ,CAAC,QAAQ,EAAE,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YAC/E,IAAIpE,mBAAS,CAAC,UAAU,EAAE;gBACtB,IAAM,UAAQ,GAAG,MAAM,CAAC,UAAU,CAAC,CAAC;gBACpC,IAAM,cAAc,GAAG,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,SAAS,IAAI,EAAE,EAAE,UAAC,KAAK,EAAE,GAAG,IAAK,OAAA,GAAG,GAAG,GAAG,GAAG,KAAK,GAAA,CAAC,CAAC;gBAEzF,IAAM,QAAQ,IAAI,cAAc,CAAC,MAAM,GAAG,CAAC,GAAG,GAAG,GAAG,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC;gBAEnF,UAAQ,CAAC,IAAI,GAAG,UAAQ,CAAC,MAAM;sBACzB,UAAQ,CAAC,QAAQ;sBACjB,IAAI,GAAG,QAAQ;sBACf,QAAQ,CAAC;gBACf,OAAO;aACV;YACD,OAAO,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,MAAI,QAAU,CAAC,EAAE,EAAE,WAAW,EAAE,OAAO,CAAC,SAAS,EAAC,CAAC,CAAC;SACpF;;;;QAKM,4CAAY,GAAnB;YACI,IAAI,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,EAAE;gBAC9B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC,UAAU,CAAC;gBAC3D,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;oBAC7B,IAAI,CAAC,UAAU,IAAI,OAAO,CAAC;iBAC9B;gBACD,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;gBACnB,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;gBACjC,MAAM,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;aACzB;SACJ;;;;;;;QAQM,wCAAQ,GAAf,UAAgB,QAAgB,EAAE,OAA0B,EAAE,QAAa;YAA3E,iBA2CC;YA1CG,OAAO,GAAG,OAAO,IAAI,EAAE,CAAC;YACxB,IAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAC;YAClC,IAAM,UAAU,GAAG,OAAO,CAAC,UAAU,IAAI,EAAE,CAAC;YAC5C,IAAM,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC;YAC9B,IAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC;YACvC,IAAM,UAAU,GAAG,QAAQ,IAAI,QAAQ,CAAC,QAAQ,IAAI,QAAQ,CAAC,QAAQ,CAAC,UAAU,CAAC;;YAGjF,IAAI,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE;gBACvB,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,SAAS,GAAG,QAAQ,GAAG,IAAI,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;aAC3G;iBAAM;;;;gBAIH,IAAI,QAAQ,KAAK,UAAU,CAAC,cAAc,IAAI,CAAC,UAAU,EAAE;oBACvD,IAAI,IAAI,CAAC,uBAAuB,CAAC,QAAQ,CAAC,EAAE;wBACxC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,8BAA8B,GAAG,QAAQ,GAAG,IAAI,CAAC,CAAC,IAAI,CAAC,SAAS,GAAG,QAAQ,GAAG,IAAI,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;qBAC7I;yBAAM;;;;wBAIH,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE;4BACpB,QAAQ,EAAE,QAAQ;4BAClB,MAAM,EAAE,MAAM;4BACd,UAAU,EAAE,UAAU;4BACtB,SAAS,EAAE,OAAO,CAAC,SAAS;yBAC/B,CAAC,CAAC;;;wBAGH,IAAM,qBAAmB,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,WAAW,EAAE,UAAC,IAAI;4BAC7D,KAAI,CAAC,eAAe,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,SAAS,GAAG,QAAQ,GAAG,IAAI,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;4BACxG,qBAAmB,EAAE,CAAC;yBACzB,CAAC,CAAC;qBACN;iBACJ;qBAAM,IAAI,UAAU,IAAI,IAAI,CAAC,sBAAsB,CAAC,UAAU,CAAC,EAAE;oBAC9D,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,eAAe,GAAG,UAAU,GAAG,IAAI,CAAC,CAAC,IAAI,CAAC,SAAS,GAAG,QAAQ,GAAG,IAAI,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;iBAChI;qBAAM,IAAI,CAAC,QAAQ,IAAI,QAAQ,KAAK,UAAU,CAAC,cAAc,EAAE;oBAC5D,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,SAAS,GAAG,QAAQ,GAAG,IAAI,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;iBAC3G;qBAAM;oBACH,IAAI,CAAC,GAAG,CAAC,SAAS,CAACA,mBAAS,CAAC,mBAAmB,EAAE,OAAO,CAAC,CAAC;iBAC9D;aACJ;SACJ;;;;;QAMO,+CAAe,GAAvB,UAAwB,WAAW,EAAE,QAAgB,EAAE,QAAgB,EAAE,QAAa;YAAtF,iBAmCC;YAlCG,IAAI,GAAG,EAAE,YAAY,CAAC;YACtB,IAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC;YACvC,IAAI,WAAW,CAAC,MAAM,EAAE;gBACpB,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,YAAY,IAAI,QAAQ,KAAK,UAAU,CAAC,cAAc,EAAE;oBAClE,WAAW,GAAG,IAAI,CAAC,0BAA0B,CAAC,WAAW,CAAC,CAAC;iBAC9D;gBAED,GAAG,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;gBAC5B,QAAQ,GAAG,CAAC,UAAU;oBAClB,KAAK,kBAAkB;wBACnB,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;wBAC1C,GAAG,CAAC,MAAM,EAAE,CAAC;wBACb,MAAM;oBACV,KAAK,YAAY;wBACb,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;wBAC1C,GAAG,CAAC,MAAM,EAAE,CAAC;wBACb,MAAM;oBACV,KAAK,oBAAoB;wBACrB,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;wBAC1C,GAAG,CAAC,QAAQ,EAAE,CAAC;wBACf,MAAM;oBACV,KAAK,UAAU;;wBAEX,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC;wBACpB,MAAM;iBACb;aACJ;iBAAM;gBACH,YAAY,GAAG,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC;gBACjD,UAAU,CAAC;oBACP,IAAI,YAAY,EAAE;wBACd,KAAI,CAAC,eAAe,CAAC,CAAC,CAAC,SAAS,GAAG,QAAQ,GAAG,IAAI,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;qBACtF;iBACJ,CAAC,CAAC;aACN;SACJ;;;QAIO,0DAA0B,GAAlC,UAAmC,GAAG;YAClC,IAAI,QAAQ,CAAC;YACb,IAAI,GAAG,CAAC,MAAM,GAAG,CAAC,EAAE;gBAChB,QAAQ,GAAG,CAAC,CAAC,MAAM,CAAC,GAAG,EAAE,UAAC,aAAa;oBACnC,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,yBAAyB,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,qBAAqB,CAAC,CAAC,EAAE;wBAC9H,OAAO,aAAa,CAAC;qBACxB;iBACJ,CAAC,CAAC;gBACH,IAAI,QAAQ,EAAE;oBACV,GAAG,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC;iBACrB;aACJ;YACD,OAAO,GAAG,CAAC;SACd;;;;QAKO,uDAAuB,GAA/B,UAAgC,IAAY;YACxC,OAAO,CAAC,CAAC,8BAA8B,GAAG,IAAI,GAAG,IAAI,CAAC,CAAC,MAAM,CAAC;SACjE;;;;QAKO,sDAAsB,GAA9B,UAA+B,UAAkB;YAC7C,OAAO,CAAC,CAAC,eAAe,GAAG,UAAU,GAAG,IAAI,CAAC,CAAC,MAAM,CAAC;SACxD;;;;QAKO,6CAAa,GAArB,UAAsB,OAAO,EAAE,QAAQ;YACnC,IAAM,mBAAmB,GAAG,+BAA+B,CAAC;YAE5D,OAAO;iBACF,OAAO,CAAC,mBAAmB,CAAC;iBAC5B,OAAO,EAAE;iBACT,OAAO,EAAE;iBACT,OAAO,CAAC,UAAC,MAAM;gBACZ,IAAM,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC;gBAC1B,QAAQ,GAAG,CAAC,UAAU;oBAClB,KAAK,kBAAkB;wBACnB,GAAG,CAAC,MAAM,EAAE,CAAC;wBACb,MAAM;oBACV,KAAK,YAAY;wBACb,GAAG,CAAC,MAAM,EAAE,CAAC;wBACb,MAAM;oBACV,KAAK,oBAAoB;wBACrB,GAAG,CAAC,QAAQ,EAAE,CAAC;wBACf,MAAM;oBACV,KAAK,UAAU;;wBAEX,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC;wBACpB,MAAM;iBACb;aACJ,CAAC,CAAC;SACV;;;;;QAQO,kDAAkB,GAA1B,UAA2B,QAAgB;YACvC,IAAI,QAAQ,CAAC;YACb,CAAC,CAAC,uBAAuB,CAAC;iBACrB,IAAI,CAAC;gBACF,IAAM,MAAM,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC;gBACvB,IAAI,CAAC,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,GAAG,QAAQ,GAAG,IAAI,CAAC,CAAC,MAAM,EAAE;oBAC3D,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;oBAC/B,OAAO,KAAK,CAAC;iBAChB;aACJ,CAAC,CAAC;YACP,OAAO,QAAQ,CAAC;SACnB;;oBAzQJK,aAAU;;;;;wBAPFK,QAAG;wBAFcD,aAAM;;;QAmRhC,4BAAC;KA1QD,IA0QC;IAED;QAEI,kBAAmB,IAAI,EAAS,SAAU,EAAS,UAAW;YAA3C,SAAI,GAAJ,IAAI,CAAA;YAAS,cAAS,GAAT,SAAS,CAAC;YAAS,eAAU,GAAV,UAAU,CAAC;YAC1D,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC;SACzE;QAEM,0BAAO,GAAd,UAAe,KAAe;YAC1B,OAAO,KAAK,IAAI,KAAK,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,IAAI,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;SAC1F;QACL,eAAC;IAAD,CAAC,IAAA;IAED;QAAA;YACY,UAAK,GAAoB,EAAE,CAAC;SA8BvC;QA3BU,gCAAc,GAArB;YACI,OAAO,IAAI,CAAC,WAAW,CAAC;SAC3B;QAEM,+BAAa,GAApB;YACI,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;SAC5B;QAEM,mCAAiB,GAAxB,UAAyB,IAAc;YACnC,OAAO,IAAI,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;SAC3C;QAEM,sBAAI,GAAX,UAAY,QAAkB;YAC1B,IAAI,IAAI,CAAC,WAAW,EAAE;gBAClB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;aACrC;YACD,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC;SAC/B;QAEM,qBAAG,GAAV;YACI,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;YACpC,OAAO,IAAI,CAAC,WAAW,CAAC;SAC3B;QAEM,6BAAW,GAAlB;YACI,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC;SAChF;QACL,cAAC;IAAD,CAAC,IAAA;;;QCvTG;SACC;QAMD,uCAAU,GAAV,UAAW,OAAY;YACnB,IAAM,UAAU,GAAG,OAAO,CAAC,IAAI,CAAC;YAChC,IAAM,UAAU,GAAG,OAAO,CAAC,IAAI,CAAC;YAChC,IAAM,cAAc,GAAG,CAAC,UAAU,IAAI,UAAU,IAAI,UAAU,GAAG,GAAG,GAAG,UAAU,GAAG,SAAS,CAAC;YAE9F,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;YAC7B,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;YAC7B,IAAI,CAAC,cAAc,GAAG,cAAc,CAAC;SACxC;;oBAlBJJ,aAAU;;;;QAmBX,yBAAC;KAnBD;;ICCA,IAAI,oBAAoB,GAAG,KAAK,CAAC;AAEjC;QAGI,mBAAoB,eAAgC,EAAU,UAA6B;YAAvE,oBAAe,GAAf,eAAe,CAAiB;YAAU,eAAU,GAAV,UAAU,CAAmB;SAAI;QAE/F,sCAAkB,GAAlB;YACI,IAAI,oBAAoB,EAAE;gBACtB,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;aAChC;YAED,OAAO,IAAI,CAAC,UAAU,CAAC,kBAAkB,EAAE,CAAC,IAAI,CAAC,cAAM,OAAA,oBAAoB,GAAG,IAAI,GAAA,CAAC,CAAC;SACvF;QAED,mCAAe,GAAf;YAAA,iBAOC;YANG,OAAO,IAAI,CAAC,kBAAkB,EAAE;iBAC3B,IAAI,CAAC;gBACF,OAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;oBAC/B,KAAI,CAAC,eAAe,CAAC,eAAe,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;iBACzD,CAAC,CAAC;aACN,CAAC,CAAC;SACV;QAED,+BAAW,GAAX,UAAY,KAA6B;YAAzC,iBAWC;YAVG,OAAO,IAAI,CAAC,eAAe,EAAE;iBACxB,IAAI,CAAC,UAAA,UAAU;gBACZ,IAAI,UAAU,EAAE;oBACZ,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;iBAChC;gBAED,KAAI,CAAC,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;gBAElD,OAAO,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;aACjC,CAAC,CAAC;SACV;;oBAjCJA,aAAU;;;;;wBANFE,wBAAe;wBAEf,iBAAiB;;;QAsC1B,gBAAC;KAlCD;;;QCKI,mBACY,eAAgC,EAChC,SAAoB,EACpB,cAAsC,EACtC,GAAQ,EACR,UAA6B;YAJ7B,oBAAe,GAAf,eAAe,CAAiB;YAChC,cAAS,GAAT,SAAS,CAAW;YACpB,mBAAc,GAAd,cAAc,CAAwB;YACtC,QAAG,GAAH,GAAG,CAAK;YACR,eAAU,GAAV,UAAU,CAAmB;SACrC;QAEJ,+BAAW,GAAX,UAAY,KAA6B;YAAzC,iBA4BC;YA3BG,IAAM,YAAY,GAAG,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC;YAE7C,OAAO,IAAI,CAAC,SAAS,CAAC,eAAe,EAAE;iBAClC,IAAI,CAAC,UAAC,UAAmB;gBACtB,IAAI,UAAU,EAAE;oBACZ,IAAM,SAAS,GAAG,KAAI,CAAC,eAAe,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC;oBAChE,IAAM,SAAS,GAAG,CAAC,CAAC,YAAY,CAAC,YAAY,EAAE,SAAS,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;oBAErE,IAAI,SAAS,EAAE;wBACX,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;qBAChC;;oBAGD,KAAI,CAAC,UAAU,CAAC,SAAS,CACrB,KAAI,CAAC,GAAG,CAAC,SAAS,CAAC,mBAAmB,IAAI,eAAe,EACzD,OAAO,CACV,CAAC;oBAEF,OAAO,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;iBAEjC;qBAAM;;oBAEH,KAAI,CAAC,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;oBAElD,OAAO,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;iBACjC;aACJ,CAAC,CAAC;SACV;;oBAvCJF,aAAU;;;;;wBAPFE,wBAAe;wBAEf,SAAS;wBAHT4C,2BAAsB;wBAAEzC,QAAG;wBAI3B,iBAAiB;;;QA4C1B,gBAAC;KAxCD;;;QCAI,2BACY,GAAQ,EACR,UAA6B;YAD7B,QAAG,GAAH,GAAG,CAAK;YACR,eAAU,GAAV,UAAU,CAAmB;SACrC;QAEJ,uCAAW,GAAX,UAAY,KAA6B;YACrC,IAAI,CAAC,UAAU,CAAC,SAAS,CACrB,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,sBAAsB,IAAI,mDAAmD,EAChG,OAAO,CACV,CAAC;YACF,OAAO,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;SACjC;;oBAdJL,aAAU;;;;;wBALFK,QAAG;wBACH,iBAAiB;;;QAmB1B,wBAAC;KAfD;;ICDA,IAAI,WAAW,GAAG,KAAK,CAAC;AAExB;QAGI,sBACY,GAAa,EACb,GAAQ,EACR,WAAyB,EACzB,aAA4B;YAH5B,QAAG,GAAH,GAAG,CAAU;YACb,QAAG,GAAH,GAAG,CAAK;YACR,gBAAW,GAAX,WAAW,CAAc;YACzB,kBAAa,GAAb,aAAa,CAAe;SACpC;QAEE,8BAAO,GAAb;;;;;;4BACI,IAAI,WAAW,EAAE;gCACb,sBAAO,IAAI,EAAC;6BACf;;;;4BAIuB,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,EAAE,EAAA;;4BAAvD,WAAW,GAAG,SAAyC;4BAC7D,WAAW,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;;;;4BAElD,OAAO,CAAC,IAAI,CAAC,2BAA2B,EAAE,GAAC,CAAC,CAAC;;;4BAGjD,WAAW,GAAG,IAAI,CAAC;4BAEnB,sBAAO,IAAI,EAAC;;;;SACf;;oBA1BJL,aAAU;;;;;wBATUoC,WAAQ;wBAGpB/B,QAAG;wBAAEa,iBAAY;wBAEjB,aAAa;;;QA+BtB,mBAAC;KA3BD;;;QCDI,qBAAoB,WAAgC;YAAhC,gBAAW,GAAX,WAAW,CAAqB;SAAI;QAExD,6BAAO,GAAP;YACI,OAAO,IAAI,CAAC,WAAW,CAAC,iBAAiB,EAAE,CAAC;SAC/C;;oBAPJlB,aAAU;;;;;wBAFFS,wBAAmB;;;QAU5B,kBAAC;KARD;;;QCgGI,sBAAoB,QAAkB,EAAU,QAAkB;YAAlE,iBAKC;YALmB,aAAQ,GAAR,QAAQ,CAAU;YAAU,aAAQ,GAAR,QAAQ,CAAU;YA9DlE,YAAO,GAAGiD,0BAAqB,CAAC,gBAAgB,CAAC,IAAI,IAAI,CAAC;YAC1D,oBAAe,GAAG,UACd,SAAe,EACf,IAAY,EACZ,IAAa,EACb,MAAW;gBAAX,uBAAA;oBAAA,WAAW;;gBACV,QAAC;oBACF,IAAI,EAAE,EAAE,SAAS,WAAA,EAAE,MAAM,QAAA,EAAE;oBAC3B,IAAI,MAAA;oBACJ,IAAI,MAAA;iBACP;aAAC,CAAA;YACF,cAAS,GAAG;;gBAER,IAAI,CAAC,eAAe,CAACM,gBAAS,EAAE,OAAO,EAAE,KAAK,EAAE,CAACC,oBAAiB,CAAC,CAAC;gBACpE,IAAI,CAAC,eAAe,CAACC,gBAAS,EAAE,OAAO,EAAE,KAAK,CAAC;gBAC/C,IAAI,CAAC,eAAe,CAACC,kBAAW,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBAClE,IAAI,CAAC,eAAe,CAACC,qBAAc,EAAE,YAAY,EAAE,IAAI,EAAE;oBACrDC,qBAAc;iBACjB,CAAC;gBACF,IAAI,CAAC,eAAe,CAACC,qBAAc,EAAE,YAAY,EAAE,IAAI,CAAC;gBACxD,IAAI,CAAC,eAAe,CAACC,mBAAY,EAAE,UAAU,EAAE,KAAK,EAAE;oBAClDC,kBAAe;iBAClB,CAAC;gBACF,IAAI,CAAC,eAAe,CAACC,4BAAiB,EAAE,eAAe,EAAE,IAAI,CAAC;gBAC9D,IAAI,CAAC,eAAe,CAChBC,oCAAyB,EACzB,uBAAuB,EACvB,IAAI,CACP;gBACD,IAAI,CAAC,eAAe,CAACC,yBAAc,EAAE,YAAY,EAAE,IAAI,CAAC;gBACxD,IAAI,CAAC,eAAe,CAACC,uBAAY,EAAE,UAAU,EAAE,IAAI,CAAC;;gBAEpD,IAAI,CAAC,eAAe,CAACC,qBAAU,EAAE,QAAQ,EAAE,IAAI,CAAC;gBAChD,IAAI,CAAC,eAAe,CAACC,oBAAa,EAAE,WAAW,EAAE,IAAI,CAAC;gBACtD,IAAI,CAAC,eAAe,CAACC,oBAAa,EAAE,WAAW,EAAE,IAAI,CAAC;gBACtD,IAAI,CAAC,eAAe,CAACC,eAAQ,EAAE,MAAM,EAAE,KAAK,CAAC;gBAC7C,IAAI,CAAC,eAAe,CAACC,kBAAW,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBACjE,IAAI,CAAC,eAAe,CAACC,oBAAa,EAAE,WAAW,EAAE,IAAI,CAAC;gBACtD,IAAI,CAAC,eAAe,CAACC,mBAAY,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBACpE,IAAI,CAAC,eAAe,CAACzE,eAAQ,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBAC5D,IAAI,CAAC,eAAe,CAAC0E,qBAAU,EAAE,QAAQ,EAAE,IAAI,EAAE;oBAC7C,IAAI1E,eAAQ,CAAC,IAAI,CAAC,OAAO,CAAC;iBAC7B,CAAC;gBACF,IAAI,CAAC,eAAe,CAAC2E,uBAAY,EAAE,UAAU,EAAE,IAAI,EAAE;oBACjD,IAAIJ,kBAAW,CAAC,IAAI,CAAC,OAAO,CAAC;iBAChC,CAAC;gBACF,IAAI,CAAC,eAAe,CAACK,yBAAc,EAAE,YAAY,EAAE,IAAI,EAAE;oBACrD,IAAIL,kBAAW,CAAC,IAAI,CAAC,OAAO,CAAC;iBAChC,CAAC;gBACF,IAAI,CAAC,eAAe,CAACM,qBAAU,EAAE,QAAQ,EAAE,IAAI,CAAC;gBAChD,IAAI,CAAC,eAAe,CAACC,qBAAU,EAAE,QAAQ,EAAE,IAAI,CAAC;gBAChD,IAAI,CAAC,eAAe,CAACC,0BAAe,EAAE,aAAa,EAAE,IAAI,CAAC;gBAC1D,IAAI,CAAC,eAAe,CAACC,6BAAkB,EAAE,gBAAgB,EAAE,IAAI,EAAE;oBAC7D,IAAIT,kBAAW,CAAC,IAAI,CAAC,OAAO,CAAC;iBAChC,CAAC;gBACF,IAAI,CAAC,eAAe,CAACU,6BAAkB,EAAE,gBAAgB,EAAE,IAAI,CAAC;aACnE,CAAC;YAOE,IAAI,CAAC,SAAS,GAAG,IAAI,GAAG,EAAE,CAAC;YAC3B,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAA,CAAC;gBACpB,KAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;aACjC,CAAC,CAAC;SACN;QATD,kCAAW,GAAX,UAAY,IAAI;YACZ,MAAM,KAAK,CAAC,eAAa,IAAI,yBAAsB,CAAC,CAAC;SACxD;QASD,2BAAI,GAAJ,UAAK,IAAI;YACL,IAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YACtC,IAAI,CAAC,IAAI,EAAE;gBACP,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;aAC1B;YACD,OAAO,IAAI,CAAC;SACf;QAED,6CAAsB,GAAtB;YACI,IAAM,IAAI,GAAG,IAAI,GAAG,EAAE,CAAC;YACvB,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAC,CAAC,EAAE,CAAC;gBACxB,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC;aACvB,CAAC,CAAC;YACH,OAAO,IAAI,CAAC;SACf;QAED,iCAAU,GAAV,UAAW,GAAG;YACV,OAAO,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;SAC5D;QAED,kCAAW,GAAX,UAAY,IAAI;;YAER,IAAA,yBAAsC,EAA9B,kBAAc,EAAE,gBAAc,CACtB;YACpB,IAAI,CAAC,GAAG,EAAE;gBACN,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;aAC1B;YAED,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;gBACd,OAAO,IAAI,GAAG,EAAE,CAAC;aACpB;iBAAM;gBACH,IAAM,IAAI,GAAG,EAAE,CAAC;;oBAChB,KAAkB,IAAA,SAAAC,SAAA,IAAI,CAAA,0BAAA,4CAAE;wBAAnB,IAAM,GAAG,iBAAA;wBACV,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;qBAClB;;;;;;;;;;;;;;;gBACD,YAAW,GAAG,YAAH,GAAG,qBAAI,IAAI,MAAE;aAC3B;SACJ;;oBA/GJ5F,aAAU,SAAC;wBACR,UAAU,EAAE,MAAM;qBACrB;;;;;wBApCQ6F,WAAQ;wBAAczD,WAAQ;;;;2BAAvC;KAkCA;;;QCRI,sBACI,aAA2B,EAC3B,OAAuB,EACf,KAAiB,EACjB,YAA0B,EAC1B,aAAoC,EACpC,cAAsC,EAC9C,MAAc,EACNQ,SAAc,EACd,GAAQ;YATpB,iBA+DC;YA5DW,UAAK,GAAL,KAAK,CAAY;YACjB,iBAAY,GAAZ,YAAY,CAAc;YAC1B,kBAAa,GAAb,aAAa,CAAuB;YACpC,mBAAc,GAAd,cAAc,CAAwB;YAEtC,WAAM,GAANA,SAAM,CAAQ;YACd,QAAG,GAAH,GAAG,CAAK;YAfb,aAAQ,GAAG,KAAK,CAAC;YACjB,sBAAiB,GAAG,KAAK,CAAC;YAIjC,YAAO,GAAY,EAAC,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE,EAAE,EAAC,CAAC;YAmE/C,sBAAiB,GAAG,KAAK,CAAC;YAvDtBkD,oBAAe,CAAC,aAAa,CAAC,CAAC;YAC/BC,cAAS,CAAC,MAAM,CAAC,CAAC;YAClBC,cAAS,CAAC,OAAO,CAAC,CAAC;YAEnB,IAAI,CAAC,iBAAiB,GAAGnD,2BAAsB,EAAE,CAAC,IAAI,KAAK,aAAa,CAAC;;YAGzE,YAAY,CAAC,6BAA6B,EAAE,CAAC,SAAS,CAAC,UAAC,SAAc;gBAClE,KAAI,CAAC,eAAe,GAAG,SAAS,CAAC;gBACjC,IAAI,SAAS,CAAC,MAAM,EAAE;oBAClB,KAAI,CAAC,eAAe,EAAE,CAAC;iBAC1B;qBAAM;oBACH,KAAI,CAAC,gBAAgB,EAAE,CAAC;iBAC3B;aACJ,CAAC,CAAC;;YAGH,IAAI,CAAC,cAAc,CAAC,gBAAgB,EAAE,CAAC,YAAY,EAAE,CAAC,SAAS,CAAC,UAAC,IAAS;;gBAEtE,UAAU,CAAC;oBACP,KAAI,CAAC,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;oBAC9B,KAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;iBACzC,CAAC,CAAC;aACN,CAAC,CAAC;;YAGHoD,qBAAQ,CAAC,KAAK,CAAC,CAAC;YAChB,IAAIC,eAAU,EAAE,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,EAAE;gBAC1C,QAAQ,CAAC,gBAAgB,CAAC,eAAe,EAAG,cAAM,OAAA,KAAI,CAAC,QAAQ,GAAG,IAAI,GAAA,CAAC,CAAC;aAC3E;iBAAM;gBACH,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;aACxB;YAED,IAAI,SAAS,CAAC;YAEd,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,UAAA,CAAC;gBAC1B,IAAI,CAAC,YAAYnC,sBAAe,EAAE;oBAC9B,SAAS,GAAG,KAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,EAAE,eAAe,CAAC,CAAC;oBAC1D,IAAM,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,iBAAiB,CAAgB,CAAC;oBACtE,IAAI,IAAI,EAAE;wBACNoC,aAAQ,CAAC,IAAI,EAAE,uBAAuB,CAAC,CAAC;qBAC3C;iBACJ;qBAAM,IAAI,CAAC,YAAYC,oBAAa,IAAI,CAAC,YAAYC,uBAAgB,IAAI,CAAC,YAAYC,sBAAe,EAAE;oBACpG,UAAU,CAAC;wBACP,KAAI,CAAC,cAAc,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;wBACpC,IAAM,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,iBAAiB,CAAgB,CAAC;wBACtE,IAAI,IAAI,EAAE;4BACNC,gBAAW,CAAC,IAAI,EAAE,uBAAuB,CAAC,CAAC;yBAC9C;qBACJ,EAAE,IAAI,CAAC,CAAC;iBACZ;aACJ,CAAC,CAAC;SACN;QAKD,sCAAe,GAAf;YACI,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE;gBACzB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;gBAC9B,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC;aACrD;SACJ;QAED,uCAAgB,GAAhB;YACI,IAAI,IAAI,CAAC,iBAAiB,EAAE;gBACxB,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;gBAC/B,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC;aACtD;SACJ;QAED,sCAAe,GAAf;YACI,IAAI,CAAC,GAAG,CAAC,4BAA4B,GAAG,IAAI,CAAC,4BAA4B,CAAC;SAC7E;QAED,gCAAS,GAAT;YACIpF,oBAAe,EAAE,CAAC;SACrB;;oBApGJoB,YAAS,SAAC;wBACP,QAAQ,EAAE,UAAU;wBACpB,6xCAAmC;wBACnC,aAAa,EAAEiE,oBAAiB,CAAC,IAAI;qBACxC;;;;;wBAXQ,YAAY;wBAPZC,iBAAc;wBAAsBtE,aAAU;wBAM9CuE,kBAAY;wBADKvG,0BAAqB;wBAAEK,2BAAsB;wBALdmG,SAAM;wBACavG,aAAM;wBAIkEC,QAAG;;;;mDAkBlJqC,YAAS,SAAC,kBAAkB,EAAE,EAAC,IAAI,EAAEb,mBAAgB,EAAC;;QA4F3D,mBAAC;KArGD;;ICFA;;;;AAIA;QAMI;YACI,IAAI,CAAC,aAAa,GAAG,IAAI+E,oBAAa,EAAE,CAAC;YACzC,IAAI,CAAC,cAAc,GAAG,IAAIC,qBAAc,EAAE,CAAC;SAC9C;QAED,2CAAa,GAAb;YACI,OAAO,IAAI/F,YAAO,EAAE,CAAC;SACxB;QACD,uCAAS,GAAT,UAAU,OAAyB,EAAE,IAAiB;YAAtD,iBA+CC;YA9CG,IAAI,WAAW,CAAC;YAChB,IAAI,YAAY,CAAC;YACjB,IAAIgG,oBAAU,IAAIA,oBAAU,CAAC,sBAAsB,EAAE;;gBAEjD,IAAM,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC;;gBAE3D,WAAW,GAAIA,oBAAU,CAAC,sBAAsB,CAAC,GAAG,CAAC,CAAC;gBACtD,IAAI,WAAW,EAAE;;oBAEb,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,kBAAkB,CAAC,WAAW,CAAC,CAAC;oBACjE,OAAO,GAAG,WAAW,CAAC;iBACzB;aACJ;YACD,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,IAAI,CAC5BC,aAAG,CAAC,UAAC,QAAa;gBACV,IAAI,QAAQ,IAAI,QAAQ,CAAC,IAAI,KAAK,CAAC,IAAID,oBAAU,IAAKA,oBAAU,CAAC,mBAAmB,EAAE;;oBAElF,IAAM,IAAI,GAAG,KAAI,CAAC,cAAc,CAAC,mBAAmB,CAAC,QAAQ,CAAC,CAAC;;oBAE/D,YAAY,GAAGA,oBAAU,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;oBAC/D,IAAI,YAAY,EAAE;;wBAEd,YAAY,GAAG,KAAI,CAAC,cAAc,CAAC,mBAAmB,CAAC,YAAY,CAAC,CAAC;wBACrE,CAAC,CAAC,MAAM,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAC;qBACpC;iBACJ;aACJ,EACD,UAAA,KAAK;gBACD,KAAK,CAAC,cAAc,GAAG,KAAI,CAAC,aAAa,EAAE,CAAC;gBAC5C,IAAIE,qBAAW,CAAC,wBAAwB,CAAC,KAAK,CAAC,EAAE;oBAC7CA,qBAAW,CAAC,oBAAoB,CAAC,OAAO,EAAE,KAAK,CAAC,cAAc,CAAC,CAAC;iBACnE;gBACD,IAAIF,oBAAU,IAAIA,oBAAU,CAAC,iBAAiB,EAAE;;oBAE5C,IAAM,GAAG,GAAG,KAAI,CAAC,cAAc,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC;;oBAE3D,YAAY,GAAGA,oBAAU,CAAC,iBAAiB,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;oBAC9D,IAAI,YAAY,EAAE;;wBAEd,YAAY,GAAG,KAAI,CAAC,cAAc,CAAC,mBAAmB,CAAC,YAAY,CAAC,CAAC;wBACrE,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;qBACjC;iBACJ;aACJ,CACJ,CACJ,CAAC;SACL;;oBA7DJ9G,aAAU;;;;QA8DX,0BAAC;KA9DD;;ICVA,IAAM,MAAM,GAAG,QAAQ,CAAC;AAExB;QAcI,gCAAoB,aAAmC;YAAvD,iBAsBC;YAtBmB,kBAAa,GAAb,aAAa,CAAsB;YAEnD,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,UAAA,CAAC;gBAChC,IAAM,OAAO,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC;gBAEzC,IAAI,OAAO,KAAK,MAAM,EAAE;oBACpB,OAAO;iBACV;gBAED,IAAM,MAAM,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;gBAC7B,IAAM,OAAO,GAAG,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC;gBAE/B,IAAI,MAAM,KAAK,MAAM,EAAE;oBACnB,KAAI,CAAC,IAAI,EAAE,CAAC;iBACf;qBAAM,IAAI,MAAM,KAAK,cAAc,EAAE;oBAClC,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;iBAC7B;qBAAM,IAAI,MAAM,KAAK,yBAAyB,EAAE;oBAC7C,KAAI,CAAC,gBAAgB,EAAE,CAAC;iBAC3B;qBAAM,IAAI,MAAM,KAAK,eAAe,EAAE;oBACnC,KAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;iBAC9B;aACJ,CAAC,CAAC;SACN;QAED,4CAAW,GAAX,UAAY,MAAM,EAAE,OAAa;YAC7B,IAAM,IAAI,GAAG;gBACT,OAAO,EAAE,MAAM;gBACf,MAAM,QAAA;gBACN,OAAO,SAAA;aACV,CAAC;YACF,MAAM,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;SACrC;QAED,oDAAmB,GAAnB;YAAA,iBAIC;YAHG,IAAI,CAAC,cAAc,CAAC,mBAAmB,GAAG,UAAC,SAAS,EAAE,MAAW;gBAAX,uBAAA;oBAAA,WAAW;;gBAC7D,KAAI,CAAC,WAAW,CAAC,WAAW,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC;aACpE,CAAC;SACL;QAED,qCAAI,GAAJ;YAAA,iBAgBC;YAfG,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YAExB,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,SAAS,CACpC,eAAQ,EACR,eAAQ,EACR;gBACI,KAAI,CAAC,aAAa,CAAC,SAAS,CAAC,UAAU,CAAC;qBACnC,IAAI,CAAC,UAAA,MAAM;oBACR,KAAI,CAAC,MAAM,GAAG,MAAM,CAAC;oBACrB,KAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;oBAEnC,KAAI,CAAC,mBAAmB,EAAE,CAAC;iBAC9B,CAAC,CAAC;aACV,CACJ,CAAC;SACL;QAED,4CAAW,GAAX,UAAY,OAAY;YACpB,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,KAAK,CAAC;SAC5D;QAED,+CAAc,GAAd,UAAe,IAAI;YACf,OAAO,IAAI,CAAC,QAAQ,KAAK,WAAW,IAAI,IAAI,CAAC,QAAQ,KAAK,cAAc,CAAC;SAC5E;QAED,iDAAgB,GAAhB;;YACI,IAAM,OAAO,GAAG,EAAE,CAAC;;gBACnB,KAA2B,IAAA,KAAA4F,SAAA,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,IAAI,EAAE,CAAC,CAAA,gBAAA,4BAAE;oBAA9D,IAAA,wBAAY,EAAX,cAAI,EAAE,YAAI;oBAClB,IAAI,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE;wBAC3B,OAAO,CAAC,MAAI,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,MAAI,CAAC,CAAC;qBACpD;iBACJ;;;;;;;;;;;;;;;YAED,IAAI,CAAC,WAAW,CAAC,qBAAqB,EAAE,OAAO,CAAC,CAAC;SACpD;QAED,6CAAY,GAAZ,UAAa,OAAY;YACrB,IAAM,MAAM,GAAG,eAAa,OAAO,CAAC,MAAM,MAAG,CAAC;YAE9C,IAAM,EAAE,GAAG,IAAI,QAAQ,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;YAE1C,IAAM,MAAM,GAAG,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;YAEvC,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,EAAE,UAAU,EAAE,OAAO,CAAC,UAAU,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC,CAAC;SACzF;QAED,gDAAe,GAAf;YACI,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAC3B,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;SAC5B;;oBAvGJrD,YAAS,SAAC;wBACP,QAAQ,EAAE,mBAAmB;wBAC7B,QAAQ,EAAE,8JAIT;qBACJ;;;;;wBAXQ,oBAAoB;;;;qCAgBxBG,YAAS,SAACuE,0BAAe;;QA4F9B,6BAAC;KAxGD;;ACSAC,qCAAuB,EAAE,CAAC;IAE1B,IAAM,wBAAwB,GAAG,IAAI,GAAG,EAAe,CAAC;IAExD,IAAM,gBAAgB,GAAG,UAAC,YAAiB;QACvC;YAAA;aAOsB;;wBAPrBC,WAAQ,SAAC;4BACN,YAAY,EAAE,CAAC,YAAY,CAAC;4BAC5B,OAAO,EAAE;gCACL,iBAAiB;6BACpB;4BACD,OAAO,EAAE,CAACC,yBAAsB,EAAEC,mBAAgB,CAAC;yBACtD;;YACoB,oBAAC;SAPtB,IAOsB;QAEtB,OAAO,aAAa,CAAC;IACzB,CAAC,CAAC;IAEF,IAAM,mBAAmB,GAAG,UACxB,QAAQ,EACR,QAAgB,EAChB,GAAgB;QAAhB,oBAAA;YAAA,QAAgB;;QAEhB,IAAM,YAAY,GAAG;YACjB,QAAQ,UAAA;YACR,MAAM,EAAE,CAAC,GAAG,CAAC;YACb,aAAa,EAAEb,oBAAiB,CAAC,IAAI;SACxC,CAAC;QAEF;YAAA;aAKC;;wBALAjE,YAAS,sBACH,YAAY,IACf,QAAQ,UAAA;;YAGZ,uBAAC;SALD,IAKC;QAED,OAAO,gBAAgB,CAAC;IAC5B,CAAC,CAAC;;QAME,4CACY,GAAQ,EACR,UAA6B,EAC7B,QAAkB;YAFlB,QAAG,GAAH,GAAG,CAAK;YACR,eAAU,GAAV,UAAU,CAAmB;YAC7B,aAAQ,GAAR,QAAQ,CAAU;YALtB,YAAO,GAAG,CAAC,CAAC;SAMhB;QAES,mEAAsB,GAAnC,UAAoC,QAAgB,EAAE,MAAc,EAAE,OAAiB;YAAjB,wBAAA;gBAAA,YAAiB;;;;;oBAE/E,mBAAmB,GAAG,wBAAwB,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;oBAEjE,MAAM,GAAG,OAAO,CAAC,SAAS,GAAG+E,oBAAS,CAAC,MAAM,CAAC,GAAG,MAAM,CAAC;oBACxD,IAAI,CAAC,mBAAmB,IAAI,OAAO,CAAC,OAAO,EAAE;wBACnC,iBAAe,mBAAmB,CAAC,QAAQ,EAAE,MAAM,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC;wBACrE,SAAS,GAAG,gBAAgB,CAAC,cAAY,CAAC,CAAC;wBAEjD,mBAAmB,GAAG,IAAI,CAAC,QAAQ;6BAC9B,iCAAiC,CAAC,SAAS,CAAC;6BAC5C,kBAAkB;6BAClB,MAAM,CAAC,UAAA,OAAO,IAAI,OAAA,OAAO,CAAC,aAAa,KAAK,cAAY,GAAA,CAAC,CAAC,CAAC,CAAC,CAAC;wBAElE,wBAAwB,CAAC,GAAG,CAAC,QAAQ,EAAE,mBAAmB,CAAC,CAAC;qBAC/D;oBACD,sBAAO,mBAAmB,EAAC;;;SAC9B;;;;;;;;;;;QAYY,yDAAY,GAAzB,UAA0B,MAAmB,EAAE,MAAc,EAAE,OAAY,EAAE,OAAiB;YAA/B,wBAAA;gBAAA,YAAY;;YAAE,wBAAA;gBAAA,YAAiB;;;;;;;4BAC1F,OAAO,CAAC,SAAS,GAAG5H,cAAS,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC;4BAC5E,OAAO,CAAC,OAAO,GAAGA,cAAS,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,OAAO,CAAC,OAAO,GAAG,IAAI,CAAC;4BACtE,OAAO,CAAC,QAAQ,GAAGA,cAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,OAAO,CAAC,QAAQ,GAAG,uBAAuB,GAAE,IAAI,CAAC,OAAO,EAAE,CAAC;4BAChF,qBAAM,IAAI,CAAC,sBAAsB,CAAC,OAAO,CAAC,QAAQ,EAAE,MAAM,EAAE,OAAO,CAAC,EAAA;;4BAA1F,mBAAmB,GAAG,SAAoE;4BAC1F,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,4BAA4B,CAAC,eAAe,CAAC,mBAAmB,EAAE,CAAC,CAAC,CAAC;4BAChG6H,gBAAW,CAAC,SAAS,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;4BACzC,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;;;;;SACxD;;oBA/CJvH,aAAU;;;;;wBA7CFK,QAAG;wBAIH,iBAAiB;wBAbtBwF,WAAQ;;;QAsGZ,yCAAC;KAhDD;;;QC9CA;SAKC;QAHG,8CAAa,GAAb,UAAc,SAAiC,EAAE,KAA6B,EAAE,KAA0B;YACtG,OAAO,SAAS,CAAC,aAAa,GAAG,SAAS,CAAC,aAAa,EAAE,GAAG,IAAI,CAAC;SACrE;;oBAJJ7F,aAAU;;QAKX,6BAAC;KALD;;aC2CgB,aAAa,CAAC,WAAW;QACrC,OAAO;YACHqD,oBAAe,CAAC,EAAE,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YACjDA,oBAAe,CAAC,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,iBAAiB,CAAC,IAAI,QAAQ,CAAC,aAAa,CAAC,iBAAiB,CAAC,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;YACxIA,oBAAe,CAAC,MAAM,GAAG,YAAY,CAAC;YACtC,OAAO,WAAW,CAAC,iBAAiB,EAAE,CAAC;SAC1C,CAAC;IACN,CAAC;AAED,aAAgB,gBAAgB,CAAC,WAAW;QACxC,OAAO,WAAW,CAAC,qBAAqB,EAAE,GAAG,WAAW,CAAC,iBAAiB,EAAE,GAAG,WAAW,CAAC,yBAAyB,EAAE,CAAC;IAC3H,CAAC;IAED,IAAM,WAAW,GAAG;QAChB,oBAAoB;QACpB,yBAAyB;QACzB,mBAAmB;QACnB,sBAAsB;QACtB,eAAe;QACf,YAAY;QACZ,sBAAsB;QACtB,kBAAkB;KACrB,CAAC;AAEF,QAAa,cAAc,GAAGmE,2BAAc,CAAC,OAAO,EAAE,CAAC;AACvD,QAAa,gBAAgB,GAAGC,6BAAgB,CAAC,OAAO,EAAE,CAAC;AAC3D,QAAa,aAAa,GAAGC,0BAAa,CAAC,OAAO,EAAE,CAAC;AACrD,QAAa,aAAa,GAAGC,0BAAa,CAAC,OAAO,EAAE,CAAC;IAErD;IACC,CAAC,CAAC,EAAU,CAAC,cAAc,CAAC,mBAAmB,GAAGC,eAAU,CAAC;AAE9D;QA2GI;YACI,iBAAiB,CAAC,sBAAsB,EAAE,CAAC;SAC9C;;QA5DM,wCAAsB,GAA7B;YACQ,IAAK,OAAO,MAAM,CAAC,aAAa,CAAC,KAAK,UAAU,EAAG;gBAC/C,OAAO,KAAK,CAAC;aAChB;YAED,IAAM,WAAW,GAAG,UAAC,KAAK,EAAE,MAAM;gBAC9B,MAAM,GAAG,MAAM,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC;gBACvE,IAAM,GAAG,GAAG,QAAQ,CAAC,WAAW,CAAE,aAAa,CAAE,CAAC;gBAClD,GAAG,CAAC,eAAe,CAAE,KAAK,EAAE,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC,UAAU,EAAE,MAAM,CAAC,MAAM,CAAE,CAAC;gBAC/E,OAAO,GAAG,CAAC;aACd,CAAC;YAEF,WAAW,CAAC,SAAS,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC;YAElD,MAAM,CAAC,aAAa,CAAC,GAAG,WAAW,CAAC;SAC3C;QAEM,yBAAO,GAAd;YACI,OAAO;gBACH,QAAQ,EAAE,iBAAiB;gBAC3B,SAAS,EAAE;oBACP,EAAC,OAAO,EAAEvH,QAAG,EAAE,QAAQ,EAAE,MAAM,EAAC;oBAChC,EAAC,OAAO,EAAEyC,2BAAsB,EAAE,QAAQ,EAAE,kBAAkB,EAAC;oBAC/D,EAAC,OAAO,EAAErC,wBAAmB,EAAE,QAAQ,EAAE,eAAe,EAAC;oBACzD,EAAC,OAAO,EAAED,2BAAsB,EAAE,QAAQ,EAAE,kBAAkB,EAAC;oBAC/D,EAAC,OAAO,EAAEc,8BAAyB,EAAE,QAAQ,EAAE,qBAAqB,EAAC;oBACrE,EAAC,OAAO,EAAEwC,gBAAW,EAAE,QAAQ,EAAE,kBAAkB,EAAC;oBACpD,EAAC,OAAO,EAAEb,gCAA2B,EAAE,QAAQ,EAAE,kCAAkC,EAAC;oBACpF;wBACI,OAAO,EAAE4E,kBAAe;wBACxB,UAAU,EAAE,aAAa;wBACzB,IAAI,EAAE,CAACpH,wBAAmB,CAAC;wBAC3B,KAAK,EAAE,IAAI;qBACd;oBACD;wBACI,OAAO,EAAEqH,YAAS;wBAClB,UAAU,EAAE,gBAAgB;wBAC5B,IAAI,EAAE,CAACrH,wBAAmB,CAAC;qBAC9B;oBACD;wBACI,OAAO,EAAEsH,sBAAiB;wBAC1B,QAAQ,EAAE,mBAAmB;wBAC7B,KAAK,EAAE,IAAI;qBACd;oBACD9C,kBAAW;oBACXvE,eAAQ;oBACR,iBAAiB;oBACjB,oBAAoB;oBACpB,SAAS;oBACT,SAAS;oBACT,iBAAiB;oBACjB,sBAAsB;oBACtB,YAAY;oBACZ,WAAW;iBACd;aACJ,CAAC;SACL;;oBAzGJyG,WAAQ,SAAC;wBACN,YAAY,EAAE,WAAW;wBACzB,OAAO,EAAE;4BACLa,mBAAY;4BACZC,iBAAW;4BACXC,mBAAY;4BACZC,yBAAmB;4BACnBC,qBAAgB;4BAEhB,cAAc;4BACd,gBAAgB;4BAChB,aAAa;4BACb,aAAa;4BAEbC,wBAAW;4BACXC,6BAAkB;4BAClBC,2BAAmB;4BACnBC,eAAU;4BACVC,uBAAc;4BACdC,iBAAW;4BACXC,yBAAe;4BACfC,wBAAiB;yBACpB;wBACD,OAAO,EAAE;4BACL,WAAW;4BAEXZ,mBAAY;4BACZC,iBAAW;4BACXE,yBAAmB;4BAEnBE,wBAAW;4BACXb,2BAAc;4BACdC,6BAAgB;4BAChBC,0BAAa;4BACbC,0BAAa;4BAEbW,6BAAkB;4BAClBC,2BAAmB;4BACnBC,eAAU;4BACVC,uBAAc;4BACdC,iBAAW;4BACXC,yBAAe;4BACfC,wBAAiB;yBACpB;wBACD,eAAe,EAAE,CAAC,sBAAsB,CAAC;qBAC5C;;;;QAiED,wBAAC;KA9GD,IA8GC;QAEY,mBAAmB,GAAG;QAC/BN,6BAAkB,CAAC,OAAO,EAAE;QAC5BC,2BAAmB,CAAC,OAAO,EAAE;QAC7BF,wBAAW,CAAC,OAAO,EAAE;QACrBG,eAAU,CAAC,OAAO,EAAE;QACpBC,uBAAc,CAAC,OAAO,EAAE;QACxBC,iBAAW,CAAC,OAAO,EAAE;QACrBC,yBAAe,CAAC,OAAO,EAAE;QACzBC,wBAAiB,CAAC,OAAO,EAAE;QAC3B,iBAAiB,CAAC,OAAO,EAAE;KAC9B;;ICxMD,IAAI,kBAAkB,GAAG,KAAK,CAAC;AAE/B;QAKI,6BACY,UAA6B,EAC7B,oBAA0C;YAD1C,eAAU,GAAV,UAAU,CAAmB;YAC7B,yBAAoB,GAApB,oBAAoB,CAAsB;SAClD;QAEJ,qCAAO,GAAP;YAAA,iBASC;;YAPG,IAAI,kBAAkB,EAAE;gBACpB,OAAO,IAAI,CAAC;aACf;YAED,OAAO,IAAI,CAAC,oBAAoB,CAAC,eAAe,EAAE;iBAC7C,IAAI,CAAC,UAACnJ,YAAS,IAAK,OAAA,KAAI,CAAC,UAAU,CAAC,gBAAgB,CAACA,YAAS,CAAC,GAAA,CAAC;iBAChE,IAAI,CAAC,cAAM,OAAA,kBAAkB,GAAG,IAAI,GAAA,CAAC,CAAC;SAC9C;;oBAnBJO,aAAU,SAAC;wBACR,UAAU,EAAE,MAAM;qBACrB;;;;;wBAPQ,iBAAiB;wBACjB,oBAAoB;;;;kCAJ7B;KAQA;;ICHA,IAAI,gBAAgB,GAAG,KAAK,CAAC;AAE7B;QAII,yBAAoB,UAA6B;YAA7B,eAAU,GAAV,UAAU,CAAmB;SAAI;QAErD,iCAAO,GAAP;YACI,OAAO,gBAAgB,IAAI,IAAI,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,cAAM,OAAA,gBAAgB,GAAG,IAAI,GAAA,CAAC,CAAC;SACjG;;oBARJA,aAAU,SAAC;wBACR,UAAU,EAAE,MAAM;qBACrB;;;;;wBANQ,iBAAiB;;;;8BAH1B;KAOA;;;QCMI,+BAAoB,UAA6B;YAA7B,eAAU,GAAV,UAAU,CAAmB;;YAG7C,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,YAAY,EAAE,IAAI,IAAI,CAAC,UAAU,CAAC,oBAAoB,EAAE,IAAI,CAAC6C,2BAAsB,EAAE,CAAC,eAAe,CAAC;SACvI;QAED,uCAAO,GAAP;YAAA,iBAIC;YAHG,OAAO,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,UAAU,CAAC,kBAAkB,EAAE,CAAC,IAAI,CAAC;gBAC5D,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC;aACtB,CAAC,CAAC;SACN;;oBAhBJ7C,aAAU,SAAC;wBACR,UAAU,EAAE,MAAM;qBACrB;;;;;wBAJQ,iBAAiB;;;;oCAL1B;KAOA;;ICPA;;OAEG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}
