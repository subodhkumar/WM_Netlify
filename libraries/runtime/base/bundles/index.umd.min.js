!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/forms"),require("@wm/mobile/runtime"),require("ngx-toastr"),require("@angular/common/http"),require("@wm/security"),require("@angular/router"),require("ngx-bootstrap"),require("@wm/oAuth"),require("@angular/common"),require("rxjs/operators"),require("rxjs"),require("@wm/variables"),require("@wm/http"),require("@wm/components"),require("@wm/transpiler"),require("@wm/build-task"),require("@angular/core"),require("@wm/core")):"function"==typeof define&&define.amd?define("@wm/runtime/base",["exports","@angular/forms","@wm/mobile/runtime","ngx-toastr","@angular/common/http","@wm/security","@angular/router","ngx-bootstrap","@wm/oAuth","@angular/common","rxjs/operators","rxjs","@wm/variables","@wm/http","@wm/components","@wm/transpiler","@wm/build-task","@angular/core","@wm/core"],t):t((e.wm=e.wm||{},e.wm.runtime=e.wm.runtime||{},e.wm.runtime.base={}),e.ng.forms,e.wm.mobile.runtime,e.ngxToastr,e.ng.common.http,e.wm.security,e.ng.router,e.ngxBootstrap,e.wm.oAuth,e.ng.common,e.rxjs.operators,e.rxjs,e.wm.variables,e.wm.http,e.wm.components,e.wm.transpiler,e.wm.buildTask,e.ng.core,e.wm.core)}(this,function(c,t,n,r,i,o,l,h,a,s,f,p,u,d,g,m,e,y,v){"use strict";var b;(b=c.ComponentType||(c.ComponentType={}))[b.PAGE=0]="PAGE",b[b.PREFAB=1]="PREFAB",b[b.PARTIAL=2]="PARTIAL";var P,S,w=function(){function e(){}return e.prototype.clearComponentFactoryRefCache=function(){},e}(),A=function He(){},C=function Ge(){},M=function Je(){},L=function ze(){};(S=P||(P={})).HIDE_TEMPLATES_SHOW_CASE="hide-templates-show-case",S.SHOW_TEMPLATES_SHOW_CASE="show-templates-show-case",S.UPDATE_LOCATION="update-location-path",S.SELECT_TEMPLATE="select-template",S.TEMPLATEBUNDLE_CONFIG="template-bundle-config",S.ON_LOAD="on-load";var T=function(){function e(e,t,n,i,r,o,a,s,p,c){var u=this;this.$http=e,this.$security=t,this.$dialog=n,this.$router=i,this.$app=r,this.$variables=o,this.$metadata=a,this.$spinner=s,this.$i18n=p,this.$datePipe=c,this.appVariablesLoaded=!1,this.appVariablesFired=!1,this._noRedirect=!1,this.$http.registerOnSessionTimeout(this.handle401.bind(this)),this.$variables.registerDependency("appManager",this),this.$app.subscribe("toggle-variable-state",function(e){var t=e.variable,n=e.active;if(!_.isEmpty(_.trim(t.spinnerContext)))if(n){t._spinnerId=t._spinnerId||[];var i=u.$spinner.show(t.spinnerMessage,t._id+"_"+Date.now(),t.spinnerclass,t.spinnerContext);t._spinnerId.push(i)}else u.$spinner.hide(t._spinnerId.shift())}),this.$app.subscribe("userLoggedIn",function(){return u.setLandingPage()}),this.$app.subscribe("userLoggedOut",function(){return u.setLandingPage().then(function(){window.cordova&&u.$router.navigate(["/"])})}),this.$app.subscribe("http401",function(e){return void 0===e&&(e={}),u.handle401(e.page,e.options)})}return e.prototype.showLoginDialog=function(){this.$spinner.hide("globalSpinner"),this.$dialog.open("CommonLoginDialog"),v.$appDigest()},e.prototype.loadAppJS=function(){},e.prototype.loadCommonPage=function(){},e.prototype.loadSecurityConfig=function(){var t=this;return this.$security.load().then(function(e){return t.$app.landingPageName||t.setLandingPage(),e})},e.prototype.loadMetadata=function(){return this.$metadata.load()},e.prototype.loadAppVariables=function(e){var n=this;if(this.appVariablesLoaded)return Promise.resolve();var t=function(e){var t=n.$variables.register("app",e,n.$app);_.extend(n.$app.Variables,t.Variables),_.extend(n.$app.Actions,t.Actions),n.updateLoggedInUserVariable(),n.updateSupportedLocaleVariable(),n.appVariablesLoaded=!0,n.appVariablesFired=!1};return v.isDefined(e)?(t(e),Promise.resolve()):this.$http.get("./app.variables.json").then(function(e){return t(e)})},e.prototype.isAppVariablesFired=function(e){return v.isDefined(e)&&(this.appVariablesFired=e),this.appVariablesFired},e.prototype.clearLoggedInUserVariable=function(e){e.isAuthenticated=!1,e.roles=[],e.name=undefined,e.id=undefined,e.tenantId=undefined},e.prototype.updateLoggedInUserVariable=function(){var t=this,n=_.get(this.$app,"Variables.loggedInUser.dataSet");n&&this.$security.load().then(function(){var e=t.$security.get();if(!(e&&e.securityEnabled&&e.authenticated))throw t.clearLoggedInUserVariable(n),n.isSecurityEnabled=e&&e.securityEnabled,null;n.isAuthenticated=e.authenticated,n.roles=e.userInfo.userRoles,n.name=e.userInfo.userName,n.id=e.userInfo.userId,n.tenantId=e.userInfo.tenantId})["catch"](function(e){n.isAuthenticated=!1,n.roles=[],n.name=undefined,n.id=undefined,n.tenantId=undefined})},e.prototype.updateSupportedLocaleVariable=function(){_.get(this.$app,"Variables.supportedLocale")},e.prototype.handleSSOLogin=function(e){var t,n,i=this;if(t=this.$security.getRedirectPage(e),u.CONSTANTS.hasCordova){var r=_.get(this.$security.get(),"userInfo.userName");this.$security.authInBrowser().then(function(){return i.reloadAppData()}).then(function(){var e=_.get(i.$security.get(),"userInfo.userName");e&&e===r?u.routerService.navigate([t]):u.routerService.navigate(["/"])})}else{t=t?"?redirectPage="+encodeURIComponent(t):"",n=(n=this.$security.getQueryString(this.$security.getRedirectedRouteQueryParams()))?"?"+n:"",document.body.textContent=_.get(this.getAppLocale(),["MESSAGE_LOGIN_REDIRECTION"])||"Redirecting to sso login...";var o=this.getDeployedURL()+"services/security/ssologin"+t+n;window.self!==window.top&&"WM_PREVIEW_WINDOW"===window.parent.name?(window.parent.location.href=window.self.location.href,window.parent.name=""):window.location.href=o}},e.prototype.handle401=function(e,t){var n,i,r="DIALOG",o="PAGE",a="SSO",s=this.$security.get(),p={};if(i=s.loginConfig,s.userInfo&&s.userInfo.userName){switch(s.authenticated=!1,(n=i.sessionTimeout||{type:r}).type.toUpperCase()){case r:this.showLoginDialog();break;case o:e||(e=this.$security.getCurrentRoutePage()),p.redirectTo=e,p=_.merge(p,this.$security.getRedirectedRouteQueryParams()),e!==n.pageName&&this.$router.navigate([n.pageName],{queryParams:p});break;case a:this.handleSSOLogin(s)}this.setLandingPage()}else switch(i.type.toUpperCase()){case r:this.noRedirect(!0),this.showLoginDialog();break;case o:e=this.$security.getRedirectPage(s),p.redirectTo=e,p=_.merge(p,this.$security.getRedirectedRouteQueryParams()),this.$router.navigate([i.pageName],{queryParams:p}),this.$app.landingPageName=i.pageName;break;case a:this.handleSSOLogin(s)}},e.prototype.reloadAppData=function(){var e=this;return this.loadSecurityConfig().then(function(){return e.loadMetadata().then(function(){e.updateLoggedInUserVariable()})})},e.prototype.noRedirect=function(e){return _.isUndefined(e)||(this._noRedirect=e),this._noRedirect},e.prototype.executeSessionFailureRequests=function(){this.$http.executeSessionFailureRequests()},e.prototype.pushToSessionFailureRequests=function(e){this.$http.pushToSessionFailureQueue(e)},e.prototype.getDeployedURL=function(){return this.$app.deployedUrl?this.$app.deployedUrl:u.$rootScope.project.deployedUrl},e.prototype.notify=function(e,t){this.$app.notify(e,t)},e.prototype.subscribe=function(e,t){return this.$app.subscribe(e,t)},e.prototype.getActivePage=function(){return this.$app.activePage},e.prototype.getAppLocale=function(){return this.$app.appLocale},e.prototype.getSelectedLocale=function(){return this.$i18n.getSelectedLocale()},e.prototype.notifyApp=function(e,t,n){this.$app.notifyApp(e,t,n)},e.prototype.appOnBeforeServiceCall=function(e){return v.triggerFn(this.$app.onBeforeServiceCall,e)},e.prototype.appOnServiceSuccess=function(e,t){return v.triggerFn(this.$app.onServiceSuccess,e,t)},e.prototype.appOnServiceError=function(e,t){return v.triggerFn(this.$app.onServiceError,e,t)},e.prototype.appVariablesReady=function(){v.triggerFn(this.$app.onAppVariablesReady)},e.prototype.getPipe=function(e){if("date"===e)return this.$datePipe},e.prototype.setLandingPage=function(){var t=this;return this.$security.getPageByLoggedInUser().then(function(e){return t.$app.landingPageName=e})},e.prototype.isPrefabType=function(){return this.$app.isPrefabType},e.prototype.isTemplateBundleType=function(){return this.$app.isTemplateBundleType},e.prototype.postMessage=function(e){window.top.postMessage(e,"*")},e.prototype.showTemplate=function(e){var t=this.templates[e];this.$router.navigate([t.id])},e.prototype.postTemplateBundleInfo=function(){var n=this;return window.onmessage=function(e){var t=e.data;if(_.isObject(t))switch(t.key){case P.HIDE_TEMPLATES_SHOW_CASE:break;case P.SELECT_TEMPLATE:n.showTemplate(t.templateIndex)}},setTimeout(function(){n.postMessage({key:P.ON_LOAD})}),v.fetchContent("json","./config.json",!0,function(e){n.templates=[],e.error||(n.templates=e.templates,n.postMessage({key:P.TEMPLATEBUNDLE_CONFIG,config:e}))})},e.prototype.postAppTypeInfo=function(){if(this.isTemplateBundleType())return this.postTemplateBundleInfo()},e.decorators=[{type:y.Injectable}],e.ctorParameters=function(){return[{type:v.AbstractHttpService},{type:o.SecurityService},{type:v.AbstractDialogService},{type:l.Router},{type:v.App},{type:u.VariablesService},{type:u.MetadataService},{type:v.AbstractSpinnerService},{type:v.AbstractI18nService},{type:s.DatePipe}]},e}(),R=function(e){return"__self__"===e},I=function(e){return R(e)?".":"app/prefabs/"+e},E=new Set,j=new Map,O=new Set,D=function(e,t){var n=e;return v.stringStartsWith(e,"http://|https://|//")||(n=(t+n).replace("//","/")),n},N=D,x=function(){function e(e,t){this.$metadata=e,this.prefabConfigProvider=t}return e.prototype.getConfig=function(e){return this.prefabConfigProvider.getConfig(e)},e.prototype.loadServiceDefs=function(e){return R(e)?Promise.resolve():this.$metadata.load(e)},e.prototype.loadStyles=function(e,t){var n=(void 0===t?{resources:{styles:[]}}:t).resources.styles,i=I(e),r=n.map(function(e){return _.endsWith(e,"/pages/Main/Main.css")?undefined:D(e,i)}).filter(function(e){return!!e});return v.loadStyleSheets(r),Promise.resolve()},e.prototype.loadScripts=function(e,t){var n=(void 0===t?{resources:{scripts:[]}}:t).resources.scripts,i=I(e),r=n.map(function(e){return D(e,i)});return v.loadScripts(r)},e.prototype.setInProgress=function(e){var n,i,t=new Promise(function(e,t){n=e,i=t});t.resolve=n,t.reject=i,j.set(e,t)},e.prototype.resolveInProgress=function(e){j.get(e)&&(j.get(e).resolve(),j["delete"](e))},e.prototype.loadDependencies=function(t){var n=this;return O.has(t)?Promise.resolve():E.has(t)?Promise.reject(""):j.get(t)?j.get(t):(this.setInProgress(t),this.getConfig(t).then(function(e){return Promise.all([n.loadStyles(t,e),n.loadScripts(t,e),n.loadServiceDefs(t)]).then(function(){n.resolveInProgress(t),O.add(t)})}))},e.decorators=[{type:y.Injectable}],e.ctorParameters=function(){return[{type:u.MetadataService},{type:A}]},e}(),W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function V(e,t){function n(){this.constructor=e}W(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var k=Object.assign||function k(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e};function F(t,a,s,p){return new(s||(s=Promise))(function(e,n){function i(e){try{o(p.next(e))}catch(t){n(t)}}function r(e){try{o(p["throw"](e))}catch(t){n(t)}}function o(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(i,r)}o((p=p.apply(t,a||[])).next())})}function B(i,r){var o,a,s,e,p={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),"throw":t(1),"return":t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function n(e){if(o)throw new TypeError("Generator is already executing.");for(;p;)try{if(o=1,a&&(s=a[2&e[0]?"return":e[0]?"throw":"next"])&&!(s=s.call(a,e[1])).done)return s;switch(a=0,s&&(e=[0,s.value]),e[0]){case 0:case 1:s=e;break;case 4:return p.label++,{value:e[1],done:!1};case 5:p.label++,a=e[1],e=[0];continue;case 7:e=p.ops.pop(),p.trys.pop();continue;default:if(!(s=0<(s=p.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){p=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){p.label=e[1];break}if(6===e[0]&&p.label<s[1]){p.label=s[1],s=e;break}if(s&&p.label<s[2]){p.label=s[2],p.ops.push(e);break}s[2]&&p.ops.pop(),p.trys.pop();continue}e=r.call(i,p)}catch(t){e=[6,t],a=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([t,e])}}}function U(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function q(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(i=o.next()).done;)a.push(i.value)}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=o["return"])&&n.call(o)}finally{if(r)throw r.error}}return a}function H(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(q(arguments[t]));return e}var G,J,z=function(){function e(){this.fragments=0,this.fragmentsLoaded$=new p.Subject}return e.prototype.init=function(){var e=this;this.viewInit$.subscribe(v.noop,v.noop,function(){e.isViewInitialized=!0,e.isReady()})},e.prototype.registerFragment=function(){this.fragments++},e.prototype.resolveFragment=function(){this.fragments--,this.isReady()},e.prototype.isReady=function(){this.isViewInitialized&&!this.fragments&&(this.registerFragment=v.noop,this.resolveFragment=v.noop,this.fragmentsLoaded$.complete())},e}(),Q={},Y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.destroy$=new p.Subject,e.viewInit$=new p.Subject,e}return V(e,t),e.prototype.getContainerWidgetInjector=function(){return this.containerWidget.inj||this.containerWidget.injector},e.prototype.init=function(){var e=this;this.App=this.injector.get(v.App),this.containerWidget=this.injector.get(g.WidgetRef),this.i18nService=this.injector.get(v.AbstractI18nService),this.getContainerWidgetInjector().view.component.registerFragment&&this.getContainerWidgetInjector().view.component.registerFragment(),this.initUserScript(),this.registerWidgets(),this.initVariables(),this.activePageName=this.App.activePageName,this.registerPageParams(),this.defineI18nProps(),this.viewInit$.subscribe(v.noop,v.noop,function(){e.pageParams=e.containerWidget.partialParams}),t.prototype.init.call(this)},e.prototype.registerWidgets=function(){"Common"===this.partialName?this.Widgets=Q:this.Widgets=Object.create(Q),this.containerWidget.Widgets=this.Widgets},e.prototype.registerDestroyListener=function(e){this.destroy$.subscribe(v.noop,v.noop,function(){return e()})},e.prototype.initUserScript=function(){try{this.evalUserScript(this,this.App,this.injector.get(v.UtilsService))}catch(e){console.error("Error in evaluating partial ("+this.partialName+") script\n",e)}},e.prototype.initVariables=function(){var r=this,e=this.injector.get(u.VariablesService).register(this.partialName,this.getVariables(),this);this.Variables=Object.create(this.App.Variables),this.Actions=Object.create(this.App.Actions),this.containerWidget.Variables=this.Variables,this.containerWidget.Actions=this.Actions,Object.entries(e.Variables).forEach(function(e){var t=q(e,2),n=t[0],i=t[1];return r.Variables[n]=i}),Object.entries(e.Actions).forEach(function(e){var t=q(e,2),n=t[0],i=t[1];return r.Actions[n]=i}),this.viewInit$.subscribe(v.noop,v.noop,function(){v.$invokeWatchers(!0,!0),e.callback(e.Variables)["catch"](v.noop),e.callback(e.Actions)})},e.prototype.registerPageParams=function(){this.pageParams=this.containerWidget.partialParams},e.prototype.defineI18nProps=function(){this.appLocale=this.i18nService.getAppLocale()},e.prototype.invokeOnReady=function(){this.onReady(),this.getContainerWidgetInjector().view.component.resolveFragment&&this.getContainerWidgetInjector().view.component.resolveFragment()},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){e.viewInit$.complete(),e.fragmentsLoaded$.subscribe(v.noop,v.noop,function(){return e.invokeOnReady()})},100)},e.prototype.ngOnDestroy=function(){this.destroy$.complete()},e.prototype.onReady=function(){},e}(z),K=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startupVariablesLoaded=!1,e.pageTransitionCompleted=!1,e.destroy$=new p.Subject,e.viewInit$=new p.Subject,e}return V(e,t),e.prototype.init=function(){v.muteWatchers(),this.App=this.injector.get(v.App),this.route=this.injector.get(l.ActivatedRoute),this.appManager=this.injector.get(T),this.navigationService=this.injector.get(v.AbstractNavigationService),this.i18nService=this.injector.get(v.AbstractI18nService),this.router=this.injector.get(l.Router),this.initUserScript(),this.registerWidgets(),this.initVariables(),this.App.lastActivePageName=this.App.activePageName,this.App.activePageName=this.pageName,(this.App.activePage=this).activePageName=this.pageName,this.registerPageParams(),this.defineI18nProps(),t.prototype.init.call(this)},e.prototype.registerWidgets=function(){this.Widgets=Object.create(Q),this.App.Widgets=Object.create(this.Widgets)},e.prototype.initUserScript=function(){try{this.evalUserScript(this,this.App,this.injector.get(v.UtilsService))}catch(e){console.error("Error in evaluating page ("+this.pageName+") script\n",e)}},e.prototype.registerPageParams=function(){var t=this,e=this.route.queryParams.subscribe(function(e){return t.pageParams=e});this.registerDestroyListener(function(){return e.unsubscribe()})},e.prototype.registerDestroyListener=function(e){this.destroy$.subscribe(v.noop,v.noop,function(){return e()})},e.prototype.defineI18nProps=function(){this.appLocale=this.i18nService.getAppLocale()},e.prototype.initVariables=function(){var r=this,e=this.injector.get(u.VariablesService).register(this.pageName,this.getVariables(),this);this.Variables=Object.create(this.App.Variables),this.Actions=Object.create(this.App.Actions),Object.entries(e.Variables).forEach(function(e){var t=q(e,2),n=t[0],i=t[1];return r.Variables[n]=i}),Object.entries(e.Actions).forEach(function(e){var t=q(e,2),n=t[0],i=t[1];return r.Actions[n]=i});var t=this.viewInit$.subscribe(v.noop,v.noop,function(){r.appManager.isAppVariablesFired()||(e.callback(r.App.Variables)["catch"](v.noop).then(function(){r.appManager.notify("app-variables-data-loaded",{pageName:r.pageName})}),e.callback(r.App.Actions),r.appManager.appVariablesReady(),r.appManager.isAppVariablesFired(!0)),e.callback(e.Variables)["catch"](v.noop).then(function(){r.appManager.notify("page-variables-data-loaded",{pageName:r.pageName}),r.startupVariablesLoaded=!0,setTimeout(function(){r.showPageContent=!0},100)}),e.callback(e.Actions),t.unsubscribe()})},e.prototype.runPageTransition=function(i){return new Promise(function(e){var t=$("app-page-outlet:first");if(i){var n=function(){e&&(t.off("animationend",n),t.removeClass(i),t.children().first().remove(),e(),e=null)};i="page-transition page-transition-"+i,t.addClass(i),t.on("animationend",n),setTimeout(n,1e3)}else e()})},e.prototype.invokeOnReady=function(){this.onReady(),(this.App.onPageReady||v.noop)(this.pageName,this),this.appManager.notify("pageReady",{name:this.pageName,instance:this})},e.prototype.ngAfterViewInit=function(){var e=this,t=this.navigationService.getPageTransition();if(t){var n=$("app-page-outlet:first");n.prepend(n.children().first().clone())}this.runPageTransition(t).then(function(){e.pageTransitionCompleted=!0,e.compilePageContent=!0}),setTimeout(function(){v.unMuteWatchers(),e.viewInit$.complete(),v.isMobileApp()?e.onPageContentReady=function(){e.fragmentsLoaded$.subscribe(v.noop,v.noop,function(){e.invokeOnReady()}),e.onPageContentReady=v.noop}:e.fragmentsLoaded$.subscribe(v.noop,v.noop,function(){return e.invokeOnReady()})},300)},e.prototype.ngOnDestroy=function(){this.destroy$.complete()},e.prototype.onReady=function(){},e.prototype.onBeforePageLeave=function(){},e.prototype.onPageContentReady=function(){},e}(z),Z=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.destroy$=new p.Subject,e.viewInit$=new p.Subject,e}return V(e,t),e.prototype.getContainerWidgetInjector=function(){return this.containerWidget.inj||this.containerWidget.injector},e.prototype.init=function(){this.App=this.injector.get(v.App),this.containerWidget=this.injector.get(g.WidgetRef),this.prefabMngr=this.injector.get(x),this.i18nService=this.injector.get(v.AbstractI18nService),this.getContainerWidgetInjector().view.component.registerFragment&&this.getContainerWidgetInjector().view.component.registerFragment(),this.initUserScript(),this.registerWidgets(),this.initVariables(),this.registerProps(),this.defineI18nProps(),t.prototype.init.call(this)},e.prototype.registerWidgets=function(){this.Widgets={}},e.prototype.initUserScript=function(){try{this.evalUserScript(this,this.App,this.injector.get(v.UtilsService))}catch(e){console.error("Error in evaluating prefab ("+this.prefabName+") script\n",e)}},e.prototype.registerChangeListeners=function(){this.containerWidget.registerPropertyChangeListener(this.onPropertyChange),this.containerWidget.registerStyleChangeListener(this.onPropertyChange)},e.prototype.registerDestroyListener=function(e){this.destroy$.subscribe(v.noop,v.noop,function(){return e()})},e.prototype.defineI18nProps=function(){this.appLocale=this.i18nService.getPrefabLocaleBundle(this.prefabName)},e.prototype.registerProps=function(){var a=this;this.prefabMngr.getConfig(this.prefabName).then(function(e){e&&(a.displayName=e.displayName,Object.entries(e.properties||{}).forEach(function(e){var t,n=q(e,2),i=n[0],r=n[1],o=_.trim(r.value);_.startsWith(o,"bind:")&&(t=o.replace("bind:","")),Object.defineProperty(a,i,{get:function(){return a.containerWidget[i]},set:function(e){return a.containerWidget.widget[i]=e}}),t&&a.registerDestroyListener(v.$watch(t,a,{},function(e){return a.containerWidget.widget[i]=e}))}),Object.entries(e.events||{}).forEach(function(e){var t=q(e,2),i=t[0];t[1];a[i]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=i.substr(2).toLowerCase();a.containerWidget.invokeEventCallback(n,{$event:e[0],$data:e[1]})}}),Object.entries(e.methods||{}).forEach(function(e){var t=q(e,2),i=t[0];t[1];a.containerWidget[i]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{if(a[i])return a[i].apply(a,e)}catch(n){console.warn("error in executing prefab-"+a.prefabName+" method-"+i)}}})),a.containerWidget.setProps(e),v.isIE()&&(a.containerWidget.widget=a.containerWidget.createProxy())})},e.prototype.initVariables=function(){var r=this,e=this.injector.get(u.VariablesService).register(this.prefabName,this.getVariables(),this);this.Variables={},this.Actions={},Object.entries(e.Variables).forEach(function(e){var t=q(e,2),n=t[0],i=t[1];return r.Variables[n]=i}),Object.entries(e.Actions).forEach(function(e){var t=q(e,2),n=t[0],i=t[1];return r.Actions[n]=i}),this.viewInit$.subscribe(v.noop,v.noop,function(){e.callback(e.Variables)["catch"](v.noop),e.callback(e.Actions)})},e.prototype.invokeOnReady=function(){v.$invokeWatchers(!0,!0),this.onReady(),this.getContainerWidgetInjector().view.component.resolveFragment&&this.getContainerWidgetInjector().view.component.resolveFragment(),this.containerWidget.invokeEventCallback("load")},e.prototype.ngAfterViewInit=function(){var e=this;this.viewInit$.complete(),this.registerChangeListeners(),setTimeout(function(){e.fragmentsLoaded$.subscribe(v.noop,v.noop,function(){return e.invokeOnReady()})},100)},e.prototype.ngOnDestroy=function(){this.containerWidget.invokeEventCallback("destroy"),this.destroy$.complete()},e.prototype.onPropertyChange=function(){},e.prototype.onReady=function(){},e}(z);(J=G||(G={})).EVERYONE="Everyone",J.ANONYMOUS="Anonymous",J.AUTHENTICATED="Authenticated";var X=function(){function e(e,t,n){this.templateRef=e,this.viewContainerRef=t,this.securityService=n,this.processed=!1;var i=this.securityService.get();this.securityEnabled=_.get(i,"securityEnabled"),this.isUserAuthenticated=_.get(i,"authenticated"),this.userRoles=_.get(i,"userInfo.userRoles")}return e.prototype.getWidgetRolesArrayFromStr=function(e){var t=/&#44;/g;return""===(e=e||"")?[]:_.split(e,",").map(function(e){return _.trim(e).replace(t,",")})},e.prototype.matchRoles=function(e,t){return e.some(function(e){return _.includes(t,e)})},e.prototype.hasAccessToWidget=function(e,t){return!!_.includes(e,G.EVERYONE)||(!(!_.includes(e,G.ANONYMOUS)||this.isUserAuthenticated)||(!(!_.includes(e,G.AUTHENTICATED)||!this.isUserAuthenticated)||this.isUserAuthenticated&&this.matchRoles(e,t)))},Object.defineProperty(e.prototype,"accessroles",{set:function(e){if(!this.processed){this.processed=!0;var t=this.getWidgetRolesArrayFromStr(e);!this.securityEnabled||this.hasAccessToWidget(t,this.userRoles)?this.viewContainerRef.createEmbeddedView(this.templateRef):this.viewContainerRef.clear()}},enumerable:!0,configurable:!0}),e.decorators=[{type:y.Directive,args:[{selector:"[accessroles]"}]}],e.ctorParameters=function(){return[{type:y.TemplateRef},{type:y.ViewContainerRef},{type:o.SecurityService}]},e.propDecorators={accessroles:[{type:y.Input}]},e}(),ee=function(){function e(i,e,t,n,r,o,a,s,p){var c=this;this.componentInstance=i,this.vcRef=e,this.elRef=t,this.inj=n,this.app=r,this.resolver=a,this.componentRefProvider=s,this.partialRefProvider=p,this.contentInitialized=!1,this.renderPartial=_.debounce(this._renderPartial,200,{leading:!0}),i.registerPropertyChangeListener(function(e,t,n){"content"===e&&(i.$lazyLoad?i.$lazyLoad=function(){c.renderPartial(t),i.$lazyLoad=v.noop}:c.renderPartial(t))});var u=i.params$.pipe(f.filter(function(){return c.contentInitialized}),f.debounceTime(200)).subscribe(function(){return c.renderPartial(i.content)});i.registerDestroyListener(function(){return u.unsubscribe()})}return Object.defineProperty(e.prototype,"name",{get:function(){return this.componentInstance.name},enumerable:!0,configurable:!0}),e.prototype._renderPartial=function(r){return F(this,void 0,void 0,function(){var t,n,i=this;return B(this,function(e){switch(e.label){case 0:return this.vcRef.clear(),v.$invokeWatchers(!0),[4,this.partialRefProvider.getComponentFactoryRef(r,c.ComponentType.PARTIAL)];case 1:return(t=e.sent())&&(n=this.vcRef.createComponent(t,0,this.inj),this.$target||(this.$target=this.elRef.nativeElement.querySelector("[partial-container-target]")||this.elRef.nativeElement),this.$target.innerHTML="",this.$target.appendChild(n.location.nativeElement),this.contentInitialized=!0,setTimeout(function(){return i.onLoadSuccess()},200)),[2]}})})},e.prototype.onLoadSuccess=function(){this.componentInstance.invokeEventCallback("load"),this.app.notify("partialLoaded")},e.decorators=[{type:y.Directive,args:[{selector:"[partialContainer]"}]}],e.ctorParameters=function(){return[{type:undefined,decorators:[{type:y.Self},{type:y.Inject,args:[g.WidgetRef]}]},{type:y.ViewContainerRef},{type:y.ElementRef},{type:y.Injector},{type:v.App},{type:String,decorators:[{type:y.Attribute,args:["content"]}]},{type:y.ComponentFactoryResolver},{type:w},{type:L}]},e}(),te=function(){function e(){}return e.decorators=[{type:y.Component,args:[{selector:"app-spinner",template:'\n        <div class="app-spinner" *ngIf="show">\n            <div class="spinner-message" aria-label="loading gif">\n                <i class="spinner-image animated infinite fa fa-circle-o-notch fa-spin"></i>\n                <div class="spinner-messages">\n                    <p *ngFor="let value of spinnermessages" [textContent]="value"></p>\n                </div>\n            </div>\n        </div>\n    '}]}],e.ctorParameters=function(){return[]},e.propDecorators={show:[{type:y.Input}],spinnermessages:[{type:y.Input}]},e}(),ne=function(i){function e(e,t){var n=i.call(this,e,t)||this;return n.toastrService=e,n.toastPackage=t,n.watchers=[],n.params={},n.pagename=n.message||"",n.generateParams(),n}return V(e,i),e.prototype.generateParams=function(){var n=this;_.forEach(this.options.partialParams,function(t){_.isString(t.value)&&0===t.value.indexOf("bind:")?n.watchers.push(v.$watch(t.value.substr(5),n.options.context,{},function(e){n.params[t.name]=e,v.$appDigest()})):n.params[t.name]=t.value})},e.prototype.generateDynamicComponent=function(){return F(this,void 0,void 0,function(){var t;return B(this,function(e){return t=$(".parent-custom-toast"),this.customToastRef.clear(),t[0].appendChild(this.customToastRef.createEmbeddedView(this.customToastTmpl).rootNodes[0]),[2]})})},e.prototype.ngAfterViewInit=function(){this.generateDynamicComponent()},e.prototype.ngOnDestroy=function(){_.forEach(this.watchers,function(e){return e()})},e.decorators=[{type:y.Component,args:[{selector:"[custom-toaster-component]",template:'\n        <div class="parent-custom-toast"></div>\n        <ng-container #customToast></ng-container>\n        <ng-template #customToastTmpl>\n            <div wmContainer partialContainer content.bind="pagename">\n                <div *ngFor="let param of params | keyvalue" wmParam hidden\n                    [name]="param.key" [value]="param.value"></div>\n            </div>\n        </ng-template>',preserveWhitespaces:!1}]}],e.ctorParameters=function(){return[{type:r.ToastrService},{type:r.ToastPackage}]},e.propDecorators={customToastRef:[{type:y.ViewChild,args:["customToast",{read:y.ViewContainerRef}]}],customToastTmpl:[{type:y.ViewChild,args:["customToastTmpl"]}]},e}(r.Toast),ie=function(){function e(e,t,n,i,r){this.route=e,this.securityService=t,this.router=n,this.app=i,this.appManger=r}return e.prototype.ngOnInit=function(){var t=this;this.app.isPrefabType?this.router.navigate(["prefab-preview"]):this.app.isApplicationType?this.securityService.getPageByLoggedInUser().then(function(e){t.router.navigate([e])}):(this.router.navigate([v.getWmProjectProperties().homePage]),this.appManger.postAppTypeInfo())},e.decorators=[{type:y.Component,args:[{selector:"app-empty-page",template:"<div></div>"}]}],e.ctorParameters=function(){return[{type:l.ActivatedRoute},{type:o.SecurityService},{type:l.Router},{type:v.App},{type:T}]},e}(),re=function(){function e(e,t,n,i,r,o,a){var s=this;this.componentInstance=e,this.vcRef=t,this.elRef=n,this.prefabMngr=i,this.resolver=r,this.injector=o,this.componentRefProvider=a;var p=this.componentInstance.prefabName;this.prefabMngr.loadDependencies(p).then(function(){return F(s,void 0,void 0,function(){var t,n;return B(this,function(e){switch(e.label){case 0:return[4,this.componentRefProvider.getComponentFactoryRef(p,c.ComponentType.PREFAB)];case 1:return(t=e.sent())&&(n=this.vcRef.createComponent(t,0,o),this.elRef.nativeElement.appendChild(n.location.nativeElement)),[2]}})})})}return e.decorators=[{type:y.Directive,args:[{selector:"[wmPrefab][prefabname]"}]}],e.ctorParameters=function(){return[{type:undefined,decorators:[{type:y.Self},{type:y.Inject,args:[g.WidgetRef]}]},{type:y.ViewContainerRef},{type:y.ElementRef},{type:x},{type:y.ComponentFactoryResolver},{type:y.Injector},{type:w}]},e}(),oe={DialogService:v.AbstractDialogService,i18nService:v.AbstractI18nService,SpinnerService:v.AbstractSpinnerService,ToasterService:v.AbstractToasterService,Utils:v.UtilsService,FIELD_TYPE:v.FieldTypeService,FIELD_WIDGET:v.FieldWidgetService,DynamicComponentService:v.DynamicComponentRefProvider},ae=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},se=function(){function e(e,t,n,i){this.inj=e,this.i18nService=t,this.httpService=n,this.securityService=i,this.Variables={},this.Actions={},this.onAppVariablesReady=ae,this.onSessionTimeout=ae,this.onPageReady=ae,this.onBeforePageLeave=ae,this.onBeforeServiceCall=ae,this.onServiceSuccess=ae,this.onServiceError=ae,this.dynamicComponentContainerRef={},this.changeLocale=this.i18nService.setSelectedLocale.bind(this.i18nService),this.getSelectedLocale=this.i18nService.getSelectedLocale.bind(this.i18nService),this._eventNotifier=new v.EventNotifier;var r=v.getWmProjectProperties();this.projectName=r.name,this.isPrefabType="PREFAB"===r.type,this.isApplicationType="APPLICATION"===r.type,this.isTemplateBundleType="TEMPLATEBUNDLE"===r.type,this.httpService.registerOnSessionTimeout(this.on401.bind(this)),this.appLocale=this.i18nService.getAppLocale(),this.httpService.setLocale(this.appLocale)}return e.prototype.reload=function(){window.location.reload()},e.prototype.notify=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._eventNotifier.notify.apply(this._eventNotifier,arguments)},e.prototype.getDependency=function(t){var n=this;if(v.isString(t)){if("HttpService"===t)return function(){var i=this.httpService,t=function(e,t){var n=Array.from(arguments).slice(1);return Promise.resolve(i[e].apply(i,n))},n=function(){return t.apply(undefined,H(["send"],Array.from(arguments)))};return["get","post","head","put","delete","jsonp","patch"].forEach(function(e){return n[e]=t.bind(undefined,e)}),n}.call(this);var i=oe[t]&&this.inj.get(oe[t]);return!i&&this.inj._providers&&this.inj._providers.forEach(function(e){e&&0===e.__proto__.constructor.toString().indexOf("function "+t+"(")&&(i=n.inj.get(e.__proto__.constructor))}),i}return this.inj.get(t)},e.prototype.on401=function(){var e=_.get(this.securityService.get(),"userInfo");_.isEmpty(e)||this.onSessionTimeout()},e.prototype.subscribe=function(e,t){return this._eventNotifier.subscribe(e,t)},e.prototype.notifyApp=function(e,t,n){var i=_.get(this,"Actions.appNotification");i?(t=t||"success",i.invoke({message:e,title:v.isDefined(n)?n:t.toUpperCase(),"class":t,duration:"ERROR"===t.toUpperCase()?0:undefined})):console.warn('The default Action "appNotification" doesn\'t exist in the app.')},e.decorators=[{type:y.Injectable}],e.ctorParameters=function(){return[{type:y.Injector},{type:v.AbstractI18nService},{type:v.AbstractHttpService},{type:o.SecurityService}]},e}(),pe=function(n){function e(e){var t=n.call(this)||this;return t.toaster=e,t}return V(e,n),e.prototype._showToaster=function(e,t,n,i){if(_.isNumber(i)&&(i={timeOut:i}),(i=i||{}).timeOut=v.isDefined(i.timeOut)?i.timeOut:0,i.enableHtml=v.isDefined(i.enableHtml),i.positionClass=i.positionClass||"toast-bottom-right",i.toastClass="toast",t||n){!i.bodyOutputType&&_.isObject(n)&&(n=JSON.stringify(n));var r=this.toaster[e];if(r)return r.call(this.toaster,n,t,i)}},e.prototype.success=function(e,t){return this._showToaster("success",e,t,{timeOut:5e3})},e.prototype.error=function(e,t){return this._showToaster("error",e,t,{timeOut:0})},e.prototype.info=function(e,t){return this._showToaster("info",e,t,{timeOut:0})},e.prototype.warn=function(e,t){return this._showToaster("warning",e,t,{timeOut:0})},e.prototype.show=function(e,t,n,i){return this._showToaster(e,t,n,i)},e.prototype.hide=function(e){e?this.toaster.clear(e.toastId):this.toaster.clear()},e.prototype.showCustom=function(e,t){if(e)return(t=t||{}).toastComponent=ne,t.toastClass="custom-toaster",t.timeOut=v.isDefined(t.timeOut)?t.timeOut:0,t.enableHtml=v.isDefined(t.enableHtml),t.positionClass=t.positionClass||"toast-bottom-right",t.toastClass="toast",this.toaster.show(e,"",t)},e.decorators=[{type:y.Injectable}],e.ctorParameters=function(){return[{type:r.ToastrService}]},e}(v.AbstractToasterService),ce=["ar","ar-001","ar-ae","ar-bh","ar-dz","ar-eg","ar-iq","ar-jo","ar-kw","ar-lb","ar-ly","ar-ma","ar-om","ar-qa","ar-sa","ar-sd","ar-sy","ar-tn","ar-ye","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","pnb","ps","sd","ug","ur","yi"],ue=function(r){function e(e,t,n){var i=r.call(this)||this;return i.$http=e,i.bsLocaleService=t,i.appDefaults=n,i.defaultSupportedLocale="en",i._isAngularLocaleLoaded=!1,i.appLocale={},i.prefabLocale=new Map,i}return V(e,r),e.prototype.updateLocaleDirection=function(){var e="ltr";ce.includes(this.selectedLocale)&&(e="rtl"),v.setCSS(document.body,"direction",e)},e.prototype.init=function(){this.messages={},Object.setPrototypeOf(this.appLocale,this.messages)},e.prototype.getSelectedLocale=function(){return this.selectedLocale},e.prototype.getDefaultSupportedLocale=function(){return this.defaultSupportedLocale},e.prototype.getAppLocale=function(){return this.appLocale},e.prototype.getPrefabLocaleBundle=function(e){return this.prefabLocale.has(e)||this.prefabLocale.set(e,Object.create(this.appLocale)),this.prefabLocale.get(e)},e.prototype.extendPrefabMessages=function(n){var i=this;n.prefabMessages&&Object.keys(n.prefabMessages).forEach(function(e){var t=i.prefabLocale.get(e);t||(t=Object.create(i.appLocale),i.prefabLocale.set(e,t)),Object.assign(t,n.prefabMessages[e])})},e.prototype.extendMessages=function(e){Object.assign(this.messages,e)},e.prototype.loadResource=function(e){return this.$http.get(e).toPromise()["catch"](function(){console.warn("error loading locale resource from "+e)})},e.prototype.loadAppLocaleBundle=function(){var t=this;this.loadResource("resources/i18n/"+this.selectedLocale+".json").then(function(e){t.extendMessages(e.messages),t.extendPrefabMessages(e),t.appDefaults.setFormats(e.formats)})},e.prototype.loadMomentLocaleBundle=function(e){var i=this,t=v._WM_APP_PROJECT.cdnUrl||v._WM_APP_PROJECT.ngDest;if(this.selectedLocale!==this.defaultSupportedLocale){var n=t+"locales/moment/"+e+".js";this.$http.get(n,{responseType:"text"}).toPromise().then(function(e){var n,t=new Function(e);t(),moment.locale(i.selectedLocale),t.apply({moment:{defineLocale:function(e,t){return n=t}}}),h.defineLocale(i.selectedLocale,n),i.bsLocaleService.use(i.getSelectedLocale()||i.defaultSupportedLocale)})}else moment.locale(this.defaultSupportedLocale)},e.prototype.loadAngularLocaleBundle=function(n){var r=this;return new Promise(function(i){var e=v._WM_APP_PROJECT.cdnUrl||v._WM_APP_PROJECT.ngDest;if(r.selectedLocale!==r.defaultSupportedLocale){var t=e+"locales/angular/"+n+".js";r.$http.get(t,{responseType:"text"}).toPromise().then(function(e){var t={},n={};t.exports=n,new Function("module","exports",e)(t,n),s.registerLocaleData(n["default"]),r._isAngularLocaleLoaded=!0,i()},function(){return i()})}else i()})},e.prototype.loadCalendarLocaleBundle=function(e){var t,n=v._WM_APP_PROJECT.cdnUrl||v._WM_APP_PROJECT.ngDest;if(!e)return Promise.resolve();t=n+"locales/fullcalendar/"+e+".js",v.isMobile()||v.isMobileApp()||this.selectedLocale===this.defaultSupportedLocale||this.$http.get(t,{responseType:"text"}).toPromise().then(function(e){new Function(e)()})},e.prototype.loadLocaleBundles=function(e){return e.moment&&this.loadMomentLocaleBundle(e.moment),e.fullCalendar&&this.loadCalendarLocaleBundle(e.fullCalendar),e.angular&&this.loadAppLocaleBundle(),this.loadAngularLocaleBundle(e.angular)},e.prototype.setSelectedLocale=function(e){var t=this;_.isObject(e)&&(e=e.datavalue);var n=v.getWmProjectProperties().supportedLanguages[e],i=Object.keys(v.getWmProjectProperties().supportedLanguages);return _.includes(i,e)&&e&&e!==this.selectedLocale?(v.setSessionStorageItem("selectedLocale",e),this.selectedLocale=e,this.init(),this.loadLocaleBundles(n).then(function(){return t.updateLocaleDirection()})):Promise.resolve()},e.prototype.loadDefaultLocale=function(){var e=this.getAcceptedLanguages();e.push(v.getWmProjectProperties().defaultLanguage);var t=Object.keys(v.getWmProjectProperties().supportedLanguages)||[this.defaultSupportedLocale],n=v.getSessionStorageItem("selectedLocale")||_.intersection(e,t)[0]||this.defaultSupportedLocale;t=t||[n];var i=n||t[0];return this.setSelectedLocale(i)},e.prototype.getLocalizedMessage=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return v.replace(this.appLocale[e],t)},e.prototype.getAcceptedLanguages=function(){var e;return e=u.CONSTANTS.hasCordova?navigator.languages||[navigator.language]:(e=v.getWmProjectProperties().preferredLanguage||"").split(",").map(function(e){return e.split(";")[0]}),_.map(e,_.toLower)},e.prototype.isAngularLocaleLoaded=function(){return this._isAngularLocaleLoaded},e.decorators=[{type:y.Injectable}],e.ctorParameters=function(){return[{type:i.HttpClient},{type:h.BsLocaleService},{type:v.AppDefaults}]},e}(v.AbstractI18nService),le=function(t){function e(){var e=t.call(this)||this;return e.spinnerId=0,e.messageSource=new p.Subject,e.messagesByContext={},e}return V(e,t),e.prototype.getMessageSource=function(){return this.messageSource},e.prototype.showContextSpinner=function(e,t,n){var i=$('[name="'+e+'"]');if(this.messagesByContext[e]=this.messagesByContext[e]||{},0!==Object.keys(this.messagesByContext[e]).length)this.messagesByContext[e][n]=t,this.messagesByContext[e].finalMessage=this.messagesByContext[e].finalMessage+" "+this.messagesByContext[e][n],i.find(".spinner-messages-container").html(this.messagesByContext[e].finalMessage);else{var r=$('<div class="app-spinner">\n                            <div class="spinner-message" aria-label="loading gif">\n                                <i class="spinner-image animated infinite fa fa-circle-o-notch fa-spin"></i>\n                                <div class="spinner-messages">\n                                    <p class="spinner-messages-container"></p>\n                               </div>\n                            </div>\n                         </div>');this.messagesByContext[e][n]=t,this.messagesByContext[e].finalMessage=this.messagesByContext[e][n],r.find(".spinner-messages-container").html(this.messagesByContext[e].finalMessage),i.prepend(r)}return n},e.prototype.showAppSpinner=function(e,t){var n="page";this.messagesByContext[n]=this.messagesByContext[n]||{},this.messagesByContext[n][t]=e,this.messageSource.next({show:!0,message:e,messages:_.values(this.messagesByContext[n])})},e.prototype.hideContextSpinner=function(e,t){delete this.messagesByContext[e][t],1===Object.keys(this.messagesByContext[e]).length&&(this.messagesByContext[e]={}),$('[name="'+e+'"]').find(".app-spinner").remove()},e.prototype.show=function(e,t,n,i,r){return t=t||++this.spinnerId,i&&"page"!==i?this.showContextSpinner(i,e,t):(this.showAppSpinner(e,t),t)},e.prototype.hide=function(t){var e=_.findKey(this.messagesByContext,function(e){return _.includes(_.keys(e),t)})||"page";if("page"===e)if(t){delete this.messagesByContext[e][t];var n=_.values(this.messagesByContext[e]),i=Object.keys(this.messagesByContext[e]).length;this.messageSource.next({show:!!n.length,messages:_.values(this.messagesByContext[e])}),0===i&&$(".app-spinner").remove()}else this.messagesByContext[e]={};else this.hideContextSpinner(e,t)},e.decorators=[{type:y.Injectable}],e.ctorParameters=function(){return[]},e}(v.AbstractSpinnerService),he="body:first >app-root:last",fe=function(){function e(e,t){var r=this;this.app=e,this.router=t,this.history=new ge,this.isPageAddedToHistory=!1,this.router.events.subscribe(function(e){if(e instanceof l.NavigationStart){var t=e.url,n={},i=void 0;r.isPageAddedToHistory||(r.isPageAddedToHistory=!1,"/"===(i=0<t.indexOf("?")?(t.substr(t.indexOf("?")+1).split("&").forEach(function(e){var t=e.split("=");n[t[0]]=t[1]}),t.substr(0,t.indexOf("?"))):t)[0]&&(i=i.substr(1)),i&&(delete n.name,r.history.push(new de(i,n,r.transition))))}})}return e.prototype.getPageTransition=function(){return _.isEmpty(this.transition)||_.isEqual("none",this.transition)?null:this.transition},e.prototype.goToPage=function(e,t){if(this.transition=t.transition||"",this.history.getCurrentPage()&&(this.isPageAddedToHistory=!0),this.history.push(new de(e,t.urlParams,this.transition)),!u.CONSTANTS.isWaveLens)return this.router.navigate(["/"+e],{queryParams:t.urlParams});var n=window.location,i=_.map(t.urlParams||[],function(e,t){return t+"="+e}),r=0<i.length?"?"+i.join("&"):"";n.href=n.origin+n.pathname+"#/"+e+r},e.prototype.goToPrevious=function(){this.history.getPagesCount()&&(this.transition=this.history.getCurrentPage().transition,_.isEmpty(this.transition)||(this.transition+="-exit"),this.history.pop(),this.isPageAddedToHistory=!0,window.history.back())},e.prototype.goToView=function(t,e,n){var i=this,r=(e=e||{}).pageName,o=e.transition||"",a=e.$event,s=this.app.activePage,p=n&&n._context&&n._context.prefabName;if(this.app.isPrefabType)this.goToElementView($(he).find('[name="'+t+'"]'),t,r,n);else if(r===s.activePageName||p)p&&this.isPrefabWithNameExists(p)?this.goToElementView($('[prefabName="'+p+'"]').find('[name="'+t+'"]'),t,r,n):r&&r!==s.activePageName?this.app.notifyApp(u.CONSTANTS.WIDGET_DOESNT_EXIST,"error"):this.goToElementView($(he).find('[name="'+t+'"]'),t,r,n);else if(this.isPartialWithNameExists(r))this.goToElementView($('[partialcontainer][content="'+r+'"]').find('[name="'+t+'"]'),t,r,n);else{this.goToPage(r,{viewName:t,$event:a,transition:o,urlParams:e.urlParams});var c=this.app.subscribe("pageReady",function(e){i.goToElementView($(he).find('[name="'+t+'"]'),t,r,n),c()})}},e.prototype.goToElementView=function(e,t,n,i){var r,o,a=this,s=this.app.activePage;if(e.length)switch(this.app.isPrefabType||n!==s.activePageName||(e=this.getViewElementInActivePage(e)),(r=e[0].widget).widgetType){case"wm-accordionpane":this.showAncestors(e,i),r.expand();break;case"wm-tabpane":this.showAncestors(e,i),r.select();break;case"wm-segment-content":this.showAncestors(e,i),r.navigate();break;case"wm-panel":r.expanded=!0}else o=this.showAncestorDialog(t),setTimeout(function(){o&&a.goToElementView($('[name="'+t+'"]'),t,n,i)})},e.prototype.getViewElementInActivePage=function(e){var t;return 1<e.length&&(t=_.filter(e,function(e){if(_.isEmpty($(e).closest('[data-role = "partial"]'))&&_.isEmpty($(e).closest("[wmprefabcontainer]")))return e}))&&(e=$(t)),e},e.prototype.isPartialWithNameExists=function(e){return $('[partialcontainer][content="'+e+'"]').length},e.prototype.isPrefabWithNameExists=function(e){return $('[prefabName="'+e+'"]').length},e.prototype.showAncestors=function(e,t){e.parents('[wm-navigable-element="true"]').toArray().reverse().forEach(function(e){var t=e.widget;switch(t.widgetType){case"wm-accordionpane":t.expand();break;case"wm-tabpane":t.select();break;case"wm-segment-content":t.navigate();break;case"wm-panel":t.expanded=!0}})},e.prototype.showAncestorDialog=function(t){var n;return $("app-root [dialogtype]").each(function(){var e=$(this);if($(e.html()).find('[name="'+t+'"]').length)return n=e.attr("name"),!1}),n},e.decorators=[{type:y.Injectable}],e.ctorParameters=function(){return[{type:v.App},{type:l.Router}]},e}(),de=function(){function e(e,t,n){this.name=e,this.urlParams=t,this.transition=n,this.transition=_.isEmpty(this.transition)?null:this.transition}return e.prototype.isEqual=function(e){return e&&e.name===this.name&&_.isEqual(e.urlParams,this.urlParams)},e}(),ge=function(){function e(){this.stack=[]}return e.prototype.getCurrentPage=function(){return this.currentPage},e.prototype.getPagesCount=function(){return this.stack.length},e.prototype.isLastVisitedPage=function(e){return this.getLastPage().isEqual(e)},e.prototype.push=function(e){this.currentPage&&this.stack.push(this.currentPage),this.currentPage=e},e.prototype.pop=function(){return this.currentPage=this.stack.pop(),this.currentPage},e.prototype.getLastPage=function(){return 0<this.stack.length?this.stack[this.stack.length-1]:undefined},e}(),me=function(){function e(){}return e.prototype.setFormats=function(e){var t=e.date,n=e.time,i=t&&n?t+" "+n:undefined;this.dateFormat=t,this.timeFormat=n,this.dateTimeFormat=i},e.decorators=[{type:y.Injectable}],e.ctorParameters=function(){return[]},e}(),ye=!1,ve=function(){function e(e,t){this.securityService=e,this.appManager=t}return e.prototype.loadSecurityConfig=function(){return ye?Promise.resolve(!0):this.appManager.loadSecurityConfig().then(function(){return ye=!0})},e.prototype.isAuthenticated=function(){var n=this;return this.loadSecurityConfig().then(function(){return new Promise(function(e,t){n.securityService.isAuthenticated(e,t)})})},e.prototype.canActivate=function(t){var n=this;return this.isAuthenticated().then(function(e){return e?Promise.resolve(!0):(n.appManager.handle401(t.routeConfig.path),Promise.resolve(!1))})},e.decorators=[{type:y.Injectable}],e.ctorParameters=function(){return[{type:o.SecurityService},{type:T}]},e}(),be=function(){function e(e,t,n,i,r){this.securityService=e,this.authGuard=t,this.toasterService=n,this.app=i,this.appManager=r}return e.prototype.canActivate=function(n){var i=this,r=n.data.allowedRoles;return this.authGuard.isAuthenticated().then(function(e){if(e){var t=i.securityService.get().userInfo.userRoles;return 0<_.intersection(r,t).length?Promise.resolve(!0):(i.appManager.notifyApp(i.app.appLocale.LABEL_ACCESS_DENIED||"Access Denied","error"),Promise.resolve(!1))}return i.appManager.handle401(n.routeConfig.path),Promise.resolve(!1)})},e.decorators=[{type:y.Injectable}],e.ctorParameters=function(){return[{type:o.SecurityService},{type:ve},{type:v.AbstractToasterService},{type:v.App},{type:T}]},e}(),Pe=function(){function e(e,t){this.app=e,this.appManager=t}return e.prototype.canActivate=function(e){return this.appManager.notifyApp(this.app.appLocale.MESSAGE_PAGE_NOT_FOUND||"The page you are trying to reach is not available","error"),Promise.resolve(!1)},e.decorators=[{type:y.Injectable}],e.ctorParameters=function(){return[{type:v.App},{type:T}]},e}(),Se=!1,we=function(){function e(e,t,n,i){this.inj=e,this.app=t,this.utilService=n,this.appJsProvider=i}return e.prototype.resolve=function(){return F(this,void 0,void 0,function(){var t;return B(this,function(e){switch(e.label){case 0:if(Se)return[2,!0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.appJsProvider.getAppScriptFn()];case 2:return e.sent()(this.app,this.utilService,this.inj),[3,4];case 3:return t=e.sent(),console.warn("Error in executing app.js",t),[3,4];case 4:return[2,Se=!0]}})})},e.decorators=[{type:y.Injectable}],e.ctorParameters=function(){return[{type:y.Injector},{type:v.App},{type:v.UtilsService},{type:C}]},e}(),Ae=function(){function e(e){this.i18nService=e}return e.prototype.resolve=function(){return this.i18nService.loadDefaultLocale()},e.decorators=[{type:y.Injectable}],e.ctorParameters=function(){return[{type:v.AbstractI18nService}]},e}(),Ce=function(){function e(e,t){var n=this;this.compiler=e,this.injector=t,this._locale=v.getSessionStorageItem("selectedLocale")||"en",this.preparePipeMeta=function(e,t,n,i){return void 0===i&&(i=[]),{type:{reference:e,diDeps:i},name:t,pure:n}},this._pipeData=[this.preparePipeMeta(s.AsyncPipe,"async",!1,[y.ChangeDetectorRef]),this.preparePipeMeta(s.SlicePipe,"slice",!1),this.preparePipeMeta(s.PercentPipe,"percent",!0,[this._locale]),this.preparePipeMeta(s.I18nPluralPipe,"i18nPlural",!0,[s.NgLocalization]),this.preparePipeMeta(s.I18nSelectPipe,"i18nSelect",!0),this.preparePipeMeta(s.KeyValuePipe,"keyvalue",!1,[y.KeyValueDiffers]),this.preparePipeMeta(g.FileIconClassPipe,"fileIconClass",!0),this.preparePipeMeta(g.FileExtensionFromMimePipe,"fileExtensionFromMime",!0),this.preparePipeMeta(g.StateClassPipe,"stateClass",!0),this.preparePipeMeta(g.FileSizePipe,"filesize",!0),this.preparePipeMeta(g.FilterPipe,"filter",!0),this.preparePipeMeta(s.UpperCasePipe,"uppercase",!0),this.preparePipeMeta(s.LowerCasePipe,"lowercase",!0),this.preparePipeMeta(s.JsonPipe,"json",!1),this.preparePipeMeta(s.DecimalPipe,"number",!0,[this._locale]),this.preparePipeMeta(s.TitleCasePipe,"titlecase",!0),this.preparePipeMeta(s.CurrencyPipe,"currency",!0,[this._locale]),this.preparePipeMeta(s.DatePipe,"date",!0,[this._locale]),this.preparePipeMeta(g.ToDatePipe,"toDate",!0,[new s.DatePipe(this._locale)]),this.preparePipeMeta(g.ToNumberPipe,"toNumber",!0,[new s.DecimalPipe(this._locale)]),this.preparePipeMeta(g.ToCurrencyPipe,"toCurrency",!0,[new s.DecimalPipe(this._locale)]),this.preparePipeMeta(g.PrefixPipe,"prefix",!0),this.preparePipeMeta(g.SuffixPipe,"suffix",!0),this.preparePipeMeta(g.TimeFromNowPipe,"timeFromNow",!0),this.preparePipeMeta(g.NumberToStringPipe,"numberToString",!0,[new s.DecimalPipe(this._locale)]),this.preparePipeMeta(g.StringToNumberPipe,"stringToNumber",!0)],this._pipeMeta=new Map,this._pipeData.forEach(function(e){n._pipeMeta.set(e.name,e)})}return e.prototype.unknownPipe=function(e){throw Error("The pipe '"+e+"' could not be found")},e.prototype.meta=function(e){var t=this._pipeMeta.get(e);return t||this.unknownPipe(e),t},e.prototype.getPipeNameVsIsPureMap=function(){var n=new Map;return this._pipeMeta.forEach(function(e,t){n.set(t,e.pure)}),n},e.prototype.resolveDep=function(e){return this.injector.get(e.token.identifier.reference)},e.prototype.getInstance=function(e){var t,n,i=this.meta(e).type,r=i.reference,o=i.diDeps;if(r||this.unknownPipe(e),o.length){var a=[];try{for(var s=U(o),p=s.next();!p.done;p=s.next()){var c=p.value;a.push(c)}}catch(u){t={error:u}}finally{try{p&&!p.done&&(n=s["return"])&&n.call(s)}finally{if(t)throw t.error}}return new(r.bind.apply(r,H([void 0],a)))}return new r},e.decorators=[{type:y.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:y.Compiler},{type:y.Injector}]},e.ngInjectableDef=y.defineInjectable({factory:function(){return new e(y.inject(y.Compiler),y.inject(y.INJECTOR))},token:e,providedIn:"root"}),e}(),Me=function(){function e(e,t,n,i,r,o,a,s,p){var c,u=this;this.elRef=n,this.oAuthService=i,this.dialogService=r,this.spinnerService=o,this.router=s,this.app=p,this.startApp=!1,this.isApplicationType=!1,this.spinner={show:!1,messages:[]},this.isOAuthDialogOpen=!1,v.setPipeProvider(e),v.setNgZone(a),v.setAppRef(t),this.isApplicationType="APPLICATION"===v.getWmProjectProperties().type,i.getOAuthProvidersAsObservable().subscribe(function(e){(u.providersConfig=e).length?u.showOAuthDialog():u.closeOAuthDialog()}),this.spinnerService.getMessageSource().asObservable().subscribe(function(e){setTimeout(function(){u.spinner.show=e.show,u.spinner.messages=e.messages})}),h.setTheme("bs3"),v.hasCordova()&&!window.wmDeviceReady?document.addEventListener("wmDeviceReady",function(){return u.startApp=!0}):this.startApp=!0,this.router.events.subscribe(function(e){if(e instanceof l.NavigationStart){c=u.spinnerService.show("","globalSpinner");var t=document.querySelector("app-page-outlet");t&&v.addClass(t,"page-load-in-progress")}else(e instanceof l.NavigationEnd||e instanceof l.NavigationCancel||e instanceof l.NavigationError)&&setTimeout(function(){u.spinnerService.hide(c);var e=document.querySelector("app-page-outlet");e&&v.removeClass(e,"page-load-in-progress")},1e3)})}return e.prototype.showOAuthDialog=function(){this.isOAuthDialogOpen||(this.isOAuthDialogOpen=!0,this.dialogService.open("oAuthLoginDialog",this))},e.prototype.closeOAuthDialog=function(){this.isOAuthDialogOpen&&(this.isOAuthDialogOpen=!1,this.dialogService.close("oAuthLoginDialog",this))},e.prototype.ngAfterViewInit=function(){this.app.dynamicComponentContainerRef=this.dynamicComponentContainerRef},e.prototype.ngDoCheck=function(){v.$invokeWatchers()},e.decorators=[{type:y.Component,args:[{selector:"app-root",template:'<ng-container *ngIf="startApp">\n    <router-outlet></router-outlet>\n    <div wmContainer partialContainer content="Common" hidden class="ng-hide" *ngIf="isApplicationType"></div>\n    <app-spinner [show]="spinner.show" [spinnermessages]="spinner.messages"></app-spinner>\n    <div wmDialog name="oAuthLoginDialog" title.bind="\'Application is requesting you to sign in with\'"\n         close.event="closeOAuthDialog()">\n        <ng-template #dialogBody>\n            <ul class="list-items">\n                <li class="list-item" *ngFor="let provider of providersConfig">\n                    <button class="btn" (click)="provider.invoke()">{{provider.name}}</button>\n                </li>\n            </ul>\n        </ng-template>\n    </div>\n    <div wmConfirmDialog name="_app-confirm-dialog" title.bind="title" message.bind="message" oktext.bind="oktext"\n         canceltext.bind="canceltext" closable="false"\n         iconclass.bind="iconclass" ok.event="onOk()" cancel.event="onCancel()" close.event="onClose()" opened.event="onOpen()"></div>\n    <div wmAppExt></div>\n    <i id="wm-mobile-display"></i>\n</ng-container>\n\x3c!--Dummy container to create the component dynamically--\x3e\n<ng-container #dynamicComponent></ng-container>\n',encapsulation:y.ViewEncapsulation.None}]}],e.ctorParameters=function(){return[{type:Ce},{type:y.ApplicationRef},{type:y.ElementRef},{type:a.OAuthService},{type:v.AbstractDialogService},{type:v.AbstractSpinnerService},{type:y.NgZone},{type:l.Router},{type:v.App}]},e.propDecorators={dynamicComponentContainerRef:[{type:y.ViewChild,args:["dynamicComponent",{read:y.ViewContainerRef}]}]},e}(),Le=function(){function e(){this.wmHttpRequest=new d.WmHttpRequest,this.wmHttpResponse=new d.WmHttpResponse}return e.prototype.createSubject=function(){return new p.Subject},e.prototype.intercept=function(n,e){var t,i,r=this;if(u.appManager&&u.appManager.appOnBeforeServiceCall){var o=this.wmHttpRequest.angularToWmRequest(n);(t=u.appManager.appOnBeforeServiceCall(o))&&(t=this.wmHttpRequest.wmToAngularRequest(t),n=t)}return e.handle(n).pipe(f.tap(function(e){if(e&&4===e.type&&u.appManager&&u.appManager.appOnServiceSuccess){var t=r.wmHttpResponse.angularToWmResponse(e);(i=u.appManager.appOnServiceSuccess(t.body,t))&&(i=r.wmHttpResponse.wmToAngularResponse(i),_.extend(e,i))}},function(e){if(e._401Subscriber=r.createSubject(),u.httpService.isPlatformSessionTimeout(e)&&u.httpService.handleSessionTimeout(n,e._401Subscriber),u.appManager&&u.appManager.appOnServiceError){var t=r.wmHttpResponse.angularToWmResponse(e);(i=u.appManager.appOnServiceError(t.message,t))&&(i=r.wmHttpResponse.wmToAngularResponse(i),_.extend(e,i))}}))},e.decorators=[{type:y.Injectable}],e.ctorParameters=function(){return[]},e}(),Te=function(){function e(e){var i=this;this.prefabManager=e,window.addEventListener("message",function(e){if("PREFAB"===(e.data&&e.data.context)){var t=e.data.action,n=e.data.payload;"init"===t?i.init():"set-property"===t?i.setProperty(n):"get-outbound-properties"===t?i.getOutboundProps():"invoke-script"===t&&i.invokeScript(n)}})}return e.prototype.postMessage=function(e,t){var n={context:"PREFAB",action:e,payload:t};window.top.postMessage(n,"*")},e.prototype.setupEventListeners=function(){var n=this;this.prefabInstance.invokeEventCallback=function(e,t){void 0===t&&(t={}),n.postMessage("event-log",{name:e,data:t})}},e.prototype.init=function(){var t=this;this.previewMode=!0,this.prefabInstance.readyState.subscribe(function(){},function(){},function(){t.prefabManager.getConfig("__self__").then(function(e){t.config=e,t.postMessage("config",e),t.setupEventListeners()})})},e.prototype.setProperty=function(e){this.prefabInstance.widget[e.name]=e.value},e.prototype.isOutBoundProp=function(e){return"out-bound"===e.bindable||"in-out-bound"===e.bindable},e.prototype.getOutboundProps=function(){var e,t,n={};try{for(var i=U(Object.entries(this.config.properties||{})),r=i.next();!r.done;r=i.next()){var o=q(r.value,2),a=o[0],s=o[1];this.isOutBoundProp(s)&&(n[a]=this.prefabInstance.widget[a])}}catch(p){e={error:p}}finally{try{r&&!r.done&&(t=i["return"])&&t.call(i)}finally{if(e)throw e.error}}this.postMessage("outbound-properties",n)},e.prototype.invokeScript=function(e){var t="\n return "+e.script+";",n=new Function("Prefab",t)(this.prefabInstance);this.postMessage("method-output",{methodName:e.methodName,output:n})},e.prototype.ngAfterViewInit=function(){this.setupEventListeners(),this.postMessage("init")},e.decorators=[{type:y.Component,args:[{selector:"wm-prefab-preview",template:'\n        <div class="prefab-preview row">\n            <section wmPrefab name="prefab-preview" prefabname="__self__"></section>\n        </div>\n    '}]}],e.ctorParameters=function(){return[{type:x}]},e.propDecorators={prefabInstance:[{type:y.ViewChild,args:[g.PrefabDirective]}]},e}();e.initComponentsBuildTask();var Re=new Map,Ie=function(){function e(e,t,n){this.app=e,this.appManager=t,this.compiler=n,this.counter=1}return e.prototype.getComponentFactoryRef=function(o,a,s){return void 0===s&&(s={}),F(this,void 0,void 0,function(){var n,i,r;return B(this,function(e){var t;return n=Re.get(o),a=s.transpile?m.transpile(a):a,n&&!s.noCache||(i=function(t,e,n){void 0===n&&(n="");var i={template:e,styles:[n],encapsulation:y.ViewEncapsulation.None};return function(){function e(){}return e.decorators=[{type:y.Component,args:[k({},i,{selector:t})]}],e}()}(o,a,s.styles),t=i,r=function(){function e(){}return e.decorators=[{type:y.NgModule,args:[{declarations:[t],imports:[We],schemas:[y.CUSTOM_ELEMENTS_SCHEMA,y.NO_ERRORS_SCHEMA]}]}],e}(),n=this.compiler.compileModuleAndAllComponentsSync(r).componentFactories.filter(function(e){return e.componentType===i})[0],Re.set(o,n)),[2,n]})})},e.prototype.addComponent=function(i,r,o,a){return void 0===o&&(o={}),void 0===a&&(a={}),F(this,void 0,void 0,function(){var t,n;return B(this,function(e){switch(e.label){case 0:return a.transpile=!v.isDefined(a.transpile)||a.transpile,a.noCache=!v.isDefined(a.noCache)||a.noCache,a.selector=v.isDefined(a.selector)?a.selector:"wm-dynamic-component-"+this.counter++,[4,this.getComponentFactoryRef(a.selector,r,a)];case 1:return t=e.sent(),n=this.app.dynamicComponentContainerRef.createComponent(t,0),v.extendProto(n.instance,o),i.appendChild(n.location.nativeElement),[2]}})})},e.decorators=[{type:y.Injectable}],e.ctorParameters=function(){return[{type:v.App},{type:T},{type:y.Compiler}]},e}(),_e=function(){function e(){}return e.prototype.canDeactivate=function(e,t,n){return!e.canDeactivate||e.canDeactivate()},e.decorators=[{type:y.Injectable}],e}();function Ee(e){return function(){return v._WM_APP_PROJECT.id=location.href.split("/")[3],v._WM_APP_PROJECT.cdnUrl=document.querySelector('[name="cdnUrl"]')&&document.querySelector('[name="cdnUrl"]').getAttribute("content"),v._WM_APP_PROJECT.ngDest="ng-bundle/",e.loadDefaultLocale()}}function je(e){return e.isAngularLocaleLoaded()?e.getSelectedLocale():e.getDefaultSupportedLocale()}var Oe=[X,ee,te,ne,re,Me,Te,ie],De=h.CarouselModule.forRoot(),$e=h.BsDropdownModule.forRoot(),Ne=h.PopoverModule.forRoot(),xe=h.TooltipModule.forRoot();$.fn.swipeAnimation.expressionEvaluator=v.$parseExpr;var We=function(){function e(){e.addCustomEventPolyfill()}return e.addCustomEventPolyfill=function(){if("function"==typeof window.CustomEvent)return!1;var e=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n};e.prototype=window.Event.prototype,window.CustomEvent=e},e.forRoot=function(){return{ngModule:e,providers:[{provide:v.App,useClass:se},{provide:v.AbstractToasterService,useClass:pe},{provide:v.AbstractI18nService,useClass:ue},{provide:v.AbstractSpinnerService,useClass:le},{provide:v.AbstractNavigationService,useClass:fe},{provide:v.AppDefaults,useClass:me},{provide:v.DynamicComponentRefProvider,useClass:Ie},{provide:y.APP_INITIALIZER,useFactory:Ee,deps:[v.AbstractI18nService],multi:!0},{provide:y.LOCALE_ID,useFactory:je,deps:[v.AbstractI18nService]},{provide:i.HTTP_INTERCEPTORS,useClass:Le,multi:!0},s.DecimalPipe,s.DatePipe,T,x,ve,be,Pe,_e,we,Ae]}},e.decorators=[{type:y.NgModule,args:[{declarations:Oe,imports:[s.CommonModule,t.FormsModule,l.RouterModule,t.ReactiveFormsModule,i.HttpClientModule,De,$e,Ne,xe,h.ModalModule,g.WmComponentsModule,n.MobileRuntimeModule,v.CoreModule,o.SecurityModule,a.OAuthModule,u.VariablesModule,d.HttpServiceModule],exports:[Oe,s.CommonModule,t.FormsModule,t.ReactiveFormsModule,h.ModalModule,h.CarouselModule,h.BsDropdownModule,h.PopoverModule,h.TooltipModule,g.WmComponentsModule,n.MobileRuntimeModule,v.CoreModule,o.SecurityModule,a.OAuthModule,u.VariablesModule,d.HttpServiceModule],entryComponents:[ne]}]}],e.ctorParameters=function(){return[]},e}(),Ve=[g.WmComponentsModule.forRoot(),n.MobileRuntimeModule.forRoot(),h.ModalModule.forRoot(),v.CoreModule.forRoot(),o.SecurityModule.forRoot(),a.OAuthModule.forRoot(),u.VariablesModule.forRoot(),d.HttpServiceModule.forRoot(),We.forRoot()],ke=!1,Fe=function(){function e(e,t){this.appManager=e,this.appVariablesProvider=t}return e.prototype.resolve=function(){var t=this;return!!ke||this.appVariablesProvider.getAppVariables().then(function(e){return t.appManager.loadAppVariables(e)}).then(function(){return ke=!0})},e.decorators=[{type:y.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:T},{type:M}]},e.ngInjectableDef=y.defineInjectable({factory:function(){return new e(y.inject(T),y.inject(M))},token:e,providedIn:"root"}),e}(),Be=!1,Ue=function(){function e(e){this.appManager=e}return e.prototype.resolve=function(){return Be||this.appManager.loadMetadata().then(function(){return Be=!0})},e.decorators=[{type:y.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:T}]},e.ngInjectableDef=y.defineInjectable({factory:function(){return new e(y.inject(T))},token:e,providedIn:"root"}),e}(),qe=function(){function e(e){this.appManager=e,this.loaded=this.appManager.isPrefabType()||this.appManager.isTemplateBundleType()||!v.getWmProjectProperties().securityEnabled}return e.prototype.resolve=function(){var e=this;return this.loaded||this.appManager.loadSecurityConfig().then(function(){e.loaded=!0})},e.decorators=[{type:y.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:T}]},e.ngInjectableDef=y.defineInjectable({factory:function(){return new e(y.inject(T))},token:e,providedIn:"root"}),e}();c.d=te,c.e=ne,c.b=X,c.c=ee,c.f=re,c.m=me,c.h=se,c.n=Ie,c.o=Le,c.j=ue,c.l=fe,c.g=Ce,c.k=le,c.i=pe,c.a=z,c.ComponentRefProvider=w,c.PrefabConfigProvider=A,c.AppJSProvider=C,c.AppVariablesProvider=M,c.PartialRefProvider=L,c.AppManagerService=T,c.PrefabManagerService=x,c.0=N,c.BasePageComponent=K,c.commonPartialWidgets=Q,c.BasePartialComponent=Y,c.BasePrefabComponent=Z,c.InitializeApp=Ee,c.setAngularLocale=je,c.carouselModule=De,c.bsDropDownModule=$e,c.popoverModule=Ne,c.tooltipModule=xe,c.RuntimeBaseModule=We,c.WM_MODULES_FOR_ROOT=Ve,c.isPrefabInPreview=R,c.getPrefabBaseUrl=I,c.getPrefabConfigUrl=function(e){return I(e)+"/config.json"},c.getPrefabMinJsonUrl=function(e){return I(e)+"/pages/Main/page.min.json"},c.AuthGuard=ve,c.RoleGuard=be,c.PageNotFoundGaurd=Pe,c.AppComponent=Me,c.EmptyPageComponent=ie,c.PrefabPreviewComponent=Te,c.AppJSResolve=we,c.AppVariablesResolve=Fe,c.I18nResolve=Ae,c.MetadataResolve=Ue,c.SecurityConfigResolve=qe,c.CanDeactivatePageGuard=_e,Object.defineProperty(c,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.min.js.map