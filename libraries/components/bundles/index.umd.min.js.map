{"version":3,"sources":["node_modules/tslib/tslib.es6.js","ng://@wm/components/widgets/common/tabs/tabs.animator.ts","ng://@wm/components/widgets/framework/types.ts","ng://@wm/components/utils/widget-utils.ts","ng://@wm/components/widgets/framework/styler.ts","ng://@wm/components/widgets/framework/widget-props.ts","ng://@wm/components/utils/data-utils.ts","ng://@wm/components/widgets/framework/widget-registry.ts","ng://@wm/components/widgets/framework/widget-id-generator.ts","ng://@wm/components/widgets/framework/constants.ts","ng://@wm/components/widgets/framework/property-change-handler.ts","ng://@wm/components/widgets/framework/widget-proxy-provider.ts","ng://@wm/components/widgets/common/base/base.component.ts","ng://@wm/components/widgets/common/base/stylable.component.ts","ng://@wm/components/widgets/common/redraw/redrawable.directive.ts","ng://@wm/components/widgets/common/tabs/tab-pane/tab-pane.component.ts","ng://@wm/components/widgets/common/tabs/tab-pane/tab-pane.props.ts","ng://@wm/components/widgets/common/tabs/tabs.component.ts","ng://@wm/components/widgets/common/tabs/tabs.props.ts","ng://@wm/components/widgets/common/dialog/base/base-dialog.ts","ng://@wm/components/widgets/common/dialog/alert-dialog/alert-dialog.component.ts","ng://@wm/components/widgets/common/dialog/alert-dialog/alert-dialog.props.ts","ng://@wm/components/widgets/common/nav/nav-item/nav-item.directive.ts","ng://@wm/components/widgets/common/nav/nav-item/nav-item.props.ts","ng://@wm/components/widgets/common/nav/navigation-control.directive.ts","ng://@wm/components/widgets/common/anchor/anchor.component.ts","ng://@wm/components/widgets/common/anchor/anchor.props.ts","ng://@wm/components/utils/form-utils.ts","ng://@wm/components/widgets/framework/deviceview.ts","ng://@wm/components/widgets/common/base/dataset-aware-nav.component.ts","ng://@wm/components/widgets/common/breadcrumb/breadcrumb.component.ts","ng://@wm/components/widgets/common/breadcrumb/breadcrumb.props.ts","ng://@wm/components/widgets/common/button/button.component.ts","ng://@wm/components/widgets/common/button/button.props.ts","ng://@wm/components/widgets/common/button-group/button-group.directive.ts","ng://@wm/components/widgets/common/button-group/button-group.props.ts","ng://@wm/components/widgets/common/calendar/calendar.component.ts","ng://@wm/components/widgets/common/calendar/calendar.props.ts","ng://@wm/components/widgets/common/nav/nav.component.ts","ng://@wm/components/widgets/common/nav/nav.props.ts","ng://@wm/components/widgets/common/menu/menu.component.ts","ng://@wm/components/widgets/common/menu/menu.props.ts","ng://@wm/components/widgets/common/base/menu-adapator.component.ts","ng://@wm/components/widgets/common/card/card.component.ts","ng://@wm/components/widgets/common/card/card.props.ts","ng://@wm/components/widgets/common/card/card-actions/card-actions.directive.ts","ng://@wm/components/widgets/common/card/card-actions/card-actions.props.ts","ng://@wm/components/widgets/common/card/card-content/card-content.component.ts","ng://@wm/components/widgets/common/card/card-content/card-content.props.ts","ng://@wm/components/widgets/common/card/card-footer/card-footer.directive.ts","ng://@wm/components/widgets/common/card/card-footer/card-footer.props.ts","ng://@wm/components/widgets/common/chart/chart.utils.ts","ng://@wm/components/widgets/common/chart/chart.component.ts","ng://@wm/components/widgets/common/chart/chart.props.ts","ng://@wm/components/widgets/common/checkbox/checkbox.props.ts","ng://@wm/components/widgets/common/base/base-form.component.ts","ng://@wm/components/widgets/common/base/base-form-custom.component.ts","ng://@wm/components/widgets/common/checkbox/checkbox.component.ts","ng://@wm/components/pipes/custom-pipes.ts","ng://@wm/components/widgets/common/checkboxset/checkboxset.props.ts","ng://@wm/components/widgets/common/base/dataset-aware-form.component.ts","ng://@wm/components/widgets/common/checkboxset/checkboxset.component.ts","ng://@wm/components/widgets/common/chips/chips.props.ts","ng://@wm/components/widgets/common/search/search.props.ts","ng://@wm/components/widgets/common/search/data-provider/local-data-provider.ts","ng://@wm/components/widgets/common/search/data-provider/remote-data-provider.ts","ng://@wm/components/widgets/common/search/data-provider/data-provider.ts","ng://@wm/components/widgets/common/search/search.component.ts","ng://@wm/components/widgets/common/chips/chips.component.ts","ng://@wm/components/widgets/common/composite/composite.directive.ts","ng://@wm/components/widgets/common/composite/composite.props.ts","ng://@wm/components/widgets/common/dialog/confirm-dialog/confirm-dialog.component.ts","ng://@wm/components/widgets/common/dialog/confirm-dialog/confirm-dialog.props.ts","ng://@wm/components/widgets/common/container/container.directive.ts","ng://@wm/components/widgets/common/container/container.props.ts","ng://@wm/components/widgets/common/content/content.component.ts","ng://@wm/components/widgets/common/content/content.props.ts","ng://@wm/components/widgets/common/currency/currency.props.ts","ng://@wm/components/widgets/common/text/base/base-input.ts","ng://@wm/components/widgets/common/text/locale/number-locale.ts","ng://@wm/components/widgets/common/currency/currency.component.ts","ng://@wm/components/widgets/common/date/date.props.ts","ng://@wm/components/widgets/common/base/base-date-time.component.ts","ng://@wm/components/widgets/common/date/date.component.ts","ng://@wm/components/widgets/common/date-time/date-time.props.ts","ng://@wm/components/widgets/common/date-time/date-time.component.ts","ng://@wm/components/widgets/common/form/form.props.ts","ng://@wm/components/utils/live-utils.ts","ng://@wm/components/widgets/common/message/message.component.ts","ng://@wm/components/widgets/common/message/message.props.ts","ng://@wm/components/widgets/common/pagination/pagination.component.ts","ng://@wm/components/widgets/common/pagination/pagination.props.ts","ng://@wm/components/widgets/common/list/list-item.directive.ts","ng://@wm/components/widgets/common/list/list.animator.ts","ng://@wm/components/widgets/common/list/list.component.ts","ng://@wm/components/widgets/common/list/list.props.ts","ng://@wm/components/widgets/common/form/form.component.ts","ng://@wm/components/widgets/common/form/live-actions/dependson.directive.ts","ng://@wm/components/widgets/common/dialog/design-dialog/dialog.component.ts","ng://@wm/components/widgets/common/dialog/design-dialog/dialog.props.ts","ng://@wm/components/widgets/common/dialog/base/dialog-body/dialog-body.directive.ts","ng://@wm/components/widgets/common/dialog/base/dialog-footer/dialog-footer.directive.ts","ng://@wm/components/widgets/common/dialog/base/dialog-footer/dialog-footer.props.ts","ng://@wm/components/widgets/common/dialog/base/dialog-header/dialog-header.component.ts","ng://@wm/components/widgets/common/footer/footer.directive.ts","ng://@wm/components/widgets/common/footer/footer.props.ts","ng://@wm/components/widgets/common/form/form-action/form-action.directive.ts","ng://@wm/components/widgets/common/form/form-action/form-action.props.ts","ng://@wm/components/widgets/common/color-picker/color-picker.props.ts","ng://@wm/components/widgets/common/number/number.props.ts","ng://@wm/components/widgets/common/text/number/input-number.props.ts","ng://@wm/components/widgets/common/text/text/input-text.props.ts","ng://@wm/components/widgets/common/text/calendar/input-calendar.props.ts","ng://@wm/components/widgets/common/text/color/input-color.props.ts","ng://@wm/components/widgets/common/text/email/input-email.props.ts","ng://@wm/components/widgets/common/radioset/radioset.props.ts","ng://@wm/components/widgets/common/rating/rating.props.ts","ng://@wm/components/widgets/common/rich-text-editor/rich-text-editor.props.ts","ng://@wm/components/widgets/common/select/select.props.ts","ng://@wm/components/widgets/common/slider/slider.props.ts","ng://@wm/components/widgets/common/switch/switch.props.ts","ng://@wm/components/widgets/common/textarea/textarea.props.ts","ng://@wm/components/widgets/common/time/time.props.ts","ng://@wm/components/widgets/common/form/form-field/form-field.directive.ts","ng://@wm/components/widgets/common/form/form-field/form-field.props.ts","ng://@wm/components/widgets/common/header/header.component.ts","ng://@wm/components/widgets/common/header/header.props.ts","ng://@wm/components/pipes/trust-as.pipe.ts","ng://@wm/components/widgets/common/html/html.directive.ts","ng://@wm/components/widgets/common/html/html.props.ts","ng://@wm/components/widgets/common/icon/icon.component.ts","ng://@wm/components/widgets/common/icon/icon.props.ts","ng://@wm/components/widgets/common/iframe/iframe.component.ts","ng://@wm/components/widgets/common/iframe/iframe.props.ts","ng://@wm/components/widgets/common/dialog/iframe-dialog/iframe-dialog.component.ts","ng://@wm/components/widgets/common/dialog/iframe-dialog/iframe-dialog.props.ts","ng://@wm/components/pipes/image.pipe.ts","ng://@wm/components/widgets/common/text/calendar/input-calendar.component.ts","ng://@wm/components/widgets/common/text/color/input-color.component.ts","ng://@wm/components/widgets/common/text/email/input-email.component.ts","ng://@wm/components/widgets/common/text/number/input-number.component.ts","ng://@wm/components/widgets/common/text/text/input-text.component.ts","ng://@wm/components/widgets/common/table/table.component.ts","ng://@wm/components/widgets/common/table/table.props.ts","ng://@wm/components/widgets/common/form/form-widget.directive.ts","ng://@wm/components/widgets/common/label/label.directive.ts","ng://@wm/components/widgets/common/label/label.props.ts","ng://@wm/components/widgets/common/layout-grid/layout-grid-column/layout-grid-column.directive.ts","ng://@wm/components/widgets/common/layout-grid/layout-grid-column/layout-grid-column.props.ts","ng://@wm/components/widgets/common/layout-grid/layout-grid.directive.ts","ng://@wm/components/widgets/common/layout-grid/layout-grid.props.ts","ng://@wm/components/widgets/common/layout-grid/layout-grid-row/layout-grid-row.directive.ts","ng://@wm/components/widgets/common/layout-grid/layout-grid-row/layout-grid-row.props.ts","ng://@wm/components/widgets/common/lazy-load/lazy-load.directive.ts","ng://@wm/components/widgets/common/left-panel/left-panel.animator.ts","ng://@wm/components/widgets/common/left-panel/left-panel.directive.ts","ng://@wm/components/widgets/common/page/page.directive.ts","ng://@wm/components/widgets/common/page/page.props.ts","ng://@wm/components/widgets/common/popover/popover.component.ts","ng://@wm/components/widgets/common/left-panel/left-panel.props.ts","ng://@wm/components/widgets/common/form/live-actions/live-actions.directive.ts","ng://@wm/components/widgets/common/live-table/live-table.component.ts","ng://@wm/components/widgets/common/live-table/live-table.props.ts","ng://@wm/components/widgets/common/form/live-form/live-form.directive.ts","ng://@wm/components/widgets/common/form/live-filter/live-filter.directive.ts","ng://@wm/components/widgets/common/marquee/marquee.directive.ts","ng://@wm/components/widgets/common/marquee/marquee.props.ts","ng://@wm/components/widgets/common/menu/menu-dropdown/menu-dropdown.component.ts","ng://@wm/components/widgets/common/menu/menu-dropdown-item/menu-dropdown-item.component.ts","ng://@wm/components/widgets/common/navbar/navbar.component.ts","ng://@wm/components/widgets/common/navbar/navbar.props.ts","ng://@wm/components/widgets/common/number/number.component.ts","ng://@wm/components/widgets/common/pull-to-refresh/pull-to-refresh.ts","ng://@wm/components/widgets/common/page-content/page-content.component.ts","ng://@wm/components/widgets/common/page-content/page-content.props.ts","ng://@wm/components/widgets/common/panel/panel.component.ts","ng://@wm/components/widgets/common/panel/panel.props.ts","ng://@wm/components/widgets/common/dialog/partial-dialog/partial-dialog.component.ts","ng://@wm/components/widgets/common/dialog/partial-dialog/partial-dialog.props.ts","ng://@wm/components/widgets/common/partial/partial.directive.ts","ng://@wm/components/widgets/common/partial/partial.props.ts","ng://@wm/components/widgets/common/partial-param/partial-param.directive.ts","ng://@wm/components/widgets/common/prefab-container/prefab-container.directive.ts","ng://@wm/components/widgets/common/prefab-container/prefab-container.props.ts","ng://@wm/components/widgets/common/picture/picture.directive.ts","ng://@wm/components/widgets/common/picture/picture.props.ts","ng://@wm/components/widgets/common/popover/popover.props.ts","ng://@wm/components/widgets/common/prefab/prefab.props.ts","ng://@wm/components/widgets/common/prefab/prefab.directive.ts","ng://@wm/components/widgets/common/radioset/radioset.component.ts","ng://@wm/components/widgets/common/rich-text-editor/rich-text-editor.component.ts","ng://@wm/components/widgets/common/right-panel/right-panel.directive.ts","ng://@wm/components/widgets/common/right-panel/right-panel.props.ts","ng://@wm/components/widgets/common/search/scrollable.directive.ts","ng://@wm/components/widgets/common/select/select.component.ts","ng://@wm/components/directives/show-in-device.directive.ts","ng://@wm/components/widgets/common/smooth-scroll/smooth-scroll.directive.ts","ng://@wm/components/widgets/common/spinner/spinner.props.ts","ng://@wm/components/widgets/common/spinner/spinner.component.ts","ng://@wm/components/widgets/common/switch/switch.component.ts","ng://@wm/components/widgets/common/table/table-action/table-action.directive.ts","ng://@wm/components/widgets/common/table/table-action/table-action.props.ts","ng://@wm/components/widgets/common/table/table-column-group/table-column-group.directive.ts","ng://@wm/components/widgets/common/table/table-column-group/table-column-group.props.ts","ng://@wm/components/widgets/common/table/table-column/table-column.directive.ts","ng://@wm/components/widgets/common/table/table-column/table-column.props.ts","ng://@wm/components/widgets/common/table/table-cud.directive.ts","ng://@wm/components/widgets/common/table/table-filter.directive.ts","ng://@wm/components/widgets/common/table/table-row-action/table-row-action.directive.ts","ng://@wm/components/widgets/common/table/table-row-action/table-row-action.props.ts","ng://@wm/components/widgets/common/table/table-row/table-row.directive.ts","ng://@wm/components/widgets/common/table/table-row/table-row.props.ts","ng://@wm/components/widgets/common/textarea/textarea.component.ts","ng://@wm/components/widgets/common/base/text-content.directive.ts","ng://@wm/components/widgets/common/tile/tile.directive.ts","ng://@wm/components/widgets/common/tile/tile.props.ts","ng://@wm/components/widgets/common/time/time.component.ts","ng://@wm/components/widgets/common/top-nav/top-nav.directive.ts","ng://@wm/components/widgets/common/top-nav/top-nav.props.ts","ng://@wm/components/widgets/common/wizard/wizard-step/wizard-step.directive.ts","ng://@wm/components/widgets/common/wizard/wizard-step/wizard-step.props.ts","ng://@wm/components/widgets/common/wizard/wizard.component.ts","ng://@wm/components/widgets/common/wizard/wizard.props.ts","ng://@wm/components/widgets/common/file-upload/common.directive.ts","ng://@wm/components/widgets/common/file-upload/file-upload.component.ts","ng://@wm/components/widgets/common/file-upload/file-upload.props.ts","ng://@wm/components/widgets/common/dialog/dialog.service.ts","ng://@wm/components/components.module.ts"],"names":["extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","v","op","TypeError","pop","push","__values","o","m","__read","r","ar","error","__spread","concat","TabsAnimator","_super","tabs","_this","_$el","$","getNativeElement","find","childEls","_noOfTabs","maxWidth","addClass","setCSSFromObj","width","_b","tslib_1.__values","from","_c","child","setCSS","init","tslib_1.__extends","bounds","activeTabIndex","getActiveTabIndex","w","centerVal","strict","lower","center","upper","context","animation","transform","-webkit-transform","transitionTabIntoView","onUpper","prev","$appDigest","onLower","threshold","SwipeAnimation","WidgetRef","DialogRef","Context","InjectionToken","DATASET_WIDGETS","Set","FormWidgetType","SELECT","CHECKBOXSET","RADIOSET","SWITCH","AUTOCOMPLETE","CHIPS","TYPEAHEAD","RATING","getUpdatedExpr","expr","ch","j","matchCh","matchCount","isQuotedStr","subStr","isQuotedStrEvaluated","updated","replace","substring","getObjValueByKey","obj","strKey","val_1","split","forEach","key","isNull","getEvaluatedData","dataObj","options","expressionValue","field","expression","bindExpr","bindExpression","$parseExpr","__1","get","isActiveNavItem","link","routeName","indexOf","RegExp","test","getOrderByExpr","pageableObj","expressions","property","direction","toLowerCase","join","isDataSetWidget","widget","has","getImageUrl","urlString","shouldEncode","defaultUrl","isValidWebURL","encodeUrl","stringStartsWith","getBackGroundImageUrl","provideAs","reference","multi","provide","useExisting","forwardRef","provideAsNgValidators","NG_VALIDATORS","provideAsNgValueAccessor","NG_VALUE_ACCESSOR","provideAsWidgetRef","provideAsDialogRef","APPLY_STYLES_TYPE","NAVIGATION_TYPE","ADVANCED","BASIC","CLASSIC","INLINE","NONE","ONDEMAND","PAGER","SCROLL","getWatchIdentifier","args","_i","typesMap","number","string","character","date","modes","matchModeTypesMap","boolean","clob","blob","getMatchModeTypesMap","multiMode","types","primType","type","union","getMatchModeMsgs","appLocale","start","LABEL_STARTS_WITH","startignorecase","LABEL_STARTS_WITH_IGNORECASE","end","LABEL_ENDS_WITH","endignorecase","LABEL_ENDS_WITH_IGNORECASE","anywhere","LABEL_CONTAINS","anywhereignorecase","LABEL_CONTAINS_IGNORECASE","exact","LABEL_IS_EQUAL_TO","exactignorecase","LABEL_IS_EQUAL_TO_IGNORECASE","notequals","LABEL_IS_NOT_EQUAL_TO","notequalsignorecase","LABEL_IS_NOT_EQUAL_TO_IGNORECASE","lessthan","LABEL_LESS_THAN","lessthanequal","LABEL_LESS_THAN_OR_EQUALS_TO","greaterthan","LABEL_GREATER_THAN","greaterthanequal","LABEL_GREATER_THAN_OR_EQUALS_TO","null","LABEL_IS_NULL","isnotnull","LABEL_IS_NOT_NULL","empty","LABEL_IS_EMPTY","isnotempty","LABEL_IS_NOT_EMPTY","nullorempty","LABEL_IS_NULL_OR_EMPTY","in","LABEL_IN","notin","LABEL_NOT_IN","between","LABEL_BETWEEN","getClassesArray","classVal","classes","isArray","isObject","val","getConditionalClasses","nv","ov","toAdd","toRemove","classToAdd","classToRemove","pushFieldDef","dataObject","columnDefObj","namePrefix","modifiedTitle","relatedTable","relatedField","relatedInfo","fieldName","isRelated","title","includes","noModifyTitle","isString","prettifyLabel","deHyphenate","initCaps","defObj","setBindingField","displayName","upperBound","columnCount","terminals","objects","getMetaDataFromData","data","getClonedObject","row","index","assignWith","objValue","srcValue","undefined","prepareFieldDefs","columnDef","filter","propNameCSSKeyMap","backgroundattachment","backgroundcolor","backgroundgradient","backgroundimage","backgroundposition","backgroundrepeat","backgroundsize","bordercolor","borderradius","borderstyle","borderwidth","borderbottomwidth","borderleftwidth","borderrightwidth","bordertopwidth","color","cursor","display","fontsize","fontfamily","fontstyle","fontunit","fontvariant","fontweight","height","horizontalalign","lineheight","margin","marginbottom","marginleft","marginright","margintop","opacity","overflow","padding","paddingbottom","paddingleft","paddingright","paddingtop","picturesource","textalign","textdecoration","verticalalign","visibility","whitespace","wordbreak","zindex","isStyle","MAP_SHELL_TYPE_IGNORE_LIST","MAP_CONTAINER_TYPE_IGNORE_LIST","MAP_SCROLLABLE_CONTAINER_TYPE_IGNORE_LIST","styler","$node","component","skipList","skipListMap","k","registerStyleChangeListener","SHELL","INNER_SHELL","CONTAINER","SCROLLABLE_CONTAINER","PROP_TYPE","widgetProps","Map","getWidgetPropsByType","identifier","register","props","set","window","WM_LOADED_COMPONENTS","Live_Operations","PROP_STRING","STRING","PROP_NUMBER","NUMBER","PROP_BOOLEAN","BOOLEAN","PROP_ANY","registryById","widgetIdGenerator","IDGenerator","EVENTS_MAP","DISPLAY_TYPE","BOOLEAN_ATTRS","DIMENSION_PROPS","DEBOUNCE_TIMES","parseValue","toBoolean","globalPropertyChangeHandler","widgetId","isChangeFromWatch","$unwatch","resetChangeFromWatch","propInfo","getWidgetSubType","toDimension","startsWith","ref","_parentPrefab_","$element","closest","attr","notifyStyleChange","notifyPropertyChange","proxyHandler","target","isFunction","bind","$RAF","requestAnimationFrame","$RAFQueue","WidgetProxyProvider","instance","widgetSubType","propsByWidgetSubType","Proxy","fn","widget_1","keys","defineProperty","BaseComponent","inj","config","initPromise","styleChange","ReplaySubject","propertyChange","Subject","readyState","destroy","eventHandlers","toBeSetupEventsQueue","__cloneable__","$attrs","elementRef","ElementRef","nativeElement","widgetType","viewParent","view","displayType","createProxy","eventManager","EventManager","App","initContext","hostClass","generateWidgetId","setAttr","onStyleChange","registerPropertyChangeListener","onPropertyChange","delayedInit","initWidget","setInitProps","getWidgetType","getWidget","getViewParent","ctx","subscribe","_a","registerReadyStateListener","isStopped","registerDestroyListener","getDisplayType","parentContexts","setWidgetProperty","getAttr","attrName","getAppInstance","nextUid","hidden","switchClass","isDefined","Widgets","el","removeClass","tagName","querySelector","load","updateStyles","registerWidget","widgetName","name","registered","delete","getMappedEventName","eventName","handleEvent","node","eventCallback","locals","meta","addEventListener","$event","setTimeout","processEventAttr","$parseEvent","boundFn","boundFnVal","$invokeWatchers","response","err","console","callback","camelCase","processBindAttr","propName","initState","$watch","removePropertyBinding","invokeEventCallback","extraLocals","callbackInfo","processAttr","attrValue","removeAttr","processAttrs","elDef","element","attrs","_d","clear","complete","hasEventCallback","focus","$target","execute","operation","ngOnInit","ngAfterViewInit","ngAfterContentInit","ngOnDestroy","isDestroyed","StylableComponent","RedrawableDirective","redraw","Directive","selector","Self","Inject","WIDGET_CONFIG","TabPaneComponent","tabsRef","heading","$lazyLoad","noop","isActive","disabled","invokeOnSelectCallback","select","redrawChildren","notifyParent","stopPropagation","preventDefault","deselect","reDrawableComponents","c","evt","notifyChange","handleSwipeLeft","handleSwipeRight","initializeProps","Component","template","providers","Injector","TabsComponent","Attribute","HostBinding","ContentChildren","descendants","_transition","_tabsPosition","resolveFn","res","transition","tabsposition","promiseResolverFn","animateIn","tabHeader","siblings","ul","$prevHeaderEle","scrollLeft","offsetLeft","paneRef","headerElement","isSelectableTab","activeTab","newPaneIndex","getPaneIndexByRef","oldPaneIndex","canSlide","tabsAnimator","setGesturesEnabled","goToTab","tabIndex","isValidPaneIndex","getPaneRefByIndex","panes","toArray","findIndex","show","vertical","getSelectableTabAfterIndex","pane","getSelectableTabBeforeIndex","selectDefaultPaneByIndex","setTabsPosition","children","appendNode","registerTabsScroll","$liPosition","$ul","last","position","left","on","_delta","originalEvent","wheelDelta","animate","duration","isMobileApp","eventsRegistered","BaseDialog","widgetConfig","modalOptions","dialogService","AbstractDialogService","bsModal","BsModalService","onShown","getLastOpenedDialog","$el","root","parent","wrap","onHidden","closeReason","getDialogRefFromClosedDialogs","removeFromOpenedDialogs","removeFromClosedDialogs","dialogRef","open","getOpenedDialogs","some","openedDialog","addToOpenedDialogs","getTemplateRef","close","addToClosedDialogs","hide","scope","deRegister","class","WIDGET_INFO","AlertDialogComponent","dialogClass","modal","closable","backdrop","DIALOG_CLS","keyboard","dialogTemplate","onOk","ViewChild","NavItemDirective","makeActive","parentNode","HostListener","disableContextMenu","NavigationControlDirective","eleRef","_link","disableMenuContext","removeEventListener","Input","regex","AnchorComponent","navItemRef","app","hasNavigationToCurrentPageExpr","app_1","map","Function","String","trim","lastIndex","matches","exec","hasGoToPageExpr","activePageName","setNavItemActive","encodeurl","hyperlink","getRouteNameFromLink","decorators","Optional","ALLFIELDS","LIVE_CONSTANTS","EMPTY_KEY","EMPTY_VALUE","LABEL_KEY","LABEL_VALUE","NULL_EMPTY","NULL","EMPTY","isSearchWidgetType","performDataOperation","dataSource","requestData","rej","DataSource","Operation","SUPPORTS_CRUD","operationType","UPDATE","UPDATE_RECORD","INSERT","INSERT_RECORD","DELETE","DELETE_RECORD","onSuccess","IS_API_AWARE","SET_INPUT","INVOKE","skipNotification","refreshDataSource","LIST_RECORDS","filterFields","orderBy","page","fetchRelatedFieldData","formField","primaryKeys","displayField","datafield","GET_RELATED_PRIMARY_KEYS","_primaryKey","isEmpty","compareby","displayfield","dataoptions","filterExpr","filterexpressions","datasource","searchkey","displaylabel","interpolateBindExpressions","GET_RELATED_TABLE_DATA","pagesize","limit","orderby","dataset","head","callbackFn","debouncedFn","debounce","filterExpressions","JSON","parse","destroyFn","filterSubscription","processFilterExpBindNode","stringify","unsubscribe","getDistinctFieldProperties","fieldColumn","tableName","distinctField","aliasColumn","GET_ENTITY_NAME","getDistinctValues","isDataSetBound","GET_DISTINCT_DATA_BY_FIELDS","fields","entityName","setDataFields","setFieldDataSet","emptySupportWidgets","emptyOption","dataSet","isEnableEmptyFilter","multiple","each","option","getDistinctValuesForField","getEnableEmptyFilter","enableemptyfilter","isDefinedAndNotEmpty","getRangeFieldValue","minValue","maxValue","fieldValue","getRangeMatchMode","matchMode","MatchMode","BETWEEN","GREATER","LESSER","intersection","getEmptyMatchMode","emptyFilterOptions","NULLOREMPTY","createArrayFrom","isUndefined","applyFilterOnField","filterDef","formFields","newVal","filterOnFields","filter-on","isFirst","filterField","filterVal","filterKey","lookUpField","filterWidget","widgettype","filterOn","EQUALS","CLASS_NAME","momentLocale","moment","localeData","momentCalendarOptions","_calendar","momentCalendarDayOptions","_calendarDay","lastDay","lastWeek","nextDay","nextWeek","sameDay","sameElse","GROUP_BY_OPTIONS","TIME_ROLLUP_OPTIONS","HOUR","DAY","WEEK","MONTH","YEAR","ROLLUP_PATTERNS","getOrderedDataset","innerItem","cloneDeep","items","directions","item","extractDataAsArray","str","convertDataToObject","dataResult","transformData","myDataField","displayOptions","startIndex","toString","displayExpr","bindDisplayExpr","dataSetItem","displayImgSrc","bindDisplayImgSrc","imgSrc","getUniqObjsByDataField","dataField","allowEmptyFields","uniqData","isAllFields","uniqWith","isEqual","uniqBy","groupData","compRef","groupby","match","dateformat","datePipe","AppDefaults","groupedLiData","groupBy","_groupedData","groupDataByUserDefinedFn_1","getGroupedData","groupkey","liData","sortBy","_groupIndex","fieldDefs","dateFormat","fieldDef","groupKey","toLower","groupDataByField","filterDate","format","defaultFormat","getFormattedDate","concatStr","substr","values","rollUp","groupByKey","strMoment","currMoment","getSameElseFormat","valueOf","timeFormat","isValid","Date","toDateString","startOf","calendar","getTimeRolledUpString","toggleAllHeaders","groups","toggle","groupIcons","icon","hasClass","handleHeaderClick","selectedGroup","selectedAppIcon","configureDnD","startCb","updateCb","sortOptions","containment","delay","helper","zIndex","tolerance","update","sortable","getValidLink","first","DatasetAwareNavComponent","nodes","_resetNodes","resetNodes","securityService","SecurityService","binditemlabel","getAttribute","binditemicon","binditemaction","binditembadge","binditemchildren","binditemid","binditemlink","binditemtarget","binduserrole","getNode","pageScope","childrenField","navNode","action","actionField","badge","badgeField","getNodes","classField","iconField","id","idField","labelField","linkField","targetField","role","findValueOf","omitBy","resetItemFieldMap","_itemFieldMap","getItemFieldsMap","itemid","itemicon","itemlabel","itemlink","itemtarget","itembadge","itemchildren","itemclass","itemaction","prepareNodeDataSet","userRole_1","userrole","nodeFields_1","reduce","validateAccessRoles","loggedInUser","BreadcrumbComponent","route","location","beforeNavigateCB","getPath","info","path","isPathFound","getCurrentRoute","onItemClick","$item","canNavigate","linkTarget","itemLink","openLink","queryParams","getUrlParams","navigate","Router","Location","ButtonComponent","ButtonGroupDirective","dateFormats","defaultHeaderOptions","right","VIEW_TYPES","BUTTON_TEXT","SELECTION_MODES","NEXT_DAY_THRESHOLD","START","END","getUTCDateTime","dateObj","year","month","day","hours","minutes","seconds","multipleEventClass","CalendarComponent","controls","eventSources","dataSetEvents","events","changesStack","invokeOnViewRenderback","$view","calendarOptions","editable","locale","getSessionStorageItem","selectable","header","nextDayThreshold","views","eventLimit","unselectAuto","eventDrop","eventResizeStart","onEventChangeStart","eventDragStart","eventResize","eventClick","eventRender","viewRender","dayClass","mobileCalendar","isMobile","selectDate","datavalue","add","$fullCalendar","fullCalendar","gotoDate","gotoNextYear","gotoPrevYear","gotoMonth","monthVal","presentDay","presentMonthVal","getMonth","subtract","gotoNextMonth","gotoPrevMonth","rerenderEvents","setSelectedData","filteredDates","eventStartKey","eventstart","eventEndKey","eventend","startDate","endDate","eventStartDate","eventEndDate","isSameOrAfter","isSameOrBefore","$newData","$delta","$revertFunc","$ui","$oldData","oldData","jsEvent","selecteddates","selecteddata","$start","$end","$data","event","calendartype","currentview","updateCalendarHeaderOptions","ctrls","viewType","regEx","extend","calculateHeight","computedHeight","$parent","elHeight","parentHeight","css","parseInt","Number","triggerMobileCalendarChange","prepareCalendarEvents","proxyModel","endOf","eventData","eventDay","constructCalendarDataset","eventStart","setHours","mode","clazz","getDayClass","_datepickerInnerComponent","refreshView","eventSource","properties","eventtitle","allDay","eventallday","className","eventclass","mapKeys","objVal","isDate","toUpperCase","setLocale","week","today","buttonText","listYear","listMonth","listWeek","listDay","updateCalendarOptions","selectConstraint","defaultView","capitalize","getDefaultDate","_datepicker","lastActiveDate_1","activeDate","activeDateChange","dt","prevYear","getYear","prevMonth","selectedYear","renderMobileView","_datePicker","changeObj","argumentKey","argumentValue","onValueChange","selectedDate","selectedEventData","eventsLength","viewObj","encapsulation","ViewEncapsulation","None","NavClassMap","pills","navbar","NavComponent","cdRef","router","userDefinedExecutionContext","selectEventCB","setNavType","setNavLayout","layout","onNavSelect","liRef","activeNavLINode","selecteditem","itemAction","itemActionFn","onMenuItemSelect","omit","ChangeDetectorRef","UserDefinedExecutionContext","KEYBOARD_MOVEMENTS","MOVE_UP","MOVE_LEFT","MOVE_RIGHT","MOVE_DOWN","ON_ENTER","ON_TAB","ON_ESCAPE","MENU_POSITION","POSITION","CARET_CLS","PULL_CLS","AUTO_OPEN","MenuComponent","bsDropdown","parentNav","menuCaret","_selectFirstItem","onShow","onHide","onKeyDown","eventAction","KEY_MOVEMENTS","clone","menuposition","isOpen","hasLinkToCurrentPage","url","autoopen","setMenuPosition","autoClose","menualign","BsDropdownDirective","menuProps","MenuAdapterComponent","menuRef","subscriber","menuRefQL","changes","prop","bindProp","ViewChildren","CardComponent","cardContainerElRef","showHeader","subheading","iconclass","iconurl","actions","CardActionsDirective","CardContentComponent","cardContentContainerElRef","CardFooterDirective","chartTypes","allShapes","dateList","themes","Terrestrial","colors","tooltip","backgroundColor","textColor","Annabelle","Azure","Retro","Mellow","Orient","GrayScale","Flyer","Luminosity","basicProperties","barSpacingMap","small","medium","large","donutRatioMap","barSpacingMapInvert","invert","donutRatioMapInvert","tickformats","Thousand","prefix","divider","Million","Billion","chartId","dataTypeJSON","lineTypeCharts","dataTypeArray","SAMPLE_DATA","isBarChart","isDonutChart","isBubbleChart","isAreaChart","isPieType","isChartDataJSON","isLineTypeChart","getBarSpacingValue","getRadiusValue","getSampleData","widgetContext","dataType","yaxisLength","shape","first_series","second_series","third_series","first_series_array","second_series_array","third_series_array","first_series_bubble","second_series_bubble","third_series_bubble","x","size","Math","floor","random","constructSampleData","yaxisdatakey","isAxisDomainValid","axis","areMinMaxValuesValid","isFinite","min","max","getYScaleMinValue","_min","abs","getNumberValue","isNaN","getDateFormatedData","d3","time","getNumberFormatedData","numberFormat","formattedData","isShowLegend","customiseTooltip","chart","propertyValueMap","contentGenerator","yValue","xValue","ynumberformat","initChart","xDomainValues","yDomainValues","isPreview","isEmptyObject","xaxislabel","yaxislabel","labelConfig","radius","barSpacing","showLegend","xAxisValue","hasMultipleYValues","barspacing","models","multiBarChart","reduceXTicks","reducexticks","rotateLabels","showControls","stacked","viewtype","groupSpacing","cumulativeLineChart","useInteractiveGuideline","tooltips","interpolate","interpolation","lineChart","stackedAreaChart","clipEdge","style","areaviewtype","multiBarHorizontalChart","showValues","showvalues","showlabels","showlabelsoutside","labelsConfig","getLabelValues","donutratio","pieChart","showLabels","labelType","labeltype","valueFormat","centerlabel","labelThreshold","labelthreshold","labelsOutside","donut","donutRatio","scatterChart","showDistX","showxdistance","showDistY","showydistance","xDomain","yDomain","legend","vers","legendtype","showXAxis","showxaxis","showYAxis","showyaxis","prettifyLabels","xaxisdatakey","xunits","yunits","xAxis","axisLabel","axisLabelDistance","xaxislabeldistance","staggerLabels","staggerlabels","xdateformat","tickFormat","xDataKeyArr","xnumberformat","yAxis","yaxislabeldistance","customcolors","showlegend","top","offsettop","offsetright","bottom","offsetbottom","offsetleft","theme","enabled","message","nodatamessage","noData","highlightpoints","dispatch","postPlotChartProcess","chartSvg","thickness","$id","linethickness","selectAll","stroke-width","fill-opacity","stroke-opacity","chartHeight","chart_Id","legendWrap","legendWrapHeight_1","getBoundingClientRect","wrapTransform","coordinates","modifyLegendPosition","advanceDataProps","chartDataPointXpath","Column","Bar","Area","Cumulative Line","Line","Pie","Donut","Bubble","styleProps","aggregationFnMap","average","count","maximum","minimum","sum","getBooleanValue","getLodashOrderByFormat","columns","orderByColumns","orders","col","getValidAliasName","aliasName","setTextStyle","ChartComponent","nonPrimaryColumns","chartData","_processedData","_plotChartProxy","plotChartProxy","chartReady","binddataset","handleLoading","isGroupByEnabled","isValidAxis","isAggregationEnabled","aggregation","aggregationcolumn","isDataFilteringEnabled","isVisuallyGrouped","getxAxisVal","xKey","isNumberType","xAxisDataType","getXMinMaxValues","datum","xValues","minBy","maxBy","getYMinMaxValues","yValues","minValues","maxValues","getValidData","valueFinder","yKey","xVal","yVal","parseFloat","bubblesize","dataPoint","_dataObj","setErrMsg","showNoDataMsg","showContentLoadError","invalidConfig","errMsg","processChartData","sampleData","yAxisKey","shapes","xAxisKey","yAxisKeys","series","setChartData","getChartData","getVisuallyGroupedData","queryResponse","groupingColumn","orderByDetails","maxLength","groupValues","_isAreaChart","fill","forEachRight","getGroupingDetails","visualGroupingColumn","visualGroupingColumn_1","groupingColumnIndex_1","isVisuallyGrouped_1","columns_1","groupbyColumns_1","yAxisKeys_1","every","column","inArray","splice","getAggregatedData","sortExpr","colAlias","variable","groupByFields","uniq","aggregations","alias","sort","aggregationAlias","xAxisAliasKey","yAxisAliasKeys","content","responseContent","triggerFn","setLabelsMaxWidth","xTicks","tickWidth","xDist","yDist","totalHeight","maxNoLabels","nthElement","labelsAvailableWidth","barWrapper","yAxisWrapper","svgWrapper","isBarchart","xTransform","tickDist","xTick","text","round","ceil","textContent","getDefaultColumns","stringColumn","temp","defaultColumns","GET_PROPERTIES_MAP","attachClickEvent","point","selectedChartItem","selectedItem","postPlotProcess","pieLabels","pieGroups","angleArray","styleObj","a","startAngle","endAngle","PI","group","_resizeFn","utils","windowResize","configureChart","beforeRenderVal","scopedataset","chartInstance","plotChart","clearCanvas","replaceWith","addGraph","isLoadInProgress","variableObj","category","groupingDetails","isLiveVariable","setDefaultAxisOptions","getCutomizedOptions","newOptions","groupByColumns","aggColumns","axisoptions","numericColumns","setNumericandNonPrimaryColumns","propertiesMap","isRelatedPk","isPrimaryKey","handleDataSet","dataValue","oldVal","isDataSourceEqual","variableInflight","active","setAttribute","checkboxProps","BaseFormComponent","binddatavalue","updateBoundVariable","datavaluesource","twoWayBinding","invokeOnChange","prevDatavalue","updatePrevDatavalue","BaseFormCustomComponent","_onChange","_onTouched","_formControl","FormControlName","registerOnChange","registerOnTouched","writeValue","valid","invokeOnTouched","invokeOnFocus","unStringify","defaultVal","CheckboxComponent","checkedVal","uncheckedVal","_caption","_checkedvalue","_uncheckedvalue","toggleClass","checkboxEl","handleChange","ngModel","NgModel","read","getEpochValue","ToDatePipe","timestamp","Pipe","DatePipe","ToNumberPipe","decimalPipe","fracSize","DecimalPipe","ToCurrencyPipe","currencySymbol","_currencySymbol","CURRENCY_INFO","symbol","_val","PrefixPipe","SuffixPipe","TimeFromNowPipe","fromNow","NumberToStringPipe","StringToNumberPipe","FilterPipe","FileSizePipe","bytes","precision","unit","toFixed","FileIconClassPipe","fileExtension","zip","pdf","rar","txt","ppt","pot","pps","pptx","potx","ppsx","mpg","mp4","mov","avi","mp3","docx","js","md","html","xlsx","png","jpg","jpeg","file","default","StateClassPipe","state","success","FileExtensionFromMimePipe","mimeType","audio/aac","application/x-abiword","application/vnd.android.package-archive","video/x-msvideo","application/vnd.amazon.ebook","application/octet-stream","image/bmp","application/x-bzip","application/x-bzip2","application/x-csh","text/css","text/csv","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-fontobject","application/epub+zip","application/ecmascript","image/gif","text/html","image/x-icon","text/calendar","application/java-archive","image/jpeg","application/javascript","application/json","audio/midi","audio/x-midi","video/mpeg","application/vnd.apple.installer+xml","application/vnd.oasis.opendocument.presentation","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.text","audio/ogg","video/ogg","application/ogg","font/otf","image/png","application/pdf","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/x-rar-compressed","application/rtf","application/x-sh","image/svg+xml","application/x-shockwave-flash","application/x-tar","image/tiff","application/typescript","font/ttf","text/plain","application/vnd.visio","audio/wav","audio/webm","video/webm","image/webp","font/woff","font/woff2","application/xhtml+xml","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/xml","application/vnd.mozilla.xul+xml","application/zip","video/3gpp","audio/3gpp","video/3gpp2","audio/3gpp2","application/x-7z-compressed","checkboxsetProps","DatasetAwareFormComponent","datasetItems","acceptsArray","dataset$","datavalue$","allowempty","_debounceDatavalueUpdation","_modelByKey","toBeProcessedDatavalue","_modelByValue","initDisplayValues","binddisplayexpression","binddisplayimagesrc","binddisplaylabel","_debouncedInitDatasetItems","initDatasetItems","selectByKey","selectByValue","resetDatasetItems","itemByKey","selected","itemByValue","isEqualWithFields","displayValues","displayValue","orderedDataset","usekeys","objectKeys","objKey","transformDataWithKeys","displayexpression","displayimagesrc","postDatasetItemsInit","_defaultQueryInvoked","_datavalue","CheckboxsetComponent","appDefaults","onCheckboxLabelClick","is","inputElements","querySelectorAll","modelByKey","datasetSubscription","groupedData","collapsible","exportAs","chipsProps","searchProps","LocalDataProvider","filteredData","entries","casesensitive","queryText","query","searchKey","keys_1","entry","hasMoreData","isLastPage","RemoteDataProvider","filterData","onFilterSuccess","onFilterFailure","dataoptions_1","requestParams_1","GET_REQUEST_PARAMS","SEARCH_RECORDS","isLast","dataSize","maxResults","currentResults","AppConstants","INT_MAX_VALUE","getTransformedData","operationResult","tempResponse","tempObj","isLastPageForDistinctApi","totalElements","_isLastPage","isPaginatedData","expressionArray","dataExpression","slice","pageOptions","pagination","IS_PAGEABLE","numberOfElements","lastIndexOf","restExpr_1","DataProvider","hasNoVariableDataset","IS_UPDATE_REQUIRED","hasData","isLocalFilter","remoteDataProvider","localDataProvider","updateDataset","SearchComponent","typeaheadDataSource","Observable","observer","listenQuery","isMobileAutoComplete","renderMobileAutoComplete","_loadingItems","lastSelectedIndex","typeahead","_container","pipe","mergeMap","token","getDataSourceAsObservable","dataProvider","datavalueSubscription","queryModel","_lastResult","_unsubscribeDv","updateByDatavalue","updateByDataset","_datasource","clearSearch","loadOnClear","onInputChange","loadMoreData","closeSearch","insertAtIndex","elIndex","parentEl","_domUpdated","appendTo","_lastQuery","of","getDataSource","highlight","typeaheadContainer","prepend","eq","insertBefore","insertAfter","incrementPage","isScrolled","onInput","onFocusOut","_isOpen","_typeahead","isShown","isFocused","isUpdateOnKeyPress","which","showClosebtn","handleEnterEvent","onSelect","liElements","selectActiveMatch","onBeforeservicecall","inputData","onDropdownOpen","ulElement","adjustContainerPosition","dropdownEl","screenHeight","triggerSearch","selectNext","setLastActiveMatchAsSelected","_active","nextActiveMatch","typeAheadDropDown","$lastItem","searchon","debounceDefaultQuery","updateByDataSource","updateDatavalueFromQueryModel","searchOnDataField","nextItemIndex","dataConfig","matchmode","isformfield","formattedDataset","typeaheadOptionsLimit","transformedData","itemIndex","iscustom","onScroll","$scrollEl","scrollHeight","clientHeight","scrollTop","minchars","showsearchicon","typeaheadOnSelect","$typeaheadEvent","selectedValue","TypeaheadDirective","ChipsComponent","bindDisplayField","bindDataField","bindDataSet","bindChipclass","chipsList","maxSizeReached","_debounceUpdateQueryModel","updateQueryModel","registerChipItemClass","searchComponent","debouncetime","isCustom","enablereorder","$index","watchName","applyItemClass","chipItem","removeDuplicates","promises","prevChipsList","maxsize","searchQuery","itemFound","prevChipObj","createCustomDataModel","chipObj","getDefaultModel","allowonlyselect","resetSearchModel","all","updateMaxSize","defaultQuery","addItem","allowAdd","newItem","isDuplicate","keyCode","stopEvent","customObj","saturate","queryVal","handleChipClick","chip","readonly","currentTarget","handleChipFocus","onTextDelete","isAppleProduct","onInputClear","onBackspace","removeItem","onDelete","onArrowLeft","focusSearchBox","onArrowRight","canFocus","indexes","focusIndex","allowRemove","chipsLength","$chipsList","pullAt","datasetItem","swapElementsInArray","newIndex","currentIndex","draggedItem","resetReorder","removeData","placeholder","onReorderStart","ui","inputposition","changedItem","oldIndex","allowReorder","$changedItem","$inputEl","append","CAPTION_POSITION","CompositeDirective","required","assignRequiredToSubComponents","componentRefs","componentRef","addForIdAttributes","ConfirmDialogComponent","onCancel","DEFAULT_CLS","ContainerDirective","ContentComponent","currencyProps","BaseInput","ngModelOptions","updateOn","inputEl","newValue","handleBlur","flushViewChanges","NumberLocale","i18nService","isDefaultQuery","selectedLocale","getSelectedLocale","DECIMAL","getLocaleNumberSymbol","localefilter","NumberSymbol","Decimal","GROUP","Group","numberfilter","resetValidations","input","transformNumber","model","parseNumber","updateDisplayText","isInvalidNumber","numberNotInRange","getValueInRange","minvalue","maxvalue","resetCursorPosition","setSelectionRange","parts","NaN","decimal","selectionStart","preValue","updateon","countDecimals","onArrowPress","inputValue","decimalRoundValue","validate","invalidNumber","validateInputEntry","ctrlKey","validity","onEnter","CurrencyComponent","currency","AbstractI18nService","dateProps","CURRENT_DATE","months","DATEPICKER_DROPDOWN_OPTIONS","BaseDateTimeComponent","useDatapicker","_dateOptions","BsDatepickerConfig","isDropDownDisplayEnabledOnInput","dropdownvalue","showValidation","isNativePicker","msg","alert","resetDisplayInput","invalidDateTimeFormat","dateNotInRange","timeNotInRange","formatValidation","inputVal","pattern","datepattern","timepattern","formattedDate","minDateMaxDateValidationOnInput","toDate","minDate","getDateObj","mindate","maxDate","maxdate","LABEL_MINDATE_VALIDATION_MESSAGE","LABEL_MAXDATE_VALIDATION_MESSAGE","excludedates","excludedays","getDay","hightlightToday","toDay","getDate","not","isOtheryear","newDate","setActiveDateFocus","isMouseEvent","activeMonth","goToOtherMonthOryear","getFullYear","newDay","btnClass","timePeriod","trigger","loadDays","loadMonths","loadYears","addDatepickerMouseEvents","datePikcerHead","click","setFocusForDate","setFocusForCurrentMonthOryear","setFocusForMonthOrDay","activeMonthOrYear","datePickerBody","setActiveMonthFocus","newMonth","setActiveYearFocus","startYear","addDatepickerKeyboardEvents","isDateTime","keyEventPluginInstance","keyEventPlugin","elementScope","dateContainer","document","dateContainerCls","onkeydown","getEventFullKey","hideDatepickerDropdown","displayInputElem_1","bsDatePickerDirective","toggleTimePicker","addKeyBoardEventsForDays","keydown","newdate","activeElement","displayInputElem_2","addKeyBoardEventsForMonths","addKeyBoardEventsForYears","isMoouseEvent","newYear","datePickerYears","endYear","focusTimePickerPopover","ngZone","runOutsideAngular","bindTimePickerKeyboardEvents","$timepickerPopup","addEventsOnTimePicker","isValidDate","getTime","timeFormatValidation","enteredDate","getNativeDateObject","stopPropogation","hideTimepickerDropdown","setIsTimeOpen","mintime","maxtime","bsTimeValue","maxTime","minTime","updateFormat","dateInputFormat","showseconds","ismeridian","showWeekNumbers","dateOnShowSubscription","cal","daysCalendar","excludedDates","weeks","days","isDisabled","dayIndex","md_1","ed","isSame","DateComponent","evtMngrPlugins","isCurrentDate","isEnterPressedOnDateInput","containerClass","getDisplayDateTimeFormat","DATE","bsDataValue","outputformat","setTimeInterval","clearTimeInterval","detectChanges","onDisplayDateChange","setDataValue","onDatePickerOpen","onInputBlur","relatedTarget","deregisterEventListener","toggleDpDropdown","showdropdownon","addBodyClickListener","skipListener","bodyElement","bsDateContainerElement","addEventListenerOnElement","onDisplayKeydown","bsValue","timeinterval","setInterval","clearInterval","onDateChange","displayInputElem","EVENT_MANAGER_PLUGINS","BsDatepickerDirective","dateTimeProps","DatetimeComponent","isTimeOpen","isDateOpen","_debouncedOnChange","dateTimeFormat","DATETIME","bsDateValue","currentTime","onModelUpdate","addTimepickerClickListener","dropdownElement","deregisterTimepickeEventListener","onTimepickerOpen","tpElements","parentElement","_dropdown","bsTimePicker","preventTpClose","stopImmediatePropagation","deregisterDatepickerEventListener","NgZone","TimepickerComponent","propsMap","VIEW_MODE_OPTIONS","EDIT_MODE","setHeaderConfig","headerConfig","cols","isGroup","setHeaderConfigForTable","parseBooleanValue","parseValueByType","SLIDER","CURRENCY","CHECKBOX","TOGGLE","DataType","fieldTypeWidgetTypeMap","integer","big_integer","short","float","big_decimal","double","long","byte","datetime","list","custom","getDefaultValue","MessageComponent","messageClass","messageIconClass","showMessage","caption","hideMessage","dismiss","onMessageTypeChange","msgCls","msgIconCls","sizeClasses","Pager","Basic","Classic","PaginationComponent","resultEmitter","EventEmitter","maxResultsEmitter","dn","currentPage","pageCount","isDisableNext","isDisablePrevious","isDisableFirst","isDisableLast","_debouncedApplyDataset","_debouncedPageChanged","inst","goToPage","setResult","emit","updateNavSize","sizeCls","navcontrols","navigationsize","navigationClass","resetPageNavigation","calculatePagingValues","setDefaultPagingValues","checkDataSize","prevshowrecordcount","showrecordcount","isDisableCount","disableNavigation","isCurrentPageFirst","isCurrentPageLast","isDisableCurrent","isDataSourceHasPaging","setNonPageableData","setPagingValues","variableOptions","__fullData","_options","GET_PAGING_OPTIONS","isFirstPage","goToLastPage","isRefresh","goToFirstPage","firstRow","getPageData","onPageDataReady","invokeSetRecord","pageInfo","totalPages","validateCurrentPage","onModelChange","targetEle","code","pageChanged","navigatePage","setBindDataSet","binddatasource","bindPagingOptions","setDataSource","onDataNavigatorDataSetChange","navigation","onclick","SkipSelf","Output","ListItemDirective","elRef","destroy$","asObservable","itemClass","_currentItemWidgets","disableItem","listComponent","itemClassWatcher","disableItemWatcher","onFocus","lastSelectedItem","even","odd","componentElements","comp","registerWatch","binditemclass","$list","binddisableitem","disableitem","triggerWMEvent","multiselect","notify","setUpCUDHandlers","$editItem","$deleteItem","mouseEnterCB","mouseLeaveCB","ListAnimator","leftChildrenCount","rightChildrenCount","$btnSubscription","btnComponents","actionItems","createActionPanel","li","actionPanelTemplate","outerWidth","outerHeight","marginBottom","computeTotalChildrenWidth","$ele","totalWidth","computeTransitionProportions","reverse","resetElement","resetState","actionPanel","getChildActionElement","actionTemplate","initActionPanel","transitionProportions","$d","strictUpper","strictLower","computeActionTransition","sign","invokeFullSwipeEvt","btn","onAnimation","triggerListItemSelection","ListComponent","propsInitPromise","noDataFound","_items","deselectListItems","selectItem","getWidgets","widgteName","retVal","listItems","currentItemWidgets","getItem","getListItemByIndex","getIndex","getListItemIndex","run","resetNavigation","showNavigation","navControls","infScroll","onDemandLoad","enableBasicNavigation","enableInlineNavigation","enableClassicNavigation","enablePagerNavigation","setNavigationTypeNone","enableInfiniteScroll","enableOnDemandLoad","setListClass","itemsperrow","cls","itemsPerRowClass","onNavigationTypeChange","fetchNextDatasetOnScroll","dataNavigator","setIscrollHandlers","lastScrollTop","wrapper","iscroll","self","debouncedFetchNextDatasetOnScroll","indicatorRefresh","bindIScrollEvt","$scrollParent","iScrollSubscription_1","_el","isSameNode","bindScrollEvt","scrollNode","$firstChild","scrollParent","off","scrollingElement","deltaY","updateFieldDefs","setDirty","onDataChange","isDataChanged","setupDataSource","dataNavigatorWatched","navigatorResultWatch","navigatorMaxResultWatch","onDataSetChange","clearSelectedItems","getListItemByModel","listModel","listItem","itemObj","updateSelectedItemsWidgets","selectedItemWidgets","toggleListItemSelection","$listItem","pullAllWith","onListRender","selectedItems","firstSelectedItem","selectfirstitem","$firstItem","listItemContext","setupHandlers","$ulEle","onUpdate","minIndex","maxIndex","reorderProps","markForCheck","droppable","accept","checkSelectionLimit","selectionlimit","SUPPORTS_SERVER_FILTER","handleKeyDown","presentIndex","firstIndex","selectCount","$li","paginationclass","subscribeToPullToRefresh","metaKey","shiftKey","first_1","last_1","$liItem","getItemRefByIndexOrModel","isNumber","deselectItem","beforePaginationChange","tap","doubletap","cancelSubscription","listRecords","_listAnimator","ContentChild","LOGIN_FORM_CONFIG","LIVE_FORM_CONFIG","LIVE_FILTER_CONFIG","setMarkupForFormField","columnWidth","propsTmpl","findInvalidElement","$formEle","ngForm","formObj","setTouchedState","ctrl","markAsTouched","FormComponent","fb","dynamicComponentProvider","parentList","parentForm","onBeforeSubmitEvt","onSubmitEvt","onBeforeRenderEvt","bindformdata","isLiveForm","isLiveFilter","_widgetClass","_captionClass","formfields","formWidgets","filterWidgets","buttonArray","dataoutput","formdata","statusMessage","primaryKey","_debouncedUpdateFieldSource","updateFieldSource","validationMessages","_debouncedSubmitForm","submitForm","isUpdateMode","dialogId","ngform","addInnerNgFormToForm","onValueChangeSubscription","valueChanges","updateDataOutput","elScope","addEventsToContext","_isLayoutDialog","_isUpdateMode","setReadOnlyState","submit","onReset","reset","findOperationType","binding","counter","innerBinding","formGroupName","addControl","cancel","save","saveAndNew","saveAndView","new","edit","highlightInvalidFields","clearFilter","setValidationOnInnerForms","validateTouch","formObjs","formInstance","formName","current","setValidationOnFields","form","touched","prepareValidationObj","fullyQualifiedFormName","invalid","errorType","errors","validationmessage","getElement","setValidationMsgs","formdatasource","setFormWidget","validateFieldsOnSubmit","validationtype","eleForm","$invalidForm","$invalidEle","ngEle","captionAlignClass","setLayoutConfig","captionsize","setFormData","isDataSourceUpdated","onDataSourceChange","isLayoutDialog","updateMode","onFormDataSourceChange","generateFormFields","onResult","status","params","$operation","toggleMessage","errormessage","messagelayout","messageRef","notifyApp","clearMessage","layoutConfig","captionWidth","captionPosition","os","captionCls","widgetCls","captionwidth","captionposition","selectedViewPort","isAndroid","_captionWidth","widgetWidth","tier","registerFormWidget","registerFormFields","registerActions","formAction","updateFormDataOutput","constructDataObject","formData","getFormFields","_control","getFiles","resetFormState","markAsUntouched","markAsPristine","$formData","postmessage","showButtons","expandCollapsePanel","expanded","onFieldDefaultValueChange","onFieldValueChange","_isGridLayoutPresent","noOfColumns","$gridLayout","fieldTemplate","colCount","metadata","userFields","$metadata","colTmpl","dynamicFormRef","_dynamicContext","getComponentFactoryRef","noCache","transpile","componentFactoryRef","createComponent","extendProto","appendChild","dirty","invokeActionEvent","formMap","registerFormProps","FormBuilder","DynamicComponentRefProvider","ViewContainerRef","DependsonDirective","dependson","eventSubscription","openFormDialog","isSelected","onInsert","currentOp","READ","onFormRender","formChildren","formSubscription","DialogComponent","contexts","closeDialog","useValue","ɵ0$e","TemplateRef","DialogBodyDirective","subscription","dialogRoot","tabindex","DialogFooterDirective","DialogHeaderComponent","iconwidth","iconheight","FooterDirective","FormActionDirective","populateAction","buttonDef","accessroles","shortcutkey","iconname","_propsInitialized","colorPickerProps","numberProps","inputNumberTypeProps","inputTextTypeProps","inputCalendarTypeProps","inputColorTypeProps","inputEmailTypeProps","radiosetProps","ratingProps","richTextProps","selectProps","sliderProps","switchProps","textareaProps","timeProps","customValidatorFn","FILE_TYPES","image","video","audio","FormFieldDirective","_widgetType","isRange","pcDisplay","mobileDisplay","TEXT","_initPropsRes","_validators","_fieldName","excludeProps","_onFocusField","_onBlurField","_debounceSetUpValidators","setUpValidators","$evt","evaluateExpr","object","getDisplayExpr","getCaption","customValidator","Validators","requiredTrue","maxchars","regexp","formWidget","setValidators","opt","updateValueAndValidity","setMaxFormWidget","formWidgetMax","UPLOAD","onMaxDefaultValueChange","setPrimaryKey","displayname","setValue","_maxControl","createControl","control","validators","setValidationMessage","readOnly","period","triggerUploadEvent","files","_oldUploadVal","registerFormField","debounceTime","onMaxValueChangeSubscription_1","viewmodewidget","fileType","filetype","permitted","extensions","uploadProps","textProps","mergeTextProps","typeProps","widgetPropsMap","COLORPICKER","PASSWORD","RICHTEXT","TEXTAREA","TIME","TIMESTAMP","formFieldMap","registerProps","ɵ1$7","HeaderComponent","TrustAsPipe","domSanitizer","as","SecurityContext","RESOURCE_URL","bypassSecurityTrustResourceUrl","HTML","sanitize","DomSanitizer","HtmlDirective","boundContent","trustAsPipe","innerHTML","setProperty","IconComponent","IframeComponent","computeIframeSrc","_iframesrc","iframesrc","trustedUrl","isInsecureContentRequest","errorMsg","MESSAGE_ERROR_CONTENT_DISPLAY","hintMsg","IframeDialogComponent","ImagePipe","encode","defaultImageUrl","InputCalendarComponent","InputColorComponent","InputEmailComponent","InputNumberComponent","InputTextComponent","maskVal","displayformat","dF","mask","showMask","exportIconMapping","EXCEL","CSV","ROW_OPS_FIELD","TableComponent","readonlygrid","rowActionsCompiledTl","rowFilterCompliedTl","inlineCompliedTl","inlineNewCompliedTl","customExprCompiledTl","rowDefInstances","rowDefMap","rowExpansionActionTl","enablesort","selectedItemChange","selectedItemChange$","_actions","footer","exportOptions","rowActions","shownavigation","documentClickBind","rowDef","rowInstance","fullFieldDefs","applyProps","_redraw","debouncedHandleLoading","rowFilter","_searchSortHandler","searchSortHandler","onRowFilterChange","onFilterConditionSelect","showClearIcon","clearRowFilter","gridOptions","colDefs","startRowIndex","sortInfo","filtermode","searchLabel","rowClass","editmode","formPosition","rowExpansionEnabled","messages","selectField","onDataRender","gridData","callDataGridMethod","_isPageSearch","filterInfo","onRowSelect","rowData","addRowIndex","assignSelectedItems","onRowDblClick","onRowDeselect","callOnRowDeselectEvent","callOnRowClickEvent","closePopover","onColumnSelect","selectedColumns","onColumnDeselect","onHeaderClick","onRowDelete","cancelRowDeleteCallback","callBack","deleteRecord","onRowInsert","insertRecord","beforeRowUpdate","_liveTableParent","updateRow","prevData","afterRowUpdate","updateRecord","onBeforeRowUpdate","onBeforeRowInsert","onBeforeRowDelete","$row","alwaysNewRow","setDisabledOnField","onBeforeFormRender","registerRowNgClassWatcher","rowngclass","getClonedRowObject","registerColNgClassWatcher","colDef","rowIndex","colIndex","clearCustomExpression","customExprViewRef","clearRowDetailExpression","rowDetailViewRef","generateCustomExpressions","compileTemplate","tmpl","rootNode","createEmbeddedView","rootNodes","isdynamictable","customExprTmpl","generateRowExpansionCell","rowExpansionActionTmpl","rowExpansionActionViewRef","getRowExpansionAction","generateRowDetailView","rowId","$overlay","containerLoad","rowExpansionTmpl","onBeforeRowCollapse","onRowCollapse","getCustomExpression","clearRowActions","rowActionsViewRef","generateRowActions","rowActionTmpl","getRowAction","generateInlineEditRow","inlineEditNewViewRef","inlineWidgetNewTmpl","getControl","getValidationMessage","clearForm","inlineEditViewRef","inlineWidgetTmpl","getInlineEditWidget","setFieldValue","getFieldValue","generateFilterRow","filterViewRef","filterTmpl","changeFn","emptyMatchModes","getFilterWidget","setGridEditMode","isGridEditMode","setGridState","isLoading","noChangesDetected","redrawWidgets","inlineInstance","inlineInstanceNew","filterInstance","searchHandler","sortHandler","timeoutCall","runInNgZone","safeApply","setTouched","deleteoktext","LABEL_OK","deletecanceltext","LABEL_CANCEL","_gridData","isNavigationEnabled","setDataGridOption","$columns","onKeyPress","isPartOfLiveGrid","formlayout","rowclass","formposition","searchlabel","datagridElement","_tableElement","gridElement","showrowindex","radioselect","filternullrecords","showheader","enablecolumnselection","shownewrow","gridfirstrowselect","renderOperationColumns","datatable","loadingdatamsg","_documentClickBind","$isFirst","$isLast","addNewRow","deleteRow","editRow","getProperty","$$index","$$pk","resetFormControl","newRow","endsWith","isEmptyRecord","record","removeEmptyRecords","serviceData","allRecords","setGridData","serverData","optionName","forceSet","rowActionCol","insertPosition","rowOperationsColumn","searchable","resizable","operations","opConfig","include","isRowOperation","isPredefined","remove","rowactionsposition","toNumber","unshift","enablePageNavigation","watchVariableDataSet","isDataValid","errorMessage","populateGridData","variableName","newObj","tempArr","oldKeys","numKeys","newObject","oldKey","_isClientSearch","getSearchResult","getSortResult","createGridColumns","generateDynamicColumns","_results","attrsTmpl","customTmpl","dynamicTableRef","prepareColDefs","defaultFieldDefs","dataValid","getSortExpr","sortExp","pagingOptions","getValidJSON","checkFiltersApplied","enableNewRow","navigationSize","act","populateActions","renderDynamicFilterColumn","filteTemRef","registerColumns","tableColumn","tableAction","registerRow","tableRow","expandicon","collapseicon","registerRowActions","tableRowAction","export","exportexpression","getFilterFields","exportType","logicalOp","exportSize","exportdatasize","DOWNLOAD","expandRow","collapseRow","contains","doctype","isInput","hasAttribute","isInputBodyWrapper","forceRender","FormWidgetDirective","table","componentInstance","LabelDirective","LayoutGridColumnDirective","LayoutgridDirective","LayoutGridRowDirective","LazyLoadDirective","templateRef","viewContainer","unSubscribeFn","embeddedView","LeftPanelAnimator","leftPanel","$page","offset","isGesturesEnabled","_width","_pageContainerWidth","_leftPanelWidth","_maxX","AnimationType","SLIDE_IN","_expanded","isTabletApplicationType","pageW","leftW","maxX","_$animatedElements","z-index","collapse","resetTransition","expand","roleSelector","roleName","bindTapEvtHandler","handler","hidePageContainers","leftNavEle","searchEle","bindSearchIconEvent","searchElements","ele","before","updateDeviceView","isTablet","pageContainer","searchContainer","LEFT_PANEL","rightNavEle","RIGHT_PANEL","headerEle","HEADER","SEARCH","pageEle","CONTENT","SWIPE_ELEM","classList","PageDirective","titleService","_eventNotifier","EventNotifier","setTitle","Title","activePopover","LeftPanelDirective","columnwidth","setLeftPanelWidth","setPageWidthAndPosition","xscolumnwidth","_destroyCollapseActionListener","listenForCollapseAction","gestures","isVisible","SLIDE_OVER","_leftPanelAnimator","swipeAnimation","skipEvent","devices","device","LiveActionsDirective","subscribedWidget","addRow","successHandler","errorHandler","getRecords","skipToggleState","performCUDOperation","MESSAGE_DELETE_RECORD_SUCCESS","showAppConfirmDialog","MESSAGE_DELETE_RECORD","confirmdelete","oktext","canceltext","closeAppConfirmDialog","cancelDeleteCallback","performOperation","LiveTableComponent","cdr","layoutType","$queue","tableOptions","onSelectedItemChange","showErrorMessage","beforeRowDelete","beforeRowInsert","openDialog","focusFirstInput","$firstInput","onDialogOpen","_addNewRow","_updateRow","clearData","newForm","initiateSelectItem","getNavigationTargetBySortInfo","onRecordDelete","updateVariable","LABEL_ACCESS_DENIED","onFormReady","LiveFormDirective","liveTable","_debouncedSavePrevDataValues","savePrevDataValues","changeDataObject","getBlobURL","href","GET_PRIMARY_KEY","GET_BLOB_URL","primaryValue","columnName","resetFileUploadWidget","skipValueSet","setDefaultValues","defaultvalue","getValidTime","BLOB","onDataSourceUpdate","savePrevformFields","prevformFields","getPrevformFields","prevField","pField","getDataObject","prevDataObject","isPreviousData","dateTime","fieldTarget","isDateTimeType","getValidDateObject","LIST","isPrimary","sourceOperation","GET_OPERATION_TYPE","getPrevDataValues","prevDataValues","fromPairs","emptyDataModel","setReadonlyFields","callBackFn","pristine","MESSAGE_NO_CHANGES","insertmessage","updatemessage","deletemessage","liveFormMap","registerLiveFormProps","FILTER_CONSTANTS","LiveFilterDirective","_filter","applyFilter","filterOnDefault","GET_OPTIONS","FETCH_DISTINCT_VALUES","fetchDistinctValues","LABEL_NO_VALUE","autoupdate","dataModel","fieldEle","fieldSelector","_minValue","_maxValue","_value","colName","GET_MATCH_MODE","fileName","skipDataSetUpdate","inFlightBehavior","liveFilterMap","registerLiveFilterProps","MarqueeDirective","animationClasses","scale","down,right","down,left","up,right","up,left","fade","slide","MenuDropdownComponent","animateItems","animateitems","animationClass","menuAlignClass","pull-right","dropinline-menu","pull-left","MENU_LAYOUT_TYPE","MenuDropdownItemComponent","autoclose","linktarget","menuLink","getInitialKeyMovements","menulayout","$parentUl","$parentItem","NavbarComponent","toggleCollapse","$navContent","navContent","toggleNavCollapse","NumberComponent","PullToRefresh","onPullToRefresh","infoContainer","isIos","swipey","DIRECTIONS","VERTICAL","animationInProgress","wait","stopAnimation","pageIscroll","spinner","IOSSpinner","AndroidSpinner","spin","setRotation","runAnimation","stop","polarToCartesian","centerX","centerY","angleInDegrees","angleInRadians","cos","sin","describeArc","arcSweep","initialized","androidTemplate","container","cx","cy","deg","totalTime","intervalId","svg","PageContentComponent","childPullToRefresh","initPullToRefresh","hasPullToRefreshEvent","pullToRefreshIns","pulltorefresh","PanelComponent","helpClass","helptext","fullScreenTitle","LABEL_FULLSCREEN","LABEL_EXITFULLSCREEN","expandCollapseTitle","LABEL_COLLAPSE","LABEL_EXPAND","hasFooter","enablefullscreen","reDrawChildren","toggleFullScreen","fullscreen","computeDimensions","toggleHelp","inlineHeight","headerHeight","panelHeader","offsetHeight","panelContent","vHeight","innerHeight","hideFooter","panelBody","PartialDialogComponent","PartialDirective","PartialParamHandlerDirective","widgetRef","partialParams","pageParams","params$","registerParams","PartialParamDirective","bindValue","partialParamsProvider","PrefabContainerDirective","PictureDirective","imagePipe","setImgSource","imgSource","pictureplaceholder","eventsMap","hover","PopoverComponent","canPopoverOpen","popoverContainerCls","showPopover","setFocusToPopoverLink","anchorRef","adjustPopoverPosition","popoverElem","parentDimesion","popoverLeftShift","arrowLeftShift","bsPopoverDirective","_popover","_ngZone","onStable","calculatePopoverPostion","popoverLeft","popoverWidth","viewPortWidth","popoverContainer","popoverheight","minWidth","popoverwidth","popoverarrow","interaction","onmouseenter","clearTimeout","closePopoverTimeout","onmouseleave","hidePopover","popoverStartBtn","popoverEndBtn","popoverplacement","triggerPopoverEvents","contentsource","cancelSubscription_1","partialScope","parEle","partialRef","Variables","Actions","onPopoverAnchorKeydown","PopoverDirective","prefabProps","registeredPropsSet","PrefabDirective","prefabName","propsReady","setProps","prepareProps","RadiosetComponent","onRadioLabelClick","origFn","summernote","button","origCallback","RichTextEditorComponent","_operationStack","isEditorLoaded","EDITOR_DEFAULT_OPTIONS","toolbar","callbacks","onInit","operationParam","performEditorOperation","onChange","contents","changeEvt","Event","createEvent","initEvent","fontNames","disableResizeEditor","htmlcontent","$hiddenInputEle","$richTextEditor","initEditor","getCurrentPosition","undo","RightPanelDirective","ScrollableDirective","searchRef","typeAheadInput","SelectComponent","ds","IS_BOUND_TO_LOCALE","GET_DEFAULT_LOCALE","selectEl","onSelectValueChange","ShowInDeviceDirective","showInDevice","deviceType","SmoothScrollDirective","_isEnabled","_lastScrollY","_waitRefreshTill","pendingIscrolls","ngDoCheck","_smoothScrollInstance","refreshIScroll","applySmoothScroll","$events","activeEl","isKitkatDevice","scrollOptions","scrollbars","momentum","bounce","mouseWheel","disablePointer","disableTouch","disableMouse","iScroll","IScroll","listeners","l","_scrolling","refresh","indicators","scroller","transition-timing-function","transition-duration","now","cloneEvents","_events","prevActiveEl","wrapAll","maxScrollY","refreshIscrolls","scrollContainer","scrollIntoView","behavior","block","inline","SpinnerComponent","showCaption","_spinnerMessages","listenOnDataSource","variables","servicevariabletotrack","GET_NAME","validateDataSourceCtx","picture","SwitchComponent","_debounceSetSelectedValue","setSelectedValue","updateHighlighter","updateSwitchOptions","selectOptAtIndex","btnwidth","skipAnimation","selectOpt","removeAttribute","TableActionDirective","conditionalclass","conditionalstyle","TableColumnGroupDirective","populateConfig","textAlignment","textalignment","inlineWidgetProps","validationProps","FieldDef","newval","TableColumnDirective","bindfilterdataset","_debounceSetUpValidatorsNew","_dataoptions","populateFieldDef","_isRowFilter","_isInlineEditable","_isNewEditableRow","setUpControls","s1_1","_filterInstances","setUpFilterWidget","s2_1","_inlineInstances","setUpInlineWidget","s3_1","_inlineInstancesNew","filterTemplateRef","addFormControl","suffix","ctrlName","getFormControl","editWidgetType","onValueChangeSubscription_1","newControl","onNewValueChangeSubscription_1","filterControl","onFilterValueSubscription_1","onFilterValueChange","resetFilter","filterwidget","loadFilterData","SUPPORTS_DISTINCT_API","relatedEntityName","_filterDataSet","setFilterWidgetDataSet","filterdataset","loadInlineWidgetData","bindings","filterdatafield","filterdisplayfield","filterdisplaylabel","filtersearchkey","filterplaceholder","setInlineWidgetProp","editdatepattern","getStyleDef","textcolor","pcdisplay","mobiledisplay","ngclass","formatpattern","isFilterDataSetBound","OPERATION","TableCUDDirective","hideEditRow","saveRow","cancelRow","selectItemOnSuccess","skipSelectItem","isStaticVariable","insertSuccessHandler","ADD_ITEM","updateSuccessHandler","SET_ITEM","prevItem","deleteSuccessHandler","deleteFn","REMOVE_ITEM","onOpen","selectRow","getSearchValue","getFilteredData","searchObj","currentVal","searchVal","isExists","setFilterFields","transformFilterField","userFilters","TableFilterSortDirective","matchModeMsgs","refreshData","resetSortStatus","variableSort","gridSortString","skipFilter","$gridElement","sortObj","handleClientSideSortSearch","searchSortObj","sortDirection","handleSinglePageSearch","$rows","handleServerSideSearch","handleSeverSideSort","condition","getFilterOnFieldValues","filteronfilter","isSamePage","TableRowActionDirective","getTitle","ɵ0$n","TableRowDirective","closeothers","TextareaComponent","TextContentDirective","TileDirective","CURRENT_TIME","TimeComponent","isopen","isCurrentTime","mintimeMaxtimeValidation","toggleDropdown","onDisplayTimeChange","onTimeChange","timeValue","timeInputValue","minTimeMeridian","showMeridian","meridian","setSeconds","getSeconds","TopNavDirective","WizardStepDirective","disablenext","disabledone","disableprevious","onNext","currentStep","stepIndex","onPrev","onSkip","NgForm","WizardComponent","isFirstStep","isLastStep","hasNextStep","enableDone","enablePrev","enableNext","getNextValidStepFormIndex","steps","getStepRefByIndex","getPreviousValidStepFormIndex","getCurrentStepIndex","getStepIndexByRef","wizardStep","getStepRefByName","setDefaultStep","isInitialized","prevStep","onWizardHeaderClick","nextStep","currentStepIndex","skip","stepRef","stepClass","OnFileSelectDirective","FileUploadComponent","onSelectEvt","selectedFiles","fileTransfers","DEFAULT_CAPTIONS","MULTIPLE_SELECT","DEVICE_CONTENTTYPES","IMAGE","VIDEO","AUDIO","FILES","FILESIZE_MB","CONSTANT_FILE_SERVICE","uploadData","uploadPath","chooseFilter","fileUploadMessage","uploadedFiles","uploadUrl","isValidFile","filename","contenttype","extensionName","isMobileType","contentTypes","isImageFile","isAudioFile","isVideoFile","getValidFiles","$files","validFiles","errorFiles","MAXFILEUPLOAD_SIZE","maxfilesize","MAX_FILE_UPLOAD_FORMATTED_SIZE","getFileExtension","_isMobileType","LABEL_FILE_EXTENTION_VALIDATION_MESSAGE","LABEL_FILE_EXCEED_VALIDATION_MESSAGE","isMultiple","changeServerUploadPath","selectedUploadTypePath","onSelectEventCall","onFileElemClick","onFileSelect","beforeSelectVal","progressObservable","_progressObservable","progressObj","progress","abortFileUpload","$file","CANCEL","openedDialogs","closeDialogsArray","DialogServiceImpl","dialogRefsCollection","appConfirmDialog","getDialogRefsCollection","getDialogRef","dialogRefMap","pageName","partialName","dRef","dialogScope","closeAllDialogs","dialog","getAppConfirmDialog","setAppConfirmDialog","dialogName","Injectable","wmComponents","PIPES","bsDatePickerModule","BsDatepickerModule","forRoot","datepickerModule","DatepickerModule","timepickerModule","TimepickerModule","bsDropdownModule","BsDropdownModule","paginationModule","PaginationModule","typeaheadModule","TypeaheadModule","progressbarModule","ProgressbarModule","carouselModule","CarouselModule","popoverModule","PopoverModule","ngCircleProgressModule","NgCircleProgressModule","WmComponentsModule","ngModule","useClass","NgModule","imports","ColorPickerModule","CommonModule","FormsModule","ModalModule","SecurityModule","TextMaskModule","declarations","exports","entryComponents"],"mappings":"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Di7G,EAAAv0H,UAAA0oB,8BAAP,WACI,OAAO4rG,GAAkBzyE,OAAO,EAAG,GAAG,wBAlK7CyzE,EAAAA,mDAoKDf,EApKA,GCwJMgB,GAAe,CAGjBvxG,GACAzB,GACAoH,GACAsB,GAEAwT,GACAoB,GACAC,GACAmB,GACAiN,GACAO,GACAC,GACAE,GAGAyO,GACAuL,GAGA+Z,GACAM,GACAG,GACAC,GACAmD,GACA7S,GACA+J,GACA+Q,GACAmC,GACA2d,GACAW,GACAM,GACAI,GACAC,GACAG,GAEAC,GACAxL,GACAmN,GACAmE,GACAU,GACAK,GACAC,GACAS,GACAI,GACAC,GACAC,GACAC,GACAC,GACAg5B,GACAvnB,GACAG,GACAC,GACAC,GACAC,GACAC,GACA0D,GACA/wB,GACA9D,GACA41B,GACAwF,GACAhD,GACAvB,GAEA6F,GACAlpE,GACA2pE,GACAS,GACA3iC,GACAmjC,GACA3sE,GACAjgB,GACAK,GACA4sF,GACAyZ,GACApX,GACAxM,GACAv4B,GACAqlC,GACAyB,GACAC,GACAC,GACAM,GACAI,GACAO,GACA6C,GACArD,GAEA0D,GAEA/9F,GACAq+F,GACAuB,GACAC,GACAnqD,GACAsqD,GACAM,GAEAG,GACA0C,GACAS,GACAU,GACAW,GACAR,GACA/tB,GACA6xB,GACA0B,GACAuB,GACAH,GACAK,GACAC,GACAC,GACAE,GACAc,GAGAW,GACAV,IAGE2G,GAAQ,CACV/rE,GACA0B,GACA8B,GACApC,GACAC,GACAjB,GACAI,GACAM,GACAC,GACAC,GACAE,GACAmC,GACAlC,GACAorC,GACAyB,IAGSg+B,GAA0CC,EAAAA,mBAAmBC,UAC7DC,GAAwCC,EAAAA,iBAAiBF,UACzDG,GAAwCC,EAAAA,iBAAiBJ,UACzDK,GAAwCC,EAAAA,iBAAiBN,UACzDO,GAAwCC,EAAAA,iBAAiBR,UACzDS,GAAuCC,EAAAA,gBAAgBV,UACvDW,GAAyCC,EAAAA,kBAAkBZ,UAC3Da,GAAsCC,EAAAA,eAAed,UACrDe,GAAqCC,EAAAA,cAAchB,UACnDiB,GAA8CC,EAAAA,uBAAuBlB,QAAQ,IAE1FmB,GAAA,WAAA,SAAAA,KAyCA,OAbWA,EAAAnB,QAAP,WACI,MAAO,CACHoB,SAAUD,EACVhzG,UAAW,CACP2lC,GACAoB,GACAmrC,GACAyB,GACA73D,EAAAA,SACA,CAAC/0B,QAASkd,EAAAA,sBAAuBivG,SAAUzC,2BArC1D0C,EAAAA,SAAQhrH,KAAA,CAAC,CACNirH,QAAS,CACLC,EAAAA,kBACAC,EAAAA,aACAC,EAAAA,YACAC,EAAAA,YACAC,EAAAA,eACAC,EAAAA,eACA/B,GACAG,GACAE,GACAE,GACAE,GACAE,GACAE,GACAE,GACAE,GACAE,IAEJa,aAAYj0H,EAAM+xH,GAAiBC,IACnCkC,QAAOl0H,EAAM+xH,GAAiBC,IAC9BmC,gBAAiB,CACbtrF,GACA2pE,QAkBR8gB,EAzCA","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { if (o[n]) i[n] = function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; }; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator];\r\n    return m ? m.call(o) : typeof __values === \"function\" ? __values(o) : o[Symbol.iterator]();\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { SwipeAnimation } from '@swipey';\n\nimport { $appDigest, addClass, setCSS, setCSSFromObj } from '@wm/core';\n\nimport { TabsComponent } from './tabs.component';\n\ndeclare const $;\n\nexport class TabsAnimator extends SwipeAnimation {\n\n    private _$el;\n    private _noOfTabs;\n\n    public constructor(private tabs: TabsComponent) {\n        super();\n        this._$el = $(this.tabs.getNativeElement()).find('>.tab-content');\n        const childEls = this._$el.find('>[wmTabPane]');\n        this._noOfTabs = childEls.length;\n\n        const maxWidth = `${this._noOfTabs * 100}%`;\n        addClass(this.tabs.getNativeElement(), 'has-transition');\n        setCSSFromObj(this._$el[0], {maxWidth: maxWidth, width: maxWidth});\n        const width = `${100 / this._noOfTabs}%`;\n        for (const child of Array.from(childEls)) {\n            setCSS(child as HTMLElement, 'width', width);\n        }\n        this.init(this._$el);\n    }\n\n    public bounds() {\n        const activeTabIndex = this.tabs.getActiveTabIndex(),\n            w = this._$el.find('>.tab-pane:first').width(),\n            noOfTabs = this._$el.find('>.tab-pane:visible').length,\n            centerVal = -1 * activeTabIndex * w;\n        return {\n            strict: false,\n            lower: activeTabIndex === noOfTabs - 1 ? 0 : -w,\n            center: centerVal,\n            upper: activeTabIndex === 0 ? centerVal : w\n        };\n    }\n\n    public context() {\n        return {\n            'w': this._$el.width()\n        };\n    }\n\n    public animation() {\n        return {\n            'transform': 'translate3d(${{ ($D + $d)/w * 100 + \\'%\\'}}, 0, 0)',\n            '-webkit-transform': 'translate3d(${{ ($D + $d)/w * 100 + \\'%\\'}}, 0, 0)'\n        };\n    }\n\n    public transitionTabIntoView() {\n        const activeTabIndex = this.tabs.getActiveTabIndex();\n        setCSS(this._$el[0], 'transform', `translate3d(${-1 *  activeTabIndex / this._noOfTabs * 100}%, 0, 0)`);\n    }\n\n    public onUpper() {\n        this.tabs.prev();\n        $appDigest();\n    }\n\n    public onLower() {\n        this.tabs.next();\n        $appDigest();\n    }\n\n    public threshold() {\n        return 5;\n    }\n}\n","import { InjectionToken } from '@angular/core';\n\nimport { BaseComponent } from '../common/base/base.component';\n\nexport interface IWidgetConfig {\n    widgetType: string;\n    widgetSubType?: string;\n    hostClass?: string;\n    displayType?: string;\n}\n\nexport interface IRedrawableComponent {\n    redraw: Function;\n}\n\nexport type ChangeListener = (key: string, nv: any, ov?: any) => void;\n\nexport abstract class WidgetRef {}\n\nexport abstract class DialogRef<T extends BaseComponent> {\n   bsModal: any;\n}\n\nexport const Context = new InjectionToken('Context Provider Reference');\n\nexport interface IDialog {\n    open: (initState?: any) => void;\n    close: () => void;\n}\n","import { NG_VALUE_ACCESSOR, NG_VALIDATORS } from '@angular/forms';\nimport { forwardRef } from '@angular/core';\n\nimport { encodeUrl, isValidWebURL, stringStartsWith, FormWidgetType, $parseExpr, getClonedObject, prettifyLabel, initCaps, deHyphenate } from '@wm/core';\nimport { DialogRef, WidgetRef } from '../widgets/framework/types';\n\ndeclare const _;\n\nconst DATASET_WIDGETS = new Set([FormWidgetType.SELECT, FormWidgetType.CHECKBOXSET, FormWidgetType.RADIOSET,\n    FormWidgetType.SWITCH, FormWidgetType.AUTOCOMPLETE, FormWidgetType.CHIPS, FormWidgetType.TYPEAHEAD, FormWidgetType.RATING]);\n/**\n * Returns the parsed, updated bound expression\n * if the expression is $[data[$i][firstName]] + '--' + $[lastName] + '--' + $['@ID@']\n * returns __1.firstName + '--' + lastName + '--' + __1['@ID@']\n */\nconst getUpdatedExpr = (expr: string) => {\n    let updated = '', ch, next, i, j, matchCh, matchCount, isQuotedStr, subStr, isQuotedStrEvaluated;\n\n    expr = expr.replace(/\\$\\[data\\[\\$i\\]/g, '$[__1');\n\n    for (i = 0; i < expr.length; i++) {\n        ch = expr[i];\n        next = expr[i + 1];\n\n        /**\n         * if the expression starts with $[, check the next(ch) character,\n         *    if ch is a quote(', \") change the expr to __[\n         *    if ch is a whiteSpace, remove it\n         *    else remove $[\n         */\n        if (ch === '$' && next === '[') {\n            matchCount = 1;\n            isQuotedStrEvaluated = false;\n            isQuotedStr = false;\n\n            for (j = i + 2; j < expr.length; j++) {\n\n                matchCh = expr[j];\n\n                if (matchCh === ' ') {\n                    continue;\n                }\n\n                if (!isQuotedStrEvaluated) {\n                    isQuotedStr = expr[j] === '\"' || expr[j] === '\\'';\n                    isQuotedStrEvaluated = true;\n                }\n\n                if (matchCh === '[') {\n                    matchCount++;\n                } else if (matchCh === ']') {\n                    matchCount--;\n                }\n\n                if (!matchCount) {\n                    subStr = expr.substring(i + 2, j);\n                    if (isQuotedStr) {\n                        updated += '__1[' + subStr + ']';\n                    } else {\n                        updated += subStr;\n                    }\n\n                    break;\n                }\n            }\n            i = j;\n        } else {\n            updated += ch;\n        }\n    }\n\n    return updated;\n};\n\n/**\n * Returns the value for the provided key in the object\n */\nexport const getObjValueByKey = (obj: any, strKey: string) => {\n    /* check for the key-string */\n    if (strKey) {\n        let val;\n        /* convert indexes to properties, so as to work for even 'key1[0].child1'*/\n        strKey.replace(/\\[(\\w+)\\]/g, '.$1').split('.').forEach(key => {\n            // If obj is null, then assign val to null.\n            val = (val && val[key]) || (_.isNull(obj) ? obj : obj[key]);\n        });\n        return val;\n    }\n    return obj;\n};\n\n/**\n * returns the display field data for any dataset widgets\n * Based on the bind display expression or display expression or display name,\n * data is extracted and formatted from the passed option object\n * If there is field is specified, field value is obtained from the dataObj.\n * If expression is given, evaluates the expression value.\n * else check for bindExpression, extract the value from the dataObj\n */\nexport const getEvaluatedData = (dataObj: any, options: any, context?: any) => {\n    let expressionValue;\n    const field = options.field,\n        expr = options.expression,\n        bindExpr = options.bindExpression;\n\n    // if key is bound expression\n    if (bindExpr) {\n        // remove 'bind:' prefix from the boundExpressionName\n        expressionValue = bindExpr.replace('bind:', '');\n        // parse the expressionValue for replacing all the expressions with values in the object\n        expressionValue = getUpdatedExpr(expressionValue);\n    } else {\n        expressionValue = expr ? expr : field;\n    }\n\n    // Handling field name with special charecters\n    // Ex: field = \"f name\"\n    if (!bindExpr && !expr) {\n        return _.get(dataObj, field);\n    }\n\n    return $parseExpr(expressionValue)(context, Object.assign({}, dataObj, {__1: dataObj}));\n};\n\nexport const isActiveNavItem = (link, routeName) => {\n    if (!link || !routeName) {\n        return false;\n    }\n    routeName = routeName.indexOf('?') === -1 ? routeName : routeName.substring(0, routeName.indexOf('?'));\n    link = link.indexOf('?') === -1 ? link : link.substring(0, link.indexOf('?'));\n    const routeRegex = new RegExp('^(#\\/|#)' + routeName + '$');\n    return routeRegex.test(link);\n};\n\n\n/**\n * Returns the orderBy Expression based on the 'sort 'option in pageable object\n * returned by backend\n * @param pageableObj\n * @returns {string}\n */\nexport const getOrderByExpr = pageableObj => {\n    pageableObj = pageableObj || [];\n    const expressions       = [],\n        KEY_VAL_SEPARATOR = ' ',\n        FIELD_SEPARATOR   = ',';\n    _.forEach(pageableObj, obj => {\n        expressions.push(obj.property + KEY_VAL_SEPARATOR + obj.direction.toLowerCase());\n    });\n\n    return _.join(expressions, FIELD_SEPARATOR);\n};\n\nexport const isDataSetWidget = widget => {\n    return DATASET_WIDGETS.has(widget);\n};\n\n/*This function returns the url to the image after checking the validity of url*/\nexport const getImageUrl = (urlString, shouldEncode?, defaultUrl?) => {\n    /*In studio mode before setting picturesource, check if the studioController is loaded and new picturesource is in 'styles/images/' path or not.\n     * When page is refreshed, loader.gif will be loaded first and it will be in 'style/images/'.\n     * Prepend 'services/projects/' + $rootScope.project.id + '/web/resources/images/imagelists/'  if the image url is just image name in the project root,\n     * and if the url pointing to resources/images/ then 'services/projects/' + $rootScope.project.id + '/web/'*/\n    if (isValidWebURL(urlString)) {\n        return urlString;\n    }\n\n    // If no value is provided for picturesource assign pictureplaceholder or default-image\n    if (!urlString) {\n        urlString = defaultUrl || 'resources/images/imagelists/default-image.png';\n    }\n\n    urlString = shouldEncode ? encodeUrl(urlString) : urlString;\n\n    // if the resource to be loaded is inside a prefab\n    if (stringStartsWith(urlString, 'services/prefabs')) {\n        return urlString;\n    }\n\n    return urlString;\n};\n\n/*This method returns the url to the backgroundImage*/\nexport const getBackGroundImageUrl = (urlString) => {\n    if (urlString === '' || urlString === 'none') {\n        return urlString;\n    }\n    return 'url(' + getImageUrl(urlString) + ')';\n};\n\nexport function provideAs(reference: any, key: any, multi?: boolean) {\n    return {\n        provide: key,\n        useExisting: forwardRef(() => reference),\n        multi: multi\n    };\n}\n\nexport function provideAsNgValidators(reference: any) {\n    return provideAs(reference, NG_VALIDATORS, true);\n}\n\nexport function provideAsNgValueAccessor(reference: any) {\n    return provideAs(reference, NG_VALUE_ACCESSOR, true);\n}\n\nexport function provideAsWidgetRef(reference: any) {\n    return provideAs(reference, WidgetRef);\n}\n\nexport function provideAsDialogRef(reference: any) {\n    return provideAs(reference, DialogRef);\n}\n\nexport const NAVIGATION_TYPE = {\n    ADVANCED: 'Advanced',\n    BASIC: 'Basic',\n    CLASSIC: 'Classic',\n    INLINE: 'Inline',\n    NONE: 'None',\n    ONDEMAND: 'On-Demand',\n    PAGER: 'Pager',\n    SCROLL: 'Scroll'\n};\n\n\nexport const getWatchIdentifier = (...args) => args.join('_');\n\nconst typesMap = {\n    number: ['number', 'integer', 'big_integer', 'short', 'float', 'big_decimal', 'double', 'long', 'byte'],\n    string: ['string', 'text'],\n    character: ['character'],\n    date: ['date', 'time',  'timestamp', 'datetime']\n};\nconst modes = {\n    number: ['exact', 'notequals', 'lessthan', 'lessthanequal', 'greaterthan', 'greaterthanequal', 'null', 'isnotnull'],\n    string: ['anywhereignorecase', 'anywhere', 'startignorecase', 'start', 'endignorecase', 'end', 'exactignorecase', 'exact', 'notequalsignorecase', 'notequals', 'null', 'isnotnull', 'empty', 'isnotempty', 'nullorempty'],\n    character: ['exactignorecase', 'exact', 'notequalsignorecase', 'notequals', 'null', 'isnotnull', 'empty', 'isnotempty', 'nullorempty'],\n    date: ['exact', 'lessthan', 'lessthanequal', 'greaterthan', 'greaterthanequal', 'null', 'notequals', 'isnotnull']\n};\nconst matchModeTypesMap = {\n    boolean: ['exact', 'null', 'isnotnull'],\n    clob: [],\n    blob: []\n};\nexport const getMatchModeTypesMap = (multiMode?) => {\n    if (multiMode) {\n        modes.number.push('in', 'notin', 'between');\n        modes.date.push('between');\n        modes.string.push('in', 'notin');\n        modes.character.push('in', 'notin');\n    }\n\n    _.forEach(typesMap, (types, primType) => {\n        _.forEach(types, type => {\n            matchModeTypesMap[type] = modes[primType];\n        });\n    });\n    // this is used in filter criteria when the user types the column name manually and where we dont know the type of the column\n    matchModeTypesMap['default'] = _.union(modes['number'], modes['string'], modes['character'], modes['date'], modes['date']);\n    return matchModeTypesMap;\n};\n\nexport const getMatchModeMsgs = (appLocale) => {\n    return {\n        start            : appLocale.LABEL_STARTS_WITH,\n        startignorecase  : appLocale.LABEL_STARTS_WITH_IGNORECASE,\n        end              : appLocale.LABEL_ENDS_WITH,\n        endignorecase    : appLocale.LABEL_ENDS_WITH_IGNORECASE,\n        anywhere         : appLocale.LABEL_CONTAINS,\n        anywhereignorecase: appLocale.LABEL_CONTAINS_IGNORECASE,\n        exact            : appLocale.LABEL_IS_EQUAL_TO,\n        exactignorecase  : appLocale.LABEL_IS_EQUAL_TO_IGNORECASE,\n        notequals        : appLocale.LABEL_IS_NOT_EQUAL_TO,\n        notequalsignorecase: appLocale.LABEL_IS_NOT_EQUAL_TO_IGNORECASE,\n        lessthan         : appLocale.LABEL_LESS_THAN,\n        lessthanequal    : appLocale.LABEL_LESS_THAN_OR_EQUALS_TO,\n        greaterthan      : appLocale.LABEL_GREATER_THAN,\n        greaterthanequal : appLocale.LABEL_GREATER_THAN_OR_EQUALS_TO,\n        null             : appLocale.LABEL_IS_NULL,\n        isnotnull        : appLocale.LABEL_IS_NOT_NULL,\n        empty            : appLocale.LABEL_IS_EMPTY,\n        isnotempty       : appLocale.LABEL_IS_NOT_EMPTY,\n        nullorempty      : appLocale.LABEL_IS_NULL_OR_EMPTY,\n        in               : appLocale.LABEL_IN,\n        notin            : appLocale.LABEL_NOT_IN,\n        between          : appLocale.LABEL_BETWEEN\n    };\n};\n\n// Returns array of classes that are evaluated true for given object or array\nconst getClassesArray = classVal => {\n    let classes = [];\n\n    if (_.isArray(classVal)) {\n        classVal.forEach(v => {\n            classes = classes.concat(getClassesArray(v));\n        });\n        return classes;\n    }\n    if (_.isObject(classVal)) {\n        _.forEach(classVal, (val, key) => {\n            if (val) {\n                classes = classes.concat(key.split(' '));\n            }\n        });\n        return classes;\n    }\n};\n\nexport const getConditionalClasses = (nv, ov?) => {\n    let toAdd;\n    let toRemove;\n    // if the conditional class property has already toAdd and toRemove arrays then take that otherwise build those arrays\n    const classToAdd = nv.toAdd || nv;\n    const classToRemove = nv.toRemove || ov;\n    if (_.isObject(nv)) {\n        toAdd = _.isArray(classToAdd) ? classToAdd : getClassesArray(classToAdd || []);\n        toRemove = classToRemove ? (_.isArray(classToRemove) ? classToRemove : getClassesArray(classToRemove)) : [];\n    } else {\n        toAdd = classToAdd ? [classToAdd] : [];\n        toRemove = classToRemove ? [classToRemove] : [];\n    }\n    return {toAdd, toRemove};\n};\n\n/*helper function for prepareFieldDefs*/\nconst pushFieldDef = (dataObject, columnDefObj, namePrefix, options) => {\n    /*loop over the fields in the dataObject to process them*/\n    let modifiedTitle,\n        relatedTable,\n        relatedField,\n        relatedInfo,\n        fieldName,\n        isRelated;\n    if (!options) {\n        options = {};\n    }\n    _.forEach(dataObject, (value, title) => {\n        if (_.includes(title, '.')) {\n            relatedInfo  = _.split(title, '.');\n            relatedTable = relatedInfo[0];\n            relatedField = relatedInfo[1];\n            isRelated    = true;\n        }\n        if (options.noModifyTitle) {\n            modifiedTitle = title;\n        } else {\n            if (_.isString(title)) {\n                modifiedTitle = prettifyLabel(title);\n                modifiedTitle = deHyphenate(modifiedTitle);\n                modifiedTitle = namePrefix ? initCaps(namePrefix) + ' ' + modifiedTitle : modifiedTitle;\n            } else {\n                modifiedTitle = title;\n            }\n        }\n        title = namePrefix ? namePrefix + '.' + title : title;\n        if (isRelated) {\n            // For related columns, shorten the title to last two words\n            fieldName = _.split(modifiedTitle, ' ');\n            fieldName = fieldName.length > 1 ? fieldName[fieldName.length - 2] + ' ' + fieldName[fieldName.length - 1] : fieldName[0];\n        } else {\n            fieldName = modifiedTitle;\n        }\n        const defObj = options.setBindingField ? {'displayName': fieldName, 'field': title, 'relatedTable': relatedTable, 'relatedField': relatedField || modifiedTitle}\n        : {'displayName': fieldName, 'relatedTable': relatedTable, 'relatedField': relatedField || modifiedTitle};\n        /*if field is a leaf node, push it in the columnDefs*/\n        if (!_.isObject(value) || (_.isArray(value) && !value[0])) {\n            /*if the column counter has reached upperBound return*/\n            if (options.upperBound && options.columnCount === options.upperBound) {\n                return;\n            }\n            columnDefObj.terminals.push(defObj);\n            /*increment the column counter*/\n            options.columnCount += 1;\n        } else {\n            /*else field is an object, process it recursively*/\n            /* if parent node to be included, include it */\n            if (options.columnCount !== options.upperBound) {\n                columnDefObj.objects.push(defObj);\n            }\n\n            /* if field is an array node, process its first child */\n            if (_.isArray(value) && value[0]) {\n                pushFieldDef(value[0], columnDefObj, title + '[0]', options);\n            } else {\n                pushFieldDef(value, columnDefObj, title, options);\n            }\n        }\n    });\n};\n\nconst getMetaDataFromData = (data) => {\n    let dataObject;\n    if (_.isArray(data)) {\n        if (_.isObject(data[0])) {\n            dataObject = getClonedObject(data[0]);\n            /*Loop over the object to find out any null values. If any null values are present in the first row, check and assign the values from other row.\n             * As column generation is dependent on data, for related fields if first row value is null, columns are not generated.\n             * To prevent this, check the data in other rows and generate the columns. New keys from others rows are also added*/\n            _.forEach(data, (row, index) => {\n                if ((index + 1) >= 10) { // Limit the data search to first 10 records\n                    return false;\n                }\n                _.assignWith(dataObject, row, (objValue, srcValue) => {\n                    return (objValue === null || objValue === undefined) ? srcValue : objValue;\n                });\n            });\n        } else {\n            dataObject = data[0];\n        }\n    } else {\n        dataObject = data;\n    }\n    return dataObject;\n};\n\nexport const prepareFieldDefs = (data, options?) => {\n    let dataObject;\n    const columnDef = {\n            'objects' : [],\n            'terminals' : []\n        };\n    /*if no data provided, initialize default column definitions*/\n    if (!data) {\n        data = [];\n    }\n    if (!options) {\n        options = {};\n    }\n    options.setBindingField = true;\n    options.columnCount = 0;\n    dataObject = getMetaDataFromData(data);\n    /*first of the many data objects from grid data*/\n    pushFieldDef(dataObject, columnDef, '', options);\n    if (!options || (options && !options.filter)) {\n        return columnDef.terminals;\n    }\n    switch (options.filter) {\n        case 'all':\n            return columnDef;\n        case 'objects':\n            return columnDef.objects;\n        case 'terminals':\n            return columnDef.terminals;\n    }\n    return columnDef;\n};\n","import { setCSS } from '@wm/core';\n\nimport { getBackGroundImageUrl } from '../../utils/widget-utils';\nimport { StylableComponent } from '../common/base/stylable.component';\n\nexport enum APPLY_STYLES_TYPE {\n    CONTAINER,\n    SCROLLABLE_CONTAINER,\n    INNER_SHELL,\n    SHELL\n}\n\nexport const propNameCSSKeyMap = {\n    'backgroundattachment': 'backgroundAttachment',\n    'backgroundcolor': 'backgroundColor',\n    'backgroundgradient': 'backgroundGradient',\n    'backgroundimage': 'backgroundImage',\n    'backgroundposition': 'backgroundPosition',\n    'backgroundrepeat': 'backgroundRepeat',\n    'backgroundsize': 'backgroundSize',\n    'bordercolor': 'borderColor',\n    'borderradius': 'borderRadius',\n    'borderstyle': 'borderStyle',\n    'borderwidth': 'borderWidth',\n    'borderbottomwidth': 'borderBottomWidth',\n    'borderleftwidth': 'borderLeftWidth',\n    'borderrightwidth': 'borderRightWidth',\n    'bordertopwidth': 'borderTopWidth',\n    'color': 'color',\n    'cursor': 'cursor',\n    'display': 'display',\n    'fontsize': 'fontSize',\n    'fontfamily': 'fontFamily',\n    'fontstyle': 'fontStyle',\n    'fontunit': 'fontunit',\n    'fontvariant': 'fontVariant',\n    'fontweight': 'fontWeight',\n    'height': 'height',\n    'horizontalalign': 'textAlign',\n    'lineheight': 'lineHeight',\n    'margin': 'margin',\n    'marginbottom': 'marginBottom',\n    'marginleft': 'marginLeft',\n    'marginright': 'marginRight',\n    'margintop': 'marginTop',\n    'opacity': 'opacity',\n    'overflow': 'overflow',\n    'padding': 'padding',\n    'paddingbottom': 'paddingBottom',\n    'paddingleft': 'paddingLeft',\n    'paddingright': 'paddingRight',\n    'paddingtop': 'paddingTop',\n    'picturesource': 'backgroundImage',\n    'textalign': 'textAlign',\n    'textdecoration': 'textDecoration',\n    'verticalalign': 'verticalAlign',\n    'visibility': 'visibility',\n    'whitespace': 'whiteSpace',\n    'width': 'width',\n    'wordbreak': 'wordbreak',\n    'zindex': 'zIndex'\n};\n\nexport const isStyle = key => !!propNameCSSKeyMap[key];\n\nconst MAP_SHELL_TYPE_IGNORE_LIST = {\n    height: true,\n    overflow: true,\n    padding: true,\n    paddingbottom: true,\n    paddingleft: true,\n    paddingright: true,\n    paddingtop: true\n};\n\nconst MAP_CONTAINER_TYPE_IGNORE_LIST = {\n    textalign: true\n};\n\nconst MAP_SCROLLABLE_CONTAINER_TYPE_IGNORE_LIST = {\n    textalign: true,\n    width: true\n};\n\n\nexport function styler($node: HTMLElement, component: StylableComponent, type?: APPLY_STYLES_TYPE, skipList?: Array<string>) {\n    // apply init styles;\n    const skipListMap = Object.create(null);\n    if (skipList) {\n        skipList.forEach(k => skipListMap[k] = true);\n    }\n\n    component.registerStyleChangeListener((key, nv) => {\n\n        if (skipListMap[key]) {\n            return;\n        }\n\n        // if the type is `shell` and the key is in the SHELL_TYPE_IGNORE_LIST, return\n        if (type === APPLY_STYLES_TYPE.SHELL && MAP_SHELL_TYPE_IGNORE_LIST[key]) {\n            return;\n        }\n\n        // if the type is `inner-shell` and the key is NOT in the SHELL_TYPE_IGNORE_LIST, return\n        if (type === APPLY_STYLES_TYPE.INNER_SHELL) {\n            if (!MAP_SHELL_TYPE_IGNORE_LIST[key]) {\n                return;\n            }\n            if (key === 'height') {\n                setCSS($node, 'overflow', nv ? 'auto' : '');\n            }\n        }\n\n        // if the type is `container` and the key is in the CONTAINER_TYPE_IGNORE_LIST, return\n        if (type === APPLY_STYLES_TYPE.CONTAINER && MAP_CONTAINER_TYPE_IGNORE_LIST[key]) {\n            return;\n        }\n\n        if (type === APPLY_STYLES_TYPE.SCROLLABLE_CONTAINER) {\n            if (MAP_SCROLLABLE_CONTAINER_TYPE_IGNORE_LIST[key]) {\n                return;\n            }\n\n            if (key === 'height') {\n                setCSS($node, 'overflow', nv ? 'auto' : '');\n            }\n        }\n\n        if (key === 'fontsize' || key === 'fontunit') {\n            setCSS($node, 'fontSize', component.fontsize === '' ? '' : component.fontsize + (component.fontunit || 'px'));\n        } else if (key === 'backgroundimage') {\n            setCSS($node, 'backgroundImage', component.picturesource || getBackGroundImageUrl(nv));\n        } else if (propNameCSSKeyMap[key]) {\n            setCSS($node, propNameCSSKeyMap[key], nv);\n        }\n    });\n}\n","declare const window;\n// map of widgetSubType vs WidgetProps\nconst widgetProps = new Map<string, Map<string, any>>();\n\n// returns the widgetPropsMap associated with the given identifier\nexport const getWidgetPropsByType = (identifier: string): Map<string, any> => widgetProps.get(identifier);\n\n// register the widgetProps with the given identifier\nexport const register = (identifier: string, props: Map<string, any>) => {\n    widgetProps.set(identifier, props);\n    window.WM_LOADED_COMPONENTS = [...window.WM_LOADED_COMPONENTS || [], identifier ];\n};\n\nexport enum PROP_TYPE {\n    BOOLEAN = 1,\n    NUMBER,\n    STRING\n}\n\nexport const PROP_STRING: any = {type: PROP_TYPE.STRING};\nexport const PROP_NUMBER: any = {type: PROP_TYPE.NUMBER};\nexport const PROP_BOOLEAN: any = {type: PROP_TYPE.BOOLEAN};\nexport const PROP_ANY: any = {};\n","import { DataSource, debounce, processFilterExpBindNode } from '@wm/core';\nimport { FormWidgetType, isDefined, MatchMode } from '@wm/core';\n\nimport { isDataSetWidget } from './widget-utils';\n\ndeclare const _;\n\nconst noop = () => {};\n\nexport enum Live_Operations {\n    INSERT = 'insert',\n    UPDATE = 'update',\n    DELETE = 'delete',\n    READ = 'read'\n}\n\nexport const ALLFIELDS = 'All Fields';\n\nexport const LIVE_CONSTANTS = {\n    'EMPTY_KEY'     : 'EMPTY_NULL_FILTER',\n    'EMPTY_VALUE'   : 'No Value',\n    'LABEL_KEY'     : 'key',\n    'LABEL_VALUE'   : 'value',\n    'NULL_EMPTY'    : ['null', 'empty'],\n    'NULL'          : 'null',\n    'EMPTY'         : 'empty'\n};\n\n// Returns true if widget is autocomplete or chips\nfunction isSearchWidgetType(widget) {\n    return _.includes([FormWidgetType.AUTOCOMPLETE, FormWidgetType.TYPEAHEAD, FormWidgetType.CHIPS], widget);\n}\n\nfunction onSuccess(response, res, rej) {\n    if (response.error) {\n        rej(response);\n    } else {\n        res(response);\n    }\n}\n\nexport function performDataOperation(dataSource, requestData, options): Promise<any> {\n    return new Promise((res, rej) => {\n        if (dataSource.execute(DataSource.Operation.SUPPORTS_CRUD)) {\n            let fn;\n            const operationType = options.operationType;\n            switch (operationType) {\n                case Live_Operations.UPDATE:\n                    fn = DataSource.Operation.UPDATE_RECORD;\n                    break;\n                case Live_Operations.INSERT:\n                    fn = DataSource.Operation.INSERT_RECORD;\n                    break;\n                case  Live_Operations.DELETE:\n                    fn = DataSource.Operation.DELETE_RECORD;\n                    break;\n            }\n            dataSource.execute(fn, requestData).then(response => onSuccess(response, res, rej), rej);\n        } else if (dataSource.execute(DataSource.Operation.IS_API_AWARE)) {\n            dataSource.execute(DataSource.Operation.SET_INPUT, requestData);\n            dataSource.execute(DataSource.Operation.INVOKE, {\n                'skipNotification': true\n            }).then(res, rej);\n        } else {\n            res(requestData);\n        }\n    });\n}\n\nexport function refreshDataSource(dataSource, options): Promise<any> {\n    return new Promise((res, rej) => {\n        if (!dataSource) {\n            rej();\n            return;\n        }\n        dataSource.execute(DataSource.Operation.LIST_RECORDS, {\n            'filterFields' : options.filterFields || {},\n            'orderBy' : options.orderBy,\n            'page': options.page || 1\n        }).then(res, rej);\n    });\n}\n\n/**\n * @ngdoc function\n * @name wm.widgets.live.fetchRelatedFieldData\n * @methodOf wm.widgets.live.LiveWidgetUtils\n * @function\n *\n * @description\n * This function fetches the data for the related field in live form/ grid\n *\n * @param {object} columnDef field definition\n * @param {string} relatedField related field name\n * @param {string} datafield Datafield to be set on widget\n * @param {string} widget Type of the widget\n * @param {object} elScope element scope\n * @param {object} parentScope live form// grid scope\n */\nexport function fetchRelatedFieldData(dataSource, formField, options) {\n    let primaryKeys;\n    let displayField;\n    const relatedField = options.relatedField;\n    const datafield = options.datafield;\n\n    if (!dataSource) {\n        return;\n    }\n    primaryKeys = dataSource.execute(DataSource.Operation.GET_RELATED_PRIMARY_KEYS, relatedField);\n    formField.datafield = datafield;\n    formField._primaryKey = _.isEmpty(primaryKeys) ? undefined : primaryKeys[0];\n    formField.compareby = primaryKeys && primaryKeys.join(',');\n\n    displayField = datafield === ALLFIELDS ? undefined : datafield;\n    formField.displayfield = displayField = (formField.displayfield || displayField || formField._primaryKey);\n\n    if (isSearchWidgetType(formField[options.widget])) {\n        formField.dataoptions = {'relatedField': relatedField, 'filterExpr': formField.filterexpressions ? formField.filterexpressions : {}};\n        formField.datasource = dataSource;\n        formField.searchkey = formField.searchkey || displayField;\n        formField.displaylabel = formField.displayfield = (formField.displaylabel || displayField);\n    } else {\n        interpolateBindExpressions(formField.viewParent, formField.filterexpressions, (filterexpressions) => {\n            formField.filterexpressions = filterexpressions;\n            dataSource.execute(DataSource.Operation.GET_RELATED_TABLE_DATA, {\n                relatedField,\n                pagesize: formField.limit,\n                orderBy: formField.orderby ? _.replace(formField.orderby, /:/g, ' ') : '',\n                filterFields: {},\n                filterExpr: formField.filterexpressions ? formField.filterexpressions : {}\n            }).then(response => {\n                formField.dataset = response.data;\n                formField.displayfield = formField.displayfield || _.head(_.keys(_.get(response, '[0]')));\n            }, noop);\n        });\n    }\n}\n\n/**\n * used to interpolate the bind expression for keys in the query builder\n * @param context where we find the variable obj\n * @param filterexpressions - obj containing all the rule objs\n * @param callbackFn - function to be called with the new replaced values if any in the filterexpressions object\n */\nexport const interpolateBindExpressions = (context, filterexpressions, callbackFn) => {\n    const debouncedFn = debounce(() => {\n        if (_.isFunction(callbackFn)) {\n            callbackFn(filterexpressions);\n        }\n    }, 300);\n\n    /**\n     * calling the debounced function first for the case where if there is any filterexpression without the bindedvariables.\n     * without this it will never be called. processFilterExpBindNode will be called only for the binded variable expressions.\n     */\n    debouncedFn();\n    const filterExpressions = filterexpressions ? (_.isObject(filterexpressions) ? filterexpressions : JSON.parse(filterexpressions)) : {};\n    const destroyFn = context.registerDestroyListener ? context.registerDestroyListener.bind(context) : _.noop;\n    const filterSubscription =  processFilterExpBindNode(context, filterExpressions).subscribe((response: any) => {\n        filterexpressions = JSON.stringify(response.filterExpressions);\n        debouncedFn();\n    });\n    destroyFn(() => filterSubscription.unsubscribe());\n};\n/**\n * @ngdoc function\n * @name wm.widgets.live.LiveWidgetUtils#getDistinctFieldProperties\n * @methodOf wm.widgets.live.LiveWidgetUtils\n * @function\n *\n * @description\n * Returns the properties required for dataset widgets\n *\n * @param {object} dataSource variable source for the widget\n * @param {object} formField definition of the column/ field\n *\n */\nexport const getDistinctFieldProperties = (dataSource, formField) => {\n    const props: any = {};\n    let fieldColumn;\n    if (formField['is-related']) {\n        props.tableName     = formField['lookup-type'];\n        fieldColumn         = formField['lookup-field'];\n        props.distinctField = fieldColumn;\n        props.aliasColumn   = fieldColumn.replace('.', '$'); // For related fields, In response . is replaced by $\n        props.filterExpr    = formField.filterexpressions ? (_.isObject(formField.filterexpressions) ? formField.filterexpressions : JSON.parse(formField.filterexpressions)) : {};\n    } else {\n        props.tableName     = dataSource.execute(DataSource.Operation.GET_ENTITY_NAME);\n        fieldColumn         = formField.field || formField.key;\n        props.distinctField = fieldColumn;\n        props.aliasColumn   = fieldColumn;\n    }\n    return props;\n};\n\n/**\n * @ngdoc function\n * @name wm.widgets.live.LiveWidgetUtils#getDistinctValues\n * @methodOf wm.widgets.live.LiveWidgetUtils\n * @function\n *\n * @description\n * Returns the distinct values for a field\n *\n * @param {object} formField definition of the column/ field\n * @param {string} widget widget property on the field\n * @param {object} variable variable for the widget\n * @param {function} callBack Function to be executed after fetching results\n *\n */\nexport function getDistinctValues(dataSource, formField, widget) {\n    let props;\n\n    return new Promise((res, rej) => {\n        if (isDataSetWidget(formField[widget]) && (!formField.isDataSetBound || widget === 'filterwidget')) {\n            props = getDistinctFieldProperties(dataSource, formField);\n            dataSource.execute(DataSource.Operation.GET_DISTINCT_DATA_BY_FIELDS, {\n                fields: props.distinctField,\n                entityName: props.tableName,\n                pagesize: formField.limit,\n                filterExpr: formField.filterexpressions ? JSON.parse(formField.filterexpressions) : {}\n            }).then(response => {\n                res({'field': formField, 'data': response.data, 'aliasColumn': props.aliasColumn});\n            }, rej);\n        }\n    });\n}\n\n// Set the data field properties on dataset widgets\nfunction setDataFields(formField, options?) {\n    // For search widget, set search key and display label\n    if (isSearchWidgetType(formField[options.widget])) {\n        formField.datafield = options.aliasColumn || LIVE_CONSTANTS.LABEL_KEY;\n        formField.searchkey = options.distinctField || LIVE_CONSTANTS.LABEL_KEY;\n        formField.displaylabel = formField.displayfield = (options.aliasColumn || LIVE_CONSTANTS.LABEL_VALUE);\n        return;\n    }\n    formField.datafield    = LIVE_CONSTANTS.LABEL_KEY;\n    formField.displayfield = LIVE_CONSTANTS.LABEL_VALUE;\n}\n\n/**\n * @ngdoc function\n * @name wm.widgets.live.LiveWidgetUtils#setFieldDataSet\n * @methodOf wm.widgets.live.LiveWidgetUtils\n * @function\n *\n * @description\n * Function to set the dataSet on the fields\n *\n * @param {object} formField definition of the column/ field\n * @param {object} data data returned from the server\n * @param {string} aliasColumn column field name\n * @param {string} widget widget property on the field\n * @param {boolean} isEnableEmptyFilter is null or empty values allowed on filter\n *\n */\nfunction setFieldDataSet(formField, data, options?) {\n    const emptySupportWidgets = [FormWidgetType.SELECT, FormWidgetType.RADIOSET];\n    const emptyOption         = {};\n    const dataSet = [];\n    if (options.isEnableEmptyFilter && _.includes(emptySupportWidgets, formField[options.widget]) &&\n        !formField['is-range'] && !formField.multiple) {\n        // If empty option is selected, push an empty object in to dataSet\n        emptyOption[LIVE_CONSTANTS.LABEL_KEY]   = LIVE_CONSTANTS.EMPTY_KEY;\n        emptyOption[LIVE_CONSTANTS.LABEL_VALUE] = options.EMPTY_VALUE || LIVE_CONSTANTS.EMPTY_VALUE;\n        dataSet.push(emptyOption);\n    }\n    _.each(data, key => {\n        const value  = key[options.aliasColumn];\n        const option = {};\n        if (value !== null && value !== '') {\n            option[LIVE_CONSTANTS.LABEL_KEY]   = value;\n            option[LIVE_CONSTANTS.LABEL_VALUE] = value;\n            dataSet.push(option);\n        }\n    });\n    setDataFields(formField, options);\n    formField.dataset = dataSet;\n}\n\n/**\n * @ngdoc function\n * @name wm.widgets.live.LiveWidgetUtils#fetchDistinctValues\n * @methodOf wm.widgets.live.LiveWidgetUtils\n * @function\n *\n * @description\n * Function to fetch the distinct values for a field\n *\n * @param {object} scope scope of the widget\n * @param {object} formFields definitions of the column/ field\n * @param {string} widget widget property on the field\n * @param {boolean} isEnableEmptyFilter is null or empty values allowed on filter\n *\n */\nexport function fetchDistinctValues(dataSource, formFields, options) {\n    if (_.isEmpty(formFields)) {\n        return;\n    }\n    formFields.forEach(formField => {\n        getDistinctValuesForField(dataSource, formField, options);\n    });\n}\n\n/**\n * @ngdoc function\n * @name wm.widgets.live.LiveWidgetUtils#getDistinctValuesForField\n * @methodOf wm.widgets.live.LiveWidgetUtils\n * @function\n *\n * @description\n * Function to fetch the distinct values for a field\n *\n * @param {object} scope scope of the widget\n * @param {object} formFields definitions of the column/ field\n * @param {string} widget widget property on the field\n * @param {boolean} isEnableEmptyFilter is null or empty values allowed on filter\n *\n */\nexport function getDistinctValuesForField(dataSource, formField, options?) {\n    if (!dataSource || !formField || formField.isDataSetBound) {\n        return;\n    }\n    if (isSearchWidgetType(formField[options.widget])) {\n        const dataoptions =  getDistinctFieldProperties(dataSource, formField);\n        formField.dataoptions = dataoptions;\n        setDataFields(formField, Object.assign(options || {}, dataoptions));\n        formField.datasource = dataSource;\n    } else {\n        interpolateBindExpressions(formField.viewParent, formField.filterexpressions, (filterexpressions) => {\n            formField.filterexpressions = filterexpressions;\n            getDistinctValues(dataSource, formField, options.widget).then((res: any) => {\n                setFieldDataSet(res.field, res.data, {\n                    aliasColumn: res.aliasColumn,\n                    widget: options.widget,\n                    isEnableEmptyFilter: getEnableEmptyFilter(options.enableemptyfilter),\n                    EMPTY_VALUE: options.EMPTY_VALUE\n                });\n            });\n        });\n    }\n}\n\nfunction isDefinedAndNotEmpty(val) {\n    return isDefined(val) && val !== '' && val !== null;\n}\n\n/**\n * @ngdoc function\n * @name wm.widgets.live.getRangeFieldValue\n * @methodOf wm.widgets.live.LiveWidgetUtils\n * @function\n *\n * @description\n * Function to get the field value for range\n *\n * @param {string} minValue min value selected\n * @param {string} maxValue max value selected\n */\nexport function getRangeFieldValue(minValue, maxValue) {\n    let fieldValue;\n    if (isDefinedAndNotEmpty(minValue) && isDefinedAndNotEmpty(maxValue)) {\n        fieldValue = [minValue, maxValue];\n    } else if (isDefinedAndNotEmpty(minValue)) {\n        fieldValue = minValue;\n    } else if (isDefinedAndNotEmpty(maxValue)) {\n        fieldValue = maxValue;\n    }\n    return fieldValue;\n}\n/**\n * @ngdoc function\n * @name wm.widgets.live.getRangeMatchMode\n * @methodOf wm.widgets.live.LiveWidgetUtils\n * @function\n *\n * @description\n * Function to get the match mode for range\n *\n * @param {string} minValue min value selected\n * @param {string} maxValue max value selected\n */\nexport function getRangeMatchMode(minValue, maxValue) {\n    let matchMode;\n    // If two values exists, then it is between. Otherwise, greater or lesser\n    if (isDefinedAndNotEmpty(minValue) && isDefinedAndNotEmpty(maxValue)) {\n        matchMode = MatchMode.BETWEEN;\n    } else if (isDefinedAndNotEmpty(minValue)) {\n        matchMode = MatchMode.GREATER;\n    } else if (isDefinedAndNotEmpty(maxValue)) {\n        matchMode = MatchMode.LESSER;\n    }\n    return matchMode;\n}\n/**\n * @ngdoc function\n * @name wm.widgets.live.getEnableEmptyFilter\n * @methodOf wm.widgets.live.LiveWidgetUtils\n * @function\n *\n * @description\n * This function checks if enable filter options is set on live filter\n *\n * @param {object} enableemptyfilter empty filter options\n */\nexport function getEnableEmptyFilter(enableemptyfilter) {\n    return enableemptyfilter && _.intersection(enableemptyfilter.split(','), LIVE_CONSTANTS.NULL_EMPTY).length > 0;\n}\n/**\n * @ngdoc function\n * @name wm.widgets.live.getEmptyMatchMode\n * @methodOf wm.widgets.live.LiveWidgetUtils\n * @function\n *\n * @description\n * Function to get the match mode based on the filter selected\n *\n * @param {object} enableemptyfilter empty filter options\n */\nexport function getEmptyMatchMode(enableemptyfilter) {\n    let matchMode;\n    const emptyFilterOptions = _.split(enableemptyfilter, ',');\n    if (_.intersection(emptyFilterOptions, LIVE_CONSTANTS.NULL_EMPTY).length === 2) {\n        matchMode = MatchMode.NULLOREMPTY;\n    } else if (_.includes(emptyFilterOptions, LIVE_CONSTANTS.NULL)) {\n        matchMode = MatchMode.NULL;\n    } else if (_.includes(emptyFilterOptions, LIVE_CONSTANTS.EMPTY)) {\n        matchMode = MatchMode.EMPTY;\n    }\n    return matchMode;\n}\n\n/**\n * converts the data passed to array.\n *  -> Array: [1,2,3] - [1,2,3]\n *  -> String: a,b,c - ['a','b','c']\n *  -> object: {a:1} - [{a:1}]\n *  -> null - []\n *  -> undefined - []\n * @param data\n * @returns {Array<any>}\n */\nexport const createArrayFrom = (data): Array<any> => {\n\n    if (_.isUndefined(data) || _.isNull(data)) {\n        return [];\n    }\n\n    if (_.isString(data)) {\n        data = data.split(',').map(Function.prototype.call, String.prototype.trim);\n    }\n\n    if (!_.isArray(data)) {\n        data = [data];\n    }\n\n    return data;\n};\n\n/**\n * @ngdoc function\n * @name wm.widgets.live.applyFilterOnField\n * @methodOf wm.widgets.live.LiveWidgetUtils\n * @function\n *\n * @description\n * Function to get the updated values when filter on field is changed\n *\n * @param {object} $scope scope of the filter field/form field\n * @param {object} filterDef filter/form definition of the field\n * @param {boolean} isFirst boolean value to check if this method is called on load\n */\nexport function applyFilterOnField(dataSource, filterDef, formFields, newVal, options: any = {}) {\n    const fieldName      = filterDef.field || filterDef.key;\n    const filterOnFields = _.filter(formFields, {'filter-on': fieldName});\n\n    newVal = filterDef['is-range'] ? getRangeFieldValue(filterDef.minValue, filterDef.maxValue) : (isDefined(newVal) ? newVal : filterDef.value);\n    if (!dataSource || (options.isFirst && (_.isUndefined(newVal) || newVal === ''))) {\n        return;\n    }\n    // Loop over the fields for which the current field is filter on field\n    _.forEach(filterOnFields, filterField => {\n        const filterKey    = filterField.field || filterField.key;\n        const lookUpField  = filterDef['lookup-field'] || filterDef._primaryKey;\n        const filterWidget = filterField['edit-widget-type'] || filterField.widgettype;\n        let filterFields = {};\n        let filterOn     = filterField['filter-on'];\n        let filterVal;\n        let fieldColumn;\n        let matchMode;\n        if (!isDataSetWidget(filterWidget) || filterField.isDataSetBound || filterOn === filterKey) {\n            return;\n        }\n        // For related fields, add lookupfield for query generation\n        if (filterDef && filterDef['is-related']) {\n            filterOn += '.' +  lookUpField;\n        }\n        if (isDefined(newVal)) {\n            if (filterDef['is-range']) {\n                matchMode = getRangeMatchMode(filterDef.minValue, filterDef.maxValue);\n            } else if (getEnableEmptyFilter(options.enableemptyfilter) && newVal === LIVE_CONSTANTS.EMPTY_KEY) {\n                matchMode = getEmptyMatchMode(options.enableemptyfilter);\n            } else {\n                matchMode = MatchMode.EQUALS;\n            }\n            filterVal = (_.isObject(newVal) && !_.isArray(newVal)) ? newVal[lookUpField] : newVal;\n            filterFields[filterOn] = {\n                'value'     : filterVal,\n                'matchMode' : matchMode\n            };\n        } else {\n            filterFields = {};\n        }\n        fieldColumn = filterKey;\n\n        if (isSearchWidgetType(filterWidget) && filterField.dataoptions) {\n            filterField.dataoptions.filterFields = filterFields;\n        } else {\n            dataSource.execute(DataSource.Operation.GET_DISTINCT_DATA_BY_FIELDS, {\n                'fields'        : fieldColumn,\n                'filterFields'  : filterFields,\n                'pagesize'      : filterField.limit\n            }).then(response => {\n                setFieldDataSet(filterField, response.data, {\n                    aliasColumn: fieldColumn,\n                    widget: options.widget || 'widgettype',\n                    isEnableEmptyFilter: getEnableEmptyFilter(options.enableemptyfilter),\n                    EMPTY_VALUE: options.EMPTY_VALUE\n                });\n            }, noop);\n        }\n    });\n}\n\n// Transform data as required by data table\nexport function transformData(dataObject, variableName) {\n    let newObj,\n        tempArr,\n        keys,\n        oldKeys,\n        numKeys,\n        newObject,\n        tempObj;\n\n    // data sanity testing\n    dataObject = dataObject || [];\n    // if the dataObject is not an array make it an array\n    if (!_.isArray(dataObject)) {\n        // if the data returned is of type string, make it an object inside an array\n        if (_.isString(dataObject)) {\n            keys = variableName.substring(variableName.indexOf('.') + 1, variableName.length).split('.');\n            oldKeys = [];\n            numKeys = keys.length;\n            newObject = {};\n            tempObj = newObject;\n\n            // loop over the keys to form appropriate data object required for grid\n            keys.forEach((key, index) => {\n                // loop over old keys to create new object at the iterative level\n                oldKeys.forEach(oldKey  => {\n                    tempObj = newObject[oldKey];\n                });\n                tempObj[key] = index === numKeys - 1 ? dataObject : {};\n                oldKeys.push(key);\n            });\n\n            // change the string data to the new dataObject formed\n            dataObject = newObject;\n        }\n        dataObject = [dataObject];\n    } else {\n        /*if the dataObject is an array and each value is a string, then lite-transform the string to an object\n         * lite-transform: just checking if the first value is string and then transforming the object, instead of traversing through the whole array\n         * */\n        if (_.isString(dataObject[0])) {\n            tempArr = [];\n            _.forEach(dataObject, str => {\n                newObj = {};\n                newObj[variableName.split('.').join('-')] = str;\n                tempArr.push(newObj);\n            });\n            dataObject = tempArr;\n        }\n    }\n    return dataObject;\n}\n","import { isDefined } from '@wm/core';\n\n/**\n * Widget Registry\n */\nconst registryById = new Map<string, any>();\n\n/**\n * returns the widget by the given widgetId\n */\nexport const getById = (widgetId: string) => registryById.get(widgetId);\n\n\n/**\n * Registers the Widget with the given id and name\n * Makes the Widget available with the viewParent\n * returns unRegister method\n */\nexport const register = (widget: any, viewParent: any, widgetId: string, name?: string): () => void => {\n    let registered = false;\n    registryById.set(widgetId, widget);\n    if (name) {\n        if (isDefined(viewParent.Widgets)) {\n            registered = true;\n            viewParent.Widgets[name] = widget;\n        }\n    }\n\n    // Unregister method.\n    return () => {\n        registryById.delete(widgetId);\n        if (registered) {\n            viewParent.Widgets[name] = undefined;\n        }\n    };\n};\n\n/**\n * Deregisters the oldname in widgets registry and sets new name\n */\nexport const renameWidget = (viewParent: any, widget: any, nv: string, ov?: string) => {\n    if (!isDefined(viewParent.Widgets)) {\n        return;\n    }\n    if (ov) {\n        viewParent.Widgets[ov] = undefined;\n    }\n    if (nv) {\n        viewParent.Widgets[nv] = widget;\n    }\n};\n","import { IDGenerator } from '@wm/core';\n\nexport const widgetIdGenerator = new IDGenerator('widget-id');\n","\nexport const EVENTS_MAP = new Map<string, string>([\n    // ['enterkeypress', 'keypress.enter']\n   ['tap', 'click']\n]);\n\n\n// TODO: Implement touch events for the mobile\n\nexport const DISPLAY_TYPE = {\n    BLOCK: 'block',\n    INLINE_BLOCK: 'inline-block',\n    INLINE: 'inline'\n};\n\n// set of boolean attrs\nconst BOOLEAN_ATTRS = new Set([\n    'readonly', 'autofocus', 'disabled', 'startchecked', 'multiple',\n    'selected', 'required', 'controls', 'autoplay', 'loop', 'muted', 'show'\n]);\n\n/**\n * Returns true if the provided key is a boolean attribute\n * @param {string} key\n * @returns {boolean}\n */\nexport const isBooleanAttr = (key: string): boolean => BOOLEAN_ATTRS.has(key);\n\nconst DIMENSION_PROPS = new Set([\n    'width',\n    'height',\n    'iconheight',\n    'iconwidth',\n    'popoverwidth',\n    'popoverheight',\n    'imagewidth',\n    'imageheight'\n]);\n\nexport const isDimensionProp = (key: string): boolean => DIMENSION_PROPS.has(key);\n\nexport const DEBOUNCE_TIMES = {\n    PAGINATION_DEBOUNCE_TIME : 250\n};\n","import { $appDigest, $unwatch, isChangeFromWatch, isObject, resetChangeFromWatch, toBoolean, toDimension } from '@wm/core';\n\nimport { BaseComponent } from '../common/base/base.component';\nimport { getWidgetPropsByType, PROP_TYPE } from './widget-props';\nimport { isStyle } from './styler';\nimport { getConditionalClasses, getWatchIdentifier } from '../../utils/widget-utils';\nimport { isBooleanAttr, isDimensionProp } from './constants';\n\ndeclare const _;\n\n/**\n * Returns the parsed value based on the provided type\n * if the type is PROP_TYPE.NUMBER returns a number/NaN\n * if the type is PROP_BOOLEAN returns true/false\n * else returns the same value without any type conversion\n *\n * @param {string} key\n * @param value\n * @param {PROP_TYPE} type\n * @returns {any}\n */\nconst parseValue = (key: string, value: any, type: PROP_TYPE): any => {\n    if (type === PROP_TYPE.BOOLEAN) {\n        return toBoolean(value, isBooleanAttr(key) && key);\n    }\n\n    if (type === PROP_TYPE.NUMBER) {\n        return +value;\n    }\n\n    return value;\n};\n\n\n/**\n * Whenever a property on a component changes through a proxy this method will be triggered\n * If the new value is not from a watch, the existing watch on that particular property will be removed\n * This method invokes the defaultPropertyChange handler where the common widget properties like name, class are handled\n * Notifies the component about the style/property change\n */\nexport const globalPropertyChangeHandler = (component: BaseComponent, key: string, nv: any) => {\n    const widgetId = component.widgetId;\n    const ov = component[key];\n\n    // if the change is not from the bound watch, remove the existing watch\n    if (!isChangeFromWatch()) {\n        $unwatch(getWatchIdentifier(widgetId, key));\n    }\n\n    resetChangeFromWatch();\n\n    const widgetProps = getWidgetPropsByType(component.getWidgetSubType());\n    const propInfo = widgetProps.get(key);\n    if (propInfo) {\n        const type = propInfo.type;\n        if (type) {\n            nv = parseValue(key, nv, type);\n        }\n    }\n\n    // Set the value in the component and trigger appDigest when there is a change in the value\n    if (nv !== ov || isObject(nv) || isObject(ov)) {\n\n        if (isDimensionProp(key)) {\n            nv = toDimension(nv);\n        } else if (_.startsWith(nv, 'resources/')) {\n            const ref: any = component;\n            if (ref._parentPrefab_ === undefined) {\n                ref._parentPrefab_ = component.$element.closest('[prefabname][prefabname!=\"__self__\"]').attr('prefabname') || '';\n            }\n            if (ref._parentPrefab_) {\n                nv = `./app/prefabs/${ref._parentPrefab_}/${nv}`;\n            }\n        }\n\n        component[key] = nv;\n\n        if (isStyle(key)) {\n            component.notifyStyleChange(key, nv, ov);\n        } else {\n\n            if (key === 'conditionalclass') {\n                nv = getConditionalClasses(nv, ov);\n            }\n\n            if (propInfo) {\n                component.notifyPropertyChange(key, nv, ov);\n            }\n        }\n\n        $appDigest();\n    }\n};\n","/**\n * Proxy Provider - Creates a JS proxy for the given object\n */\nimport { propNameCSSKeyMap } from './styler';\nimport { globalPropertyChangeHandler } from './property-change-handler';\nimport { BaseComponent } from '../common/base/base.component';\n\ndeclare const _;\n\n/**\n *  proxy handler for the components\n */\nexport const proxyHandler = {\n    set: (target: BaseComponent, key: string, value: any): boolean => {\n        globalPropertyChangeHandler(target, key, value);\n        return true;\n    },\n    get: (target: BaseComponent, key: string): any => {\n        const v = target[key];\n        if (_.isFunction(v)) { // bind the proper context for the methods\n            return v.bind(target);\n        }\n        return v;\n    }\n};\n\nconst $RAF = window.requestAnimationFrame;\nconst $RAFQueue = [];\n\nconst invokeLater = fn => {\n    if (!$RAFQueue.length) {\n        $RAF(() => {\n            $RAFQueue.forEach(f => f());\n            $RAFQueue.length = 0;\n        });\n    }\n    $RAFQueue.push(fn);\n};\n\nexport class WidgetProxyProvider {\n    public static create(instance: BaseComponent, widgetSubType: string, propsByWidgetSubType: Map<string, any>) {\n        // If the native Proxy is supported\n        if ((window as any).Proxy) {\n            return new Proxy(instance, proxyHandler);\n        } else {\n\n            // If the native Proxy is not supported, IE11\n            const widget = Object.create(instance);\n\n            // bind proper context for the methods\n            invokeLater(() => {\n                for (const key in instance) {\n                    if (_.isFunction(instance[key]) && key !== 'constructor' && key !== 'super' && !_.startsWith(key, 'ng')) {\n                        instance[key] = instance[key].bind(instance);\n                    }\n                }\n            });\n\n            // define setters and getters for styles\n            Object.keys(propNameCSSKeyMap)\n                .forEach(key => {\n                    Object.defineProperty(widget, key, {\n                        get: () => instance[key],\n                        set: nv => globalPropertyChangeHandler(instance, key, nv)\n                    });\n                });\n\n            // define the setters and getters for Props\n            if (propsByWidgetSubType) {\n                propsByWidgetSubType\n                    .forEach((value, key) => {\n                        Object.defineProperty(widget, key, {\n                            get: () => instance[key],\n                            set: nv => globalPropertyChangeHandler(instance, key, nv)\n                        });\n                    });\n            }\n\n            return widget;\n        }\n    }\n}\n","import { AfterContentInit, AfterViewInit, ElementRef, Injector, OnDestroy, OnInit } from '@angular/core';\nimport { EventManager } from '@angular/platform-browser';\n\nimport { ReplaySubject, Subject } from 'rxjs';\n\nimport { $invokeWatchers, $parseEvent, $unwatch, $watch, addClass, setCSS, setCSSFromObj, App, isDefined, removeAttr, removeClass, setAttr, switchClass } from '@wm/core';\n\nimport { getWidgetPropsByType } from '../../framework/widget-props';\nimport { isStyle } from '../../framework/styler';\nimport { register, renameWidget } from '../../framework/widget-registry';\nimport { ChangeListener, Context, IWidgetConfig } from '../../framework/types';\nimport { widgetIdGenerator } from '../../framework/widget-id-generator';\nimport { DISPLAY_TYPE, EVENTS_MAP } from '../../framework/constants';\nimport { WidgetProxyProvider } from '../../framework/widget-proxy-provider';\nimport { getWatchIdentifier } from '../../../utils/widget-utils';\n\ndeclare const $, _;\n\n// Gets list of classes to add and remove and applies on the $el\nconst updateClasses = (toAdd, toRemove, el) => {\n    if (toRemove && toRemove.length) {\n        removeClass(el, _.join(toRemove, ' '));\n    }\n    if (toAdd && toAdd.length) {\n        addClass(el, _.join(toAdd, ' '));\n    }\n};\n\n// To add and remove styles on the $el\nconst updateStyles = (nv, ov, el) => {\n    if (ov && _.isObject(ov)) {\n        const keys = Object.keys(ov || {});\n        keys.forEach(function(key) {\n            setCSS(el, key, '');\n        });\n    }\n    if (nv && _.isObject(nv)) {\n        setCSSFromObj(el, nv);\n    }\n\n};\n\nexport abstract class BaseComponent implements OnDestroy, OnInit, AfterViewInit, AfterContentInit {\n\n    /**\n     * unique identifier for the widget\n     */\n    public readonly widgetId: any;\n\n    public isDestroyed: boolean;\n\n    /**\n     * jQuery nativeElement reference of the component root\n     */\n    public get $element() {\n        return $(this.nativeElement);\n    }\n\n    /**\n     * DOM node reference of the component root\n     */\n    protected readonly nativeElement: HTMLElement;\n\n    /**\n     * Type of the component\n     */\n    protected readonly widgetType: string;\n\n    /**\n     * Most of the cases it is same as widgetType\n     * for specific widgets like charts widgetType can be wm-chart where as the subtype can be wm-bar-chart\n     */\n    protected readonly widgetSubType: string;\n\n    /**\n     * Proxy for the component instance.\n     */\n    protected widget: any;\n\n    /**\n     * View parent component\n     * eg, Page, Partial, Prefab\n     */\n    protected readonly viewParent: any;\n\n    /**\n     * EventManger to add/remove events\n     */\n    protected readonly eventManager: EventManager;\n\n    /**\n     * App Locale\n     */\n    public readonly appLocale: any;\n\n    /**\n     * Style change subject and observable\n     */\n    private readonly styleChange = new ReplaySubject();\n\n    /**\n     * Property change subject and observable\n     */\n    private readonly propertyChange = new Subject();\n\n    /**\n     * On Ready State change subject and observable\n     */\n    private readonly readyState = new Subject();\n\n    /**\n     * Component destroy subject and observable\n     */\n    private readonly destroy = new Subject();\n\n    /**\n     * Map of event handler callbacks\n     */\n    private eventHandlers = new Map<string, {callback: Function, locals: any}>();\n\n    /**\n     * context of the widget\n     * when the widget is preset inside a repeater this context will have the repeater related properties\n     */\n    public context: any;\n\n    /**\n     * Initial state of the widget.\n     * Will be undefined once the initial properties are set on to the component\n     */\n    private initState: Map<string, any>;\n\n    /**\n     * Internal flag to determine whether to wait for the widget initialization or not\n     * If the initPromise is provided in the construction wait till the promise is resolved\n     * If the initPromise is not provided proceed with the initialization, which is the default behavior.\n     */\n    private readonly delayedInit: boolean;\n\n    /**\n     * Display type of the component. eg, block(Default), inline-block, inline etc\n     */\n    private readonly displayType: string;\n\n    /**\n     * Holds the event registration functions.\n     * these functions needs to be executed after onViewInit\n     */\n    private toBeSetupEventsQueue: Array<Function> = [];\n\n    public __cloneable__ = false;\n\n    public widgetProps: Map<string, any>;\n\n    private $attrs = new Map<string, string>();\n\n    protected constructor(\n        protected inj: Injector,\n        config: IWidgetConfig,\n        initPromise?: Promise<any> // Promise on which the initialization has to wait\n    ) {\n        const elementRef = inj.get(ElementRef);\n        this.nativeElement = elementRef.nativeElement;\n        this.widgetType = config.widgetType;\n        this.widgetSubType = config.widgetSubType || config.widgetType;\n        this.viewParent = (inj as any).view.component;\n        this.displayType = config.displayType || DISPLAY_TYPE.BLOCK;\n        this.context = (inj as any).view.context;\n        this.widget = this.createProxy();\n        this.eventManager = inj.get(EventManager);\n        (this.nativeElement as any).widget = this.widget;\n\n        this.appLocale = inj.get(App).appLocale || {};\n\n        this.initContext();\n\n        if (config.hostClass) {\n            addClass(this.nativeElement, config.hostClass);\n        }\n\n        this.widgetId = this.generateWidgetId();\n        setAttr(this.nativeElement, 'widget-id', this.widgetId, true);\n\n        // register default property change handler and style change handler\n        this.registerStyleChangeListener(this.onStyleChange, this);\n        this.registerPropertyChangeListener(this.onPropertyChange, this);\n\n        // if the initPromise is provided, wait till the promise is resolved to proceed with the widget initialization\n        if (!initPromise) {\n            this.initWidget();\n        } else {\n            this.delayedInit = true;\n            initPromise.then(() => {\n                this.initWidget();\n                this.setInitProps();\n            });\n        }\n    }\n\n    public getNativeElement(): HTMLElement {\n        return this.nativeElement;\n    }\n\n    public getWidgetType(): string {\n        return this.widgetType;\n    }\n\n    public getWidgetSubType(): string {\n        return this.widgetSubType;\n    }\n\n    public getWidget(): any {\n        return this.widget;\n    }\n\n    public getViewParent(): any {\n        return this.viewParent;\n    }\n\n    public notifyStyleChange(key: string, nv: any, ov: any) {\n        this.styleChange.next({key, nv, ov});\n    }\n\n    public notifyPropertyChange(key: string, nv: any, ov: any) {\n        this.propertyChange.next({key, nv, ov});\n    }\n\n    public registerStyleChangeListener(fn: ChangeListener, ctx?: any) {\n        if (ctx) {\n            fn = fn.bind(ctx);\n        }\n        this.styleChange.subscribe(({key, nv, ov}) => fn(key, nv, ov));\n    }\n\n    public registerReadyStateListener(fn: Function, ctx?: any) {\n        if (ctx) {\n            fn = fn.bind(ctx);\n        }\n        if (this.readyState.isStopped) {\n            fn();\n            return;\n        }\n        this.readyState.subscribe(() => fn());\n    }\n\n    public registerPropertyChangeListener(fn: ChangeListener, ctx?: any) {\n        if (ctx) {\n            fn = fn.bind(ctx);\n        }\n        this.propertyChange.subscribe(({key, nv, ov}) => fn(key, nv, ov));\n    }\n\n    public registerDestroyListener(fn: Function, ctx?: any) {\n        if (ctx) {\n            fn = fn.bind(ctx);\n        }\n        this.destroy.subscribe(() => {}, () => {}, () => fn());\n    }\n\n    public getDisplayType(): string {\n        return this.displayType;\n    }\n\n    protected createProxy(): any {\n        return WidgetProxyProvider.create(this, this.widgetSubType, getWidgetPropsByType(this.widgetSubType));\n    }\n\n    protected initContext() {\n        const context = (this.inj as any).view.context;\n\n        const parentContexts = this.inj.get(Context, {});\n\n        // assign the context property accordingly\n        if (this.viewParent !== context) {\n            this.context = context;\n        } else {\n            this.context = {};\n        }\n\n        if (parentContexts) {\n            this.context = Object.assign({}, ...(<Array<any>>parentContexts), this.context);\n        }\n    }\n\n    /**\n     * set the value on the proxy object ie, widget\n     * setting the property on the proxy will invoke the change listeners\n     * @param {string} key\n     * @param value\n     */\n    public setWidgetProperty(key: string, value: any) {\n        this.widget[key] = value;\n    }\n\n    public getAttr(attrName: string): string {\n        return this.$attrs.get(attrName);\n    }\n\n    /**\n     * returns app instance\n     * @returns {App}\n     */\n    public getAppInstance() {\n        return this.inj.get(App);\n    }\n\n    /**\n     * Generates a unique id\n     * Default pattern is `widget-id-${id}`\n     * Components can override this method to generate a different id eg, bar-chart-1\n     */\n    protected generateWidgetId(): string {\n        return widgetIdGenerator.nextUid();\n    }\n\n    /**\n     * Handles the common functionality across the components\n     * eg,\n     *  1. value of the class property will be applied on the host element\n     *  2. based on the value of show property component is shown/hidden\n     *\n     * @param {string} key\n     * @param nv\n     * @param ov\n     */\n    protected onPropertyChange(key: string, nv: any, ov?: any) {\n        if (key === 'show') {\n            this.nativeElement.hidden = !nv;\n        } else if (key === 'hint') {\n            setAttr(this.nativeElement, 'title', nv);\n        } else if (key === 'class') {\n            switchClass(this.nativeElement, nv, ov);\n        } else if (key === 'name' || key === 'tabindex') {\n            setAttr(this.nativeElement, key, nv);\n            if (key === 'name' && nv) {\n                renameWidget(this.viewParent, this.widget, nv, ov);\n            }\n        } else if (key === 'conditionalclass') {\n            // update classes if old and nv value are different\n            updateClasses(nv.toAdd, nv.toRemove, this.nativeElement);\n        } else  if (key === 'autoplay') {\n            const tagName = this.widgetType === 'wm-audio' ? 'audio' : 'video';\n            // Trigger media(audio/video) element load method after changing autoplay property\n            this.nativeElement.querySelector(tagName).load();\n        }  else if (key === 'conditionalstyle') {\n            // update styles if old and nv value are different\n            updateStyles(nv, ov, this.nativeElement);\n        }\n    }\n\n    /**\n     * Default style change handler\n     */\n    protected onStyleChange(k: string, nv: any, ov?: any) {}\n\n    /**\n     * Register the widget with the widgetRegistry\n     */\n    protected registerWidget(widgetName: string) {\n        this.registerDestroyListener(register(this.widget, this.viewParent, this.widgetId, widgetName));\n    }\n\n    /**\n     * override the\n     */\n    protected getMappedEventName(eventName) {\n        return EVENTS_MAP.get(eventName) || eventName;\n    }\n\n    /**\n     * invoke the event handler\n     * Components can override this method to execute custom logic before invoking the user callback\n     */\n    protected handleEvent(node: HTMLElement, eventName: string, eventCallback: Function, locals: any, meta?: string) {\n        this.eventManager.addEventListener(\n            node,\n            eventName,\n            e => {\n                locals.$event = e;\n                if (meta === 'delayed') {\n                   setTimeout(() => eventCallback(), 150);\n                } else {\n                    return eventCallback();\n                }\n            }\n        );\n    }\n\n    /**\n     * parse the event expression and save reference to the function inside eventHandlers map\n     * If the component provides a override for an event through @Event decorator invoke that\n     * else invoke the resolved function\n     *\n     * @param {string} eventName\n     * @param {string} expr\n     */\n    protected processEventAttr(eventName: string, expr: string, meta?: string) {\n        const fn = $parseEvent(expr);\n        const locals = this.context;\n        locals.widget = this.widget;\n        const boundFn = fn.bind(undefined, this.viewParent, locals);\n\n        const eventCallback = () => {\n            let boundFnVal;\n            $invokeWatchers(true);\n            try {\n                // If the event is bound directly to the variable then we need to internally handle\n                // the promise returned by the variable call.\n                boundFnVal = boundFn();\n                if (boundFnVal instanceof Promise) {\n                    boundFnVal.then( response => response, err => err);\n                } else {\n                    return boundFnVal;\n                }\n            } catch (e) {\n                console.error(e);\n            }\n        };\n\n        this.eventHandlers.set(this.getMappedEventName(eventName), {callback: eventCallback, locals});\n        // prepend eventName with on and convert it to camelcase.\n        // eg, \"click\" ---> onClick\n        const onEventName =  _.camelCase(`on-${eventName}`);\n        // save the eventCallback in widgetScope.\n        this[onEventName] = eventCallback;\n\n        // events needs to be setup after viewInit\n        this.toBeSetupEventsQueue.push(() => {\n            this.handleEvent(this.nativeElement, this.getMappedEventName(eventName), eventCallback, locals, meta);\n        });\n    }\n\n    /**\n     * Process the bound property\n     * Register a watch on the bound expression\n     */\n    protected processBindAttr(propName: string, expr: string) {\n\n        this.initState.delete(propName);\n\n        this.registerDestroyListener(\n            $watch(\n                expr,\n                this.viewParent,\n                this.context,\n                nv => this.widget[propName] = nv,\n                getWatchIdentifier(this.widgetId, propName),\n                propName === 'datasource'\n            )\n        );\n    }\n\n    /**\n     * Remove watch on the bound property\n     */\n    protected removePropertyBinding(propName: string) {\n        $unwatch(getWatchIdentifier(this.widgetId, propName));\n    }\n\n    /**\n     * invoke the event callback method\n     * @param {string} eventName\n     * @param extraLocals\n     */\n    public invokeEventCallback(eventName: string, extraLocals?: any) {\n        const callbackInfo = this.eventHandlers.get(eventName);\n        if (callbackInfo) {\n            const fn = callbackInfo.callback;\n            const locals = callbackInfo.locals || {};\n\n            if (fn) {\n                return fn(Object.assign(locals, extraLocals));\n            }\n        }\n    }\n\n    /**\n     * Process the attribute\n     * If the attribute is an event expression, generate a functional representation of the expression\n     *      and keep in eventHandlers\n     * If the attribute is a bound expression, register a watch on the expression\n     */\n    protected processAttr(attrName: string, attrValue: string) {\n        const {0: propName, 1: type, 2: meta, length} = attrName.split('.');\n        if (type === 'bind') {\n            // if the show property is bound, set the initial value to false\n            if (propName === 'show') {\n                this.nativeElement.hidden = true;\n            }\n            this.processBindAttr(propName, attrValue);\n        } else if (type === 'event') {\n            this.processEventAttr(propName, attrValue, meta);\n        } else if (length === 1) {\n            // remove class and name attributes. Component will set them on the proper node\n            if (attrName === 'class') {\n                removeClass(this.nativeElement, attrValue);\n            } else if (attrName === 'tabindex' || attrName === 'name') {\n                removeAttr(this.nativeElement, attrName);\n            }\n\n            this.initState.set(propName, attrValue);\n        } else {\n            // custom attributes provided on elDef;\n        }\n    }\n\n    /**\n     * Process the attributes\n     */\n    private processAttrs() {\n        const elDef = (this.inj as any).elDef;\n\n        for (const [, attrName, attrValue] of elDef.element.attrs) {\n            this.$attrs.set(attrName, attrValue);\n            this.processAttr(attrName, attrValue);\n        }\n    }\n\n    /**\n     * Update the initState with the default property values and the values provided in the markup\n     * Process the attributes\n     * Register the widget\n     */\n    protected initWidget() {\n        this.initState = new Map<string, any>();\n\n        // get the widget properties\n        const widgetProps: Map<string, any> = getWidgetPropsByType(this.widgetSubType);\n        widgetProps.forEach((v, k) => {\n            if (isDefined(v.value)) {\n                this.initState.set(k, v.value);\n            }\n        });\n\n        this.widgetProps = widgetProps;\n\n        this.processAttrs();\n\n        this.registerWidget(this.initState.get('name'));\n    }\n\n    /**\n     * Update the default properties and the properties provided in the markup in component\n     * Invoking this method will result in invocation of propertyChange handlers on the component for the first time\n     */\n    protected setInitProps() {\n        if (this.initState.get('name')) {\n            this.widget.name = this.initState.get('name');\n        }\n        this.initState.forEach((v, k) => {\n            // name is already set, ignore name\n            // if the key is part of to be ignored attributes list do not set it on the component instance\n            if ((this.widgetProps.get(k) || isStyle(k)) && k !== 'name') {\n                this.widget[k] = v;\n            }\n        });\n        this.initState.clear();\n        this.initState = undefined;\n\n        this.readyState.next();\n        this.readyState.complete();\n    }\n\n    /**\n     * Returns true, if a listener registered for the given event on this widget markup.\n     * @param eventName\n     * @returns {boolean}\n     */\n    protected hasEventCallback(eventName): boolean {\n        return this.eventHandlers.has(eventName);\n    }\n\n    /**\n     * Sets the focus on the widget\n     */\n    protected focus(): void {\n        /**\n         * Check for the nodes having focus-target attribute inside the element\n         * If found, focus the first node (eg, date widget)\n         * else, focus the element (eg, text widget)\n         */\n        let $target = this.$element[0].querySelector('[focus-target]');\n        if (!$target) {\n            $target = this.$element[0];\n        }\n        $target.focus();\n    }\n\n    // Defining the execute method on BaseComponent. If dataset is binded to widgets ouptut then datasource.execute will be defined\n    protected execute(operation, options): any {\n\n    }\n\n    /**\n     * nativeElement will be available by this time\n     * if the delayInit is false, properties meta will be available by this time\n     * Invoke the setInitProps if the delayInit is false\n     */\n    ngOnInit() {\n        if (!this.delayedInit) {\n            this.setInitProps();\n        }\n    }\n\n    /**\n     * Register the events\n     */\n    ngAfterViewInit() {\n        if (this.toBeSetupEventsQueue.length) {\n            for (const fn of this.toBeSetupEventsQueue) {\n                fn();\n            }\n        }\n        this.toBeSetupEventsQueue.length = 0;\n    }\n\n    ngAfterContentInit() {}\n\n    ngOnDestroy() {\n        this.isDestroyed = true;\n        this.widget = Object.create(null);\n        this.styleChange.complete();\n        this.propertyChange.complete();\n        this.destroy.complete();\n    }\n}\n","import { BaseComponent } from './base.component';\n\nexport abstract class StylableComponent extends BaseComponent {\n    backgroundattachment: string;\n    backgroundcolor: string;\n    backgroundgradient: string;\n    backgroundimage: string;\n    backgroundposition: string;\n    backgroundrepeat: string;\n    backgroundsize: string;\n    bordercolor: string;\n    borderradius: string;\n    borderstyle: string;\n    borderwidth: string;\n    borderbottomwidth: string;\n    borderleftwidth: string;\n    borderrightwidth: string;\n    bordertopwidth: string;\n    color: string;\n    cursor: string;\n    display: string;\n    fontsize: string;\n    fontfamily: string;\n    fontstyle: string;\n    fontunit: string;\n    fontvariant: string;\n    fontweight: string;\n    height: string;\n    horizontalalign: string;\n    lineheight: string;\n    margin: string;\n    marginbottom: string;\n    marginleft: string;\n    marginright: string;\n    margintop: string;\n    opacity: string;\n    overflow: string;\n    padding: string;\n    paddingbottom: string;\n    paddingleft: string;\n    paddingright: string;\n    paddingtop: string;\n    picturesource: string;\n    textalign: string;\n    textdecoration: string;\n    verticalalign: string;\n    visibility: string;\n    whitespace: string;\n    width: string;\n    wordbreak: string;\n    zindex: string;\n}\n","import { Directive, Inject, Self } from '@angular/core';\n\nimport { IRedrawableComponent, WidgetRef } from '../../framework/types';\n\n@Directive({\n    selector: '[redrawable]'\n})\nexport class RedrawableDirective implements IRedrawableComponent {\n    redraw: Function;\n    constructor(@Self() @Inject(WidgetRef) widget) {\n        this.redraw = () => widget.redraw();\n    }\n}\n","import { AfterViewInit, Attribute, Component, ContentChildren, HostBinding, Injector, OnInit } from '@angular/core';\n\nimport { noop, removeAttr } from '@wm/core';\n\nimport { APPLY_STYLES_TYPE, styler } from '../../../framework/styler';\nimport { IWidgetConfig } from '../../../framework/types';\nimport { registerProps } from './tab-pane.props';\nimport { StylableComponent } from '../../base/stylable.component';\nimport { TabsComponent } from '../tabs.component';\nimport { RedrawableDirective } from '../../redraw/redrawable.directive';\nimport { provideAsWidgetRef } from '../../../../utils/widget-utils';\n\nconst DEFAULT_CLS = 'tab-pane';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-tabpane',\n    hostClass: DEFAULT_CLS\n};\n\n@Component({\n    selector: 'div[wmTabPane]',\n    templateUrl: './tab-pane.component.html',\n    providers: [\n        provideAsWidgetRef(TabPaneComponent)\n    ]\n})\nexport class TabPaneComponent extends StylableComponent implements OnInit, AfterViewInit {\n    static initializeProps = registerProps();\n\n    public $lazyLoad = noop;\n    public name: string;\n    public show: boolean;\n    public smoothscroll: any;\n\n    @HostBinding('class.active') isActive = false;\n    @HostBinding('class.disabled') disabled = false;\n\n    // reference to the components which needs a redraw(eg, grid, chart) when the height of this component changes\n    @ContentChildren(RedrawableDirective, {descendants: true}) reDrawableComponents;\n\n    constructor(\n        inj: Injector,\n        private tabsRef: TabsComponent,\n        @Attribute('heading') public heading,\n        @Attribute('title') public title\n    ) {\n        super(inj, WIDGET_CONFIG);\n\n        // title property here serves the purpose of heading.\n        // TODO: make it common for all the widget.\n        removeAttr(this.nativeElement, 'title');\n    }\n\n    // parent tabs component will call this method for the order of callbacks to be proper\n    // order of callbacks - deselect, select, change\n    public invokeOnSelectCallback($event?: Event) {\n        this.invokeEventCallback('select', {$event});\n    }\n\n    public select($event?: Event) {\n        // When called programatically $event won't be available\n        if (this.isActive || this.disabled) {\n            return;\n        }\n\n        this.isActive = true;\n        this.$lazyLoad();\n        this.redrawChildren();\n        this.notifyParent($event);\n\n        if ($event) {\n            $event.stopPropagation();\n            $event.preventDefault();\n        }\n    }\n\n    public deselect() {\n        if (this.isActive) {\n            this.isActive = false;\n            this.invokeEventCallback('deselect');\n        }\n    }\n\n    private redrawChildren() {\n        setTimeout(() => {\n            if (this.reDrawableComponents) {\n                this.reDrawableComponents.forEach(c => c.redraw());\n            }\n        }, 100);\n    }\n\n    private notifyParent(evt?: Event) {\n        this.tabsRef.notifyChange(this, evt);\n    }\n\n    // select next valid tab\n    private handleSwipeLeft() {\n        this.tabsRef.next();\n    }\n\n    // select prev valid tab\n    private handleSwipeRight() {\n        this.tabsRef.prev();\n    }\n\n    // select event is called manually\n    protected handleEvent(node: HTMLElement, eventName: string, callback: Function, locals: any) {\n        if (eventName !== 'select') {\n            super.handleEvent(this.nativeElement, eventName, callback, locals);\n        }\n    }\n\n    onPropertyChange(key: string, nv: any, ov?: any) {\n        if (key === 'content') {\n            if (this.isActive) {\n                setTimeout(() => this.$lazyLoad(), 100);\n            }\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n\n    ngOnInit() {\n        super.ngOnInit();\n        this.title = this.title || this.heading;\n    }\n\n    ngAfterViewInit() {\n        styler(\n            this.nativeElement.querySelector('.tab-body') as HTMLElement,\n            this,\n            APPLY_STYLES_TYPE.CONTAINER\n        );\n        super.ngAfterViewInit();\n    }\n}\n","import { PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-tabpane',\n        new Map(\n            [\n                ['badgevalue', PROP_STRING],\n                ['badgetype', {value: 'default', ...PROP_STRING}],\n                ['class', PROP_STRING],\n                ['content', PROP_STRING],\n                ['disabled', PROP_BOOLEAN],\n                ['heading', PROP_STRING],\n                ['isdefaulttab', PROP_STRING],\n                ['name', PROP_STRING],\n                ['paneicon', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n                ['smoothscroll', {value: true, ...PROP_BOOLEAN}],\n                ['tabindex', {value: 0, ...PROP_NUMBER}],\n                ['title', {value: 'Tab Title', ...PROP_STRING}]\n            ]\n        )\n    );\n};\n","import { AfterContentInit, AfterViewInit, Attribute, Component, ContentChildren, Injector, OnInit, QueryList } from '@angular/core';\n\nimport { addClass, appendNode, noop, removeClass } from '@wm/core';\n\nimport { TabsAnimator } from './tabs.animator';\nimport { APPLY_STYLES_TYPE, styler } from '../../framework/styler';\nimport { IWidgetConfig } from '../../framework/types';\nimport { registerProps } from './tabs.props';\nimport { StylableComponent } from '../base/stylable.component';\nimport { TabPaneComponent } from './tab-pane/tab-pane.component';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\n\ndeclare const _, $;\n\nconst DEFAULT_CLS = 'app-tabs clearfix';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-tabs',\n    hostClass: DEFAULT_CLS\n};\n\n@Component({\n    selector: 'div[wmTabs]',\n    templateUrl: './tabs.component.html',\n    providers: [\n        provideAsWidgetRef(TabsComponent)\n    ]\n})\nexport class TabsComponent extends StylableComponent implements AfterContentInit, OnInit, AfterViewInit {\n    static initializeProps = registerProps();\n\n    public defaultpaneindex: number;\n    public transition: string;\n    public tabsposition: string;\n\n    public vertical: boolean;\n    public justified: boolean;\n    private activeTab: TabPaneComponent;\n    private readonly promiseResolverFn: Function;\n    private tabsAnimator: TabsAnimator;\n\n    @ContentChildren(TabPaneComponent) panes: QueryList<TabPaneComponent>;\n\n    constructor(\n        inj: Injector,\n        @Attribute('transition') _transition: string,\n        @Attribute('tabsposition') _tabsPosition: string\n    ) {\n        // handle to the promise resolver\n        let resolveFn: Function = noop;\n\n        super(inj, WIDGET_CONFIG, new Promise(res => resolveFn = res));\n\n        this.transition = _transition;\n        this.tabsposition = _tabsPosition;\n\n        this.promiseResolverFn = resolveFn;\n\n        styler(this.nativeElement, this, APPLY_STYLES_TYPE.CONTAINER);\n    }\n\n    animateIn (element: HTMLElement) {\n        const tabHeader = $(element);\n        // when the animation is not present toggle the active class.\n        tabHeader.siblings('.active').removeClass('active');\n        tabHeader.addClass('active');\n\n        const ul = this.nativeElement.querySelector('ul.nav.nav-tabs');\n\n        // move the tabheader into the viewport\n        const $prevHeaderEle = tabHeader.prev();\n        if ($prevHeaderEle.length) {\n            ul.scrollLeft = $prevHeaderEle[0].offsetLeft;\n        } else {\n            ul.scrollLeft = 0;\n        }\n    }\n\n    /**\n     * TabPane children components invoke this method to communicate with the parent\n     * if the evt argument is defined on-change callback will be invoked.\n     */\n    public notifyChange(paneRef: TabPaneComponent, evt: Event) {\n        if (!this.isSelectableTab(paneRef)) {\n            return;\n        }\n\n        let headerElement;\n        // invoke deselect event callback on the preset active tab\n        if (this.activeTab) {\n            this.activeTab.deselect();\n        }\n\n        // invoke select callback on the selected tab\n        paneRef.invokeOnSelectCallback(evt);\n\n        this.activeTab = paneRef.getWidget();\n\n        // invoke change callback if the evt is present, select a tab programmatically will not have the event\n        if (evt) {\n            this.invokeEventCallback('change', {\n                $event: evt,\n                newPaneIndex: this.getPaneIndexByRef(paneRef),\n                oldPaneIndex: this.getActiveTabIndex()\n            });\n        }\n\n        if (evt) {\n            headerElement = $(evt.target as HTMLElement).closest('li.tab-header');\n        } else {\n            headerElement = this.nativeElement.querySelector(`li[data-paneid=${paneRef.widgetId}]`);\n        }\n        this.animateIn(headerElement);\n\n        // this.setTabsLeftPosition(this.getPaneIndexByRef(this.activeTab), this.panes.length);\n        if (this.canSlide()) {\n            if (!this.tabsAnimator) {\n                this.tabsAnimator = new TabsAnimator(this);\n                this.tabsAnimator.setGesturesEnabled(this.canSlide());\n            }\n            this.tabsAnimator.transitionTabIntoView();\n        }\n    }\n\n    public goToTab(tabIndex) {\n        if (this.isValidPaneIndex(tabIndex - 1)) {\n            const tab = this.getPaneRefByIndex(tabIndex - 1);\n            tab.select();\n        }\n    }\n\n    private getPaneIndexByRef(paneRef: TabPaneComponent): number {\n        return this.panes.toArray().indexOf(paneRef);\n    }\n\n    // Returns the active tab index from tabs.\n    public getActiveTabIndex(): number {\n        return _.findIndex(this.panes.toArray(), {isActive: true});\n    }\n\n    private isValidPaneIndex(index: number): boolean {\n        return (index >= 0 && index < this.panes.length);\n    }\n\n    private getPaneRefByIndex(index: number): TabPaneComponent {\n        return this.panes.toArray()[index];\n    }\n\n    // returns false if the pane is hidden or disabled\n    private isSelectableTab(paneRef: TabPaneComponent): boolean {\n        return paneRef.show && !paneRef.disabled;\n    }\n\n    private canSlide() {\n        return this.transition === 'slide' && !this.vertical;\n    }\n\n    private getSelectableTabAfterIndex(index: number): TabPaneComponent {\n        for (let i = index + 1; i < this.panes.length; i++) {\n            const pane = this.getPaneRefByIndex(i);\n            if (this.isSelectableTab(pane)) {\n                return pane;\n            }\n        }\n    }\n\n    private getSelectableTabBeforeIndex(index: number): TabPaneComponent {\n        for (let i = index - 1; i >= 0; i--) {\n            const pane = this.getPaneRefByIndex(i);\n            if (this.isSelectableTab(pane)) {\n                return pane;\n            }\n        }\n    }\n\n    // select next tab relative to the current active tab\n    public next() {\n        const pane = this.getSelectableTabAfterIndex(this.getActiveTabIndex());\n        if (pane) {\n            pane.select();\n        }\n    }\n\n    // select prev tab relative to the current active tab\n    public prev() {\n        const pane = this.getSelectableTabBeforeIndex(this.getActiveTabIndex());\n        if (pane) {\n            pane.select();\n        }\n    }\n\n    /**\n     * this method will be invoked during the initialization of the component and on defaultpaneindex property change,\n     * if the provided defaultpaneindex is not valid, find the first pane index which can be shown and select it\n     */\n    private selectDefaultPaneByIndex(index: number) {\n        if (!this.isValidPaneIndex(index)) {\n            return;\n        }\n\n        let paneRef = this.getPaneRefByIndex(index);\n        if (!this.isSelectableTab(paneRef)) {\n            paneRef = this.getSelectableTabAfterIndex(0);\n        }\n        if (paneRef) {\n            paneRef.select();\n        }\n    }\n\n\n    // update the postion of tab header\n    private setTabsPosition() {\n        const ul = this.nativeElement.children[0];\n\n        this.vertical = (this.tabsposition === 'left' || this.tabsposition === 'right');\n\n        removeClass(this.nativeElement, 'inverted');\n        if (this.tabsposition === 'bottom' || this.tabsposition === 'right') {\n            appendNode(ul as HTMLElement, this.nativeElement);\n            addClass(this.nativeElement, 'inverted');\n        }\n    }\n\n    onPropertyChange(key: string, nv: any, ov) {\n\n        if (key === 'defaultpaneindex') {\n            // If no active tab is set ie.. no isdefaulttab then honor the defaultpaneindex\n            setTimeout(() => this.selectDefaultPaneByIndex(nv || 0), 20);\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n\n    registerTabsScroll() {\n        setTimeout(() => {\n            const $ul = this.$element.find('> ul');\n            let $liPosition;\n\n            const  $li = $ul.children();\n            $liPosition = $li.last().position();\n            if ($liPosition && ($liPosition.left > $ul.width())) {\n                $ul.on('mousewheel', (e) => {\n                    const left = $ul[0].scrollLeft,\n                        _delta = -1 * e.originalEvent.wheelDelta;\n                    e.stopPropagation();\n                    e.preventDefault();\n                    $ul.animate({scrollLeft: left + _delta}, {'duration': 10});\n                });\n            }\n        });\n    }\n\n    ngAfterContentInit() {\n        this.promiseResolverFn();\n        super.ngAfterContentInit();\n        this.setTabsPosition();\n    }\n\n    ngAfterViewInit() {\n        super.ngAfterViewInit();\n        this.registerTabsScroll();\n    }\n}\n","import { isMobileApp } from '@wm/core';\n\nimport { PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    const props = new Map(\n        [\n            ['class', PROP_STRING],\n            ['defaultpaneindex', {value: 0, ...PROP_NUMBER}],\n            ['justified', PROP_BOOLEAN],\n            ['tabsposition', {value: 'top', ...PROP_STRING}],\n            ['name', PROP_STRING],\n            ['show', {value: true, ...PROP_BOOLEAN}],\n            ['transition', PROP_STRING]\n        ]\n    );\n    if (isMobileApp()) {\n        props.set('transition', {value: 'slide', ...PROP_STRING});\n    }\n    register('wm-tabs', props);\n};\n","import { Injector, OnDestroy, TemplateRef } from '@angular/core';\nimport { BsModalRef, BsModalService, ModalOptions } from 'ngx-bootstrap';\n\nimport { AbstractDialogService, closePopover } from '@wm/core';\n\nimport { IDialog, IWidgetConfig } from '../../../framework/types';\nimport { BaseComponent } from '../../base/base.component';\n\ndeclare const _;\n\nlet eventsRegistered = false;\n\nconst findRootContainer = ($el) => {\n    let root = $el.closest('.app-prefab');\n    if (!root.length) {\n        root = $el.closest('.app-partial');\n    }\n    if (!root.length) {\n        root = $el.closest('.app-page');\n    }\n    return root.length && root.parent()[0].tagName;\n};\n\nconst invokeOpenedCallback = (ref) => {\n    if (ref) {\n        setTimeout(() => {\n            const root = findRootContainer(ref.$element);\n            // if page styles have to be applied to dialog then dialog has to be child of page element.\n            if (root) {\n                $('body:first > modal-container > div').wrap('<' + root + '/>');\n            }\n            ref.invokeEventCallback('opened', {$event: {type: 'opened'}});\n        });\n    }\n};\n\nconst invokeClosedCallback = (ref) => {\n    if (ref) {\n        ref.invokeEventCallback('close');\n        ref.dialogRef = undefined;\n    }\n};\n\nexport abstract class BaseDialog extends BaseComponent implements IDialog, OnDestroy {\n\n    public name: string;\n\n    private readonly dialogService: AbstractDialogService;\n    private readonly bsModal: BsModalService;\n\n    private dialogRef: BsModalRef;\n\n    protected constructor(\n        inj: Injector,\n        widgetConfig: IWidgetConfig,\n        protected modalOptions: ModalOptions\n    ) {\n        super(inj, widgetConfig);\n        this.dialogService = inj.get(AbstractDialogService);\n        this.bsModal = inj.get(BsModalService);\n\n        // Subscribe to onShown and onHidden events only once as we will not be\n        // unsubscribing to the,m ever and we will handle the logic of calling\n        // respective dialog callbacks.\n        if (!eventsRegistered) {\n            eventsRegistered = true;\n            this.bsModal.onShown.subscribe(() => {\n                // Always get the reference of last pushed dialog in the array for calling onOpen callback\n                invokeOpenedCallback(this.dialogService.getLastOpenedDialog());\n            });\n\n            this.bsModal.onHidden.subscribe((closeReason) => {\n                const ref = closeReason === 'esc' || closeReason === 'backdrop-click' ? this.dialogService.getLastOpenedDialog() : this.dialogService.getDialogRefFromClosedDialogs();\n                // remove the dialog reference from opened dialogs and closed dialogs\n                this.dialogService.removeFromOpenedDialogs(ref);\n                this.dialogService.removeFromClosedDialogs(ref);\n                invokeClosedCallback(ref);\n            });\n        }\n    }\n\n    /**\n     * Opens the dialog\n     * Subscribe to the onShown event emitter of bsModal and trigger on-opened event callback\n     */\n    public open(initState?: any) {\n\n        // remove the popovers in the page to avoid the overlap with dialog\n        // closePopover(this.$element); Commenting this line because it is causing regression(if we have dialog inside popover as partail content, then the dialog close is not working because on closing the popover the partial get destroyed.)\n\n        // do not open the dialog again if it is already opened\n        const duplicateDialogCheck = (openedDialog) => {\n           return openedDialog === this;\n        };\n\n        if (this.dialogService.getOpenedDialogs().some(duplicateDialogCheck)) {\n            return;\n        }\n\n        this.dialogService.addToOpenedDialogs(this);\n\n        // extend the context with the initState\n        Object.assign(this.context, initState);\n        this.dialogRef = this.bsModal.show(this.getTemplateRef(), this.modalOptions);\n    }\n\n    /**\n     * closes the dialog\n     * invokes the on-close event callback\n     */\n    public close() {\n        // remove the popovers in the page to avoid the overlap with dialog\n        // closePopover(this.$element); Commenting this line because it is causing regression(if we have dialog inside popover as partail content, then the dialog close is not working because on closing the popover the partial get destroyed.)\n        if (this.dialogRef) {\n            this.dialogService.addToClosedDialogs(this);\n            this.dialogRef.hide();\n        }\n    }\n\n    /**\n     * Register the dialog with the dialog service for programmatic access\n     */\n    protected register(scope) {\n        // add scope along with name in the dialogRefsCollection Map while registering dialog\n        // So that 2 dialogs having same name on different pages won't be overridden.\n        this.dialogService.register(this.name, this, scope);\n    }\n\n    /**\n     * De Register the dialog with the dialog service after dialog destruction\n     */\n    protected deRegister(scope) {\n        this.dialogService.deRegister(this.name, scope);\n    }\n\n    /**\n     * subclasses of BaseDialog must implement this method to return the proper template element ref\n     * bsModal will use this refence to open the dialog\n     * @returns {TemplateRef<any>}\n     */\n    protected abstract getTemplateRef(): TemplateRef<any>;\n\n    protected onPropertyChange(key: string, nv: any, ov?: any) {\n        // ignore the class attribute.\n        // Prevent the framework from setting the class on the host element.\n        if (key === 'class' || key === 'name' || key === 'tabindex') {\n            return;\n        } else if (key === 'animation') {\n            this.modalOptions.class = this.modalOptions.class.replace('animated ' + ov, '');\n            if (nv) {\n                this.modalOptions.class = this.modalOptions.class + 'animated ' + nv;\n            }\n        }\n        super.onPropertyChange(key, nv, ov);\n    }\n\n    public ngOnDestroy() {\n        this.close();\n        this.deRegister(this.viewParent);\n        super.ngOnDestroy();\n    }\n}\n","import { Attribute, Component, Injector, OnInit, TemplateRef, ViewChild } from '@angular/core';\n\nimport { toBoolean } from '@wm/core';\n\nimport { registerProps } from './alert-dialog.props';\nimport { BaseDialog } from '../base/base-dialog';\nimport { provideAsDialogRef, provideAsWidgetRef } from '../../../../utils/widget-utils';\nimport { IWidgetConfig } from '../../../framework/types';\n\nconst DIALOG_CLS = 'app-dialog modal-dialog app-alert-dialog';\n\nconst WIDGET_INFO: IWidgetConfig = {widgetType: 'wm-alertdialog'};\n\n@Component({\n    selector: 'div[wmAlertDialog]',\n    templateUrl: './alert-dialog.component.html',\n    providers: [\n        provideAsWidgetRef(AlertDialogComponent),\n        provideAsDialogRef(AlertDialogComponent)\n    ]\n})\nexport class AlertDialogComponent extends BaseDialog implements OnInit {\n    static initializeProps = registerProps();\n\n    @ViewChild('dialogTemplate') dialogTemplate: TemplateRef<any>;\n\n    constructor(\n        inj: Injector,\n        @Attribute('class') dialogClass: string,\n        @Attribute('modal') modal: string | boolean,\n        @Attribute('closable') closable: string | boolean,\n    ) {\n        if (modal === null || modal === undefined) {\n            modal = false;\n        }\n\n        if (closable === null || closable === undefined) {\n            closable = true;\n        }\n\n        // setting the backdrop to 'static' will not close the dialog on backdrop click\n        const backdrop: boolean | 'static' = toBoolean(modal) ? 'static' : true;\n\n        super(\n            inj,\n            WIDGET_INFO,\n            {\n                class: `${DIALOG_CLS} ${dialogClass || ''}`,\n                backdrop,\n                keyboard: !toBoolean(modal)\n            }\n        );\n    }\n\n    protected getTemplateRef(): TemplateRef<any> {\n        return this.dialogTemplate;\n    }\n\n    /**\n     * Click event handler for the ok button\n     * invokes on-ok event callback\n     * @param {Event} $event\n     */\n    onOk($event: Event) {\n        this.invokeEventCallback('ok', {$event});\n    }\n\n    ngOnInit() {\n        super.ngOnInit();\n        this.register(this.viewParent);\n    }\n}\n","import { PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-alertdialog',\n        new Map(\n            [\n                ['alerttype', {value: 'error', ...PROP_STRING}],\n                ['animation', PROP_STRING],\n                ['class', PROP_STRING],\n                ['closable', {value: true, PROP_BOOLEAN}],\n                ['iconclass', {value: 'wi wi-warning', PROP_STRING}],\n                ['iconheight', PROP_STRING],\n                ['iconmargin', PROP_STRING],\n                ['iconurl', PROP_STRING],\n                ['iconwidth', PROP_STRING],\n                ['message', {value: 'Am an alert box!', ...PROP_STRING}],\n                ['modal', {value: false, ...PROP_BOOLEAN}],\n                ['name', PROP_STRING],\n                ['oktext', {value: 'OK', ...PROP_STRING}],\n                ['tabindex', {value: 0, ...PROP_NUMBER}],\n                ['title', {value: 'Alert', ...PROP_STRING}]\n            ]\n        )\n    );\n};\n","import { Directive, HostListener, Injector } from '@angular/core';\nimport { addClass } from '@wm/core';\n\nimport { APPLY_STYLES_TYPE, styler } from '../../../framework/styler';\nimport { registerProps } from './nav-item.props';\nimport { StylableComponent } from '../../base/stylable.component';\nimport { provideAsWidgetRef } from '../../../../utils/widget-utils';\n\ndeclare const $;\n\nconst DEFAULT_CLS = 'app-nav-item';\nconst WIDGET_CONFIG = {widgetType: 'wm-nav-item', hostClass: DEFAULT_CLS};\n\n@Directive({\n    selector: '[wmNavItem]',\n    providers: [\n        provideAsWidgetRef(NavItemDirective)\n    ]\n})\nexport class NavItemDirective extends StylableComponent {\n    static initializeProps = registerProps();\n\n    @HostListener('click')\n    @HostListener('keydown.enter')\n    makeActive() {\n        const parentNode = this.nativeElement.parentNode;\n        $(parentNode as HTMLElement).find('> li.active').removeClass('active');\n        addClass(this.nativeElement, 'active');\n    }\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n        styler(this.nativeElement, this, APPLY_STYLES_TYPE.CONTAINER);\n    }\n}\n","import { PROP_BOOLEAN, PROP_STRING, register } from '../../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-nav-item',\n        new Map(\n            [\n                ['class', PROP_STRING],\n                ['name', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}]\n            ]\n        )\n    );\n};\n","import { Directive, ElementRef, Input } from '@angular/core';\n\nimport { setAttr } from '@wm/core';\n\nexport const disableContextMenu = ($event: Event) => {\n    $event.preventDefault();\n};\n\n@Directive({selector: '[wmNavigationControl]'})\nexport class NavigationControlDirective {\n\n    private nativeElement: HTMLElement;\n    private _link: string;\n\n    @Input() disableMenuContext: boolean;\n\n    @Input() set wmNavigationControl(val) {\n        this._link = val;\n        if (val && !this.disableMenuContext) {\n            setAttr(this.nativeElement, 'href', val);\n            this.nativeElement.removeEventListener('contextmenu', disableContextMenu);\n        } else {\n            setAttr(this.nativeElement, 'href', 'javascript:void(0)');\n            this.nativeElement.addEventListener('contextmenu', disableContextMenu);\n        }\n    }\n\n    constructor(eleRef: ElementRef) {\n        this.nativeElement = eleRef.nativeElement;\n    }\n}\n","import { AfterViewInit, Component, HostBinding, Injector, Optional } from '@angular/core';\n\nimport { addClass, App, encodeUrl, getRouteNameFromLink, setAttr } from '@wm/core';\n\nimport { styler } from '../../framework/styler';\nimport { IWidgetConfig } from '../../framework/types';\nimport { DISPLAY_TYPE } from '../../framework/constants';\nimport { registerProps } from './anchor.props';\nimport { StylableComponent } from '../base/stylable.component';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\nimport { NavItemDirective } from '../nav/nav-item/nav-item.directive';\nimport { disableContextMenu } from '../nav/navigation-control.directive';\n\nconst DEFAULT_CLS = 'app-anchor';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-anchor',\n    hostClass: DEFAULT_CLS,\n    displayType: DISPLAY_TYPE.INLINE_BLOCK\n};\n\nconst regex = /Actions.goToPage_(\\w+)\\.invoke\\(\\)/g;\n\n@Component({\n    selector: 'a[wmAnchor]',\n    templateUrl: './anchor.component.html',\n    providers: [\n        provideAsWidgetRef(AnchorComponent)\n    ]\n})\nexport class AnchorComponent extends StylableComponent implements AfterViewInit {\n    static initializeProps = registerProps();\n\n    private hasNavigationToCurrentPageExpr: boolean;\n    private hasGoToPageExpr: boolean;\n\n    public encodeurl;\n    public hyperlink;\n    public iconheight: string;\n    public iconwidth: string;\n    public iconurl: string;\n    public iconclass: string;\n    public caption: any;\n    public badgevalue: string;\n    @HostBinding('target') target: string;\n    @HostBinding('attr.accesskey') shortcutkey: string;\n    @HostBinding('attr.icon-position') iconposition: string;\n\n    constructor(\n        inj: Injector,\n        @Optional() private navItemRef: NavItemDirective,\n        private app: App\n    ) {\n        super(inj, WIDGET_CONFIG);\n        styler(this.nativeElement, this);\n    }\n\n    protected processEventAttr(eventName: string, expr: string, meta?: string) {\n\n        super.processEventAttr(eventName, expr, meta);\n\n        if (!this.hasNavigationToCurrentPageExpr) {\n            const app = this.inj.get(App);\n            const fns = expr.split(';').map(Function.prototype.call, String.prototype.trim);\n            if (fns.some(fn => {\n                regex.lastIndex = 0;\n                const matches = regex.exec(fn);\n\n                this.hasGoToPageExpr = matches && (matches.length > 0);\n\n                return this.hasGoToPageExpr && matches[1] === app.activePageName;\n            })) {\n                this.hasNavigationToCurrentPageExpr = true;\n            }\n        }\n    }\n\n    private setNavItemActive() {\n        if (this.navItemRef) {\n            addClass(this.navItemRef.getNativeElement(), 'active');\n        }\n    }\n\n    protected handleEvent(node: HTMLElement, eventName: string, eventCallback: Function, locals: any, meta?: string) {\n        super.handleEvent(\n            node,\n            eventName,\n            e => {\n                if (this.hasGoToPageExpr && locals.$event) {\n                    locals.$event.preventDefault();\n                }\n                eventCallback();\n            },\n            locals,\n            meta\n        );\n    }\n\n    onPropertyChange(key: string, nv: any, ov?: any) {\n        if (key === 'hyperlink') {\n            if (!nv) {\n                setAttr(this.nativeElement, 'href', 'javascript:void(0)');\n                this.nativeElement.addEventListener('contextmenu', disableContextMenu);\n                return;\n            }\n            if (this.encodeurl) {\n                nv = encodeUrl(nv);\n            }\n            // if hyperlink starts with 'www.' append '//' in the beginning\n            if (nv.startsWith('www.')) {\n                nv = `//${nv}`;\n            }\n            setAttr(this.nativeElement, 'href', nv);\n            this.nativeElement.removeEventListener('contextmenu', disableContextMenu);\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n\n    ngAfterViewInit() {\n        super.ngAfterViewInit();\n        if (this.hasNavigationToCurrentPageExpr) {\n            addClass(this.nativeElement, 'active');\n        }\n        if (this.navItemRef) {\n            setTimeout(() => {\n                if (this.hyperlink && getRouteNameFromLink(this.hyperlink) === `/${this.app.activePageName}`) {\n                    this.setNavItemActive();\n                } else if (this.hasNavigationToCurrentPageExpr) {\n                    this.setNavItemActive();\n                }\n            });\n        }\n\n    }\n}\n","import { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-anchor',\n        new Map(\n            [\n                ['badgevalue', PROP_STRING],\n                ['caption', {value: 'Link', ...PROP_STRING}],\n                ['class', PROP_STRING],\n                ['conditionalclass', PROP_ANY],\n                ['conditionalstyle', PROP_ANY],\n                ['encodeurl', PROP_BOOLEAN],\n                ['hint', PROP_STRING],\n                ['hyperlink', {value: '', ...PROP_STRING}],\n                ['iconclass', PROP_STRING],\n                ['iconheight', PROP_STRING],\n                ['iconmargin', PROP_STRING],\n                ['iconposition', PROP_STRING],\n                ['iconurl', PROP_STRING],\n                ['iconwidth', PROP_STRING],\n                ['name', PROP_STRING],\n                ['shortcutkey', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n                ['tabindex', {value: 0, ...PROP_NUMBER}],\n                ['target', {value: '_self', ...PROP_STRING}]\n            ]\n        )\n    );\n};\n","import { $parseEvent, getClonedObject, getFormattedDate, isDefined, isEqualWithFields } from '@wm/core';\n\nimport { getEvaluatedData, getObjValueByKey } from './widget-utils';\n\nimport { ALLFIELDS } from './data-utils';\nimport { ToDatePipe } from '../pipes/custom-pipes';\n\ndeclare const _, $, moment;\n\nconst momentLocale = moment.localeData();\nconst momentCalendarOptions = getClonedObject(momentLocale._calendar);\nconst momentCalendarDayOptions = momentLocale._calendarDay || {\n        lastDay: '[Yesterday]',\n        lastWeek: '[Last] dddd',\n        nextDay: '[Tomorrow]',\n        nextWeek: 'dddd',\n        sameDay: '[Today]',\n        sameElse: 'L'\n    };\nconst GROUP_BY_OPTIONS = {\n        ALPHABET: 'alphabet',\n        WORD: 'word',\n        OTHERS: 'Others'\n    };\nconst TIME_ROLLUP_OPTIONS = {\n        HOUR: 'hour',\n        DAY: 'day',\n        WEEK: 'week',\n        MONTH: 'month',\n        YEAR: 'year'\n    };\nconst ROLLUP_PATTERNS = {\n        DAY: 'yyyy-MM-dd',\n        WEEK: 'w \\'Week\\',  yyyy',\n        MONTH: 'MMM, yyyy',\n        YEAR: 'YYYY',\n        HOUR: 'hh:mm a'\n    };\n\n/**\n * function to get the ordered dataset based on the given orderby\n */\nexport const getOrderedDataset = (dataSet: any, orderBy: string, innerItem?) => {\n    if (!orderBy) {\n        return _.cloneDeep(dataSet);\n    }\n\n    // The order by only works when the dataset contains list of objects.\n    const items = orderBy.split(','),\n        fields = [],\n        directions = [];\n    items.forEach(obj => {\n        const item = obj.split(':');\n        fields.push(innerItem ? innerItem + '.' + item[0] : item[0]);\n        directions.push(item[1]);\n    });\n    return _.orderBy(dataSet, fields, directions);\n};\n\n/**\n * Returns an array of object, each object contain the DataSetItem whose key, value, label are extracted from object keys.\n */\nexport const transformDataWithKeys = (dataSet: any) => {\n    const data: DataSetItem[] = [];\n    // if the dataset is instance of object (not an array) or the first item in the dataset array is an object,\n    // then we extract the keys from the object and prepare the dataset items.\n    if (_.isObject(dataSet[0]) || (_.isObject(dataSet) && !(dataSet instanceof Array))) {\n        // getting keys of the object\n        const objectKeys = Object.keys(dataSet[0] || dataSet);\n        _.forEach(objectKeys, (objKey, index) => {\n            data.push({\n                key: objKey,\n                label: objKey,\n                value: objKey,\n                index: index + 1\n            });\n        });\n    }\n\n    return data;\n};\n\n// Converts any type of data to array.\nexport const extractDataAsArray = data => {\n\n    if (_.isUndefined(data) || _.isNull(data) || _.trim(data) === '') {\n        return [];\n    }\n\n    if (_.isString(data)) {\n        data = _.split(data, ',').map(str => str.trim());\n    }\n\n    if (!_.isArray(data)) {\n        data = [data];\n    }\n\n    return data;\n};\n\n// This function return always an object containing dataset details.\nexport const convertDataToObject = dataResult => {\n    if (_.isString(dataResult)) {\n        dataResult = _.split(dataResult, ',').map(str => str.trim());\n    }\n\n    return dataResult;\n};\n\n/**\n * The first step in datasetItems creation is data transformation:\n *\n * The dataset can contain one of the following formats and each of them to be converted to the given format;\n *\n * 1) The comma separated string..eg: A,B,C => [{ key: 'A', value: 'A'}, { key: 'B', value: 'B'}, { key: 'C', value: 'C'}]\n * 2) The array of values eg: [1,2,3] => [{ key: 1, value: 1}, { key: 2, value: 2}, { key: 3, value: 3}]\n * 3) an object eg: {name: 'A', age: 20} => [ {key: 'name', value: 'A'}, {key: 'age', value: 20}]\n * 4) an array of objects...eg: [ {name: 'A', age: 20}, {name: 'B', age: 20}] ==> returns [{key: _DATAFIELD_, value: _DISPLAYFIELD, label: _DISPLAYVALUE}]\n */\nexport const transformData = (context: any, dataSet: any, myDataField?: string, displayOptions?, startIndex?: number): Array<DataSetItem> => {\n    const data = [];\n    if (!dataSet) {\n        return;\n    }\n    dataSet = convertDataToObject(dataSet);\n\n    // startIndex is the index of the next new item.\n    if (_.isUndefined(startIndex)) {\n        startIndex = 1;\n    }\n\n    if (_.isString(dataSet)) {\n        dataSet = dataSet.split(',').map(str => str.trim());\n        dataSet.forEach((option, index) => {\n            data.push({key: option, value: option, label: (isDefined(option) && option !== null) ? option.toString() : '', index: startIndex + index});\n        });\n    } else if (_.isArray(dataSet) && !_.isObject(dataSet[0])) { // array of primitive values only\n        dataSet.forEach((option, index) => {\n            data.push({key: option, value: option, label: (isDefined(option) && option !== null) ? option.toString() : '', index: startIndex + index});\n        });\n    } else if (!(dataSet instanceof Array) && _.isObject(dataSet)) {\n        const i = 0;\n        _.forEach(dataSet, (value, key) => {\n            data.push({key: _.trim(key), value: key, label: (isDefined(value) && value !== null) ? value.toString() : '', index: startIndex, dataObject: dataSet});\n        });\n    } else {\n        if (!myDataField) { // consider the datafield as 'ALLFIELDS' when datafield is not given.\n            myDataField = ALLFIELDS;\n        }\n\n        dataSet.forEach((option, index) => {\n            const key = myDataField === ALLFIELDS ? startIndex + index : getObjValueByKey(option, myDataField);\n\n            // Omit all the items whose datafield (key) is null or undefined.\n            if (!_.isUndefined(key) && !_.isNull(key)) {\n                const label = getEvaluatedData(option, {\n                    field: displayOptions.displayField,\n                    expression: displayOptions.displayExpr,\n                    bindExpression: displayOptions.bindDisplayExpr\n                }, context);\n                const dataSetItem = {\n                    key: key,\n                    label: (isDefined(label) && label !== null) ? label.toString() : '',\n                    value: myDataField === ALLFIELDS ? option : key,\n                    dataObject: option, // represents the object when datafield is ALLFIELDS. This is used as innerItem while grouping the datasetItems.\n                    index: startIndex + index\n                };\n                if (displayOptions.displayImgSrc || displayOptions.bindDisplayImgSrc) {\n                    (dataSetItem as any).imgSrc = getEvaluatedData(option, {\n                        expression: displayOptions.displayImgSrc,\n                        bindExpression: displayOptions.bindDisplayImgSrc\n                    }, context);\n                }\n                data.push(dataSetItem);\n            }\n        });\n    }\n    return data;\n};\n\n/**\n * Private method to get the unique objects by the data field\n */\nexport const getUniqObjsByDataField = (data: Array<DataSetItem>, dataField: string, displayField: string, allowEmptyFields?: boolean) => {\n    let uniqData;\n    const isAllFields = dataField === ALLFIELDS;\n\n    uniqData = isAllFields ? _.uniqWith(data, _.isEqual) : _.uniqBy(data, 'key');\n\n    if (!displayField || allowEmptyFields) {\n        return uniqData;\n    }\n\n    // return objects having non empty datafield and display field values.\n    return _.filter(uniqData, (obj) => {\n        if (isAllFields) {\n            return _.trim(obj.label);\n        }\n        return _.trim(obj.key) && _.trim(obj.label);\n    });\n};\n\n/**\n * This function sets the selectedItem by comparing the field values, where fields are passed by \"compareby\" property.\n * works only for datafield with ALL_FIELDS\n * @param datasetItems list of dataset items.\n * @param compareWithDataObj represents the datavalue (object) whose properties are to be checked against each property of datasetItem.\n * @param compareByField specifies the property names on which datasetItem has to be compared against datavalue object.\n */\nexport const setItemByCompare = (datasetItems: Array<DataSetItem>, compareWithDataObj: Object, compareByField: string) => {\n    // compare the fields based on fields given to compareby property.\n    _.forEach(datasetItems, opt => {\n        if (isEqualWithFields(opt.value, compareWithDataObj, compareByField)) {\n            opt.selected = true;\n            return false;\n        }\n    });\n};\n\n/**\n * This method returns sorted data based to groupkey.\n * Returns a array of objects, each object containing key which is groupKey and data is the sorted data which is sorted by groupby field in the data.\n *\n * @param groupedLiData, grouped data object with key as the groupKey and its value as the array of objects grouped under the groupKey.\n * @param groupBy, string groupby property\n * @returns {any[]}\n */\nconst getSortedGroupedData = (groupedLiData: Object, groupBy: string, orderby: string) => {\n    const _groupedData = [];\n    _.forEach(_.keys(groupedLiData), (groupkey, index) => {\n        const liData = getOrderedDataset(groupedLiData[groupkey], orderby, 'dataObject');\n        _groupedData.push({\n            key: groupkey,\n            data: _.sortBy(liData, data => {\n                data._groupIndex = index + 1;\n                return _.get(data, groupBy) || _.get(data.dataObject, groupBy);\n            })\n        });\n    });\n    return _groupedData;\n};\n\n/**\n * This method gets the groupedData using groupby property and match and returns the sorted array of objects.\n *\n * @param compRef represents the component's reference i.e. \"this\" value.\n * @param data represents the dataset i.e array of objects.\n * @param groupby, string groupby property\n * @param match, string match property\n * @param orderby, string orderby property\n * @param dateformat, string dateFormat property\n * @param innerItem, represents the innerItem on which groupby has to be applied. Incase of datasetItems, 'dataObject' contains the full object. Here innerItem is dataObject.\n * @returns {any[]} groupedData, array of objects, each object having key and data.\n */\nexport const groupData = (compRef: any, data: Array<Object | DataSetItem>, groupby: string, match: string, orderby: string, dateformat: string, datePipe: ToDatePipe, innerItem?: string, AppDefaults?: any) => {\n    let groupedLiData = {};\n    if (_.includes(groupby, '(')) {\n        const groupDataByUserDefinedFn = $parseEvent(groupby);\n        groupedLiData = _.groupBy(data, val => {\n            return groupDataByUserDefinedFn(compRef.viewParent, {'row': val.dataObject || val});\n        });\n    } else {\n        groupedLiData = getGroupedData(data, groupby, match, orderby, dateformat, datePipe, innerItem, AppDefaults);\n    }\n\n    return getSortedGroupedData(groupedLiData, groupby, orderby);\n};\n\n/**\n * This method prepares the grouped data.\n *\n * @param fieldDefs array of objects i.e. dataset\n * @param groupby string groupby\n * @param match string match\n * @param orderby string orderby\n * @param dateFormat string date format\n * @param innerItem, item to look for in the passed data\n */\nconst getGroupedData = (fieldDefs: Array<Object | DataSetItem>, groupby: string, match: string, orderby: string, dateFormat: string, datePipe: ToDatePipe, innerItem?: string, AppDefaults?: any) => {\n    // For day, set the relevant moment calendar options\n    if (match === TIME_ROLLUP_OPTIONS.DAY) {\n        momentLocale._calendar = momentCalendarDayOptions;\n    }\n\n    // handling case-in-sensitive scenario\n    // ordering the data based on groupby field. If there is innerItem then apply orderby using the innerItem's containing the groupby field.\n    fieldDefs = _.orderBy(fieldDefs, fieldDef => {\n        const groupKey = _.get(innerItem ? fieldDef[innerItem] : fieldDef, groupby);\n        if (groupKey) {\n            return _.toLower(groupKey);\n        }\n    });\n\n    // extract the grouped data based on the field obtained from 'groupDataByField'.\n    const groupedLiData = _.groupBy(fieldDefs, groupDataByField.bind(undefined, groupby, match, innerItem, dateFormat, datePipe, AppDefaults));\n\n    momentLocale._calendar = momentCalendarOptions; // Reset to default moment calendar options\n\n    return groupedLiData;\n};\n\n// Format the date with given date format\nexport const filterDate = (value: string | number, format: string, defaultFormat: string, datePipe: ToDatePipe) => {\n    if (format === 'timestamp') { // For timestamp format, return the epoch value\n        return value;\n    }\n\n    return getFormattedDate(datePipe, value, format || defaultFormat);\n};\n\n\n/**\n * This method returns the groupkey based on the rollup (match) passed\n *\n * @param concatStr, string containing groupby field value\n * @param rollUp string containing the match property.\n * @param dateformat string containing the date format to display the date.\n */\nconst getTimeRolledUpString = (concatStr: string, rollUp: string, dateformat: string, datePipe?: ToDatePipe, AppDefaults?: any) => {\n    let groupByKey,\n        strMoment  = moment(concatStr),\n        dateFormat = dateformat;\n\n    const currMoment = moment(),\n        getSameElseFormat = function () { // Set the sameElse option of moment calendar to user defined pattern\n            return '[' + filterDate(this.valueOf(), dateFormat, ROLLUP_PATTERNS.DAY, datePipe) + ']';\n        };\n\n    switch (rollUp) {\n        case TIME_ROLLUP_OPTIONS.HOUR:\n            dateFormat = dateFormat || AppDefaults.timeFormat;\n\n            // If date is invalid, check if data is in form of hh:mm a\n            if (!strMoment.isValid()) {\n                strMoment = moment(new Date().toDateString() + ' ' + concatStr);\n\n                if (strMoment.isValid()) {\n                    // As only time is present, roll up at the hour level with given time format\n                    momentLocale._calendar.sameDay = function () {\n                        return '[' + filterDate(this.valueOf(), dateFormat, ROLLUP_PATTERNS.HOUR, datePipe) + ']';\n                    };\n                }\n            }\n            // round off to nearest last hour\n            strMoment = strMoment.startOf('hour');\n            momentLocale._calendar.sameElse = getSameElseFormat;\n            groupByKey = strMoment.calendar(currMoment);\n            break;\n        case TIME_ROLLUP_OPTIONS.WEEK:\n            groupByKey = filterDate(strMoment.valueOf(), dateFormat, ROLLUP_PATTERNS.WEEK, datePipe);\n            break;\n        case TIME_ROLLUP_OPTIONS.MONTH:\n            groupByKey = filterDate(strMoment.valueOf(), dateFormat, ROLLUP_PATTERNS.MONTH, datePipe);\n            break;\n        case TIME_ROLLUP_OPTIONS.YEAR:\n            groupByKey = strMoment.format(ROLLUP_PATTERNS.YEAR);\n            break;\n        case TIME_ROLLUP_OPTIONS.DAY:\n            dateFormat = dateFormat || AppDefaults.dateFormat;\n            strMoment = strMoment.startOf('day'); // round off to current day\n            momentLocale._calendar.sameElse = getSameElseFormat;\n            groupByKey = strMoment.calendar(currMoment);\n            break;\n    }\n    // If invalid date is returned, Categorize it as Others.\n    if (groupByKey === 'Invalid date') {\n        return GROUP_BY_OPTIONS.OTHERS;\n    }\n    return groupByKey;\n};\n\n\n// groups the fields based on the groupby value.\nconst groupDataByField = (groupby: string, match: string, innerItem: string, dateFormat: string, datePipe: ToDatePipe, AppDefaults: any, liData: Object) => {\n    // get the groupby field value from the liData or innerItem in the liData.\n    let concatStr = _.get(innerItem ? liData[innerItem] : liData, groupby);\n\n    // by default set the undefined groupKey as 'others'\n    if (_.isUndefined(concatStr) || _.isNull(concatStr) || concatStr.toString().trim() === '') {\n        return GROUP_BY_OPTIONS.OTHERS;\n    }\n\n    // if match prop is alphabetic ,get the starting alphabet of the word as key.\n    if (match === GROUP_BY_OPTIONS.ALPHABET) {\n        concatStr = concatStr.substr(0, 1);\n    }\n\n    // if match contains the time options then get the concatStr using 'getTimeRolledUpString'\n    if (_.includes(_.values(TIME_ROLLUP_OPTIONS), match)) {\n        concatStr = getTimeRolledUpString(concatStr, match, dateFormat, datePipe, AppDefaults);\n    }\n\n    return concatStr;\n};\n\n/**\n * This method toggles all the list items inside the each list group.\n * @param el, component reference on which groupby is applied.\n */\nexport const toggleAllHeaders = (el: any) => {\n    const groups = $(el.nativeElement).find('.item-group');\n\n    groups.find('.group-list-item').toggle();\n\n    // toggle the collapse icon on list header.\n    const groupIcons = groups.find('li.list-group-header .app-icon');\n\n    if (groupIcons) {\n        _.forEach(groupIcons, (icon) => {\n            icon = $(icon);\n            if (icon.hasClass('wi-chevron-down')) {\n                icon.removeClass('wi-chevron-down').addClass('wi-chevron-up');\n            } else {\n                icon.removeClass('wi-chevron-up').addClass('wi-chevron-down');\n            }\n        });\n    }\n};\n\n/**\n * On list header click, toggle the list items in this group.\n * and also toggle the header icon.\n * @param $event\n */\nexport const handleHeaderClick = ($event: Event) => {\n    const selectedGroup   = $($event.target as any).closest('.item-group'),\n        selectedAppIcon = selectedGroup.find('li.list-group-header .app-icon');\n\n    if (selectedAppIcon.hasClass('wi-chevron-down')) {\n        selectedAppIcon.removeClass('wi-chevron-down').addClass('wi-chevron-up');\n    } else {\n        selectedAppIcon.removeClass('wi-chevron-up').addClass('wi-chevron-down');\n    }\n\n    selectedGroup.find('.group-list-item').toggle();\n};\n\n/**\n * configures reordering the items.\n * @param $el element to be sortable\n * @param options object containing the sortable options.\n * @param startCb callback on drag start on the element.\n * @param updateCb callback triggerred when sorting is stopped and the DOM position has changed.\n */\nexport const configureDnD = ($el: any, options: object, startCb: Function, updateCb: Function) => {\n    const sortOptions = Object.assign({\n        containment: $el,\n        delay: 100,\n        opacity: 0.8,\n        helper: 'clone',\n        zIndex: 1050,\n        tolerance: 'pointer',\n        start: startCb,\n        update: updateCb\n    }, options);\n\n    $el.sortable(sortOptions);\n};\n\n// Todo: convert to Class\ninterface DataSetProps {\n    datafield: string;\n    displayfield?: string;\n    displayexpression?: string;\n    usekeys?: boolean;\n    orderby?: string;\n}\n\n/**\n * key represents the datafield value\n * label represents display value or expression value\n * value displayValue for primitives and data object for allFields\n * dataObject represent the object from the dataset when datafield is ALLFIELDS. This is used as innerItem while grouping the datasetItems.\n * imgSrc picture source\n * selected represents boolean to notify selected item.\n */\nexport class DataSetItem {\n    key: any;\n    label: any;\n    value: any;\n    dataObject?: Object;\n    index?: number;\n    imgSrc?: string;\n    selected?: boolean;\n}\n","import { isMobile, setCSS } from '@wm/core';\n\ndeclare const $;\n\nenum CLASS_NAME {\n    LEFT_PANEL = 'page-left-panel',\n    RIGHT_PANEL = 'page-right-panel',\n    SWIPE_ELEM = 'page-left-panel-icon',\n    CONTENT = 'app-content-column',\n    HEADER = 'page-header',\n    SEARCH = 'app-search'\n}\n\n/**\n * method returns jquery class selector for given roleName\n * @param roleName\n * @returns {string}\n */\nconst roleSelector = (roleName: string) => `[data-role='${roleName}']`;\n\n/*setup touch event handler*/\nconst bindTapEvtHandler = (selector, handler) => {\n    /*\n     * In Iphone safari browser, tap event of HammerJs is breaking\n     * functionalities of other controls like input[type=\"range\"].\n     * So, replaced the hammer Js handler with click event handler.\n     */\n    $(selector).off('click.deviceview').on('click.deviceview', handler);\n};\n\n/**\n * hide the mobile toolbar actions\n */\nconst hidePageContainers = (leftNavEle: HTMLElement, searchEle?: HTMLElement) => {\n    if (isMobile()) {\n        if (leftNavEle) {\n            try {\n                (leftNavEle as any).widget.collapse();\n            } catch (e) {\n                //\n            }\n        }\n        if (searchEle) {\n            setCSS(searchEle, 'display', 'none');\n        }\n    }\n};\n\n/**\n * binds the touch event for content\n */\nconst bindContentEvents = (leftNavEle: HTMLElement, pageContainer: HTMLElement, searchContainer: any, isTablet = false) => {\n    if (!isTablet) {\n        // touch content to hide nav pane and left panel\n        bindTapEvtHandler(pageContainer, hidePageContainers.bind(this, leftNavEle, searchContainer));\n    }\n};\n\nconst bindLeftPanelEvents = (leftNavEle: HTMLElement, searchEle: HTMLElement) => {\n    // tap left to show/hide left panel\n    bindTapEvtHandler(roleSelector(CLASS_NAME.SWIPE_ELEM), () => {\n        if (leftNavEle) {\n            (leftNavEle as any).widget.toggle();\n\n            // Hide search container when left panel is open\n            if (leftNavEle.classList.contains('visible')) {\n                if (searchEle) {\n                    setCSS(searchEle, 'display', 'none');\n                }\n            }\n        }\n    });\n};\n\n/**\n * binds the touch event for content\n */\nconst bindRightPanelEvents = (rightNavEle: HTMLElement) => {\n    bindTapEvtHandler(rightNavEle, hidePageContainers);\n};\n\n\n/**\n * toggles the search container\n */\nconst toggleSearchContainer = (searchEle: HTMLElement, leftNavEle: HTMLElement) => {\n    if ($(searchEle).css('display') === 'none') {\n        hidePageContainers(leftNavEle);\n        setCSS(searchEle, 'display', 'inline-table');\n    } else {\n        hidePageContainers(leftNavEle, searchEle);\n    }\n};\n\n/**\n * Bind event with Search icon in header\n */\nconst bindSearchIconEvent = (searchElements, leftNavEle: HTMLElement) => {\n\n    $(searchElements).each((index, ele: HTMLElement) => {\n        const searchEle = $('<a class=\"app-header-action\"><i class=\"wi wi-search\"></i></a>') as JQuery<HTMLElement>;\n        $(ele).before(searchEle);\n        // Tap icon to show/hide search box\n        bindTapEvtHandler(searchEle, () => toggleSearchContainer(ele, leftNavEle));\n    });\n\n};\n\nexport const updateDeviceView  = (element: HTMLElement, isTablet = false) => {\n\n    const leftNavEle = element.querySelector(roleSelector(CLASS_NAME.LEFT_PANEL)) as HTMLElement;\n    const rightNavEle = element.querySelector(roleSelector(CLASS_NAME.RIGHT_PANEL)) as HTMLElement;\n    const headerEle = element.querySelector(roleSelector(CLASS_NAME.HEADER)) as HTMLElement;\n    const searchEle =  headerEle && headerEle.querySelector(`.${CLASS_NAME.SEARCH}`) as HTMLElement;\n    const pageEle = element.querySelector(`.${CLASS_NAME.CONTENT}`) as HTMLElement;\n\n    bindContentEvents(leftNavEle, pageEle, searchEle, isTablet);\n\n    if (leftNavEle) {\n        bindLeftPanelEvents(leftNavEle, searchEle);\n    } else {\n        // remove the icon\n        $(headerEle).find(roleSelector(CLASS_NAME.SWIPE_ELEM)).remove();\n    }\n\n    if (rightNavEle) {\n        bindRightPanelEvents(rightNavEle);\n    }\n\n    if (searchEle) {\n        bindSearchIconEvent(searchEle, leftNavEle);\n    }\n};\n","import { Injector } from '@angular/core';\n\nimport { $appDigest, findValueOf, isObject, validateAccessRoles } from '@wm/core';\nimport { SecurityService } from '@wm/security';\n\nimport { createArrayFrom } from '../../../utils/data-utils';\nimport { getEvaluatedData } from '../../../utils/widget-utils';\nimport { getOrderedDataset } from '../../../utils/form-utils';\nimport { StylableComponent } from './stylable.component';\n\ndeclare const _;\n\nconst getValidLink = (link) => {\n    const routRegex = /^(\\/|#\\/|#)(?!\\W).*/;\n    if (link) {\n        if (routRegex.test(link)) {\n            link = _.first(link.match(/[\\w]+.*/g)) || '';\n            return `#/${link}`;\n        }\n        if (_.startsWith(link, 'www.')) {\n            return `//${link}`;\n        }\n        return link;\n    }\n};\n\nexport class DatasetAwareNavComponent extends StylableComponent {\n\n    public nodes: Array<NavNode> = [];\n    public dataset: any;\n    public itemicon: string;\n    public itemlabel: string;\n    public itemlink: string;\n    public itemtarget: string;\n    public itembadge: string;\n    public itemchildren: string;\n    public itemaction: string;\n    public itemclass: string;\n    public itemid: string;\n    public userrole: string;\n    public orderby: string;\n    public datafield: string;\n    public displayfield: string;\n\n    private _itemFieldMap;\n    private binditemlabel: string | null;\n    private binditemicon: string | null;\n    private binditemaction: string | null;\n    private binditembadge: string | null;\n    private binditemchildren: string | null;\n    private binditemlink: string | null;\n    private binditemtarget: string | null;\n    private binduserrole: string | null;\n    private securityService: any;\n\n    protected binditemid: string | null;\n\n    constructor(inj: Injector, WIDGET_CONFIG) {\n        super(inj, WIDGET_CONFIG);\n        this.securityService = this.inj.get(SecurityService);\n        this.binditemlabel = this.nativeElement.getAttribute('itemlabel.bind');\n        this.binditemicon = this.nativeElement.getAttribute('itemicon.bind');\n        this.binditemaction = this.nativeElement.getAttribute('itemaction.bind');\n        this.binditembadge = this.nativeElement.getAttribute('itembadge.bind');\n        this.binditemchildren = this.nativeElement.getAttribute('itemchildren.bind');\n        this.binditemid = this.nativeElement.getAttribute('itemid.bind');\n        this.binditemlink = this.nativeElement.getAttribute('itemlink.bind');\n        this.binditemtarget = this.nativeElement.getAttribute('itemtarget.bind');\n        this.binduserrole = this.nativeElement.getAttribute('userrole.bind');\n    }\n\n    /**\n     * constructs individual node for the widget model.\n     * @param fields\n     * @param node\n     */\n    private getNode(fields, node): NavNode {\n        const context = this.viewParent.pageScope || this.viewParent;\n        const children = getEvaluatedData(node, {expression: 'itemchildren', bindExpression: this.binditemchildren}, context) || _.get(node, fields.childrenField);\n        const navNode = {\n            action: getEvaluatedData(node, {expression: 'itemaction', bindExpression: this.binditemaction}, context) || _.get(node, fields.actionField),\n            badge: getEvaluatedData(node, {expression: 'itembadge', bindExpression: this.binditembadge}, context) || _.get(node, fields.badgeField),\n            children: Array.isArray(children) ? this.getNodes(children) : [],\n            class: _.get(node, fields.classField),\n            disabled: node.disabled,\n            icon: getEvaluatedData(node, {expression: 'itemicon', bindExpression: this.binditemicon}, context) || _.get(node, fields.iconField),\n            id: getEvaluatedData(node, {expression: 'itemid', bindExpression: this.binditemid}, context) || _.get(node, fields.idField),\n            label: getEvaluatedData(node, {expression: 'itemlabel', bindExpression: this.binditemlabel}, context) || _.get(node, fields.labelField),\n            link: getValidLink(getEvaluatedData(node, {expression: 'itemlink', bindExpression: this.binditemlink}, context) || _.get(node, fields.linkField)),\n            target: getValidLink(getEvaluatedData(node, {expression: 'itemtarget', bindExpression: this.binditemtarget}, context) || _.get(node, fields.targetField)),\n            role: getEvaluatedData(node, {expression: 'userrole', bindExpression: this.binduserrole}, context),\n            // older projects have display field & data field property for menu.\n            value: this.datafield ? (this.datafield === 'All Fields' ? node : findValueOf(node, this.datafield)) : node\n        };\n        return _.omitBy(navNode, _.isUndefined);\n    }\n\n    resetItemFieldMap() {\n        this._itemFieldMap = null;\n    }\n\n    getItemFieldsMap() {\n        if (!this._itemFieldMap) {\n            this._itemFieldMap = {\n                idField: this.itemid || 'itemid',\n                iconField: this.itemicon || 'icon',\n                labelField: this.itemlabel || 'label',\n                linkField: this.itemlink || 'link',\n                targetField: this.itemtarget || 'target',\n                badgeField: this.itembadge || 'badge',\n                childrenField: this.itemchildren || 'children',\n                classField: this.itemclass || 'class',\n                actionField: this.itemaction || 'action'\n            };\n        }\n        return this._itemFieldMap;\n    }\n\n    /**\n     * returns array for the value passed as nv.\n     * nv: 'a,b' => [{label:a, value:a}, {label:b, value:b}]\n     * nv: [1,2] => [{label:1, value:1}, {label:2, value:2}]\n     * nv: [{obj}, {obj}] => [{obj}, {obj}]\n     * @param nv\n     */\n    private prepareNodeDataSet(nv) {\n        nv =  createArrayFrom(nv);\n        return nv.map((val) => {\n           if (!isObject(val)) {\n                return {\n                    label: val,\n                    value: val\n                };\n           }\n           return val;\n        });\n    }\n\n    /**\n     * constructs dataset form the nav elements.\n     */\n    private getNodes(nv = this.dataset || {}): Array<NavNode> {\n        let nodes: Array<any> = getOrderedDataset(this.prepareNodeDataSet(nv), this.orderby) || [];\n\n        if (nodes.length) {\n            const userRole = this.userrole;\n            const nodeFields = this.getItemFieldsMap();\n\n            nodes = nodes.reduce((result, node) => {\n                if (validateAccessRoles(node[userRole], this.securityService.loggedInUser)) {\n                    result.push(this.getNode(nodeFields, node));\n                }\n                return result;\n            }, []);\n        }\n        return nodes;\n    }\n\n    // enable the inherited class to extend this method.\n    protected resetNodes() {\n        this.resetItemFieldMap();\n        this.nodes = this.getNodes();\n        $appDigest();\n    }\n\n    // debounce function for reset nodes functions.\n    private _resetNodes = _.debounce(this.resetNodes, 50);\n\n    onPropertyChange(key, nv, ov) {\n        switch (key) {\n            case 'dataset':\n            case 'itemicon':\n            case 'itemlabel':\n            case 'itemlink':\n            case 'itemtarget':\n            case 'itemclass':\n            case 'itemchildren':\n            case 'orderby':\n                // calls resetnodes method after 50ms. any calls within 50ms will be ignored.\n                this._resetNodes();\n                break;\n        }\n        super.onPropertyChange(key, nv, ov);\n    }\n}\n\nexport interface NavNode {\n    label: string;\n    action?: any;\n    badge?: string;\n    children?: Array<NavNode>;\n    class?: string;\n    disabled?: boolean;\n    icon?: string;\n    id?: string;\n    link?: string;\n    role?: string;\n    value?: any;\n}\n","import { Attribute, Component, Injector } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Location } from '@angular/common';\n\nimport { getRouteNameFromLink, getUrlParams, openLink } from '@wm/core';\n\nimport { APPLY_STYLES_TYPE, styler } from '../../framework/styler';\nimport { registerProps } from './breadcrumb.props';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\nimport { DatasetAwareNavComponent, NavNode } from '../base/dataset-aware-nav.component';\n\nconst DEFAULT_CLS = 'breadcrumb app-breadcrumb';\nconst WIDGET_CONFIG = {widgetType: 'wm-breadcrumb', hostClass: DEFAULT_CLS};\n\ndeclare const _;\n\n@Component({\n    selector: '[wmBreadcrumb]',\n    templateUrl: './breadcrumb.component.html',\n    providers: [\n        provideAsWidgetRef(BreadcrumbComponent)\n    ]\n})\nexport class BreadcrumbComponent extends DatasetAwareNavComponent {\n    static initializeProps = registerProps();\n    private disableMenuContext: boolean;\n\n    constructor(\n        inj: Injector,\n        private route: Router,\n        private location: Location,\n        @Attribute('beforenavigate.event') beforeNavigateCB: string\n    ) {\n        super(inj, WIDGET_CONFIG);\n        styler(this.nativeElement, this, APPLY_STYLES_TYPE.CONTAINER);\n        this.disableMenuContext = !!beforeNavigateCB;\n    }\n\n    /**\n     * Gets the first path found based on the key provided inside info Object.\n     * @param info - Info object which has properties key(Active Page Name) and isPathFound[boolean] is set true if path found.\n     * @param children - a child Object form children Array.\n     * @param path - final path.\n     * @returns {*|Array}: returns array of objects which represents the final path.\n     */\n    private getPath(info: {key: string, isPathFound: boolean}, children: Array<NavNode>, path = []): Array<NavNode> {\n        children.forEach((child: NavNode) => {\n            // return if path already found.\n            if (info.isPathFound) {\n                return path;\n            }\n            // if key is matched set path found to true and return the path.\n            if (child.id === info.key) {\n                info.isPathFound = true;\n                // only push the child object by omiting the children within it.\n                path.push(child);\n                return path;\n            }\n            // if the node has children make a recursive call.\n            if (child.children.length) {\n                path.push(child);\n                this.getPath(info, child.children, path);\n                // if path is not found in that node pop the node.\n                if (!info.isPathFound) {\n                    path.pop();\n                }\n            }\n        });\n        // return the path.\n        return path;\n    }\n\n    private getCurrentRoute(): string {\n        return this.location.path().substr(1).split('?')[0];\n    }\n\n    // over rides resetNode function, generating path for the breadcrumb.\n    protected resetNodes() {\n        super.resetNodes();\n        // get path only if the widget have id property.\n        if (this.itemid || this.binditemid) {\n            this.nodes = this.getPath({key: this.getCurrentRoute(), isPathFound: false}, this.nodes);\n        }\n\n    }\n\n    onItemClick ($event: Event, $item: any) {\n        $event.preventDefault();\n        const locals = {$item: $item.value, $event};\n        const canNavigate = !(this.invokeEventCallback('beforenavigate', locals) === false);\n        const linkTarget = $item.target;\n        let itemLink = $item.link;\n\n        if (itemLink && canNavigate) {\n            if (itemLink.startsWith('#/') && (!linkTarget || linkTarget === '_self')) {\n                const queryParams = getUrlParams(itemLink);\n                itemLink = getRouteNameFromLink(itemLink);\n                this.route.navigate([itemLink], { queryParams});\n            } else {\n                openLink(itemLink, linkTarget);\n            }\n        }\n    }\n\n}\n","import { PROP_ANY, PROP_BOOLEAN, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-breadcrumb',\n        new Map(\n            [\n                ['class', PROP_STRING],\n                ['dataset', PROP_ANY],\n                ['itemlabel', PROP_STRING],\n                ['itemid', PROP_STRING],\n                ['itemlink', PROP_STRING],\n                ['itemicon', PROP_STRING],\n                ['itemchildren', PROP_STRING],\n                ['itemclass', PROP_STRING],\n                ['itemtarget', PROP_STRING],\n                ['name', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}]\n            ]\n        )\n    );\n};\n","import { Component, HostBinding, Injector } from '@angular/core';\n\nimport { styler } from '../../framework/styler';\nimport { IWidgetConfig } from '../../framework/types';\nimport { DISPLAY_TYPE } from '../../framework/constants';\nimport { registerProps } from './button.props';\nimport { StylableComponent } from '../base/stylable.component';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\n\nconst DEFAULT_CLS = 'btn app-button';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-button',\n    hostClass: DEFAULT_CLS,\n    displayType: DISPLAY_TYPE.INLINE_BLOCK\n};\n\n@Component({\n    selector: 'button[wmButton]',\n    templateUrl: './button.component.html',\n    providers: [\n        provideAsWidgetRef(ButtonComponent)\n    ]\n})\nexport class ButtonComponent extends StylableComponent {\n    static initializeProps = registerProps();\n\n    public iconurl: string;\n    public iconclass: string;\n    public caption: string;\n    public badgevalue: string;\n    @HostBinding('type') type: string;\n    @HostBinding('tabIndex') tabindex: number;\n    @HostBinding('disabled') disabled: boolean;\n    @HostBinding('attr.accesskey') shortcutkey: string;\n    @HostBinding('attr.icon-position') iconposition: string;\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n        styler(this.nativeElement, this);\n    }\n}\n","import { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-button',\n        new Map(\n            [\n                ['badgevalue', PROP_STRING],\n                ['caption', PROP_STRING],\n                ['class', {value: 'btn-default', ...PROP_STRING}],\n                ['conditionalclass', PROP_ANY],\n                ['conditionalstyle', PROP_ANY],\n                ['disabled', PROP_BOOLEAN],\n                ['hint', PROP_STRING],\n                ['iconclass', PROP_STRING],\n                ['iconheight', PROP_STRING],\n                ['iconmargin', PROP_STRING],\n                ['iconposition', PROP_STRING],\n                ['iconurl', PROP_STRING],\n                ['iconwidth', PROP_STRING],\n                ['name', PROP_STRING],\n                ['shortcutkey', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n                ['tabindex', {value: 0, ...PROP_NUMBER}],\n                ['type', PROP_STRING]\n            ]\n        )\n    );\n};\n","import { Directive, HostBinding, Injector } from '@angular/core';\n\nimport { APPLY_STYLES_TYPE, styler } from '../../framework/styler';\nimport { IWidgetConfig } from '../../framework/types';\nimport { StylableComponent } from '../base/stylable.component';\nimport { registerProps } from './button-group.props';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\n\nconst DEFAULT_CLS = 'btn-group app-button-group';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-buttongroup',\n    hostClass: DEFAULT_CLS\n};\n\n@Directive({\n    selector: '[wmButtonGroup]',\n    providers: [\n        provideAsWidgetRef(ButtonGroupDirective)\n    ]\n})\nexport class ButtonGroupDirective extends StylableComponent {\n    static initializeProps = registerProps();\n    @HostBinding('class.btn-group-vertical') vertical: boolean;\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n\n        styler(this.nativeElement, this, APPLY_STYLES_TYPE.CONTAINER);\n    }\n}\n","import { PROP_BOOLEAN, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-buttongroup',\n        new Map(\n            [\n                ['class', PROP_STRING],\n                ['name', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n                ['vertical', PROP_BOOLEAN]\n            ]\n        )\n    );\n};\n","import { DatePickerInnerComponent } from 'ngx-bootstrap/datepicker/datepicker-inner.component';\n\nimport { AfterViewInit, AfterContentInit, Component, ElementRef, Injector, OnInit, ViewChild, ViewEncapsulation } from '@angular/core';\n\nimport { $watch, getClonedObject, getSessionStorageItem, isMobile } from '@wm/core';\n\nimport { APPLY_STYLES_TYPE, styler } from '../../framework/styler';\nimport { IRedrawableComponent } from '../../framework/types';\nimport { registerProps } from './calendar.props';\nimport { getEvaluatedData, provideAsWidgetRef } from '../../../utils/widget-utils';\nimport { StylableComponent } from '../base/stylable.component';\nimport { createArrayFrom } from '../../../utils/data-utils';\n\ndeclare const _, $, moment;\n\nconst DEFAULT_CLS = 'app-calendar';\nconst dateFormats = ['yyyy-MM-dd', 'yyyy-M-dd', 'M-dd-yyyy', 'MM-dd-yy', 'yyyy, dd MMMM', 'yyyy, MMM dd', 'MM/dd/yyyy', 'M/d/yyyy', 'EEE, dd MMM yyyy', 'EEE MMM dd yyyy', 'EEEE, MMMM dd, yyyy', 'timestamp'];\nconst defaultHeaderOptions = {\n    left: 'prev next today',\n    center: 'title',\n    right: 'month basicWeek basicDay'\n};\nconst VIEW_TYPES = {\n    BASIC: 'basic',\n    AGENDA: 'agenda',\n    LIST: 'list'\n};\nconst BUTTON_TEXT = {\n    YEAR: 'Year',\n    MONTH: 'Month',\n    WEEK: 'Week',\n    DAY: 'Day',\n    TODAY: 'Today'\n};\nconst SELECTION_MODES = {\n    NONE: 'none',\n    SINGLE: 'single',\n    MULTIPLE: 'multiple'\n};\nconst NEXT_DAY_THRESHOLD = {\n    START: '00:00',\n    END: '24:00'\n};\nconst getEventMomentValue = (value, key) => {\n    let isDate = false;\n\n    dateFormats.forEach((format) => {\n        // moment supports uppercase formats\n        if (moment(value, format.toUpperCase(), true).isValid()) {\n            isDate = true;\n            return false;\n        }\n    });\n\n    // if the value is date then for end date the value should be end of the day as the calendar is approximating it to the start.\n    if (isDate && key === 'end') {\n        return moment(value).endOf('day');\n    }\n\n    return moment(value);\n};\nconst getUTCDateTime = (dateObj) => {\n    dateObj = _.isObject(dateObj) ? dateObj : moment(dateObj);\n    const year = dateObj.format('YYYY'),\n        // javascript starts the month count from '0' where as moment returns the human count\n        month = dateObj.format('MM') - 1,\n        day = dateObj.format('DD'),\n        hours = dateObj.format('HH'),\n        minutes = dateObj.format('mm'),\n        seconds = dateObj.format('ss');\n    return new Date(year, month, day, hours, minutes, seconds);\n};\nconst WIDGET_CONFIG = {widgetType: 'wm-calendar', hostClass: DEFAULT_CLS};\n// mobile calendar class names\nconst multipleEventClass = 'app-calendar-event';\nconst doubleEventClass = multipleEventClass + ' two';\nconst singleEventClass = multipleEventClass + ' one';\nconst dateFormat = 'YYYY/MM/DD';\n\n@Component({\n    selector: '[wmCalendar]',\n    templateUrl: './calendar.component.html',\n    styleUrls: ['../../../../../../node_modules/fullcalendar/dist/fullcalendar.css'],\n    providers: [\n        provideAsWidgetRef(CalendarComponent)\n    ],\n    encapsulation: ViewEncapsulation.None\n})\nexport class CalendarComponent extends StylableComponent implements AfterContentInit, AfterViewInit, OnInit, IRedrawableComponent {\n    static initializeProps = registerProps();\n    // The calendar element reference\n    @ViewChild('calendar') _calendar: ElementRef;\n    @ViewChild('datepicker') _datepicker: ElementRef;\n\n    public _datepickerInnerComponent: DatePickerInnerComponent;\n\n    public selecteddates: any;\n    public selecteddata: any;\n    public currentview: object;\n    public dataset: any;\n    public calendartype;\n    public controls = 'navigation, today, year, month, week, day';\n    public datavalue;\n    public eventtitle;\n    public eventstart;\n    public eventend;\n    public eventallday;\n    public eventclass;\n\n    private eventSources: Array<any> = [];\n\n    private dataSetEvents = {\n        events: []\n    };\n    private oldData;\n    // map the fullcalendar Element rendered\n    private $fullCalendar;\n    // model to the mobile calendar\n    private proxyModel;\n    private eventData;\n    private events;\n    private changesStack = [];\n    private invokeOnViewRenderback = _.debounce(() => this.invokeEventCallback('viewrender', { $view: this.calendarOptions }), 300);\n\n    // calendarOptions to the calendar\n    private calendarOptions: any = {\n        calendar: {\n            height: 600,\n            eventSources: this.eventSources,\n            editable: true,\n            locale: getSessionStorageItem('selectedLocale') || 'en',\n            selectable: false,\n            header: defaultHeaderOptions,\n            nextDayThreshold: NEXT_DAY_THRESHOLD,\n            views: {\n                month: {\n                    eventLimit: 0\n                }\n            },\n            unselectAuto: false,\n            eventDrop: this.eventDrop.bind(this),\n            eventResizeStart: this.onEventChangeStart.bind(this),\n            eventDragStart: this.onEventChangeStart.bind(this),\n            eventResize: this.eventResize.bind(this),\n            eventClick: this.eventClick.bind(this),\n            select: this.select.bind(this),\n            eventRender: this.eventRender.bind(this),\n            viewRender: this.viewRender.bind(this)\n        }\n    };\n    public mobileCalendar: boolean;\n    private view: string;\n    private dayClass: Array<any> = [];\n\n    // this function selects the default date given for the calendar\n    selectDate() {\n        let start, end;\n        if (_.isObject(this.datavalue)) {\n            start = this.datavalue.start;\n            end   = this.datavalue.end;\n        } else {\n            start = moment(this.datavalue);\n            end   = moment(this.datavalue).add(1, 'day').startOf('day');\n        }\n        this.$fullCalendar.fullCalendar('gotoDate', start); // after selecting the date go to the date.\n        this.$fullCalendar.fullCalendar('select', start, end);\n    }\n\n    // changes the calendar view to the default date given for the calendar.\n    public gotoDate() {\n        this.$fullCalendar.fullCalendar('gotoDate', moment(this.datavalue));\n    }\n\n    // this function takes the calendar view to the a year ahead\n    public gotoNextYear() {\n        this.$fullCalendar.fullCalendar('nextYear');\n    }\n\n    // this function takes the calendar view to the a year before\n    public gotoPrevYear() {\n        this.$fullCalendar.fullCalendar('prevYear');\n    }\n\n    /**\n     * this function takes the calendar view to the specified month\n     * @param monthVal, 1-12 value of month\n     */\n    public gotoMonth(monthVal) {\n        const presentDay = this.$fullCalendar.fullCalendar('getDate');\n        const presentMonthVal = new Date(presentDay).getMonth();\n        if (presentMonthVal < monthVal) {\n            this.$fullCalendar.fullCalendar('gotoDate', presentDay.add(monthVal - presentMonthVal - 1, 'M'));\n        } else {\n            this.$fullCalendar.fullCalendar('gotoDate', presentDay.subtract( presentMonthVal - monthVal + 1, 'M'));\n        }\n    }\n\n    // this function takes the calendar view to the a month ahead\n    public gotoNextMonth() {\n        const presentDay = this.$fullCalendar.fullCalendar('getDate');\n        this.$fullCalendar.fullCalendar('gotoDate', presentDay.add(1, 'M'));\n    }\n\n    // this function takes the calendar view to the a month before\n    public gotoPrevMonth() {\n        const presentDay = this.$fullCalendar.fullCalendar('getDate');\n        this.$fullCalendar.fullCalendar('gotoDate', presentDay.subtract(1, 'M'));\n    }\n\n\n    // this function re-renders the events assigned to the calendar.\n    private rerenderEvents() {\n        this.$fullCalendar.fullCalendar('rerenderEvents');\n    }\n\n    private setSelectedData(start, end) {\n        let dataset = this.dataset;\n        if (!dataset) {\n            return;\n        }\n\n        const filteredDates = [];\n        const eventStartKey = this.eventstart || 'start';\n        const eventEndKey = this.eventend || 'end';\n        const startDate = moment(new Date(start)).format('MM/DD/YYYY');\n        const endDate = moment(new Date(end)).subtract(1, 'days').format('MM/DD/YYYY');\n\n        dataset = dataset.data || dataset;\n        dataset.forEach((value) => {\n            if (!value[eventStartKey]) {\n                return;\n            }\n            const eventStartDate   = moment(new Date(value[eventStartKey])).format('MM/DD/YYYY');\n            const eventEndDate   = moment(new Date(value[eventEndKey] || value[eventStartKey])).format('MM/DD/YYYY');\n            const eventExists = moment(eventStartDate).isSameOrAfter(startDate) && moment(eventEndDate).isSameOrBefore(endDate);\n            if (eventExists) {\n                filteredDates.push(value);\n            }\n        });\n        return filteredDates;\n    }\n\n    private eventDrop($newData, $delta, $revertFunc, $event, $ui, $view) {\n        this.invokeEventCallback('eventdrop', {$event, $newData, $oldData: this.oldData, $delta, $revertFunc, $ui, $view});\n    }\n\n    private select(start, end, jsEvent, $view) {\n        this.selecteddates = {start: getUTCDateTime(start), end: getUTCDateTime(end)};\n        this.selecteddata = this.setSelectedData(start, end);\n        this.invokeEventCallback('select', {$start: start.valueOf(), $end: end.valueOf(), $view, $data: this.selecteddata});\n    }\n\n    private eventResize($newData, $delta, $revertFunc, $event, $ui, $view) {\n        this.invokeEventCallback('eventresize', {$event, $newData, $oldData: this.oldData, $delta, $revertFunc, $ui, $view});\n    }\n\n    private onEventChangeStart(event) {\n        this.oldData = getClonedObject(event);\n    }\n\n    private eventClick($data, $event, $view) {\n        this.invokeEventCallback('eventclick', {$event, $data, $view});\n    }\n\n    private eventRender($data, $event, $view) {\n        if (this.calendartype === VIEW_TYPES.LIST) {\n            this.$fullCalendar.find('.fc-list-table').addClass('table');\n        }\n        this.invokeEventCallback('eventrender', {$event, $data, $view});\n    }\n\n    private viewRender($view) {\n        this.currentview = {start: $view.start.format(), end: $view.end.subtract(1, 'days').format()};\n        if (this.calendartype === VIEW_TYPES.LIST) {\n            this.$fullCalendar.find('.fc-list-table').addClass('table');\n        }\n        this.invokeEventCallback('viewrender', {$view});\n    }\n\n    // update the calendar header options once the controls changes\n    private updateCalendarHeaderOptions() {\n        const ctrls = this.controls, viewType = this.calendartype,\n            regEx = new RegExp('\\\\bday\\\\b', 'g');\n        let left = '', right = '';\n        if (ctrls && viewType) {\n            if (_.includes(ctrls, 'navigation')) {\n                left += ' prev next';\n            }\n\n            if (_.includes(ctrls, 'today')) {\n                left += ' today';\n            }\n\n            if (_.includes(ctrls, 'year')) {\n                right += (viewType === VIEW_TYPES.LIST) ? 'listYear' : '';\n            }\n\n            if (_.includes(ctrls, 'month')) {\n                right += (viewType === VIEW_TYPES.LIST) ? ' listMonth' : ' month';\n            }\n\n            if (_.includes(ctrls, 'week')) {\n                right += (viewType === VIEW_TYPES.BASIC) ?  ' basicWeek' : (viewType === VIEW_TYPES.LIST) ? ' listWeek' : ' agendaWeek';\n            }\n\n            if (regEx.test(ctrls)) {\n                right += (viewType === VIEW_TYPES.BASIC) ?  ' basicDay' : (viewType === VIEW_TYPES.LIST) ? ' listDay' : ' agendaDay';\n            }\n\n            _.extend(this.calendarOptions.calendar.header, {'left': left, 'right': right});\n        }\n    }\n\n    // to calculate the height for the event limit and parsing the value when it is percentage based.\n    private calculateHeight(height): number {\n        const $parent = $(this.nativeElement).parent(),\n            elHeight = height || '650px';\n\n        let parentHeight = $parent.css('height'),\n            computedHeight: number;\n\n        if (_.includes(elHeight, '%')) {\n            if (_.includes(parentHeight, '%')) {\n                parentHeight = $parent.height();\n            }\n            computedHeight = (parseInt(parentHeight, 10) * Number(elHeight.replace(/\\%/g, ''))) / 100;\n        } else {\n            computedHeight = parseInt(elHeight, 10);\n        }\n        this.calendarOptions.calendar.views.month.eventLimit = parseInt('' + computedHeight / 200, 10) + 1;\n        return computedHeight;\n    }\n\n    private triggerMobileCalendarChange() {\n        this.prepareCalendarEvents();\n        // change the model so that the view is rendered again with the events , after the dataset is changed.\n        this.proxyModel = this.proxyModel || moment().valueOf();\n        this.selecteddates = {\n            start: moment(this.proxyModel).valueOf(),\n            end  : moment(this.proxyModel).endOf('day').valueOf()\n        };\n        this.invokeEventCallback('eventrender', {$data: this.eventData});\n    }\n\n    // prepares events for the mobie calendar\n    private prepareCalendarEvents () {\n        let eventDay,\n            dataset;\n        this.eventData = {};\n        if (!this.dataset) {\n            return;\n        }\n        dataset = this.dataset;\n        dataset = _.isArray(dataset) ? dataset : (_.isObject(dataset) ? [dataset] : []);\n        this.events = dataset || this.constructCalendarDataset(dataset);\n        this.events.forEach((event) => {\n            const eventStart = event.start || event[this.eventstart];\n            if (eventStart) {\n                eventDay = moment(eventStart).startOf('day').format(dateFormat);\n                if (this.eventData[eventDay]) {\n                    this.eventData[eventDay].push(event);\n                } else {\n                    this.eventData[eventDay] = [event];\n                }\n\n                if (this.mobileCalendar) {\n                    // custom class on the date in the date picker.\n                    this.dayClass.push({\n                        date: new Date(eventStart).setHours(0, 0, 0, 0),\n                        mode: 'day',\n                        clazz: this.getDayClass({eventDay: eventDay})\n                    });\n                }\n            }\n        });\n        // add the eventData on the calendar by calling refreshView\n        if (this.mobileCalendar && this._datepickerInnerComponent) {\n            this._datepickerInnerComponent.refreshView();\n        }\n    }\n\n    // constructs the calendar dataset by mapping the eventstart, eventend, eventtitle etc.,\n    private constructCalendarDataset(eventSource) {\n        const properties = {\n            title: this.eventtitle || 'title',\n            allDay: this.eventallday || 'allday',\n            start: this.eventstart || 'start',\n            end: this.eventend || 'end',\n            className: this.eventclass || 'className'\n        };\n\n        eventSource.forEach((obj) => {\n            _.mapKeys(properties,  (value, key) => {\n                let objVal;\n                if (key === 'title') {\n                    objVal = getEvaluatedData(obj, {expression: value}, this.viewParent);\n                } else if (key === 'allDay') {\n                    objVal = !!_.get(obj, value);\n                } else {\n                    objVal = _.get(obj, value);\n                }\n                if (!objVal) {\n                    return;\n                }\n                if (key === 'start' || key === 'end') {\n                    objVal = getEventMomentValue(objVal, key);\n                }\n                obj[key] = objVal;\n            });\n        });\n        return eventSource;\n    }\n\n    private setLocale() {\n        const year = _.get(this.appLocale, 'LABEL_CALENDAR_YEAR') || BUTTON_TEXT.YEAR;\n        const month = _.get(this.appLocale, 'LABEL_CALENDAR_MONTH') || BUTTON_TEXT.MONTH;\n        const week = _.get(this.appLocale, 'LABEL_CALENDAR_WEEK') || BUTTON_TEXT.WEEK;\n        const day = _.get(this.appLocale, 'LABEL_CALENDAR_DAY') || BUTTON_TEXT.DAY;\n        const today = _.get(this.appLocale, 'LABEL_CALENDAR_TODAY') || BUTTON_TEXT.TODAY;\n        this.calendarOptions.calendar.buttonText    = { year, month, week, day, today,\n            'listYear': year,\n            'listMonth': month,\n            'listWeek': week,\n            'listDay': day\n        };\n    }\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n\n        this.mobileCalendar = isMobile();\n        this.eventSources.push(this.dataSetEvents);\n    }\n\n    ngOnInit() {\n        super.ngOnInit();\n        styler(this.nativeElement, this, APPLY_STYLES_TYPE.CONTAINER, ['height']);\n\n        if (this.mobileCalendar) {\n            if (!this.view || this.view === 'week') {\n                this.view = 'day';\n            }\n            this.triggerMobileCalendarChange();\n        } else {\n            this.setLocale();\n        }\n    }\n\n    onStyleChange(key, nv, ov?) {\n        super.onStyleChange(key, nv, ov);\n        if (key === 'height') {\n            this.calendarOptions.calendar.height = this.calculateHeight(nv);\n            this.updateCalendarOptions('option', 'height', this.calendarOptions.calendar.height);\n        }\n    }\n\n    onPropertyChange(key, nv, ov?) {\n        super.onPropertyChange(key, nv, ov);\n        switch (key) {\n            case 'selectionmode':\n                if (nv !== SELECTION_MODES.NONE) {\n                    this.calendarOptions.calendar.selectable = true;\n                    this.updateCalendarOptions('option', 'selectable', true);\n                    if (nv === SELECTION_MODES.SINGLE) {\n                        this.calendarOptions.calendar.selectConstraint = {\n                            start: '00:00',\n                            end: '24:00'\n                        };\n                        this.updateCalendarOptions('option', 'selectConstraint', this.calendarOptions.calendar.selectConstraint);\n                    } else {\n                        this.updateCalendarOptions('option', 'selectConstraint', {});\n                    }\n                } else {\n                    this.calendarOptions.calendar.selectable = false;\n                    this.updateCalendarOptions('option', 'selectable', false);\n                }\n                break;\n            case 'view':\n                if (nv !== 'month' || this.calendartype === VIEW_TYPES.LIST) {\n                    this.calendarOptions.calendar.defaultView = this.calendartype + _.capitalize(nv);\n                } else {\n                    this.calendarOptions.calendar.defaultView = nv;\n                }\n                this.updateCalendarOptions('changeView', this.calendarOptions.calendar.defaultView);\n                break;\n            case 'calendartype':\n                this.calendartype = nv || 'basic';\n            case 'controls':\n                this.updateCalendarHeaderOptions();\n                break;\n            case 'dataset':\n                let dataSet;\n                this.dataset = nv;\n                dataSet = createArrayFrom(getClonedObject(nv));\n                dataSet = this.constructCalendarDataset(dataSet);\n                this.dataSetEvents.events = dataSet.filter((event) => {\n                    event.start = event.start || event.end;\n                    if (event.start) {\n                        return true;\n                    }\n                });\n\n                if (this.mobileCalendar) {\n                    this.triggerMobileCalendarChange();\n                } else {\n                    this.updateCalendarOptions('removeEvents');\n                    this.updateCalendarOptions('addEventSource', this.dataSetEvents.events);\n                    this.updateCalendarOptions('rerenderEvents');\n                }\n                break;\n        }\n    }\n\n    // Returns the default date when the datavalue is provided\n    getDefaultDate() {\n        if (this.datavalue) {\n            return new Date(this.datavalue);\n        }\n    }\n\n    ngAfterViewInit() {\n        super.ngAfterViewInit();\n\n        if (this.mobileCalendar && this._datepicker) {\n            let lastActiveDate = (this._datepicker as any).activeDate;\n            // renderview when active date changes\n            (this._datepicker as any).activeDateChange.subscribe((dt) => {\n                const prevYear = lastActiveDate.getYear();\n                const prevMonth = lastActiveDate.getMonth();\n                const selectedYear = dt.getYear();\n                const selectedMonth = dt.getMonth();\n\n                // invoke renderView only when month is changed.\n                if (prevMonth !== selectedMonth || prevYear !== selectedYear) {\n                    lastActiveDate = dt;\n                    this.renderMobileView(dt);\n                }\n            });\n\n            this._datepickerInnerComponent = (this._datepicker as any)._datePicker;\n            this.renderMobileView(moment(this.datavalue));\n            this.registerDestroyListener(\n                $watch(\n                    '_datepickerInnerComponent.datepickerMode',\n                    this,\n                    {},\n                    (nv, ov) => {\n                        if (ov && !_.isEmpty(ov)) {\n                            this.invokeOnViewRenderback();\n                        }\n                    }\n                )\n            );\n            return;\n        }\n\n        this.$fullCalendar = $(this._calendar.nativeElement);\n        this.$fullCalendar.fullCalendar(this.calendarOptions.calendar);\n        // if the changes are already stacked before calendar renders then execute them when needed\n        if (this.changesStack.length) {\n            this.changesStack.forEach((changeObj) => {\n                this.$fullCalendar.fullCalendar(changeObj.operationType, changeObj.argumentKey, changeObj.argumentValue);\n            });\n            this.changesStack.length = 0;\n        }\n    }\n\n    updateCalendarOptions(operationType: string, argumentKey?: any, argumentValue?: any): void {\n        if (!this.$fullCalendar) {\n            this.changesStack.push({\n                operationType: operationType,\n                argumentKey: argumentKey,\n                argumentValue: argumentValue\n            });\n            return;\n        }\n        this.$fullCalendar.fullCalendar(operationType, argumentKey, argumentValue);\n    }\n\n    redraw() {\n        this.updateCalendarOptions('render');\n    }\n\n    // on date change invoke the select event, and if date has event on it then invoke the event click.\n    private onValueChange(value: Date): void {\n        this.proxyModel = value;\n        const selectedDate        = this.proxyModel && moment(this.proxyModel).startOf('day').format(dateFormat),\n            selectedEventData   = this.eventData[selectedDate],\n            start               = moment(this.proxyModel),\n            end                 = moment(this.proxyModel).endOf('day');\n        this.selecteddata = selectedEventData;\n        this.selecteddates = {\n            'start': moment(selectedDate).valueOf(),\n            'end'  : moment(selectedDate).endOf('day').valueOf()\n        };\n        this.calendarOptions.calendar.select(start.valueOf(), end.valueOf(), {}, this, selectedEventData);\n        if (selectedEventData) {\n            this.calendarOptions.calendar.eventClick(selectedEventData, {}, this);\n        }\n    }\n\n    // returns the custom class for the events depending on the length of the events for that day.\n    private getDayClass(data) {\n        const eventDay = data.eventDay;\n\n        if (!_.isEmpty(this.eventData) && this.eventData[eventDay]) {\n            const eventsLength = this.eventData[eventDay].length;\n            if (eventsLength === 1) {\n                return singleEventClass;\n            }\n            if (eventsLength === 2) {\n                return doubleEventClass;\n            }\n            return multipleEventClass;\n        }\n        return '';\n    }\n\n    // sets the current view and invokes the viewrender method.\n    private renderMobileView(viewObj) {\n        let startDate,\n            endDate;\n        if (!viewObj) {\n            return;\n        }\n        startDate = moment(viewObj).startOf('month').valueOf();\n        endDate = moment(viewObj).endOf('month').valueOf();\n        this.currentview = {start: startDate, end: endDate};\n        this.invokeOnViewRenderback();\n    }\n}\n","import { isMobileApp } from '@wm/core';\n\nimport { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    const props = new Map(\n            [\n                ['calendartype', {value: 'basic', ...PROP_STRING}],\n                ['class', PROP_STRING],\n                ['tabindex', {value: 0, ...PROP_NUMBER}],\n                ['controls', {value: 'navigation, today, year, month, week, day', ...PROP_STRING}],\n                ['dataset', PROP_ANY],\n                ['datavalue', PROP_STRING],\n                ['eventallday', PROP_STRING],\n                ['eventclass', PROP_STRING],\n                ['eventend', PROP_STRING],\n                ['eventstart', PROP_STRING],\n                ['eventtitle', PROP_STRING],\n                ['name', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n                ['showindevice', {displayType: 'inline-block', value: 'all', ...PROP_STRING}],\n                ['view', PROP_STRING],\n                ['selectionmode', PROP_STRING]\n            ]\n        );\n    if (isMobileApp()) {\n        props.set('view', {value: 'day', ...PROP_STRING});\n    }\n    register('wm-calendar', props);\n};\n","import { Attribute, ChangeDetectorRef, Component, Injector, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\n\nimport { $parseEvent, addClass, App, getRouteNameFromLink, getUrlParams, openLink, removeClass, UserDefinedExecutionContext } from '@wm/core';\n\nimport { APPLY_STYLES_TYPE, styler } from '../../framework/styler';\nimport { registerProps } from './nav.props';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\nimport { DatasetAwareNavComponent } from '../base/dataset-aware-nav.component';\n\ndeclare const _;\n\nconst DEFAULT_CLS = 'nav app-nav';\nconst WIDGET_CONFIG = {widgetType: 'wm-nav', hostClass: DEFAULT_CLS};\n\nconst NavClassMap = {\n    pills: 'nav-pills',\n    tabs: 'nav-tabs',\n    navbar: 'navbar-nav'\n};\n\n@Component({\n    selector: '[wmNav]',\n    templateUrl: './nav.component.html',\n    providers: [\n        provideAsWidgetRef(NavComponent)\n    ]\n})\nexport class NavComponent extends DatasetAwareNavComponent implements OnInit {\n    static initializeProps = registerProps();\n\n    public selecteditem;\n    public type;\n    public disableMenuContext: boolean;\n    public layout;\n\n    private activeNavLINode: HTMLElement;\n    private itemActionFn: Function;\n    private pageScope: any;\n    private get activePageName() {\n        return this.app.activePageName;\n    }\n\n    constructor(\n        inj: Injector,\n        private cdRef: ChangeDetectorRef,\n        private router: Router,\n        private userDefinedExecutionContext: UserDefinedExecutionContext,\n        private app: App,\n        @Attribute('select.event') selectEventCB\n    ) {\n        super(inj, WIDGET_CONFIG);\n        styler(this.nativeElement, this, APPLY_STYLES_TYPE.CONTAINER);\n        this.disableMenuContext = !!selectEventCB;\n        this.pageScope = this.viewParent;\n    }\n\n\n    private setNavType(type) {\n        addClass(this.nativeElement, NavClassMap[type]);\n    }\n\n    private setNavLayout(layout) {\n        addClass(this.nativeElement, `nav-${layout}`);\n    }\n\n    public onNavSelect($event: Event, item: any, liRef: HTMLElement) {\n        $event.preventDefault();\n\n        if (this.activeNavLINode) {\n            removeClass(this.activeNavLINode, 'active');\n        }\n\n        this.activeNavLINode = liRef;\n\n        addClass(liRef, 'active');\n\n        this.selecteditem = item;\n\n        this.invokeEventCallback('select', {$event, $item: item.value});\n\n        let itemLink = item.link;\n        const itemAction = item.action;\n        const linkTarget = item.target;\n        if (itemAction) {\n            if (!this.itemActionFn) {\n                this.itemActionFn = $parseEvent(itemAction);\n            }\n\n            this.itemActionFn(this.userDefinedExecutionContext, Object.create(item));\n        }\n        if (itemLink) {\n            if (itemLink.startsWith('#/') && (!linkTarget || linkTarget === '_self')) {\n                const queryParams = getUrlParams(itemLink);\n                itemLink = getRouteNameFromLink(itemLink);\n                this.router.navigate([itemLink], {queryParams});\n            } else {\n                openLink(itemLink, linkTarget);\n            }\n        }\n    }\n\n    ngOnInit() {\n        super.ngOnInit();\n        this.setNavType(this.type);\n        this.setNavLayout(this.layout);\n    }\n\n    /**\n     * invoked from the menu widget when a menu item is selected.\n     * @param $event\n     * @param widget\n     * @param $item\n     */\n    onMenuItemSelect($event, widget, $item) {\n        this.selecteditem = _.omit($item, ['children', 'value']);\n        this.invokeEventCallback('select', {$event, $item: this.selecteditem});\n    }\n}\n","import { PROP_ANY, PROP_BOOLEAN, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-nav',\n        new Map(\n            [\n                ['autoclose', {value: 'always', ...PROP_STRING}],\n                ['autoopen', {value: 'never', ...PROP_STRING}],\n                ['class', PROP_STRING],\n                ['dataset', PROP_ANY],\n                ['iconposition', {value: 'left', ...PROP_STRING}],\n                ['itemlabel', PROP_STRING],\n                ['itemlink', PROP_STRING],\n                ['itemicon', PROP_STRING],\n                ['itemclass', PROP_STRING],\n                ['itemchildren', PROP_STRING],\n                ['itemaction', PROP_STRING],\n                ['itembadge', PROP_STRING],\n                ['itemtarget', PROP_STRING],\n                ['layout', PROP_STRING],\n                ['name', PROP_STRING],\n                ['orderby', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n                ['type', PROP_STRING],\n                ['userrole', PROP_STRING]\n            ]\n        )\n    );\n};\n","import { AfterViewInit, Attribute, Component, HostListener, Injector, OnDestroy, OnInit, Optional, Self } from '@angular/core';\nimport { Router } from '@angular/router';\n\nimport { BsDropdownDirective } from 'ngx-bootstrap';\n\nimport { $appDigest, addClass, removeClass } from '@wm/core';\n\nimport { styler } from '../../framework/styler';\nimport { isActiveNavItem, provideAsWidgetRef } from '../../../utils/widget-utils';\nimport { registerProps } from './menu.props';\nimport { DatasetAwareNavComponent, NavNode } from '../base/dataset-aware-nav.component';\nimport { NavComponent } from '../nav/nav.component';\n\ndeclare const _;\n\nexport const KEYBOARD_MOVEMENTS = {\n    MOVE_UP: 'UP-ARROW',\n    MOVE_LEFT : 'LEFT-ARROW',\n    MOVE_RIGHT : 'RIGHT-ARROW',\n    MOVE_DOWN : 'DOWN-ARROW',\n    ON_ENTER : 'ENTER',\n    ON_TAB : 'TAB',\n    ON_ESCAPE : 'ESC'\n};\n\nexport const MENU_POSITION = {\n    UP_LEFT: 'up,left',\n    UP_RIGHT: 'up,right',\n    DOWN_LEFT: 'down,left',\n    DOWN_RIGHT: 'down,right',\n    INLINE: 'inline'\n};\n\nconst POSITION = {\n    DOWN_RIGHT: 'down,right',\n    DOWN_LEFT: 'down,left',\n    UP_RIGHT: 'up,right',\n    UP_LEFT: 'up,left',\n    INLINE: 'inline'\n};\nconst CARET_CLS = {\n    UP: 'fa-caret-up',\n    DOWN: 'fa-caret-down'\n};\nconst PULL_CLS = {\n    LEFT: 'pull-left',\n    RIGHT: 'pull-right'\n};\n\nconst AUTO_OPEN = {\n    NEVER: 'never',\n    ACTIVE_PAGE: 'activepage',\n    ALWAYS: 'always'\n};\n\nconst WIDGET_CONFIG = {widgetType: 'wm-menu', hostClass: 'dropdown app-menu'};\n@Component({\n    selector: '[wmMenu]',\n    templateUrl: './menu.component.html',\n    providers: [\n        provideAsWidgetRef(MenuComponent)\n    ]\n})\nexport class MenuComponent extends DatasetAwareNavComponent implements OnInit, OnDestroy, AfterViewInit {\n    static initializeProps = registerProps();\n\n    public menualign: string;\n    public menuposition: string;\n    public menulayout: string;\n    public menuclass: string;\n    public linktarget: string;\n    public iconclass: string;\n    public animateitems: string;\n    public disableMenuContext: boolean;\n    public autoclose: string;\n    public autoopen: string;\n\n    private menuCaret = 'fa-caret-down';\n    private _selectFirstItem = false;\n\n    public type: any;\n\n    @HostListener('onShown') onShow() {\n        if (this._selectFirstItem) {\n            setTimeout(() => {\n                this.$element.find('> ul[wmmenudropdown] li.app-menu-item:first > a').focus();\n            });\n        }\n        $appDigest();\n    }\n    @HostListener('onHidden') onHide () {\n        this.$element.find('>.dropdown-toggle').focus();\n        this.$element.find('li').removeClass('open');\n        this._selectFirstItem = false;\n        $appDigest();\n    }\n\n    @HostListener('keydown.arrowup', ['$event', '\"UP-ARROW\"'])\n    @HostListener('keydown.arrowdown', ['$event', '\"DOWN-ARROW\"'])\n    @HostListener('keydown.arrowright', ['$event', '\"RIGHT-ARROW\"'])\n    @HostListener('keydown.arrowleft', ['$event', '\"LEFT-ARROW\"'])\n    @HostListener('keydown.enter', ['$event', '\"ENTER\"']) onKeyDown($event, eventAction) {\n        const KEY_MOVEMENTS = _.clone(KEYBOARD_MOVEMENTS);\n        if (this.menuposition === MENU_POSITION.UP_RIGHT) {\n            KEY_MOVEMENTS.MOVE_UP = 'DOWN-ARROW';\n            KEY_MOVEMENTS.MOVE_DOWN = 'UP-ARROW';\n        } else if (this.menuposition === MENU_POSITION.UP_LEFT) {\n            KEY_MOVEMENTS.MOVE_UP = 'DOWN-ARROW';\n            KEY_MOVEMENTS.MOVE_DOWN = 'UP-ARROW';\n            KEY_MOVEMENTS.MOVE_LEFT = 'RIGHT-ARROW';\n            KEY_MOVEMENTS.MOVE_RIGHT = 'LEFT-ARROW';\n        } else if (this.menuposition === MENU_POSITION.DOWN_LEFT) {\n            KEY_MOVEMENTS.MOVE_LEFT = 'RIGHT-ARROW';\n            KEY_MOVEMENTS.MOVE_RIGHT = 'LEFT-ARROW';\n        }\n\n        if (_.includes([KEY_MOVEMENTS.MOVE_DOWN, KEY_MOVEMENTS.MOVE_RIGHT], eventAction)) {\n            if (!this.bsDropdown.isOpen) {\n                this._selectFirstItem = true;\n                this.bsDropdown.show();\n            } else {\n                this.$element.find('> ul[wmmenudropdown] li.app-menu-item:first > a').focus();\n            }\n        } else if (eventAction === KEY_MOVEMENTS.ON_ENTER) {\n            this.bsDropdown.toggle(true);\n        } else if (_.includes([KEY_MOVEMENTS.MOVE_UP, KEY_MOVEMENTS.MOVE_LEFT], eventAction)) {\n            this.bsDropdown.hide();\n        }\n        $event.preventDefault();\n    }\n\n    constructor(\n        inj: Injector,\n        public route: Router,\n        @Self() @Optional() public bsDropdown: BsDropdownDirective,\n        @Optional() private parentNav: NavComponent,\n        @Attribute('select.event') public selectEventCB: string\n    ) {\n        super(inj, WIDGET_CONFIG);\n        if (parentNav) {\n            this.disableMenuContext = !!parentNav.disableMenuContext;\n        } else {\n            this.disableMenuContext = !!selectEventCB;\n        }\n    }\n\n    /**\n     * returns true if the menu has link to the current page.\n     * @param nodes\n     */\n    private hasLinkToCurrentPage(nodes: Array<NavNode>) {\n        return nodes.some(node => {\n            if (isActiveNavItem(node.link, this.route.url)) {\n                return true;\n            }\n            if (node.children) {\n                return this.hasLinkToCurrentPage(node.children);\n            }\n        });\n    }\n\n    protected resetNodes() {\n        super.resetNodes();\n        // open the menu if any of its menu items has link to current page and if autoopen value is 'active page'\n        if ((this.autoopen === AUTO_OPEN.ACTIVE_PAGE && this.hasLinkToCurrentPage(this.nodes)) || this.autoopen === AUTO_OPEN.ALWAYS) {\n            this.bsDropdown.show();\n        }\n    }\n\n    ngOnInit() {\n        super.ngOnInit();\n        this.setMenuPosition();\n    }\n\n    onPropertyChange(key: string, nv: any, ov?: any) {\n\n        if (key === 'tabindex') {\n            return;\n        }\n\n        if (key === 'autoclose') {\n            this.bsDropdown.autoClose = nv !== 'disabled';\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n\n    private setMenuPosition() {\n        switch (this.menuposition) {\n            case POSITION.DOWN_RIGHT:\n                removeClass(this.nativeElement, 'dropup');\n                this.menualign = PULL_CLS.LEFT;\n                this.menuCaret = CARET_CLS.DOWN;\n                break;\n            case POSITION.DOWN_LEFT:\n                removeClass(this.nativeElement, 'dropup');\n                this.menualign = PULL_CLS.RIGHT;\n                this.menuCaret = CARET_CLS.DOWN;\n                break;\n            case POSITION.UP_LEFT:\n                addClass(this.nativeElement, 'dropup');\n                this.menualign = PULL_CLS.RIGHT;\n                this.menuCaret = CARET_CLS.UP;\n                break;\n            case POSITION.UP_RIGHT:\n                addClass(this.nativeElement, 'dropup');\n                this.menualign = PULL_CLS.LEFT;\n                this.menuCaret = CARET_CLS.UP;\n                break;\n            case POSITION.INLINE:\n                this.menualign = 'dropinline-menu';\n                break;\n        }\n    }\n\n    public onMenuItemSelect(args) {\n        const {$event} = args;\n        const $item = args.$item.value;\n        this.invokeEventCallback('select', {$event, $item});\n    }\n\n    ngAfterViewInit() {\n        super.ngAfterViewInit();\n        styler(this.nativeElement.querySelector('.dropdown-toggle') as HTMLElement, this);\n    }\n}\n","import { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-menu',\n        new Map(\n            [\n                ['accessroles', {value: 'Everyone', ...PROP_STRING}],\n                ['animateitems', PROP_STRING],\n                ['autoclose', {value: 'always', ...PROP_STRING}],\n                ['autoopen', {value: 'never', ...PROP_STRING}],\n                ['caption', PROP_STRING],\n                ['class', PROP_STRING],\n                ['dataset', {value: 'Menu Item 1, Menu Item 2, Menu Item 3', ...PROP_ANY}],\n                ['hint', {value: '', ...PROP_STRING}],\n                ['iconclass', PROP_STRING],\n                ['iconposition', {value: 'left', ...PROP_STRING}],\n                ['itemaction', PROP_STRING],\n                ['itemchildren', PROP_STRING],\n                ['itemclass', PROP_STRING],\n                ['itemicon', PROP_STRING],\n                ['itemlabel', PROP_STRING],\n                ['itemlink', PROP_STRING],\n                ['itemtarget', PROP_STRING],\n                ['linktarget', {value: '_self', ...PROP_STRING}],\n                ['menuclass', PROP_STRING],\n                ['menulayout', PROP_STRING],\n                ['menuposition', PROP_STRING],\n                ['name', PROP_STRING],\n                ['orderby', PROP_STRING],\n                ['shortcutkey', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n                ['tabindex', {value: 0, ...PROP_NUMBER}],\n                ['type', {value: 'menu', ...PROP_STRING}],\n                ['userrole', PROP_STRING]\n            ]\n        )\n    );\n};\n","import { AfterViewInit, QueryList, ViewChildren } from '@angular/core';\n\nimport { StylableComponent } from './stylable.component';\nimport { MenuComponent } from '../menu/menu.component';\n\ndeclare const _;\n\nconst menuProps = ['itemlabel', 'itemicon', 'itemlink', 'itemaction', 'itemchildren', 'userrole'];\n\nexport class MenuAdapterComponent extends StylableComponent implements AfterViewInit {\n\n    private itemlabel;\n    private menuRef;\n    private pageScope;\n\n    private binditemlabel;\n    private binditemicon;\n    private binditemaction;\n    private binditemchildren;\n    private binditemlink;\n    private binduserrole;\n\n    @ViewChildren(MenuComponent) private menuRefQL: QueryList<MenuComponent>;\n\n    constructor(\n        inj,\n        WIDGET_CONFIG,\n    ) {\n        super(inj, WIDGET_CONFIG);\n\n        this.pageScope = this.viewParent;\n        this.binditemlabel = this.nativeElement.getAttribute('itemlabel.bind');\n        this.binditemicon = this.nativeElement.getAttribute('itemicon.bind');\n        this.binditemaction = this.nativeElement.getAttribute('itemaction.bind');\n        this.binditemlink = this.nativeElement.getAttribute('itemlink.bind');\n        this.binduserrole = this.nativeElement.getAttribute('userrole.bind');\n        this.binditemchildren = this.nativeElement.getAttribute('itemchildren.bind');\n    }\n\n    onPropertyChange(key: string, nv: any, ov?: any) {\n        if (_.includes(menuProps, key) && this.menuRef) {\n            this.menuRef.itemlabel = nv;\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n\n    ngAfterViewInit() {\n        super.ngAfterViewInit();\n        const subscriber = this.menuRefQL.changes.subscribe((menuRefQL: QueryList<MenuComponent>) => {\n            if (menuRefQL.first) {\n                this.menuRef = menuRefQL.first;\n                menuProps.forEach((prop) => {\n                    const bindProp = `bind${prop}`;\n                    if (this[bindProp]) {\n                        this.menuRef[bindProp] = this[bindProp];\n                    }\n                    this.menuRef[prop] = this[prop];\n                });\n                subscriber.unsubscribe();\n            }\n        });\n    }\n}\n","import { AfterViewInit, Component, ElementRef, Injector, OnInit, ViewChild } from '@angular/core';\n\nimport { APPLY_STYLES_TYPE, styler } from '../../framework/styler';\nimport { IWidgetConfig } from '../../framework/types';\nimport { registerProps } from './card.props';\nimport { MenuAdapterComponent } from '../base/menu-adapator.component';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\n\nconst DEFAULT_CLS = 'app-card card app-panel';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-card',\n    hostClass: DEFAULT_CLS\n};\n\n@Component({\n    selector: '[wmCard]',\n    templateUrl: './card.component.html',\n    providers: [\n        provideAsWidgetRef(CardComponent)\n    ]\n})\nexport class CardComponent extends MenuAdapterComponent implements OnInit, AfterViewInit {\n    static initializeProps = registerProps();\n\n    public showHeader: boolean;\n    public title: string;\n    public subheading: string;\n    public iconclass: string;\n    public iconurl: string;\n    public actions: string;\n\n    @ViewChild('cardContainerWrapper') private cardContainerElRef: ElementRef;\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n        styler(this.nativeElement, this, APPLY_STYLES_TYPE.SHELL);\n    }\n\n    ngAfterViewInit() {\n        super.ngAfterViewInit();\n        styler(this.cardContainerElRef.nativeElement, this, APPLY_STYLES_TYPE.INNER_SHELL);\n    }\n\n    onPropertyChange(key: string, nv: any, ov?: any) {\n        if (key === 'title' || key === 'subheading' || key === 'iconclass' || key === 'iconurl' || key === 'actions') {\n            this.showHeader = !!(this.title || this.subheading || this.iconclass || this.iconurl || this.actions);\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n}\n\n// Todo(swathi) - menu\n","import { PROP_BOOLEAN, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-card',\n        new Map(\n            [\n                ['actions', PROP_STRING],\n                ['class', PROP_STRING],\n                ['iconclass', PROP_STRING],\n                ['iconurl', PROP_STRING],\n                ['imageheight', {value: '200px', ...PROP_STRING}],\n                ['itemaction', PROP_STRING],\n                ['itemchildren', PROP_STRING],\n                ['itemicon', PROP_STRING],\n                ['itemlabel', PROP_STRING],\n                ['itemlink', PROP_STRING],\n                ['name', PROP_STRING],\n                ['picturesource', PROP_STRING],\n                ['picturetitle', {value: '', ...PROP_STRING}],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n                ['subheading', PROP_STRING],\n                ['title', PROP_STRING],\n                ['userrole', PROP_STRING]\n            ]\n        )\n    );\n};\n","import { Directive, Injector } from '@angular/core';\n\nimport { IWidgetConfig } from '../../../framework/types';\nimport { APPLY_STYLES_TYPE, styler } from '../../../framework/styler';\nimport { StylableComponent } from '../../base/stylable.component';\nimport { registerProps } from './card-actions.props';\n\nconst DEFAULT_CLS = 'app-card-actions';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-card-actions',\n    hostClass: DEFAULT_CLS\n};\n\n@Directive({\n    selector: '[wmCardActions]'\n})\nexport class CardActionsDirective extends StylableComponent {\n    static initializeProps = registerProps();\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n        styler(this.nativeElement, this, APPLY_STYLES_TYPE.CONTAINER);\n    }\n}\n","import { PROP_BOOLEAN, PROP_STRING, register } from '../../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-card-actions',\n        new Map(\n            [\n                ['class', PROP_STRING],\n                ['name', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n            ]\n        )\n    );\n};\n","import { AfterViewInit, Component, ElementRef, Injector, ViewChild } from '@angular/core';\n\nimport { APPLY_STYLES_TYPE, styler } from '../../../framework/styler';\nimport { IWidgetConfig } from '../../../framework/types';\nimport { StylableComponent } from '../../base/stylable.component';\nimport { registerProps } from './card-content.props';\nimport { provideAsWidgetRef } from '../../../../utils/widget-utils';\n\nconst DEFAULT_CLS = 'app-card-content card-body card-block';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-card-content',\n    hostClass: DEFAULT_CLS\n};\n\n@Component({\n    selector: 'div[wmCardContent]',\n    templateUrl: './card-content.component.html',\n    providers: [\n        provideAsWidgetRef(CardContentComponent)\n    ]\n})\nexport class CardContentComponent extends StylableComponent implements AfterViewInit {\n    static initializeProps = registerProps();\n\n    @ViewChild('cardContentContainer') private cardContentContainerElRef: ElementRef;\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n    }\n\n    ngAfterViewInit() {\n        super.ngAfterViewInit();\n        styler(this.cardContentContainerElRef.nativeElement, this, APPLY_STYLES_TYPE.CONTAINER);\n    }\n}\n","import { PROP_BOOLEAN, PROP_STRING, register } from '../../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-card-content',\n        new Map(\n            [\n                ['class', PROP_STRING],\n                ['content', PROP_STRING],\n                ['name', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}]\n            ]\n        )\n    );\n};\n","import { Directive, Injector } from '@angular/core';\n\nimport { IWidgetConfig } from '../../../framework/types';\nimport { APPLY_STYLES_TYPE, styler } from '../../../framework/styler';\nimport { StylableComponent } from '../../base/stylable.component';\nimport { registerProps } from './card-footer.props';\n\nconst DEFAULT_CLS = 'app-card-footer text-muted card-footer';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-card-footer',\n    hostClass: DEFAULT_CLS\n};\n\n@Directive({\n    selector: '[wmCardFooter]'\n})\nexport class CardFooterDirective extends StylableComponent {\n    static initializeProps = registerProps();\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n        styler(this.nativeElement, this, APPLY_STYLES_TYPE.CONTAINER);\n    }\n}\n","import { PROP_BOOLEAN, PROP_STRING, register } from '../../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-card-footer',\n        new Map(\n            [\n                ['class', PROP_STRING],\n                ['name', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n            ]\n        )\n    );\n};\n","import { isEmptyObject, prettifyLabels } from '@wm/core';\n\ndeclare const _, $, d3, nv;\n\nexport const chartTypes = ['Column', 'Line', 'Area', 'Cumulative Line', 'Bar', 'Pie', 'Donut', 'Bubble'],\n    allShapes = ['circle', 'square', 'diamond', 'cross', 'triangle-up', 'triangle-down'];\n\nconst dateList = ['01/01/2001', '01/01/2002', '01/01/2003'],\n    themes = {\n        'Terrestrial': {\n            colors: ['#1f77b4', '#aec7e8', '#ff7f0e', '#ffbb78', '#2ca02c', '#98df8a', '#d62728', '#ff9896', '#9467bd', '#c5b0d5', '#8c564b', '#c49c94', '#e377c2', '#f7b6d2', '#7f7f7f', '#c7c7c7', '#bcbd22', '#dbdb8d', '#17becf', '#9edae5'],\n            tooltip: {\n                'backgroundColor': '#de7d28',\n                'textColor': '#FFFFFF'\n            }\n        },\n        'Annabelle': {\n            colors: ['#393b79', '#5254a3', '#6b6ecf', '#9c9ede', '#637939', '#8ca252', '#b5cf6b', '#cedb9c', '#8c6d31', '#bd9e39', '#e7ba52', '#e7cb94', '#843c39', '#ad494a', '#d6616b', '#e7969c', '#7b4173', '#a55194', '#ce6dbd', '#de9ed6'],\n            tooltip: {\n                'backgroundColor': '#2e306f',\n                'textColor': '#FFFFFF'\n            }\n        },\n        'Azure': {\n            colors: ['#3182bd', '#6baed6', '#9ecae1', '#c6dbef', '#e6550d', '#fd8d3c', '#fdae6b', '#fdd0a2', '#31a354', '#74c476', '#a1d99b', '#c7e9c0', '#756bb1', '#9e9ac8', '#bcbddc', '#dadaeb', '#636363', '#969696', '#bdbdbd', '#d9d9d9'],\n            tooltip: {\n                'backgroundColor': '#3182bd',\n                'textColor': '#FFFFFF'\n            }\n        },\n        'Retro': {\n            colors: ['#0ca7a1', '#ffa615', '#334957', '#acc5c2', '#988f90', '#8accc9', '#515151', '#f27861', '#36c9fd', '#794668', '#0f709d', '#0d2738', '#44be78', '#4a1839', '#6a393f', '#557d8b', '#6c331c', '#1c1c1c', '#861500', '#09562a'],\n            tooltip: {\n                'backgroundColor': '#80513a',\n                'textColor': '#FFFFFF'\n            }\n        },\n        'Mellow': {\n            colors: ['#f0dcbf', '#88c877', '#aeb918', '#2e2c23', '#ddddd2', '#dfe956', '#4c963b', '#5d3801', '#e1eec3', '#cd8472', '#fcfab3', '#9a4635', '#9295ad', '#2e3f12', '#565677', '#557d8b', '#4f4d02', '#0c0c1b', '#833324', '#24120e'],\n            tooltip: {\n                'backgroundColor': '#7c9e73',\n                'textColor': '#FFFFFF'\n            }\n        },\n        'Orient': {\n            colors: ['#a80000', '#cc6c3c', '#f0e400', '#000084', '#fccc6c', '#009c6c', '#cc309c', '#78cc00', '#fc84e4', '#48e4fc', '#4878d8', '#186c0c', '#606060', '#a8a8a8', '#000000', '#d7d7d7', '#75a06e', '#190d0b', '#888888', '#694b84'],\n            tooltip: {\n                'backgroundColor': '#c14242',\n                'textColor': '#FFFFFF'\n            }\n        },\n        'GrayScale': {\n            colors: ['#141414', '#353535', '#5b5b5b', '#848484', '#a8a8a8', '#c3c3c3', '#e0e0e0', '#c8c8c8', '#a5a5a5', '#878787', '#656565', '#4e4e4e', '#303030', '#1c1c1c', '#4f4f4f', '#3b3b3b', '#757575', '#606060', '#868686', '#c1c1c1'],\n            tooltip: {\n                'backgroundColor': '#575757',\n                'textColor': '#FFFFFF'\n            }\n        },\n        'Flyer': {\n            colors: ['#3f454c', '#5a646e', '#848778', '#cededf', '#74c4dd', '#0946ed', '#380bb1', '#000ff0', '#f54a23', '#1db262', '#bca3aa', '#ffa500', '#a86b32', '#63a18c', '#56795e', '#934343', '#b75f5f', '#752d2d', '#4e1111', '#920606'],\n            tooltip: {\n                'backgroundColor': '#47637c',\n                'textColor': '#FFFFFF'\n            }\n        },\n        'Luminosity': {\n            colors: ['#FFFFFF', '#e4e4e4', '#00bcd4', '#f0dd2f', '#00aabf', '#018376', '#e91e63', '#39e5d4', '#ff6d6d', '#00ff76', '#ff9800', '#969696', '#ff4200', '#e00000', '#95cbe5', '#5331ff', '#fff4a7', '#e7a800', '#0061e4', '#d5e7ff'],\n            tooltip: {\n                'backgroundColor': '#47637c',\n                'textColor': '#FFFFFF'\n            }\n        }\n    },\n    basicProperties = ['xaxislabel', 'yaxislabel', 'xunits', 'yunits', 'xnumberformat', 'xdateformat', 'ynumberformat',\n        'showvalues', 'showlabels', 'viewtype', 'areaviewtype', 'staggerlabels', 'reducexticks', 'offsettop', 'offsetbottom', 'offsetright', 'offsetleft',\n        'barspacing', 'xaxislabeldistance', 'yaxislabeldistance', 'theme', 'labeltype', 'donutratio', 'showlabelsoutside', 'showxdistance', 'showydistance', 'shape', 'nodatamessage', 'captions', 'showxaxis', 'showyaxis',\n        'centerlabel', 'customcolors', 'showlegend', 'legendtype', 'xdomain', 'ydomain', 'tooltips', 'linethickness', 'highlightpoints', 'interpolation', 'labelthreshold'],\n    barSpacingMap = {\n        'small' : 0.3,\n        'medium' : 0.5,\n        'large' : 0.8\n    },\n    donutRatioMap = {\n        'small' : 0.3,\n        'medium' : 0.6,\n        'large' : 0.7\n    },\n    barSpacingMapInvert = _.invert(barSpacingMap),\n    donutRatioMapInvert = _.invert(donutRatioMap),\n    tickformats = {\n        'Thousand': {\n            'prefix': 'K',\n            'divider': 1000\n        },\n        'Million' : {\n            'prefix': 'M',\n            'divider': 1000000\n        },\n        'Billion' : {\n            'prefix': 'B',\n            'divider': 1000000000\n        }\n    },\n    chartId = '#preview-chart',\n    dataTypeJSON = ['Column', 'Line', 'Pie', 'Bar', 'Donut', 'Bubble'],    // Charts that supports the data to be JSON;\n    lineTypeCharts = ['Line', 'Area', 'Cumulative Line'],   // Charts that does not supports the string type of data in the xaxis in the nvd3;\n    dataTypeArray = ['Cumulative Line', 'Area'],     // Charts that supports the data to be Array\n    SAMPLE_DATA = {\n        'group1' : 'Europe',\n        'group2' : 'Asia',\n        'group3' : 'America',\n        'group4' : 'Australia'\n    };\n\n// returns true if chart type is pie\nexport const isPieChart = type => type === 'Pie';\n\n// returns true if chart type is line\nexport const isLineChart = type => type === 'Line';\n\n// returns true if chart type is bar\nexport const isBarChart = type => type === 'Bar';\n\n// returns true if chart type is donut\nexport const isDonutChart = type => type === 'Donut';\n\n// returns true if chart type is bubble\nexport const isBubbleChart = type => type === 'Bubble';\n\n// returns true if chart type is column\nexport const isColumnChart = type => type === 'Column';\n\n// returns true if chart type is area\nexport const isAreaChart = type => type === 'Area';\n\n// returns true if chart type is area\nexport const isPieType = type => isPieChart(type) || isDonutChart(type);\n\n// The format of chart data is array of json objects in case of the following types of chart\nexport const isChartDataJSON = type => _.includes(dataTypeJSON, type) || !_.includes(chartTypes, type);\n\n// The format of chart data is array of objects in case of the following types of chart\nexport const isChartDataArray = type => _.includes(dataTypeArray, type);\n\n// returns true is the chart type is 'line', 'area' or 'cumulative line' else false\nexport const isLineTypeChart = type => _.includes(lineTypeCharts, type);\n\n// X/Y Domain properties are supported only for Column and Area charts\nexport const isAxisDomainSupported = type => isColumnChart(type) || isAreaChart(type);\n\n// Returns bar spacing value\nexport const getBarSpacingValue = (value, prop) => {\n    if (prop === 'value') {\n        return barSpacingMap[value];\n    }\n    if (prop === 'key') {\n        return barSpacingMapInvert[value];\n    }\n};\n\n// Returns radius value\nexport const getRadiusValue = (value, prop) => {\n    if (prop === 'value') {\n        return donutRatioMap[value];\n    }\n    if (prop === 'key') {\n        return donutRatioMapInvert[value];\n    }\n};\n\n// Returns labels config\nexport const getLabelValues = (showlabels, showlabelsoutside, prop) => {\n    const labelsConfig: any = {};\n    switch (showlabels) {\n        case 'hide':\n            labelsConfig.showlabels = false;\n            break;\n        case 'inside':\n            labelsConfig.showlabels = true;\n            labelsConfig.showlabelsoutside = false;\n            break;\n        case 'outside':\n            labelsConfig.showlabels = true;\n            labelsConfig.showlabelsoutside = true;\n            break;\n    }\n    return labelsConfig;\n};\n\n// Construct the sample data\nexport const constructSampleData = (dataType, yaxisLength, shape) => {\n    let first_series = [],\n        second_series = [],\n        third_series = [],\n        first_series_array = [],\n        second_series_array = [],\n        third_series_array = [],\n        first_series_bubble = [],\n        second_series_bubble = [],\n        third_series_bubble = [],\n        data = [];\n    switch (dataType) {\n        case 'jsonFormat':\n            first_series = [\n                {'x': '01/01/2001', 'y': 4000000},\n                {'x': '01/01/2002', 'y': 1000000},\n                {'x': '01/01/2003', 'y': 5000000}\n            ];\n            second_series = [\n                {'x': '01/01/2001', 'y': 3000000},\n                {'x': '01/01/2002', 'y': 4000000},\n                {'x': '01/01/2003', 'y': 7000000}\n            ];\n            third_series = [\n                {'x': '01/01/2001', 'y': 2000000},\n                {'x': '01/01/2002', 'y': 8000000},\n                {'x': '01/01/2003', 'y': 6000000}\n            ];\n            data[0] = {\n                values: first_series,\n                key: SAMPLE_DATA.group1\n            };\n            if (yaxisLength >= 2) {\n                data[1] = {\n                    values: second_series,\n                    key: SAMPLE_DATA.group2\n                };\n            }\n            if (yaxisLength >= 3) {\n                data[2] = {\n                    values: third_series,\n                    key: SAMPLE_DATA.group3\n                };\n            }\n            break;\n        case 'lineChartFormat':\n            first_series = [\n                {'x': 1, 'y': 4000000},\n                {'x': 2, 'y': 1000000},\n                {'x': 3, 'y': 5000000}\n            ];\n            second_series = [\n                {'x': 1, 'y': 3000000},\n                {'x': 2, 'y': 4000000},\n                {'x': 3, 'y': 7000000}\n            ];\n            third_series = [\n                {'x': 1, 'y': 2000000},\n                {'x': 2, 'y': 8000000},\n                {'x': 3, 'y': 6000000}\n            ];\n            data[0] = {\n                values: first_series,\n                key: SAMPLE_DATA.group1\n            };\n            if (yaxisLength >= 2) {\n                data[1] = {\n                    values: second_series,\n                    key: SAMPLE_DATA.group2\n                };\n            }\n            if (yaxisLength >= 3) {\n                data[2] = {\n                    values: third_series,\n                    key: SAMPLE_DATA.group3\n                };\n            }\n            break;\n        case 'arrayFormat':\n            first_series_array = [\n                [1, 4000000],\n                [2, 1000000],\n                [3, 5000000]\n            ];\n            second_series_array = [\n                [1, 3000000],\n                [2, 4000000],\n                [3, 7000000]\n            ];\n            third_series_array = [\n                [1, 2000000],\n                [2, 8000000],\n                [3, 6000000]\n            ];\n            data[0] = {\n                values: first_series_array,\n                key: SAMPLE_DATA.group1\n            };\n            if (yaxisLength >= 2) {\n                data[1] = {\n                    values: second_series_array,\n                    key: SAMPLE_DATA.group2\n                };\n            }\n            if (yaxisLength >= 3) {\n                data[2] = {\n                    values: third_series_array,\n                    key: SAMPLE_DATA.group3\n                };\n            }\n            break;\n        case 'bubbleFormat':\n            shape = shape === 'random' ?  allShapes[Math.floor(Math.random() * allShapes.length)] : shape;\n            first_series_bubble = [\n                {'x': 80.66, 'y': 33739900,  'size': 78, 'shape': shape},\n                {'x': 79.84, 'y': 81902300,  'size': 90, 'shape': shape},\n                {'x': 78.6,  'y': 5523100,   'size': 45, 'shape': shape}\n            ];\n            second_series_bubble = [\n                {'x': 72.73, 'y': 79716200,  'size': 98, 'shape': shape},\n                {'x': 80.05, 'y': 61801600,  'size': 20, 'shape': shape},\n                {'x': 72.49, 'y': 73137200,  'size': 34, 'shape': shape}\n            ];\n            third_series_bubble = [\n                {'x': 68.09, 'y': 33739900,  'size': 45, 'shape': shape},\n                {'x': 81.55, 'y': 7485600,   'size': 78, 'shape': shape},\n                {'x': 68.60, 'y': 141850000, 'size': 56, 'shape': shape}\n            ];\n            data[0] = {\n                values: first_series_bubble,\n                key: SAMPLE_DATA.group1\n            };\n            if (yaxisLength >= 2) {\n                data[1] = {\n                    values: second_series_bubble,\n                    key: SAMPLE_DATA.group2\n                };\n            }\n            if (yaxisLength >= 3) {\n                data[2] = {\n                    values: third_series_bubble,\n                    key: SAMPLE_DATA.group3\n                };\n            }\n            break;\n        case 'pieChartFormat':\n            data = [\n                {'x': SAMPLE_DATA.group1, 'y': 1000000},\n                {'x': SAMPLE_DATA.group2, 'y': 2000000},\n                {'x': SAMPLE_DATA.group3, 'y': 3000000},\n                {'x': SAMPLE_DATA.group4, 'y': 4000000}\n            ];\n            break;\n    }\n    return data;\n};\n\nexport const getDataType = widgetContext => {\n    const type = widgetContext.type;\n    if (isLineChart(type)) {\n        return 'lineChartFormat';\n    }\n    if (isPieType(type)) {\n        return 'pieChartFormat';\n    }\n    if (isBubbleChart(type)) {\n        return 'bubbleFormat';\n    }\n    return isChartDataJSON(type) ? 'jsonFormat' : 'arrayFormat';\n};\n\n// Sample data to populate when no data is bound\nexport const getSampleData = widgetContext => constructSampleData(getDataType(widgetContext), _.split(widgetContext.yaxisdatakey, ',').length, widgetContext.shape);\n\n// Check whether X/Y Domain was set to Min and is supported for the present chart\nexport const isAxisDomainValid = (widgetContext, axis) => {\n    if (widgetContext[axis + 'domain'] === 'Min' && (isAxisDomainSupported(widgetContext.type))) {\n        return true;\n    }\n    return false;\n};\n\n// Check whether min and max values are finite or not\nexport const areMinMaxValuesValid = values => {\n    if (_.isFinite(values.min) && _.isFinite(values.max)) {\n        return true;\n    }\n    return false;\n};\n\nexport const getYScaleMinValue = value => {\n    const _min = Math.floor(value);\n    /* If the number has a) decimal part returning floor value - 0.1\n     b) no decimal part returning floor value - 1 */\n    return Math.abs(value) - _min > 0 ? value - 0.1 : _min - 1;\n};\n\n// Chooses the data points of line/cumulative line/area chart and highlights them\nexport const highlightPoints = (id, highlightpoints) => {\n    const chartSvg = id ? d3.select('#wmChart' + id + ' svg') : d3.select(chartId + ' svg');\n    if (highlightpoints) {\n        chartSvg.selectAll('.nv-point').style({'stroke-width': '6px', 'fill-opacity': '.95', 'stroke-opacity': '.95'});\n    } else {\n        chartSvg.selectAll('.nv-point').style({'stroke-width': '0px', 'fill-opacity': '0'});\n    }\n};\n\n// Chooses the line of line/cumulative line and increases the thickness of it\nexport const setLineThickness = (id, thickness) => {\n    const chartSvg = id ? d3.select('#wmChart' + id + ' svg') : d3.select(chartId + ' svg');\n    thickness = thickness || 1.5;\n    chartSvg.selectAll('.nv-line').style({'stroke-width': thickness});\n};\n\n// Constructing a common key value map for preview and canvas mode\nexport const initProperties = (widgetContext, propertyValueMap) => {\n    if (!propertyValueMap || isEmptyObject(propertyValueMap)) {\n        propertyValueMap = {};\n    }\n    _.forEach(basicProperties, prop => {\n        if (_.isUndefined(propertyValueMap[prop])) {\n            propertyValueMap[prop] = widgetContext[prop];\n        }\n    });\n\n    return propertyValueMap;\n};\n\nexport const getNumberValue = (value, callback) => {\n    return isNaN(parseInt(value, 10)) ? callback(value, 'value') : value;\n};\n\n// Formats the given value according to date format\nexport const getDateFormatedData = (dateFormat, d) => {\n    dateFormat = dateFormat || '%x';\n    return d3.time.format(dateFormat)(new Date(d));\n};\n\n// Formats the given value according to number format\nexport const getNumberFormatedData = (numberFormat, d) => {\n    let formattedData,\n        divider,\n        prefix;\n    formattedData = d3.format(numberFormat)(d);\n    // formatting the data based on number format selected\n    if (numberFormat) {\n        // Getting the respective divider[1000,1000000,1000000000] based on the number format choosen\n        divider = (tickformats[numberFormat] && tickformats[numberFormat].divider) || 0;\n        prefix = tickformats[numberFormat] && tickformats[numberFormat].prefix;\n        if (prefix && divider !== 0) {\n            formattedData = d3.format('.2f')(d / divider) + prefix;\n        }\n    } else {\n        // Auto formatting the data when no formating option is chosen\n        formattedData = d >= 1000 ? d3.format('.1s')(d) : d;\n    }\n    return formattedData;\n};\n\n// Set the visibility property of the chart x,y axis due to a bug in the nvd3\nexport const toggleAxisShow = (property, value) => {\n    const $xAxis = d3.select(chartId + ' g.nv-axis.nv-x'),\n        $yAxis = d3.select(chartId + ' g.nv-axis.nv-y');\n    if (property === 'showxaxis') {\n        $xAxis.style('visibility', value ? 'visible' : 'hidden');\n    } else {\n        $yAxis.style('visibility', value ? 'visible' : 'hidden');\n    }\n};\n\nexport const modifyLegendPosition = (widgetContext, position, id) => {\n    const showLegend = isShowLegend(widgetContext.showlegend),\n        chart_Id = id ? '#wmChart' + id : chartId,\n        legendWrap = d3.select(chart_Id + ' .nv-legendWrap'),\n        legendPadding = 5;\n    // Return when showlegend is false\n    if (!showLegend || !legendWrap[0][0]) {\n        return;\n    }\n    if (position === 'bottom') {\n        const legendWrapHeight = legendWrap[0][0].getBoundingClientRect().height,\n            wrap = d3.select(chart_Id + ' .nv-wrap'),\n            wrapTransform = (wrap && wrap.attr('transform')) ? wrap.attr('transform').replace(/, /g, ',') : '',\n            coordinates = /translate\\(\\s*([^\\s,)]+)[ ,]([^\\s,)]+)/.exec(wrapTransform),\n            getChartHeight = () => {\n                let chartHeight = $(chart_Id + ' svg>.nvd3.nv-wrap')[0].getBoundingClientRect().height;\n                if (chartHeight === 0) { // fix for IE\n                    chartHeight = ($(chart_Id + ' svg')[0].getBoundingClientRect().height - (legendWrapHeight + 15));\n                }\n                return chartHeight;\n            };\n        legendWrap.attr('transform', 'translate(0 , ' + (getChartHeight() - legendWrapHeight - legendPadding) + ')');\n        if (coordinates) {\n            wrap.attr('transform', 'translate(' + coordinates[1] + ',' + legendPadding + ')');\n        }\n    }\n};\n\n// Returns value if legend need to shown or not\nexport const isShowLegend = value => {\n    // Old projects will have either true or false\n    if (value === 'false' || value === false) {\n        return false;\n    }\n    if (value === 'true' || value === true) {\n        return true;\n    }\n    // New projects will have either 'Hide Legend', 'Show Top', 'Show Bottom'\n    return value === 'hide' ? false : true;\n};\n\n/**\n * Customise the tooltip for donut & pie charts and also for charts having only one value attached to yaxis\n * @param key\n * @param label\n */\nexport const customiseTooltip = (chart, propertyValueMap, widgetContext, label?) => {\n    chart.tooltip.contentGenerator(key => {\n        let xValue = key.data.x, yValue;\n        yValue = getNumberFormatedData(propertyValueMap.ynumberformat, key.data.y);\n        if (isPieType(widgetContext.type)) {\n            label = key.data.x;\n            xValue = '';\n        }\n        return '<table>' +\n            '<tbody>' +\n            '<tr class=\"value\"><b>' + xValue +\n            '</b></tr>' +\n            '<tr>' +\n            '<td class=\"legend-color-guide\"><div style=\"background-color:' + key.color + ';\"></div></td>' +\n            '<td class=\"key\">' + label + '</td>' +\n            '<td class=\"value\">' + yValue + '</td>' +\n            '</tr>' +\n            '</tbody>' +\n            '</table>';\n    });\n};\n\n// intializes the chart obejct\nexport const initChart = (widgetContext, xDomainValues, yDomainValues, propertyValueMap, isPreview) => {\n    propertyValueMap =  initProperties(widgetContext, propertyValueMap);\n    let chart, colors = [], xaxislabel, yaxislabel, labelConfig, radius, barSpacing,\n        showLegend, xAxisValue, hasMultipleYValues;\n    const xValue: any = {}, yValue: any = {};\n    switch (widgetContext.type) {\n        case 'Column':\n            barSpacing = getNumberValue(propertyValueMap.barspacing, getBarSpacingValue) || barSpacingMap.medium;\n            chart = nv.models.multiBarChart()\n                .x(d => d.x)\n                .y(d => d.y)\n                .reduceXTicks(propertyValueMap.reducexticks)\n                .rotateLabels(0)\n                .showControls(false)\n                .stacked(propertyValueMap.viewtype === 'Stacked' ?  true : false)\n                .groupSpacing(barSpacing);\n            break;\n        case 'Cumulative Line':\n            chart = nv.models.cumulativeLineChart()\n                .x(d => d[0])\n                .y(d => d[1])\n                .showControls(false)\n                .useInteractiveGuideline(propertyValueMap.tooltips)\n                .interpolate(propertyValueMap.interpolation);\n            break;\n        case 'Line':\n            chart = nv.models.lineChart()\n                .useInteractiveGuideline(propertyValueMap.tooltips)\n                .interpolate(propertyValueMap.interpolation);\n            break;\n        case 'Area':\n            chart = nv.models.stackedAreaChart()\n                .x(d => d[0])\n                .y(d => d[1])\n                .clipEdge(true)\n                .showControls(false)\n                .style(propertyValueMap.areaviewtype)\n                .useInteractiveGuideline(propertyValueMap.tooltips)\n                .interpolate(propertyValueMap.interpolation);\n            break;\n        case 'Bar':\n            barSpacing = getNumberValue(propertyValueMap.barspacing, getBarSpacingValue) || barSpacingMap.medium;\n            chart = nv.models.multiBarHorizontalChart()\n                .x(d => d.x)\n                .y(d => d.y)\n                .showControls(false)\n                .stacked(propertyValueMap.viewtype === 'Stacked' ?  true : false)\n                .showValues(propertyValueMap.showvalues)\n                .groupSpacing(barSpacing);\n            break;\n        case 'Pie':\n        case 'Donut':\n            labelConfig = getLabelValues(propertyValueMap.showlabels, propertyValueMap.showlabelsoutside, 'value');\n            radius = getNumberValue(propertyValueMap.donutratio, getRadiusValue) || donutRatioMap.medium;\n            chart = nv.models.pieChart()\n                .x(d => d.x)\n                .y(d => d.y)\n                .showLabels(labelConfig.showlabels)\n                .labelType(propertyValueMap.labeltype)\n                .valueFormat(d3.format('%'))\n                .title(propertyValueMap.centerlabel)\n                .labelThreshold(propertyValueMap.labelthreshold || 0.01)\n                .labelsOutside(labelConfig.showlabelsoutside);\n            if (isDonutChart(widgetContext.type)) {\n                chart.donut(true)\n                    .donutRatio(radius);\n            }\n            if (propertyValueMap.labeltype === 'key-value') {\n                chart.labelType(d => d.data.x + ' ' + d.data.y);\n            }\n            break;\n        case 'Bubble':\n            chart = nv.models.scatterChart()\n                .x(d => d.x)\n                .y(d => d.y)\n                .showDistX(propertyValueMap.showxdistance)\n                .showDistY(propertyValueMap.showydistance);\n            break;\n    }\n\n    if (xDomainValues) {\n        xValue.min = xDomainValues.min.x || xDomainValues.min[0];\n        xValue.max = xDomainValues.max.x || xDomainValues.max[0];\n        // If the values on the x axis are string then min max values gives Infinity\n        if (areMinMaxValuesValid(xValue)) {\n            // Reducing the min value to 0.1 so the min value is not missed out\n            xValue.min = getYScaleMinValue(xValue.min);\n            chart.xDomain([xValue.min, xValue.max]);\n        }\n    }\n\n    if (yDomainValues) {\n        // Reducing the min value to 1 so the min value is not missed out\n        yValue.min = yDomainValues.min.y || yDomainValues.min[1];\n        yValue.max = yDomainValues.max.y || yDomainValues.max[1];\n        // If the values on the y axis are string or invalid then min max values gives Infinity\n        if (areMinMaxValuesValid(yValue)) {\n            // Reducing the min value to 1 so the min value is not missed out\n            yValue.min = getYScaleMinValue(yValue.min);\n            chart.yDomain([yValue.min, yValue.max]);\n        }\n    }\n\n    // Setting the legend type choosen by user or default it will be furious\n    chart.legend.vers((propertyValueMap.legendtype && propertyValueMap.legendtype.toLowerCase()) || 'furious');\n\n    if (!_.includes(chartTypes, widgetContext.type)) {\n        chart = nv.models.multiBarChart()\n            .x(d => d.x)\n            .y(d => d.y);\n    }\n\n\n    if (isPieType(widgetContext.type)) {\n        // In case of pie/donut chart formatting the values of it\n        if (propertyValueMap.labeltype === 'percent') {\n            chart.valueFormat(d3.format('%'));\n        } else {\n            chart.valueFormat(d => getNumberFormatedData(propertyValueMap.ynumberformat, d));\n        }\n        // Customizing the tooltips in case of the pie and donut when labelType is value\n        customiseTooltip(chart, propertyValueMap, widgetContext);\n    } else {\n        chart.showXAxis(propertyValueMap.showxaxis)\n            .showYAxis(propertyValueMap.showyaxis);\n\n        // Setting the labels if they are specified explicitly or taking the axiskeys chosen\n        xaxislabel = propertyValueMap.xaxislabel || prettifyLabels(widgetContext.xaxisdatakey) || 'x caption';\n        yaxislabel = propertyValueMap.yaxislabel || prettifyLabels(widgetContext.yaxisdatakey) || 'y caption';\n\n        // Checking if y axis has multiple values\n        if (widgetContext.yaxisdatakey && widgetContext.yaxisdatakey.split(',').length > 1) {\n            hasMultipleYValues = true;\n        }\n        // Customizing the tooltip to show yaxislabel, only if the y axis contains one value\n        if (!hasMultipleYValues && !isBubbleChart(widgetContext.type)) {\n            customiseTooltip(chart, propertyValueMap, widgetContext, yaxislabel);\n        }\n\n        // Adding the units to the captions if they are specified\n        xaxislabel += propertyValueMap.xunits ? '(' + propertyValueMap.xunits + ')' : '';\n        yaxislabel += propertyValueMap.yunits ? '(' + propertyValueMap.yunits + ')' : '';\n\n        chart.xAxis\n            .axisLabel(xaxislabel)\n            .axisLabelDistance(propertyValueMap.xaxislabeldistance)\n            .staggerLabels(propertyValueMap.staggerlabels);\n\n        // If date format set format based date format\n        if (propertyValueMap.xdateformat || (isPreview && !isBubbleChart(widgetContext.type))) {\n            if (isLineTypeChart(widgetContext.type)) {\n                chart.xAxis.tickFormat(d => {\n                    // get the actual value\n                    xAxisValue = isPreview ? dateList[d - 1] : widgetContext.xDataKeyArr[d];\n                    return getDateFormatedData(propertyValueMap.xdateformat, xAxisValue);\n                });\n            } else {\n                chart.xAxis.tickFormat(d => getDateFormatedData(propertyValueMap.xdateformat, d));\n            }\n        } else if (propertyValueMap.xnumberformat) {\n            chart.xAxis.tickFormat(d => getNumberFormatedData(propertyValueMap.xnumberformat, d));\n        } else {\n            if (isLineTypeChart(widgetContext.type)) {\n                // get the actual value\n                chart.xAxis.tickFormat(d => widgetContext.xDataKeyArr[d]);\n            }\n        }\n        chart.yAxis\n            .axisLabel(yaxislabel)\n            .axisLabelDistance(propertyValueMap.yaxislabeldistance)\n            .staggerLabels(propertyValueMap.staggerlabels)\n            .tickFormat(d => getNumberFormatedData(propertyValueMap.ynumberformat, d));\n        if (isBarChart(widgetContext.type)) {\n            chart.valueFormat(d => getNumberFormatedData(propertyValueMap.ynumberformat, d));\n        }\n    }\n\n    // Support for custom colors if user gives direct string of colors in text box\n    if (_.isString(propertyValueMap.customcolors) && propertyValueMap.customcolors) {\n        colors = _.split(propertyValueMap.customcolors, ',');\n    }\n    if (_.isArray(propertyValueMap.customcolors)) {\n        colors = propertyValueMap.customcolors;\n    }\n\n    showLegend = isShowLegend(propertyValueMap.showlegend);\n    chart.showLegend(showLegend)\n        .margin({top: propertyValueMap.offsettop, right: propertyValueMap.offsetright, bottom: propertyValueMap.offsetbottom, left: propertyValueMap.offsetleft})\n        .color(colors.length ? colors : themes[propertyValueMap.theme].colors);\n\n    chart.tooltip.enabled(propertyValueMap.tooltips);\n    widgetContext.message = propertyValueMap.nodatamessage || 'No data found';\n    // setting the no data message\n    chart.noData(widgetContext.message);\n\n    if (isLineTypeChart(widgetContext.type) && widgetContext.highlightpoints) {\n        chart.dispatch.on('stateChange', () => {\n            setTimeout(() => postPlotChartProcess(widgetContext), 100);\n        });\n    }\n\n    return chart;\n};\n\nexport const postPlotChartProcess = (widgetContext, isPreview?) => {\n    const id = isPreview ? null : widgetContext.$id;\n    // If user sets to highlight the data points and increase the thickness of the line\n    if (isLineTypeChart(widgetContext.type)) {\n        setLineThickness(id, widgetContext.linethickness);\n        highlightPoints(id, widgetContext.highlightpoints);\n    }\n    // Modifying the legend position only when legend is shown\n    if (widgetContext.showlegend) {\n        modifyLegendPosition(widgetContext, widgetContext.showlegend, id);\n    }\n};\n\nexport const getDateList = () => dateList;\n","import { AfterViewInit, Component, HostBinding, Injector, ViewEncapsulation } from '@angular/core';\n\nimport { App, DataSource, getClonedObject, isDataSourceEqual, isEmptyObject, isNumberType, prettifyLabels, removeAttr, triggerFn } from '@wm/core';\n\nimport { APPLY_STYLES_TYPE, styler } from '../../framework/styler';\nimport { IRedrawableComponent } from '../../framework/types';\nimport { StylableComponent } from '../base/stylable.component';\nimport { registerProps } from './chart.props';\nimport { allShapes, getDateList, getSampleData, initChart, isAreaChart, isAxisDomainValid, isBarChart, isBubbleChart, isChartDataArray, isChartDataJSON, isLineTypeChart, isPieType, postPlotChartProcess } from './chart.utils';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\n\ndeclare const $, _, d3, nv;\n\nconst WIDGET_CONFIG = {widgetType: 'wm-chart', hostClass: 'app-chart'};\n\nconst options = {\n        'Bubble' : ['bubblesize', 'shape']\n    },\n    NONE = 'none',\n    advanceDataProps = ['aggregation', 'aggregationcolumn', 'groupby', 'orderby'],\n    // XPaths to get actual data of data points in charts\n    chartDataPointXpath = {\n        'Column'         : 'rect.nv-bar',\n        'Bar'            : 'g.nv-bar',\n        'Area'           : '.nv-stackedarea .nv-point',\n        'Cumulative Line': '.nv-cumulativeLine .nv-scatterWrap path.nv-point',\n        'Line'           : '.nv-lineChart .nv-scatterWrap path.nv-point',\n        'Pie'            : '.nv-pieChart .nv-slice path',\n        'Donut'          : '.nv-pieChart .nv-slice path',\n        'Bubble'         : '.nv-scatterChart .nv-point-paths path'\n    },\n    // all properties of the chart\n    allOptions = ['bubblesize', 'shape'],\n    styleProps = {\n        'fontunit'      : 'font-size',\n        'fontsize'      : 'font-size',\n        'color'         : 'fill',\n        'fontfamily'    : 'font-family',\n        'fontweight'    : 'font-weight',\n        'fontstyle'     : 'font-style',\n        'textdecoration': 'text-decoration'\n    },\n    // Getting the relevant aggregation function based on the selected option\n    aggregationFnMap = {\n        'average' : 'AVG',\n        'count'   : 'COUNT',\n        'maximum' : 'MAX',\n        'minimum' : 'MIN',\n        'sum'     : 'SUM'\n    };\n\nconst getBooleanValue = val => {\n    if (val === true || val === 'true') {\n        return true;\n    }\n    if (val === false || val === 'false') {\n        return false;\n    }\n    return val;\n};\n\n// returns orderby columns and their orders in two separate arrays\nconst getLodashOrderByFormat = orderby => {\n    let columns;\n    const orderByColumns = [],\n        orders = [];\n\n    _.forEach(_.split(orderby, ','), function (col) {\n        columns = _.split(col, ':');\n        orderByColumns.push(columns[0]);\n        orders.push(columns[1]);\n    });\n    return {\n        'columns' : orderByColumns,\n        'orders'  : orders\n    };\n};\n\n// Replacing the '.' by the '$' because '.' is not supported in the alias names\nconst getValidAliasName = aliasName => aliasName ? aliasName.replace(/\\./g, '$') : null;\n\n// Applying the font related styles for the chart\nconst setTextStyle = (properties, id) => {\n    const charttext = d3.select('#wmChart' + id + ' svg').selectAll('text');\n    charttext.style(properties);\n};\n\nconst angle = d => {\n    const a = (d.startAngle + d.endAngle) * 90 / Math.PI - 90;\n    return a > 90 ? a - 180 : a;\n};\n\n@Component({\n    selector: 'div[wmChart]',\n    templateUrl: './chart.component.html',\n    styleUrls: ['../../../../../../node_modules/wm-nvd3/build/nv.d3.css'],\n    providers: [\n        provideAsWidgetRef(ChartComponent)\n    ],\n    encapsulation: ViewEncapsulation.None\n})\nexport class ChartComponent extends StylableComponent implements AfterViewInit, IRedrawableComponent {\n    static initializeProps = registerProps();\n\n    xaxisdatakey;\n    yaxisdatakey;\n    groupby;\n    aggregation;\n    aggregationcolumn;\n    isVisuallyGrouped;\n    orderby;\n    iconclass = '';\n    type: string;\n    showContentLoadError;\n    invalidConfig;\n    errMsg;\n    shape: string;\n    datasource: any;\n    fontsize: string;\n    selecteditem: any;\n    fontunit: string;\n    offsettop: number;\n    offsetleft: number;\n    offsetright: number;\n    offsetbottom: number;\n    showlabels: any;\n    theme: string;\n\n    private $id;\n    private scopedataset: any;\n    private binddataset: any;\n    private showlabelsoutside: any;\n    private _resizeFn: any;\n    private chart: any;\n    private clearCanvas: boolean;\n    public isLoadInProgress: boolean;\n    private filterFields: boolean | any;\n    private dataset: any;\n    private axisoptions: any;\n    private numericColumns: any;\n    private nonPrimaryColumns: any = [];\n    private variableInflight: any;\n    private chartReady: boolean;\n    private xDataKeyArr: any = [];\n    private xAxisDataType: string;\n    private bubblesize: any;\n    public showNoDataMsg: any;\n    private sampleData: any[];\n    private chartData: any[] = [];\n    private _processedData: any[] = [];\n\n    @HostBinding('class.panel') title;\n\n    isGroupByEnabled() {\n        return !!(this.groupby && this.groupby !== NONE);\n    }\n\n    // Check if x and y axis that are chosen are valid to plot chart\n    isValidAxis() {\n        // Check if x axis and y axis are chosen and are not equal\n        return this.binddataset ? (this.xaxisdatakey && this.yaxisdatakey) : true;\n    }\n\n    // Check if aggregation is chosen\n    isAggregationEnabled() {\n        return !!((this.isGroupByEnabled() && this.aggregation !== NONE && this.aggregationcolumn));\n    }\n\n    // Check if either groupby, aggregation or orderby is chosen\n    isDataFilteringEnabled() {\n        /*Query need to be triggered if any of the following cases satisfy\n        * 1. Group By and aggregation both chosen\n        * 2. Only Order By is chosen\n        * */\n\n        return this.isAggregationEnabled() || (!this.isVisuallyGrouped && this.orderby);\n    }\n\n    /*Charts like Line,Area,Cumulative Line does not support any other datatype\n        other than integer unlike the column and bar.It is a nvd3 issue. Inorder to\n        support that this is a fix*/\n    getxAxisVal(dataObj, xKey, index) {\n        const value = _.get(dataObj, xKey);\n        // If x axis is other than number type then add indexes\n        if (isLineTypeChart(this.type) && !isNumberType(this.xAxisDataType)) {\n            // Verification to get the unique data keys\n            this.xDataKeyArr.push(value);\n            return index;\n        }\n        return value;\n    }\n\n    // Getting the min and max values among all the x values\n    getXMinMaxValues(datum) {\n        if (!datum) {\n            return;\n        }\n        const xValues: any = {};\n        /*\n         compute the min x value\n         eg: When data has objects\n            input: [{x:1, y:2}, {x:2, y:3}, {x:3, y:4}]\n            min x: 1\n         eg: When data has arrays\n            input: [[10, 20], [20, 30], [30, 40]];\n            min x: 10\n        */\n        xValues.min = _.minBy(datum.values, dataObject => dataObject.x || dataObject[0]);\n        /*\n         compute the max x value\n         eg: When data has objects\n            input: [{x:1, y:2}, {x:2, y:3}, {x:3, y:4}]\n            max x: 3\n         eg: When data has arrays\n            input: [[10, 20], [20, 30], [30, 40]];\n            max x: 30\n         */\n        xValues.max = _.maxBy(datum.values, dataObject => dataObject.x || dataObject[0]);\n        return xValues;\n    }\n\n    // Getting the min and max values among all the y values\n    getYMinMaxValues(datum) {\n        const yValues: any = {},\n            minValues = [],\n            maxValues = [];\n        if (!datum) {\n            return;\n        }\n\n        /*\n         Getting the min and max y values among all the series of data\n         compute the min y value\n         eg: When data has objects\n            input: [[{x:1, y:2}, {x:2, y:3}, {x:3, y:4}], [{x:2, y:3}, {x:3, y:4}, {x:4, y:5}]]\n            min y values : '2'(among first set) & '3'(among second set)\n            max y values : '4'(among first set) & '5'(among second set)\n\n         eg: When data has arrays\n            input: [[[10, 20], [20, 30], [30, 40]], [[20, 30], [30, 40], [40, 50]]]\n            min y values : '20'(among first set) & '30'(among second set)\n            max y values : '40'(among first set) & '50'(among second set)\n         */\n\n        _.forEach(datum, data => {\n            minValues.push(_.minBy(data.values, function (dataObject) { return dataObject.y || dataObject[1]; }));\n            maxValues.push(_.maxBy(data.values, function (dataObject) { return dataObject.y || dataObject[1]; }));\n        });\n        // Gets the least and highest values among all the min and max values of respective series of data\n        yValues.min = _.minBy(minValues, dataObject => dataObject.y || dataObject[1]);\n        yValues.max = _.maxBy(maxValues, dataObject => dataObject.y || dataObject[1]);\n        return yValues;\n    }\n\n    // If the x-axis values are undefined, we return empty array else we return the values\n    getValidData(values) {\n        return (values.length === 1 && values[0] === undefined) ? [] : values;\n    }\n\n    // Returns the single data point based on the type of the data chart accepts\n    valueFinder(dataObj, xKey, yKey, index?, shape?) {\n        const xVal = this.getxAxisVal(dataObj, xKey, index),\n            value = _.get(dataObj, yKey),\n            yVal = parseFloat(value) || value,\n            size = parseFloat(dataObj[this.bubblesize]) || 2;\n        let dataPoint: any = {};\n\n        if (isChartDataJSON(this.type)) {\n            dataPoint.x = xVal;\n            dataPoint.y = yVal;\n            // only Bubble chart has the third dimension\n            if (isBubbleChart(this.type)) {\n                dataPoint.size = size;\n                dataPoint.shape = shape || 'circle';\n            }\n        } else if (isChartDataArray(this.type)) {\n            dataPoint = [xVal, yVal];\n        }\n        // Adding actual unwrapped data to chart data to use at the time of selected data point of chart event\n        dataPoint._dataObj = dataObj;\n        return dataPoint;\n    }\n\n    // Setting appropriate error messages\n    setErrMsg(message) {\n        if (this.showNoDataMsg) {\n            this.showContentLoadError = true;\n            this.invalidConfig = true;\n            // TODO: Set the locale from the message\n            this.errMsg = ''; // $rootScope.locale[message];\n        }\n    }\n\n    processChartData() {\n        this.sampleData = getSampleData(this);\n        // scope variables used to keep the actual key values for x-axis\n        this.xDataKeyArr = [];\n        // Plotting the chart with sample data when the chart dataset is not bound\n        if (!this.binddataset) {\n            this.xDataKeyArr = getDateList();\n            return this.sampleData;\n        }\n\n        if (!this.chartData || !this.chartData.length) {\n            return [];\n        }\n\n        let datum = [],\n            yAxisKey,\n            shapes: any = [],\n            values: any = [];\n        const xAxisKey = this.xaxisdatakey,\n            yAxisKeys = this.yaxisdatakey ? this.yaxisdatakey.split(',') : [],\n            dataSet = this.chartData;\n\n        if (_.isArray(dataSet)) {\n            if (isPieType(this.type)) {\n                yAxisKey = yAxisKeys[0];\n                datum = _.map(dataSet, (dataObj, index) => {\n                    if (!isEmptyObject(dataSet[index])) {\n                        return this.valueFinder(dataSet[index], xAxisKey, yAxisKey);\n                    }\n                });\n                datum = this.getValidData(datum);\n            } else {\n                if (isBubbleChart(this.type)) {\n                    shapes = this.shape === 'random' ? allShapes : this.shape;\n                }\n                yAxisKeys.forEach((yAxisKey, series) => {\n                    values =  _.map(dataSet, (dataObj, index) => {\n                        if (!isEmptyObject(dataSet[index])) {\n                            return this.valueFinder(dataSet[index], xAxisKey, yAxisKey, index, (_.isArray(shapes) && shapes[series]) || this.shape);\n                        }\n                    });\n                    values = this.getValidData(values);\n                    datum.push({\n                        values: values,\n                        key: prettifyLabels(yAxisKey)\n                    });\n                });\n            }\n        }\n        return datum;\n    }\n\n    setChartData(data) {\n        if (data) {\n            this._processedData = data;\n        }\n    }\n\n    getChartData() {\n        return this._processedData;\n    }\n\n    // constructing the grouped data based on the selection of orderby, x & y axis\n    getVisuallyGroupedData(queryResponse, groupingColumn) {\n        let groupData: any = {},\n            groupValues: any = [],\n            orderByDetails,\n            maxLength;\n        const chartData: any = [],\n            _isAreaChart = isAreaChart(this.type),\n            yAxisKey = _.first(_.split(this.yaxisdatakey, ','));\n        this.xDataKeyArr = [];\n        queryResponse = _.orderBy(queryResponse, _.split(this.groupby, ','));\n        if (this.orderby) {\n            orderByDetails = getLodashOrderByFormat(this.orderby);\n            queryResponse = _.orderBy(queryResponse, orderByDetails.columns, orderByDetails.orders);\n        }\n        queryResponse = _.groupBy(queryResponse, groupingColumn);\n        // In case of area chart all the series data should be of same length\n        if (_isAreaChart) {\n            maxLength = _.max(_.map(queryResponse, obj => obj.length));\n        }\n        _.forEach(queryResponse, (values, groupKey) => {\n            groupValues = isAreaChart ? _.fill(new Array(maxLength), [0, 0]) : [];\n            _.forEachRight(values, (value, index) => {\n                groupValues[index] = this.valueFinder(value, this.xaxisdatakey, yAxisKey, index);\n            });\n            groupData = {\n                key : groupKey,\n                values : groupValues\n            };\n            chartData.push(groupData);\n        });\n        return chartData;\n    }\n\n    /*Decides whether the data should be visually grouped or not\n            Visually grouped when a different column is choosen in the group by other than x and y axis and aggregation is not chosen*/\n    getGroupingDetails() {\n        if (this.isGroupByEnabled() && !this.isAggregationEnabled()) {\n            let isVisuallyGrouped = false,\n                visualGroupingColumn,\n                groupingExpression,\n                columns: any = [],\n                groupingColumnIndex;\n            const groupbyColumns = this.groupby && this.groupby !== NONE ? this.groupby.split(',') : [],\n                yAxisKeys = this.yaxisdatakey ? this.yaxisdatakey.split(',') : [];\n\n            if (groupbyColumns.length > 1) {\n                /*Getting the group by column which is not selected either in x or y axis*/\n                groupbyColumns.every((column, index) => {\n                    if (this.xaxisdatakey !== column && $.inArray(column, yAxisKeys) === -1) {\n                        isVisuallyGrouped = true;\n                        visualGroupingColumn = column;\n                        groupingColumnIndex = index;\n                        groupbyColumns.splice(groupingColumnIndex, 1);\n                        return false;\n                    }\n                    return true;\n                });\n                // Constructing the groupby expression\n                if (visualGroupingColumn) {\n                    columns.push(visualGroupingColumn);\n                }\n\n                if (groupbyColumns.length) {\n                    columns = _.concat(columns, groupbyColumns);\n                }\n            }\n            // If x and y axis are not included in aggregation need to be included in groupby\n            if (this.xaxisdatakey !== this.aggregationcolumn) {\n                columns.push(this.xaxisdatakey);\n            }\n            _.forEach(yAxisKeys, key => {\n                if (key !== this.aggregationcolumn) {\n                    columns.push(key);\n                }\n            });\n            groupingExpression =  columns.join(',');\n            // set isVisuallyGrouped flag in scope for later use\n            this.isVisuallyGrouped = isVisuallyGrouped;\n\n            return {\n                expression: groupingExpression,\n                isVisuallyGrouped: isVisuallyGrouped,\n                visualGroupingColumn: visualGroupingColumn\n            };\n        }\n        return {\n            expression: '',\n            isVisuallyGrouped: false,\n            visualGroupingColumn: ''\n        };\n    }\n\n    // Function to get the aggregated data after applying the aggregation & group by or order by operations.\n    getAggregatedData(callback) {\n        const variable: any = this.datasource,\n            yAxisKeys = this.yaxisdatakey ? this.yaxisdatakey.split(',') : [],\n            data: any = {};\n        let sortExpr,\n            columns: any = [],\n            colAlias,\n            orderByColumns,\n            groupByFields: any = [];\n\n        if (!variable) {\n            return;\n        }\n        if (this.isGroupByEnabled()) {\n            groupByFields = _.split(this.groupby, ',');\n        }\n        if (this.orderby) {\n            sortExpr = _.replace(this.orderby, /:/g, ' ');\n            columns = _.uniq(_.concat(columns, groupByFields, [this.aggregationcolumn]));\n            orderByColumns = getLodashOrderByFormat(this.orderby).columns;\n            // If the orderby column is chosen either in groupby or orderby then replace . with $ for that column\n            _.forEach(_.intersection(columns, orderByColumns), col => {\n                colAlias = getValidAliasName(col);\n                sortExpr = _.replace(sortExpr, col, colAlias);\n            });\n        }\n        if (this.isAggregationEnabled()) {\n            // Send the group by in the aggregations api only if aggregation is also chosen\n            data.groupByFields = groupByFields;\n            data.aggregations =  [\n                {\n                    'field': this.aggregationcolumn,\n                    'type':  aggregationFnMap[this.aggregation],\n                    'alias': getValidAliasName(this.aggregationcolumn)\n                }\n            ];\n        }\n        // Execute the query.\n        variable.execute('getAggregatedData', {\n            'aggregations' : data,\n            'sort'         : sortExpr\n        }).then(response => {\n            // Transform the result into a format supported by the chart.\n            const chartData: any = [],\n                aggregationAlias: any = getValidAliasName(this.aggregationcolumn),\n                xAxisAliasKey = getValidAliasName(this.xaxisdatakey),\n                yAxisAliasKeys = [];\n\n            yAxisKeys.forEach(yAxisKey => yAxisAliasKeys.push(getValidAliasName(yAxisKey)));\n\n            _.forEach(response.body.content, (responseContent) => {\n                const obj = {};\n                // Set the response in the chartData based on 'aggregationColumn', 'xAxisDataKey' & 'yAxisDataKey'.\n                if (this.isAggregationEnabled()) {\n                    obj[this.aggregationcolumn] = responseContent[aggregationAlias];\n                    obj[this.aggregationcolumn] = _.get(responseContent, aggregationAlias) || _.get(responseContent, this.aggregationcolumn);\n                }\n\n                obj[this.xaxisdatakey] = _.get(responseContent, xAxisAliasKey) || _.get(responseContent, this.xaxisdatakey);\n\n                yAxisKeys.forEach((yAxisKey, index) => {\n                    obj[yAxisKey] = responseContent[yAxisAliasKeys[index]];\n                    obj[yAxisKey] = _.get(responseContent, yAxisAliasKeys[index]) || _.get(responseContent, yAxisKey);\n                });\n\n                chartData.push(obj);\n            });\n\n            this.chartData = chartData;\n\n            triggerFn(callback);\n        }, () => {\n            this.chartData = [];\n            this.setErrMsg('MESSAGE_ERROR_FETCH_DATA');\n            triggerFn(callback);\n        });\n    }\n\n    // This function sets maximum width for the labels that can be displayed.This will helpful when they are overlapping\n    setLabelsMaxWidth() {\n        let xTicks,\n            tickWidth,\n            maxLength,\n            xDist,\n            yDist,\n            totalHeight,\n            maxNoLabels,\n            nthElement,\n            labelsAvailableWidth,\n            barWrapper,\n            yAxisWrapper,\n            svgWrapper;\n        const fontsize = parseInt(this.fontsize, 10) || 12,\n            isBarchart = isBarChart(this.type);\n        // getting the x ticks in the chart\n        xTicks = $('#wmChart' + this.$id + ' svg').find('g.nv-x').find('g.tick').find('text');\n\n        // getting the distance between the two visible ticks associated with visible text\n        xTicks.each(function () {\n            const xTick = $(this);\n            let xTransform,\n                tickDist;\n            if (xTick.text() && xTick.css('opacity') === '1') {\n                xTransform = xTick.parent().attr('transform').split(',');\n                xDist = parseFloat(xTransform[0].substr(10));\n                yDist = parseFloat(xTransform[1] || '0');\n                if (!isBarchart && xDist > 0) {\n                    tickDist = xDist;\n                } else if (yDist > 0) {\n                    tickDist = yDist;\n                }\n                if (tickWidth) {\n                    tickWidth = tickDist - tickWidth;\n                    return false;\n                }\n                tickWidth = tickDist;\n                return true;\n            }\n        });\n\n        // In case of bar chart getting the available space for the labels to be displayed\n        if (isBarchart) {\n            barWrapper = $('#wmChart' + this.$id + ' svg>g.nv-wrap>g>g.nv-barsWrap')[0];\n            yAxisWrapper = $('#wmChart' + this.$id + ' svg>g.nv-wrap>g>g.nv-y')[0];\n            svgWrapper = $('#wmChart' + this.$id + ' svg')[0];\n            // getting the total height of the chart\n            totalHeight = barWrapper ? barWrapper.getBoundingClientRect().height : 0;\n            // getting the labels available space\n            labelsAvailableWidth = yAxisWrapper ? svgWrapper.getBoundingClientRect().width - yAxisWrapper.getBoundingClientRect().width : svgWrapper.getBoundingClientRect().width;\n            // Setting the max length for the label\n            maxLength = Math.round(labelsAvailableWidth / fontsize);\n            // if available space for each label is less than the font-size\n            // then limiting the labels to be displayed\n            if (tickWidth < fontsize) {\n                // calculate the maximum no of labels to be fitted\n                maxNoLabels = totalHeight / fontsize;\n                // showing only the nth element\n                nthElement = Math.ceil(this.chartData.length / maxNoLabels);\n                // showing up only some labels\n                d3.select('#wmChart' + this.$id + ' svg').select('g.nv-x').selectAll('g.tick').select('text').each(function (text, i) {\n                    // hiding every non nth element\n                    if (i % nthElement !== 0) {\n                        d3.select(this).attr('opacity', 0);\n                    }\n                });\n            }\n        } else {\n            // Setting the max length for the label\n            maxLength = Math.round(tickWidth / fontsize);\n        }\n\n        // maxLength should always be a positive number\n        maxLength = Math.abs(maxLength);\n        // Validating if every label exceeds the max length and if so limiting the length and adding ellipsis\n        xTicks.each(function () {\n            if (this.textContent.length > maxLength) {\n                this.textContent = this.textContent.substr(0, maxLength) + '...';\n            }\n        });\n    }\n\n    // Returns the columns of that can be choosen in the x and y axis\n    getDefaultColumns() {\n        let type,\n            stringColumn,\n            i,\n            temp;\n        const defaultColumns = [],\n            columns = this.datasource.execute(DataSource.Operation.GET_PROPERTIES_MAP) || [];\n\n        for (i = 0; i < columns.length && defaultColumns.length <= 2; i += 1) {\n            type = columns[i].type;\n            if (!columns[i].isRelated && (isNumberType(type))) {\n                defaultColumns.push(columns[i].fieldName);\n            } else if (type === 'string' && !stringColumn) {\n                stringColumn = columns[i].fieldName;\n            }\n        }\n        // Other than bubble chart x: string type y: number type\n        // Bubble chart x: number type y: number type\n        if (stringColumn && defaultColumns.length > 0 && !isBubbleChart(this.type)) {\n            temp = defaultColumns[0];\n            defaultColumns[0] = stringColumn;\n            defaultColumns[1] = temp;\n        }\n\n        return defaultColumns;\n    }\n\n    // Call user defined javascript function when user links it to click event of the widget.\n    attachClickEvent() {\n        let dataObj;\n        d3.select('#wmChart' + this.$id + ' svg').selectAll(chartDataPointXpath[this.type]).style('pointer-events', 'all')\n            .on('click', (data, index) => {\n                switch (this.type) {\n                    case 'Column':\n                    case 'Bar':\n                        dataObj = data._dataObj;\n                        break;\n                    case 'Pie':\n                    case 'Donut':\n                        dataObj = data.data._dataObj;\n                        break;\n                    case 'Area':\n                    case 'Cumulative Line':\n                    case 'Line':\n                        dataObj = data[0]._dataObj;\n                        break;\n                    case 'Bubble':\n                        dataObj = data.data.point[4]._dataObj;\n                        break;\n                }\n                this.selecteditem = dataObj;\n                this.invokeEventCallback('select', {$event: d3.event, selectedChartItem: data, selectedItem: this.selecteditem});\n            });\n    }\n\n    /*  Returns Y Scale min value\n           Ex: Input   : 8.97\n               Output  : 8.87\n\n               Input   : 8\n               Output  : 7\n       */\n\n    postPlotProcess(chart) {\n        let chartSvg,\n            pieLabels,\n            pieGroups,\n            angleArray;\n        const styleObj = {};\n        const element = this.$element;\n\n        postPlotChartProcess(this);\n\n        if (!isPieType(this.type)) {\n            this.setLabelsMaxWidth();\n        } else if (!this.showlabelsoutside) {\n            /** Nvd3 has a issue in rotating text. So we will use this as a temp fix.\n             * If the issue is resolved there, we can remove this.*/\n            /* If it is a donut chart, then rotate the text and position them*/\n            chartSvg = d3.select('#wmChart' + this.$id + ' svg');\n            pieLabels = chartSvg.select('.nv-pieLabels').selectAll('.nv-label');\n            pieGroups = chartSvg.select('.nv-pie').selectAll('.nv-slice');\n            angleArray = [];\n            if (pieGroups && pieGroups.length) {\n                pieGroups.each(function () {\n                    d3.select(this).attr('transform', function (d) {\n                        angleArray.push(angle(d));\n                    });\n                });\n                pieLabels.each(function (d, i) {\n                    const group = d3.select(this);\n                    $(group[0][0]).find('text').attr('transform', 'rotate(' + angleArray[i] + ')');\n                });\n            }\n        }\n\n        // prepare text style props object and set\n        _.forEach(styleProps, (value, key) => {\n            if (key === 'fontsize' || key === 'fontunit') {\n                styleObj[value] = this.fontsize + this.fontunit;\n            } else {\n                styleObj[value] = this[key];\n            }\n        });\n        setTextStyle(styleObj, this.$id);\n\n        /*\n         * allow window-resize functionality, for only-run mode as\n         * updating chart is being handled by watchers of height & width in studio-mode\n         * */\n        triggerFn(this._resizeFn && this._resizeFn.clear);\n        this._resizeFn = nv.utils.windowResize(() => {\n            if (element[0].getBoundingClientRect().height) {\n                chart.update();\n                postPlotChartProcess(this);\n                if (!isPieType(this.type)) {\n                    this.setLabelsMaxWidth();\n                }\n            } else {\n                // TODO: get parents of accordion type\n                /*let parent = element.closest('.app-accordion-panel, .tab-pane').isolateScope();\n                if (parent) {\n                    parent.initialized = false;\n                }*/\n            }\n        });\n    }\n\n    // prepares and configures the chart properties\n    configureChart() {\n        // Copy the data only in case of pie chart with default data\n        // Reason : when multiple pie charts are bound to same data, first chart theme will be applied to all charts\n        let xDomainValues;\n        let yDomainValues;\n        let chart;\n        let beforeRenderVal;\n        const yformatOptions: any = {};\n\n        if (this._processedData.length > 0) {\n            if (isAxisDomainValid(this, 'x')) {\n                xDomainValues = this.binddataset ? this.getXMinMaxValues(this._processedData[0]) : { 'min' : {'x': 1},  'max' : {'x' : 5}};\n            }\n            if (isAxisDomainValid(this, 'y')) {\n                yDomainValues = this.binddataset ? this.getYMinMaxValues(this._processedData) : { 'min' : {'y' : 1}, 'max' : {'y' : 5}};\n            }\n        }\n\n        if (isPieType(this.type) && (!this.binddataset || !this.scopedataset)) {\n            this._processedData = getClonedObject(this.scopedataset || this._processedData);\n        }\n\n        // get the chart object\n        chart = initChart(this, xDomainValues, yDomainValues, null, !this.binddataset);\n\n        if (_.isArray(this._processedData)) {\n            beforeRenderVal = this.invokeEventCallback('beforerender', { 'chartInstance' : chart});\n            if (beforeRenderVal) {\n                chart = beforeRenderVal;\n            }\n            this.chart = chart;\n            // changing the default no data message\n            d3.select('#wmChart' + this.$id + ' svg')\n                .datum(this._processedData)\n                .call(this.chart);\n            this.postPlotProcess(chart);\n            return chart;\n        }\n    }\n\n    // Plotting the chart with set of the properties set to it\n    plotChart() {\n        const element = this.$element;\n        // call user-transformed function\n        this.chartData = (this.invokeEventCallback('transform')) || this.chartData;\n\n        // Getting the order by data only in run mode. The order by applies for all the charts other than pie and donut charts\n        if (this.isVisuallyGrouped && !isPieType(this.type)) {\n            this._processedData = this.chartData;\n        } else {\n            this._processedData = this.processChartData();\n        }\n        // checking the parent container before plotting the chart\n        if (!element[0].getBoundingClientRect().height) {\n            return;\n        }\n        if (this.clearCanvas) {\n            // empty svg to add-new chart\n            element.find('svg').replaceWith('<svg></svg>');\n            this.clearCanvas = false;\n        }\n\n        // In case of invalid axis show no data available message\n        if (!this.isValidAxis()) {\n            this._processedData = [];\n        }\n        nv.addGraph(() => this.configureChart(),  () => {\n            /*Bubble chart has an time out delay of 300ms in their implementation due to which we\n            * won't be getting required data points on attaching events\n            * hence delaying it 600ms*/\n            setTimeout( () => {\n                this.attachClickEvent();\n            }, 600);\n        });\n        this.isLoadInProgress = false;\n    }\n    // TODO: Need way to figure out if the datasource is a live source\n    get isLiveVariable() {\n        // setting the flag for the live variable in the scope for the checks\n        const variableObj = this.datasource;\n        return variableObj && variableObj.category === 'wm.LiveVariable';\n    }\n\n    plotChartProxy() {\n        this.showContentLoadError = false;\n        this.invalidConfig = false;\n        // Checking if x and y axis are chosen\n        this.isLoadInProgress = true;\n        const groupingDetails = this.getGroupingDetails();\n        // If aggregation/group by/order by properties have been set, then get the aggregated data and plot the result in the chart.\n        // TODO: datasource for live variable detection\n        if (this.binddataset && this.isLiveVariable && (this.filterFields || this.isDataFilteringEnabled())) {\n            this.getAggregatedData(() => this.plotChart());\n        } else { // Else, simply plot the chart.\n            // In case of live variable resetting the aggregated data to the normal dataset when the aggregation has been removed\n            if (this.dataset && this.isLiveVariable) {\n                this.chartData = this.dataset;\n                if (this.isGroupByEnabled() && groupingDetails.isVisuallyGrouped) {\n                    this.chartData = this.getVisuallyGroupedData(this.chartData, groupingDetails.visualGroupingColumn);\n                }\n\n            }\n            this.plotChart();\n        }\n    }\n\n    // sets the default x and y axis options\n    setDefaultAxisOptions() {\n        const defaultColumns = this.getDefaultColumns();\n        // If we get the valid default columns then assign them as the x and y axis\n        // In case of service variable we may not get the valid columns because we cannot know the datatypes\n        this.xaxisdatakey = defaultColumns[0] || null;\n        this.yaxisdatakey = defaultColumns[1] || null;\n    }\n\n    getCutomizedOptions(prop, fields) {\n        const groupByColumns = _.split(this.groupby, ','),\n            aggColumns = _.split(this.aggregationcolumn, ',');\n        if (!this.binddataset) {\n            return fields;\n        }\n        if (!this.axisoptions) {\n            this.axisoptions = fields;\n        }\n        let newOptions;\n        switch (prop) {\n            case 'xaxisdatakey':\n                // If group by enabled, columns chosen in groupby will be populated in x axis options\n                if (this.isGroupByEnabled()) {\n                    newOptions = groupByColumns;\n                }\n                break;\n            case 'yaxisdatakey':\n                // If aggregation by enabled, columns chosen in aggregation will be populated in y axis options\n                if (this.isAggregationEnabled()) {\n                    newOptions = aggColumns;\n                } else if (this.isLiveVariable) {\n                    // In case of live variable populating only numeric columns\n                    newOptions = this.numericColumns;\n                }\n                break;\n            case 'groupby':\n                // Filtering only non primary key columns\n                if (this.isLiveVariable && this.nonPrimaryColumns && this.nonPrimaryColumns.length) {\n                    newOptions = this.nonPrimaryColumns;\n                }\n                break;\n            case 'aggregationcolumn':\n                // Set the 'aggregationColumn' to show all keys in case of aggregation function is count or to numeric keys in all other cases.\n                if (this.isLiveVariable && this.isAggregationEnabled() && this.aggregation !== 'count') {\n                    newOptions = this.numericColumns;\n                }\n                break;\n            case 'orderby':\n                // Set the 'aggregationColumn' to show all keys in case of aggregation function is count or to numeric keys in all other cases.\n                if (this.isLiveVariable && this.isAggregationEnabled()) {\n                    newOptions = _.uniq(_.concat(groupByColumns, aggColumns));\n                }\n                break;\n            case 'bubblesize':\n                if (this.numericColumns && this.numericColumns.length) {\n                    newOptions = this.numericColumns;\n                }\n                break;\n        }\n\n        return newOptions || fields || this.axisoptions;\n    }\n\n    // Function that iterates through all the columns and then fetching the numeric and non primary columns among them\n    setNumericandNonPrimaryColumns() {\n        let columns,\n            type;\n        const propertiesMap = this.datasource.execute(DataSource.Operation.GET_PROPERTIES_MAP);\n        this.numericColumns = [];\n        this.nonPrimaryColumns = [];\n        // Fetching all the columns\n        if (this.dataset && !_.isEmpty(propertiesMap)) {\n            columns = []; // TODO: fetchPropertiesMapColumns(propertiesMap);\n        }\n\n        if (columns) {\n            // Iterating through all the columns and fetching the numeric and non primary key columns\n            _.forEach(Object.keys(columns), (key) => {\n                type = columns[key].type;\n                if (isNumberType(type)) {\n                    this.numericColumns.push(key);\n                }\n                // Hiding only table's primary key\n                if (columns[key].isRelatedPk === 'true' || !columns[key].isPrimaryKey) {\n                    this.nonPrimaryColumns.push(key);\n                }\n            });\n            this.numericColumns = this.numericColumns.sort();\n            this.nonPrimaryColumns = this.nonPrimaryColumns.sort();\n        }\n    }\n\n    // plot the chart\n    handleDataSet(newVal) {\n        this.errMsg = '';\n        // Resetting the flag to false when the binding was removed\n        if (!newVal && !this.binddataset) {\n            this.isVisuallyGrouped = false;\n            this.axisoptions = null;\n        }\n\n        // liveVariables contain data in 'data' property' of the variable\n        this.chartData = this.isLiveVariable ? newVal || '' : (newVal && newVal.dataValue === '' && _.keys(newVal).length === 1) ? '' : newVal;\n\n        // if the data returned is an object make it an array of object\n        if (!_.isArray(this.chartData) && _.isObject(this.chartData)) {\n            this.chartData = [this.chartData];\n        }\n\n        if (newVal && newVal.filterFields) {\n            this.filterFields = newVal.filterFields;\n        }\n\n        // plotchart for only valid data and only after bound variable returns data\n        if (this.chartData) {\n            this._plotChartProxy();\n        }\n    }\n\n    _plotChartProxy = _.debounce(this.plotChartProxy.bind(this), 100);\n\n    onPropertyChange(key, newVal, oldVal?) {\n        super.onPropertyChange(key, newVal, oldVal);\n        switch (key) {\n            case 'dataset':\n                this.handleDataSet(newVal);\n                break;\n            case 'type':\n                // Based on the change in type deciding the default margins\n                if (isPieType(this.type)) {\n                    this.offsettop = 20;\n                    this.offsetright = 0;\n                    this.offsetbottom = 0;\n                    this.offsetleft = 0;\n                } else if (oldVal === 'Pie' || oldVal === 'Donut') {\n                    this.offsettop = 25;\n                    this.offsetright = 25;\n                    this.offsetbottom = 55;\n                    this.offsetleft = 75;\n                }\n\n                if (oldVal !== newVal) {\n                    this.clearCanvas = true;\n                }\n                // In studio mode, configure properties dependent on chart type\n                this._plotChartProxy();\n                break;\n            default:\n                // In RunMode, the plotchart method will not be called for all property change\n                this._plotChartProxy();\n                break;\n        }\n        if (_.includes(advanceDataProps, key)) {\n            this._plotChartProxy();\n        }\n    }\n\n    handleLoading(data) {\n        const dataSource = this.datasource;\n        if (dataSource && dataSource.execute(DataSource.Operation.IS_API_AWARE) && isDataSourceEqual(data.variable, dataSource)) {\n            this.variableInflight = data.active;\n            this.isLoadInProgress = data.active;\n        }\n    }\n\n    onStyleChange(key, newVal, oldVal) {\n        const styleObj = {};\n        super.onStyleChange(key, newVal, oldVal);\n        switch (key) {\n            case 'fontsize':\n            case 'fontunit':\n            case 'color':\n            case 'fontfamily':\n            case 'fontweight':\n            case 'fontstyle':\n            case 'textdecoration':\n                styleObj[styleProps[key]] = (key === 'fontsize' || key === 'fontunit') ? this.fontsize + this.fontunit : newVal;\n                setTextStyle(styleObj, this.$id);\n                break;\n        }\n    }\n\n    constructor(inj: Injector, private app: App) {\n        super(inj, WIDGET_CONFIG);\n        styler(this.nativeElement, this, APPLY_STYLES_TYPE.CONTAINER, ['fontsize', 'fontunit', 'color', 'fontfamily', 'fontweight', 'fontstyle', 'textdecoration']);\n\n        // generate unique id for the component\n        this.$id = this.widgetId || Math.random();\n        // remove title attribute as the element on hover shows you the hint through-out the element\n        removeAttr(this.nativeElement, 'title');\n        this.chartReady = false;\n        this.binddataset = this.nativeElement.getAttribute('dataset.bind');\n        // Show loading status based on the variable life cycle\n        this.app.subscribe('toggle-variable-state', this.handleLoading.bind(this));\n    }\n\n    ngAfterViewInit() {\n        super.ngAfterViewInit();\n        // For old projects\n        if (!_.includes(['outside', 'inside', 'hide'], this.showlabels)) {\n            this.showlabels        = getBooleanValue(this.showlabels);\n            this.showlabelsoutside = getBooleanValue(this.showlabelsoutside);\n            this.showlabels        = this.showlabels ? (this.showlabelsoutside ? 'outside' : 'inside') : 'hide';\n        }\n\n        if (!this.theme) {\n            // Default theme for pie/donut is Azure and for other it is Terrestrial\n            this.theme = isPieType(this.type) ? 'Azure' : 'Terrestrial';\n        }\n\n        this.nativeElement.setAttribute('id', 'wmChart' + this.$id);\n        // When there is not value binding, then plot the chart with sample data\n        if (!this.binddataset && !this.nativeElement.getAttribute('scopedataset')) {\n            this._plotChartProxy();\n        }\n    }\n\n    redraw = this._plotChartProxy.bind(this);\n}\n","import { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-chart',\n        new Map(\n            [\n                ['aggregation', {value: 'none', ...PROP_STRING}],\n                ['aggregationcolumn', PROP_STRING],\n                ['areaviewtype', {value: 'stack', ...PROP_STRING}],\n                ['barspacing', {value: 'medium', ...PROP_STRING}],\n                ['bubblesize', PROP_STRING],\n                ['centerlabel', PROP_STRING],\n                ['class', PROP_STRING],\n                ['customcolors', PROP_STRING],\n                ['dataset', PROP_ANY],\n                ['datasource', PROP_STRING],\n                ['donutratio', {value: 'medium', ...PROP_STRING}],\n                ['formattype', {value: '', PROP_STRING}],\n                ['groupby', PROP_STRING],\n                ['height', {value: '210px', PROP_STRING}],\n                ['highlightpoints', PROP_BOOLEAN],\n                ['iconclass', PROP_STRING],\n                ['interpolation', {value: 'linear', ...PROP_STRING}],\n                ['labelthreshold', {value: 0.01, ...PROP_NUMBER}],\n                ['labeltype', {value: 'percent', ...PROP_STRING}],\n                ['legendtype', {value: 'furious', ...PROP_STRING}],\n                ['linethickness', PROP_STRING],\n                ['loadingdatamsg', {value: 'Loading...', ...PROP_STRING}],\n                ['name', PROP_STRING],\n                ['nodatamessage', {value: 'No Data Available.', ...PROP_STRING}],\n                ['offset', PROP_STRING],\n                ['offsetbottom', {value: 55, ...PROP_NUMBER}],\n                ['offsetleft', {value: 75, ...PROP_NUMBER}],\n                ['offsetright', {value: 25, ...PROP_NUMBER}],\n                ['offsettop', {value: 25, ...PROP_NUMBER}],\n                ['orderby', PROP_STRING],\n                ['reducexticks', {value: true, ...PROP_BOOLEAN}],\n                ['shape', {value: 'circle', ...PROP_STRING}],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n                ['showlabels', {value: 'outside', ...PROP_STRING}],\n                ['showlabelsoutside', {value: true, ...PROP_BOOLEAN}],\n                ['showlegend', {value: 'top', ...PROP_STRING}],\n                ['showvalues', {value: false, ...PROP_BOOLEAN}],\n                ['showxaxis', {value: true, ...PROP_BOOLEAN}],\n                ['showxdistance', {value: false, ...PROP_BOOLEAN}],\n                ['showyaxis', {value: true, ...PROP_BOOLEAN}],\n                ['showydistance', {value: false, ...PROP_BOOLEAN}],\n                ['staggerlabels', {value: false, ...PROP_BOOLEAN}],\n                ['subheading', PROP_STRING],\n                ['theme', PROP_STRING],\n                ['title', PROP_STRING],\n                ['tooltips', {value: true, ...PROP_BOOLEAN}],\n                ['type', PROP_STRING],\n                ['viewtype', {value: 'Grouped', ...PROP_STRING}],\n                ['xaxisdatakey', PROP_STRING],\n                ['xaxislabel', PROP_STRING],\n                ['xaxislabeldistance', {value: 12, ...PROP_NUMBER}],\n                ['xdateformat', PROP_STRING],\n                ['xdomain', {value: 'Default', ...PROP_STRING}],\n                ['xnumberformat', PROP_STRING],\n                ['xunits', PROP_STRING],\n                ['yaxisdatakey', PROP_STRING],\n                ['yaxislabel', PROP_STRING],\n                ['yaxislabeldistance', {value: 12, ...PROP_NUMBER}],\n                ['ydomain', {value: 'Default', ...PROP_STRING}],\n                ['ynumberformat', PROP_STRING],\n                ['yunits', PROP_STRING]\n            ]\n        )\n    );\n};\n","import { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const checkboxProps = new Map(\n    [\n        ['caption', PROP_STRING],\n        ['class', PROP_STRING],\n        ['conditionalclass', PROP_ANY],\n        ['conditionalstyle', PROP_ANY],\n        ['checkedvalue', {value: true, ...PROP_STRING}],\n        ['datavaluesource', PROP_ANY],\n        ['datavalue', PROP_STRING],\n        ['disabled', PROP_BOOLEAN],\n        ['hint', PROP_STRING],\n        ['name', PROP_STRING],\n        ['readonly', PROP_BOOLEAN],\n        ['required', PROP_BOOLEAN],\n        ['shortcutkey', PROP_STRING],\n        ['show', {value: true, ...PROP_BOOLEAN}],\n        ['tabindex', {value: 0, ...PROP_NUMBER}],\n        ['uncheckedvalue', {value: false, ...PROP_STRING}]\n    ]\n);\n\nexport const registerProps = () => {\n    register(\n        'wm-checkbox',\n        checkboxProps\n    );\n};\n","import { Injector } from '@angular/core';\n\nimport { DataSource } from '@wm/core';\n\nimport { StylableComponent } from './stylable.component';\nimport { IWidgetConfig } from '../../framework/types';\n\ndeclare const _;\n\nexport abstract class BaseFormComponent extends StylableComponent {\n    public datavalue;\n    private prevDatavalue;\n    protected binddatavalue: string;\n    private datavaluesource: any;\n\n    protected constructor(\n        protected inj: Injector,\n        config: IWidgetConfig,\n        initPromise?: Promise<any>\n    ) {\n        super(inj, config, initPromise);\n        this.binddatavalue = this.$element.attr('datavalue.bind');\n    }\n\n    /**\n     * Responsible for updating the variable bound to the widget's datavalue property.\n     * @param value\n     */\n    updateBoundVariable(value) {\n        let binddatavalue = this.binddatavalue;\n\n        // return if the variable bound is not static.\n        if (this.datavaluesource && this.datavaluesource.execute(DataSource.Operation.IS_API_AWARE)) {\n            return;\n        } else if (this.datavaluesource && !this.datavaluesource.twoWayBinding) {\n                return;\n        }\n\n        // return if widget is bound.\n        if (!binddatavalue || binddatavalue.startsWith('Widgets.') || binddatavalue.startsWith('itemRef.currentItemWidgets')) {\n            return;\n        }\n\n        binddatavalue = binddatavalue.replace(/\\[\\$i\\]/g, '[0]');\n\n        // In case of list widget context will be the listItem.\n        if (_.has(this.context, binddatavalue.split('.')[0])) {\n            _.set(this.context, binddatavalue, value);\n        } else {\n            _.set(this.viewParent, binddatavalue, value);\n        }\n    }\n\n    protected invokeOnChange(value, $event?: Event) {\n        // invoke the event callback\n        if ($event) {\n            if (this.datavalue !== this.prevDatavalue) {\n                this.updateBoundVariable(value);\n                this.invokeEventCallback('change', {\n                    $event,\n                    newVal: value,\n                    oldVal: this.prevDatavalue\n                });\n            }\n        }\n        // update the previous value\n        this.prevDatavalue = value;\n    }\n\n    protected updatePrevDatavalue(val: any) {\n        this.prevDatavalue = val;\n    }\n}\n","import { ControlValueAccessor, FormControlName } from '@angular/forms';\nimport { OnInit } from '@angular/core';\n\nimport { noop } from '@wm/core';\n\nimport { BaseFormComponent } from './base-form.component';\n\nexport abstract class BaseFormCustomComponent extends BaseFormComponent implements ControlValueAccessor, OnInit {\n\n    private _formControl: FormControlName;\n    protected _onChange: any = () => {};\n    private _onTouched: any = () => {};\n\n    ngOnInit() {\n        super.ngOnInit();\n        this._formControl = this.inj.get(FormControlName, null);\n    }\n\n    public registerOnChange(fn) {\n        this._onChange = fn;\n    }\n\n    public registerOnTouched(fn) {\n        this._onTouched = fn;\n    }\n\n    public writeValue(value) {\n        if (this.isDestroyed) {\n            return;\n        }\n        if (this._formControl) {\n            this.datavalue = value;\n            this.onPropertyChange('datavalue', value);\n            this.updatePrevDatavalue(value);\n        }\n    }\n\n    public invokeOnChange(value, $event?: Event | any, valid?: boolean) {\n        // let the angular know about the change\n        this._onChange(value);\n\n        if (valid) {\n            super.invokeOnChange(value, $event);\n        }\n    }\n\n    public invokeOnTouched($event?: Event) {\n        this._onTouched();\n\n        if ($event) {\n            this.invokeEventCallback('blur', {$event});\n        }\n    }\n\n    protected invokeOnFocus($event: Event) {\n        this.invokeEventCallback('focus', {$event});\n    }\n}\n","import { AfterViewInit, Attribute, Component, ElementRef, Injector, OnInit, ViewChild } from '@angular/core';\nimport { NgModel } from '@angular/forms';\n\nimport { isDefined, toggleClass } from '@wm/core';\n\nimport { IWidgetConfig } from '../../framework/types';\nimport { styler } from '../../framework/styler';\nimport { provideAsNgValueAccessor, provideAsWidgetRef } from '../../../utils/widget-utils';\nimport { registerProps } from './checkbox.props';\nimport { BaseFormCustomComponent } from '../base/base-form-custom.component';\n\nconst DEFAULT_CLS = 'app-checkbox checkbox';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-checkbox',\n    hostClass: DEFAULT_CLS\n};\n\n/*\n * try to convert the chekedvalue and unchecked values to boolean/number\n */\nconst unStringify = (val, defaultVal?) => {\n    if (val === null) {\n        return defaultVal;\n    }\n\n    if (val === true || val === 'true') {\n        return true;\n    }\n\n    if (val === false || val === 'false') {\n        return false;\n    }\n\n    const number = parseInt(val, 10);\n    if (!isNaN(number)) {\n        return number;\n    }\n    return val;\n};\n\n@Component({\n    selector: '[wmCheckbox]',\n    templateUrl: './checkbox.component.html',\n    providers: [\n        provideAsNgValueAccessor(CheckboxComponent),\n        provideAsWidgetRef(CheckboxComponent)\n    ]\n})\nexport class CheckboxComponent extends BaseFormCustomComponent implements OnInit, AfterViewInit {\n    static initializeProps = registerProps();\n\n    public proxyModel: boolean;\n    public disabled: boolean;\n    public readonly: boolean;\n    public required: boolean;\n    public name: string;\n    public shortcutkey: string;\n    public tabindex: any;\n    public _caption = '&nbsp';\n    private _checkedvalue;\n    private _uncheckedvalue;\n\n    @ViewChild(NgModel) ngModel: NgModel;\n    @ViewChild('checkbox', {read: ElementRef}) checkboxEl: ElementRef;\n\n    // if the checkbox is checked, return checkedvalue else return uncheckedvalue\n    public get datavalue() {\n        return isDefined(this.proxyModel) ? (this.proxyModel ? this._checkedvalue : this._uncheckedvalue) : undefined;\n    }\n    // when the datavalue is set, update the checked state\n    public set datavalue(v) {\n        this.proxyModel = (isDefined(v) && v !== '') ? v === this._checkedvalue : undefined;\n        this.updatePrevDatavalue(this.datavalue);\n    }\n\n    constructor(\n        inj: Injector,\n        @Attribute('checkedvalue') checkedVal,\n        @Attribute('uncheckedvalue') uncheckedVal,\n        @Attribute('type') type\n    ) {\n        super(inj, WIDGET_CONFIG);\n\n        this._checkedvalue = unStringify(checkedVal, true);\n        this._uncheckedvalue = unStringify(uncheckedVal, false);\n\n        // if the type of the checkbox is toggle update the related classes on the host node\n        toggleClass(this.nativeElement, 'app-toggle', type === 'toggle');\n    }\n\n    onPropertyChange(key, nv, ov) {\n        if (key === 'tabindex') {\n            return;\n        }\n\n        if (key === 'caption') {\n            if (!isDefined(nv) || nv === '') {\n                this._caption = '&nbsp;';\n            } else {\n                this._caption = nv;\n            }\n        } else if (key === 'checkedvalue') {\n            this._checkedvalue = unStringify(nv, true);\n        } else if (key === 'uncheckedvalue') {\n            this._uncheckedvalue = unStringify(nv, false);\n        } else if (key === 'datavalue') {\n            this.datavalue = unStringify(nv);\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n\n    // change and blur events are handled from template\n    protected handleEvent(node: HTMLElement, eventName: string, callback: Function, locals: any) {\n        if (eventName !== 'change' && eventName !== 'blur') {\n            // applying tap (Hammer event) on the label as the event handler is not getting triggered on the input.\n            const $el = eventName === 'tap' ? this.nativeElement.querySelector('label') : this.checkboxEl.nativeElement;\n            super.handleEvent($el, eventName, callback, locals);\n        }\n    }\n\n    handleChange(newVal: boolean) {\n        this.invokeOnChange(this.datavalue, {type: 'change'}, this.ngModel.valid);\n    }\n\n\n    ngAfterViewInit() {\n        super.ngAfterViewInit();\n        styler(this.nativeElement.querySelector('label'), this);\n    }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DatePipe, DecimalPipe } from '@angular/common';\nimport { CURRENCY_INFO, isDefined } from '@wm/core';\n\ndeclare const moment, _, $;\n\nconst getEpochValue = data => {\n    let epoch;\n    // For data in form of string number ('123'), convert to number (123). And don't parse date objects.\n    if (!_.isDate(data) && !isNaN(data)) {\n        data = parseInt(data, 10);\n    }\n    // get the timestamp value. If data is time string, append date string to the time value\n    epoch = moment(data).valueOf() || moment(new Date().toDateString() + ' ' + data).valueOf();\n    return epoch;\n};\n\n@Pipe({\n    name: 'toDate'\n})\nexport class ToDatePipe implements PipeTransform {\n    transform(data: any, format: any) {\n        let timestamp;\n        // 'null' is to be treated as a special case, If user wants to enter null value, empty string will be passed to the backend\n        if (data === 'null' || data === '') {\n            return '';\n        }\n        if (!isDefined(data)) {\n            return '';\n        }\n        timestamp = getEpochValue(data);\n        if (timestamp) {\n            if (format === 'timestamp') {\n                return timestamp;\n            }\n            return this.datePipe.transform(timestamp, format);\n        }\n        return '';\n    }\n\n    constructor(private datePipe: DatePipe) {}\n}\n\n@Pipe({\n    name: 'toNumber'\n})\nexport class ToNumberPipe implements PipeTransform {\n    transform(data, fracSize) {\n        if (fracSize && !String(fracSize).match(/^(\\d+)?\\.((\\d+)(-(\\d+))?)?$/)) {\n            fracSize = '1.' + fracSize + '-' + fracSize;\n        }\n        if (!_.isNaN(+data)) {\n            return this.decimalPipe.transform(data, fracSize);\n        }\n    }\n    constructor(private decimalPipe: DecimalPipe) {}\n}\n\n@Pipe({\n    name: 'toCurrency'\n})\nexport class ToCurrencyPipe implements PipeTransform {\n    transform(data, currencySymbol, fracSize) {\n        const _currencySymbol = (CURRENCY_INFO[currencySymbol] || {}).symbol || currencySymbol || '',\n            _val = new ToNumberPipe(this.decimalPipe).transform(data, fracSize);\n        return _val ? _currencySymbol + _val : '';\n    }\n\n    constructor(private decimalPipe: DecimalPipe) {}\n}\n\n@Pipe({\n    name: 'prefix'\n})\nexport class PrefixPipe implements PipeTransform {\n    transform(data, padding) {\n        return (_.isUndefined(data) || data === null || data === '') ? data : ((padding || '') + data);\n    }\n}\n\n@Pipe({\n    name: 'suffix'\n})\nexport class SuffixPipe implements PipeTransform {\n    transform(data, padding) {\n        return (_.isUndefined(data) || data === null || data === '') ? data : (data + (padding || ''));\n    }\n}\n\n@Pipe({\n    name: 'timeFromNow'\n})\nexport class TimeFromNowPipe implements PipeTransform {\n    transform(data) {\n        let timestamp;\n        if (!isDefined(data)) {\n            return undefined;\n        }\n        timestamp = getEpochValue(data);\n        return timestamp ? moment(timestamp).fromNow() : undefined;\n    }\n}\n\n@Pipe({\n    name: 'numberToString'\n})\nexport class NumberToStringPipe extends ToNumberPipe implements PipeTransform {}\n\n@Pipe({\n    name: 'stringToNumber'\n})\nexport class StringToNumberPipe implements PipeTransform {\n    transform(data) {\n        return Number(data) || undefined;\n    }\n}\n\n@Pipe({\n    name: 'filter'\n})\nexport class FilterPipe implements PipeTransform {\n    transform(data: any[], field: any, value: any) {\n        if (!data) {\n            return [];\n        }\n        // If object is passed as first paramter\n        if (_.isObject(field)) {\n            return _.filter(data, field);\n        }\n        // If key value pair is provided\n        return _.filter(data, item => {\n            return _.includes(item[field], value);\n        });\n    }\n}\n\n@Pipe({\n    name: 'filesize'\n})\nexport class FileSizePipe implements PipeTransform {\n    transform(bytes: number, precision: number) {\n        const units = [\n            'bytes',\n            'KB',\n            'MB',\n            'GB',\n            'TB',\n            'PB'\n        ];\n\n        /*Todo[shubham]\n        if (isNaN(parseFloat(bytes)) || !isFinite(bytes)) {\n            return isMobile() ? '' : '?';\n        }*/\n        let unit = 0;\n        while (bytes >= 1024) {\n            bytes /= 1024;\n            unit++;\n        }\n        return bytes.toFixed(+precision) + ' ' + units[unit];\n    }\n}\n\n@Pipe({\n    name: 'fileIconClass'\n})\nexport class FileIconClassPipe implements PipeTransform {\n    transform(fileExtension: any) {\n        const fileClassMapping = {\n            'zip'       :   'fa-file-zip-o',\n            'pdf'       :   'fa-file-pdf-o',\n            'rar'       :   'fa-file-archive-o',\n            'txt'       :   'fa-file-text-o',\n            'ppt'       :   'fa-file-powerpoint-o',\n            'pot'       :   'fa-file-powerpoint-o',\n            'pps'       :   'fa-file-powerpoint-o',\n            'pptx'      :   'fa-file-powerpoint-o',\n            'potx'      :   'fa-file-powerpoint-o',\n            'ppsx'      :   'fa-file-powerpoint-o',\n            'mpg'       :   'fa-file-movie-o',\n            'mp4'       :   'fa-file-movie-o',\n            'mov'       :   'fa-file-movie-o',\n            'avi'       :   'fa-file-movie-o',\n            'mp3'       :   'fa-file-audio-o',\n            'docx'      :   'fa-file-word-o',\n            'js'        :   'fa-file-code-o',\n            'md'        :   'fa-file-code-o',\n            'html'      :   'fa-file-code-o',\n            'css'       :   'fa-file-code-o',\n            'xlsx'      :   'fa-file-excel-o',\n            'png'       :   'fa-file-image-o',\n            'jpg'       :   'fa-file-image-o',\n            'jpeg'      :   'fa-file-image-o',\n            'file'      :   'fa-file-o',\n            'default'   :   'fa-file-o'\n        };\n\n        return 'fa ' + (fileClassMapping[fileExtension] || 'fa-file-o');\n    }\n}\n\n@Pipe({\n    name: 'stateClass'\n})\nexport class StateClassPipe implements PipeTransform {\n    transform(state) {\n        const stateClassMap = {\n            'success'   : 'wi wi-done text-success',\n            'error'     : 'wi wi-cancel text-danger'\n        };\n        return stateClassMap[state.toLowerCase()];\n    }\n}\n\n@Pipe({\n    name: 'fileExtensionFromMime'\n})\nexport class FileExtensionFromMimePipe implements PipeTransform {\n    transform(mimeType: any) {\n        const typeMapping = {\n            'audio/aac': '.aac',\n            'application/x-abiword': '.abw',\n            'application/vnd.android.package-archive': '.apk',\n            'video/x-msvideo': '.avi',\n            'application/vnd.amazon.ebook': '.azw',\n            'application/octet-stream': '.bin',\n            'image/bmp': '.bmp',\n            'application/x-bzip': '.bz',\n            'application/x-bzip2': '.bz2',\n            'application/x-csh': '.csh',\n            'text/css': '.css',\n            'text/csv': '.csv',\n            'application/msword': '.doc',\n            'application/vnd.openxmlformats-officedocument.wordprocessingml.document': '.docx',\n            'application/vnd.ms-fontobject': '.eot',\n            'application/epub+zip': '.epub',\n            'application/ecmascript': '.es',\n            'image/gif': '.gif',\n            'text/html': '.html',\n            'image/x-icon': '.ico',\n            'text/calendar': '.ics',\n            'application/java-archive': '.jar',\n            'image/jpeg': ['.jpeg', '.jpg'],\n            'application/javascript': '.js',\n            'application/json': '.json',\n            'audio/midi': '.mid',\n            'audio/x-midi': '.midi',\n            'video/mpeg': '.mpeg',\n            'application/vnd.apple.installer+xml': 'mpkg',\n            'application/vnd.oasis.opendocument.presentation': '.odp',\n            'application/vnd.oasis.opendocument.spreadsheet': '.ods',\n            'application/vnd.oasis.opendocument.text': '.odt',\n            'audio/ogg': '.oga',\n            'video/ogg': '.ogv',\n            'application/ogg': '.ogx',\n            'font/otf': '.otf',\n            'image/png': '.png',\n            'application/pdf': '.pdf',\n            'application/vnd.ms-powerpoint': '.ppt',\n            'application/vnd.openxmlformats-officedocument.presentationml.presentation': '.pptx',\n            'application/x-rar-compressed': '.rar',\n            'application/rtf': '.rtf',\n            'application/x-sh': '.sh',\n            'image/svg+xml': '.svg',\n            'application/x-shockwave-flash': '.swf',\n            'application/x-tar': '.tar',\n            'image/tiff': '.tiff',\n            'application/typescript': '.ts',\n            'font/ttf': '.ttf',\n            'text/plain': '.txt',\n            'application/vnd.visio': '.vsd',\n            'audio/wav': '.wav',\n            'audio/webm': '.weba',\n            'video/webm': '.webm',\n            'image/webp': '.webp',\n            'font/woff': '.woff',\n            'font/woff2': '.woff2',\n            'application/xhtml+xml': '.xhtml',\n            'application/vnd.ms-excel': '.xls',\n            'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': '.xlsx',\n            'application/xml': '.xml',\n            'application/vnd.mozilla.xul+xml': '.xul',\n            'application/zip': '.zip',\n            'video/3gpp': '.3gp',\n            'audio/3gpp': '.3gp',\n            'video/3gpp2': '.3g2',\n            'audio/3gpp2': '.3g2',\n            'application/x-7z-compressed': '.7z'\n        };\n\n        return typeMapping[mimeType];\n    }\n}\n","import { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const checkboxsetProps = new Map(\n    [\n        ['class', PROP_STRING],\n        ['collapsible', PROP_BOOLEAN],\n        ['compareby', PROP_STRING],\n        ['datafield', PROP_STRING],\n        ['dataset', {value: 'Option 1, Option 2, Option 3', ...PROP_ANY}],\n        ['datavaluesource', PROP_ANY],\n        ['datavalue', PROP_STRING],\n        ['dateformat', PROP_STRING],\n        ['disabled', PROP_BOOLEAN],\n        ['displayexpression', PROP_STRING],\n        ['displayfield', PROP_STRING],\n        ['displayValue', PROP_STRING],\n        ['groupby', PROP_STRING],\n        ['itemclass', {value: '', ...PROP_STRING}],\n        ['layout', {value: 'stacked', ...PROP_STRING}],\n        ['listclass', {value: '', ...PROP_STRING}],\n        ['match', PROP_STRING],\n        ['name', PROP_STRING],\n        ['orderby', PROP_STRING],\n        ['readonly', PROP_BOOLEAN],\n        ['required', PROP_BOOLEAN],\n        ['show', {value: true, ...PROP_BOOLEAN}],\n        ['showcount', PROP_BOOLEAN],\n        ['showindevice', {displayType: 'inline-block', value: 'all', ...PROP_STRING}],\n        ['tabindex', {value: 0, ...PROP_NUMBER}],\n        ['usekeys', PROP_BOOLEAN]\n    ]\n);\n\nexport const registerProps = () => {\n    register(\n        'wm-checkboxset',\n        checkboxsetProps\n    );\n};\n","import { Injector } from '@angular/core';\n\nimport { Subject } from 'rxjs';\n\nimport { $appDigest, debounce, isDefined, isEqualWithFields, toBoolean } from '@wm/core';\n\nimport { convertDataToObject, DataSetItem, extractDataAsArray, getOrderedDataset, getUniqObjsByDataField, transformData, transformDataWithKeys } from '../../../utils/form-utils';\nimport { BaseFormCustomComponent } from './base-form-custom.component';\nimport { ALLFIELDS } from '../../../utils/data-utils';\n\ndeclare const _;\n\nexport abstract class DatasetAwareFormComponent extends BaseFormCustomComponent {\n    public dataset: any;\n    public datafield: string;\n    public displayfield: string;\n    public displaylabel: string;\n    public displayimagesrc: string;\n    public displayexpression: string;\n    public usekeys: boolean;\n    public orderby: string;\n    public multiple: boolean;\n    public readonly: boolean;\n\n    public binddisplayexpression: string;\n    public binddisplayimagesrc: string;\n    public binddisplaylabel: string;\n\n    public displayValue: Array<string> | string;\n\n    public datasetItems: DataSetItem[] = [];\n    public acceptsArray = false; // set to true if proxyModel on widget accepts array type.\n    protected dataset$ = new Subject();\n    protected datavalue$ = new Subject();\n\n    protected _modelByKey: any;\n    public _modelByValue: any;\n    public _defaultQueryInvoked: boolean; // for search/chips if datavalue is obtained from the default n/w call then set to true and do not update the modelByKeys.\n\n    // this field contains the initial datavalue which needs to be processed once the dataset is available\n    public toBeProcessedDatavalue: any;\n    private readonly _debouncedInitDatasetItems: Function;\n    protected allowempty = true;\n    public compareby: any;\n\n    public get modelByKey() {\n        return this._modelByKey;\n    }\n\n    // triggers on ngModel change. This function extracts the datavalue value.\n    public set modelByKey(val: any) {\n        this.selectByKey(val);\n\n        // invoke on datavalue change.\n        this.invokeOnChange(this._modelByValue);\n    }\n\n    public get datavalue() {\n        return this._modelByValue;\n    }\n\n    // triggers on setting the datavalue. This function extracts the model value.\n    public set datavalue(val: any) {\n        if (this.multiple) {\n            val = extractDataAsArray(val);\n        }\n        this._modelByValue = val;\n\n        this.selectByValue(val);\n\n        // changes on the datavalue can be subscribed using listenToDatavalue\n        this.datavalue$.next(val);\n\n        // invoke on datavalue change.\n        this.invokeOnChange(val, undefined, true);\n    }\n\n    protected constructor(inj: Injector, WIDGET_CONFIG) {\n        super(inj, WIDGET_CONFIG);\n\n        this.binddisplayexpression = this.nativeElement.getAttribute('displayexpression.bind');\n        this.binddisplayimagesrc = this.nativeElement.getAttribute('displayimagesrc.bind');\n        this.binddisplaylabel = this.nativeElement.getAttribute('displaylabel.bind');\n\n        this._debouncedInitDatasetItems = debounce(() => {\n            this.initDatasetItems();\n            $appDigest();\n        }, 150);\n    }\n\n    /**\n     * This function sets the _datavalue value from the model and sets the selected flag when item is found.\n     * Here model is the value obtained from ngModel.\n     * @param keys represent the model.\n     */\n    protected selectByKey(keys) {\n        this.resetDatasetItems();\n\n        if (!this.datasetItems.length) {\n            return;\n        }\n\n        if (this.multiple && !_.isArray(keys)) {\n            keys = [keys];\n        }\n\n        // Set the _modelByKey to the modified keys.\n        this._modelByKey = keys;\n\n        if (this.multiple) {\n            this._modelByValue = [];\n            keys.forEach(key => {\n                const itemByKey = _.find(this.datasetItems, item => {\n                    // not triple equal, as the instance type can be different.\n                    // only value comparison should be done.\n                    return _.toString(item.key) === _.toString(key);\n                });\n                if (itemByKey) {\n                    itemByKey.selected = true;\n                    this._modelByValue = [...this._modelByValue, itemByKey.value];\n                }\n            });\n        } else {\n            this._modelByValue = '';\n            const itemByKey = _.find(this.datasetItems, item => {\n                // not triple equal, as the instance type can be different.\n                // only value comparison should be done.\n                return _.toString(item.key) === _.toString(keys);\n            });\n            if (itemByKey) {\n                itemByKey.selected = true;\n                this._modelByValue = itemByKey.value;\n            }\n        }\n        this.initDisplayValues();\n    }\n\n    /**\n     * This function sets the _model value from the datavalue (selectedvalues) and sets the selected flag when item is found.\n     * datavalue is the default value or a value representing the displayField (for suppose: object in case of ALLFIELDS).\n     * If acceptsArray is true, the model always accepts an array.\n     * For example, select always accepts model as array whether multiple select is true or false.\n     * @param values represent the datavalue.\n     */\n    protected selectByValue(values: Array<any> | any) {\n        this.resetDatasetItems();\n\n        // if datavalue is not defined or empty then set the model as undefined.\n        if (!isDefined(values) || values === '' || _.isNull(values) || (values instanceof Array && !values.length)) {\n            this._modelByKey = undefined;\n            // do not return when allowempty is set to true.\n            if (!this.allowempty || !isDefined(values)) {\n                return;\n            }\n        }\n\n        if (this.acceptsArray && !_.isArray(values)) {\n            values = this.allowempty ? [values] : extractDataAsArray(values);\n        }\n\n        // preserve the datavalue if datasetItems are empty.\n        if (!this.datasetItems.length && isDefined(values)) {\n            this.toBeProcessedDatavalue = values;\n            return;\n        }\n\n        const filterField = this.datafield === ALLFIELDS ? 'dataObject' : 'key';\n\n        if (_.isArray(values)) {\n            this._modelByKey = [];\n            values.forEach(val => {\n                const itemByValue = _.find(this.datasetItems, item => {\n                    if (filterField === 'dataObject') {\n                        if (this.compareby && this.compareby.length) {\n                            return isEqualWithFields(item[filterField], val, this.compareby);\n                        }\n                    }\n                    return (_.isObject(item.value) ? _.isEqual(item.value, val) : (_.toString(item.value)).toLowerCase() === (_.toString(val)).toLowerCase());\n                });\n                if (itemByValue) {\n                    itemByValue.selected = true;\n                    this._modelByKey.push(itemByValue.key);\n                }\n            });\n        } else {\n            this._modelByKey = undefined;\n            const itemByValue = _.find(this.datasetItems, item => {\n                if (filterField === 'dataObject') {\n                    if (this.compareby && this.compareby.length) {\n                        return isEqualWithFields(item[filterField], values, this.compareby);\n                    }\n                }\n                return (_.isObject(item.value)  ? _.isEqual(item.value, values) : (_.toString(item.value)).toLowerCase() === (_.toString(values)).toLowerCase());\n            });\n            if (itemByValue) {\n                itemByValue.selected = true;\n                this._modelByKey = itemByValue.key;\n            }\n        }\n        // delaying the datavalue update as the widgets in liveform are having datavalue as undefined and not the default provided value\n        // because datavalue is updated later when new dataset is available.\n        this._debounceDatavalueUpdation(values);\n    }\n\n    protected readonly _debounceDatavalueUpdation = _.debounce((values) => {\n        // if no item is found in datasetItems, wait untill the dataset updates by preserving the datavalue in toBeProcessedDatavalue.\n        if (!isDefined(this._modelByKey) || (_.isArray(this._modelByKey) && !this._modelByKey.length)) {\n            this.toBeProcessedDatavalue = values;\n            this._modelByValue = undefined;\n        } else if (isDefined(this.toBeProcessedDatavalue)) {\n            // obtain the first array value when multiple is set to false.\n            // set the modelByValue only when undefined.\n            if (!isDefined(this._modelByValue)) {\n                this._modelByValue = (!this.multiple && _.isArray(this.toBeProcessedDatavalue)) ? this.toBeProcessedDatavalue[0] : this.toBeProcessedDatavalue;\n            }\n            this.toBeProcessedDatavalue = undefined;\n        }\n\n        this.initDisplayValues();\n    }, 150);\n\n    // Updates the displayValue property.\n    protected initDisplayValues() {\n        const displayValues = [];\n        this.datasetItems.forEach(item => {\n            if (item.selected) {\n                displayValues.push(item.label);\n            }\n        });\n\n        this.displayValue = this.multiple ? displayValues : displayValues[0];\n    }\n\n    // This function parses the dataset and extracts the displayOptions from parsed dataset.\n    protected initDatasetItems() {\n        if (!this.dataset || _.isEmpty(this.dataset)) {\n            this.datasetItems = [];\n            return;\n        }\n\n        // convert any dataset to the object format.\n        const orderedDataset = getOrderedDataset(convertDataToObject(this.dataset), this.orderby);\n\n        if (this.usekeys) {\n            this.datasetItems = transformDataWithKeys(orderedDataset);\n        } else {\n            const displayOptions = transformData(this.viewParent, orderedDataset, this.datafield, {\n                displayField: this.displayfield || this.displaylabel,\n                displayExpr: this.displayexpression,\n                bindDisplayExpr: this.binddisplayexpression || this.binddisplaylabel,\n                bindDisplayImgSrc: this.binddisplayimagesrc,\n                displayImgSrc: this.displayimagesrc\n            });\n            // get the unique objects out of the extracted data. Notify change in datasetItems using [...datasetItems] notation\n            this.datasetItems = [...getUniqObjsByDataField(displayOptions, this.datafield, this.displayfield || this.displaylabel, toBoolean(this.allowempty))];\n        }\n\n        this.postDatasetItemsInit();\n    }\n\n    // Once the datasetItems are ready, set the proxyModel by using datavalue.\n    protected postDatasetItemsInit() {\n        if (this.datasetItems.length && !this._defaultQueryInvoked) {\n            // use the latest of toBeProcessedDatavalue, datavalue\n            const _datavalue = !isDefined(this.toBeProcessedDatavalue) ? this.datavalue : this.toBeProcessedDatavalue;\n            this.selectByValue(_datavalue);\n        }\n        // notify the dataset listeners\n        this.dataset$.next(this.datasetItems);\n    }\n\n    // Reset the selected flag on datasetItems to false.\n    protected resetDatasetItems() {\n        this.datasetItems.forEach(item => item.selected = false);\n    }\n\n    onPropertyChange(key: string, nv: any, ov?: any) {\n        super.onPropertyChange(key, nv, ov);\n        switch (key) {\n            case 'dataset':\n            case 'datafield':\n            case 'displayfield':\n            case 'displaylabel':\n            case 'displayexpression':\n            case 'orderby':\n            case 'usekeys':\n                this._debouncedInitDatasetItems();\n                break;\n        }\n    }\n}\n","import { Attribute, Component, Injector, OnInit } from '@angular/core';\n\nimport { AppDefaults, noop, switchClass } from '@wm/core';\n\nimport { styler } from '../../framework/styler';\nimport { IWidgetConfig } from '../../framework/types';\nimport { ToDatePipe } from '../../../pipes/custom-pipes';\nimport { provideAsNgValueAccessor, provideAsWidgetRef } from '../../../utils/widget-utils';\nimport { registerProps } from '../checkboxset/checkboxset.props';\nimport { DatasetAwareFormComponent } from '../base/dataset-aware-form.component';\nimport { convertDataToObject, groupData, handleHeaderClick, toggleAllHeaders } from '../../../utils/form-utils';\n\ndeclare const _, $;\n\nconst DEFAULT_CLS = 'app-checkboxset list-group';\nconst WIDGET_CONFIG: IWidgetConfig = {widgetType: 'wm-checkboxset', hostClass: DEFAULT_CLS};\n\n@Component({\n    selector: '[wmCheckboxset]',\n    exportAs: 'wmCheckboxset',\n    templateUrl: 'checkboxset.component.html',\n    providers: [\n        provideAsNgValueAccessor(CheckboxsetComponent),\n        provideAsWidgetRef(CheckboxsetComponent)\n    ]\n})\n\nexport class CheckboxsetComponent extends DatasetAwareFormComponent implements OnInit {\n    static initializeProps = registerProps();\n\n    public layout = '';\n    public collapsible: boolean;\n\n    protected match: string;\n    protected dateformat: string;\n    protected groupedData: any[];\n\n    public handleHeaderClick: ($event) => void;\n    private toggleAllHeaders: void;\n\n    public disabled: boolean;\n\n    constructor(\n        inj: Injector,\n        @Attribute('groupby') public groupby: string,\n        private appDefaults: AppDefaults,\n        public datePipe: ToDatePipe\n    ) {\n        super(inj, WIDGET_CONFIG);\n        styler(this.nativeElement, this);\n        this.multiple = true;\n        this.handleHeaderClick = noop;\n    }\n\n    onCheckboxLabelClick($event, key) {\n        if (!$($event.target).is('input')) {\n            return;\n        }\n\n        // construct the _model from the checked elements.\n        const inputElements = this.nativeElement.querySelectorAll('input:checked');\n        const keys = [];\n        _.forEach(inputElements, ($el) => {\n            keys.push($el.value);\n        });\n\n        this.modelByKey = keys;\n\n        this.invokeOnTouched();\n        // invoke on datavalue change.\n        this.invokeOnChange(this.datavalue, $event || {}, true);\n    }\n\n    // change and blur events are added from the template\n    protected handleEvent(node: HTMLElement, eventName: string, callback: Function, locals: any) {\n        if (eventName === 'click') {\n            this.eventManager.addEventListener(\n                node,\n                eventName,\n                e => {\n                    if (!$(e.target).is('input')) {\n                        return;\n                    }\n                    locals.$event = e;\n                    return callback();\n                }\n            );\n        } else if (!_.includes(['change'], eventName)) {\n            super.handleEvent(node, eventName, callback, locals);\n        }\n    }\n\n    private getGroupedData() {\n        return this.datasetItems.length ? groupData(this, convertDataToObject(this.datasetItems), this.groupby, this.match, this.orderby, this.dateformat, this.datePipe, 'dataObject', this.appDefaults) : [];\n    }\n\n    private datasetSubscription() {\n        const datasetSubscription = this.dataset$.subscribe(() => {\n            this.groupedData = this.getGroupedData();\n        });\n        this.registerDestroyListener(() => datasetSubscription.unsubscribe());\n    }\n\n    onPropertyChange(key, nv, ov?) {\n\n        if (key === 'tabindex') {\n            return;\n        }\n\n        if (key === 'layout') {\n            switchClass(this.nativeElement, nv, ov);\n        } else if (key === 'groupby' || key === 'match') {\n            this.datasetSubscription();\n            // If groupby is set, get the groupedData from the datasetItems.\n            this.groupedData = this.getGroupedData();\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n\n    ngOnInit() {\n        super.ngOnInit();\n        if (this.groupby) {\n            this.datasetSubscription();\n            // If groupby is set, get the groupedData from the datasetItems.\n            this.groupedData = this.getGroupedData();\n        }\n        // adding the handler for header click and toggle headers.\n        if (this.groupby && this.collapsible) {\n            this.handleHeaderClick = handleHeaderClick;\n            this.toggleAllHeaders = toggleAllHeaders.bind(undefined, this);\n        }\n    }\n}\n","import { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const chipsProps = new Map(\n    [\n        ['allowonlyselect', PROP_BOOLEAN],\n        ['autofocus', PROP_BOOLEAN],\n        ['chipclass', PROP_STRING],\n        ['class', PROP_STRING],\n        ['compareby', PROP_STRING],\n        ['datafield', PROP_STRING],\n        ['dataoptions', PROP_ANY],\n        ['dataset', {value: 'Option 1, Option 2, Option 3', ...PROP_ANY}],\n        ['datasource', PROP_ANY],\n        ['datavalue', PROP_ANY],\n        ['datavaluesource', PROP_ANY],\n        ['disabled', PROP_BOOLEAN],\n        ['displayexpression', PROP_STRING],\n        ['displayfield', PROP_STRING],\n        ['displayimagesrc', PROP_STRING],\n        ['enablereorder', PROP_BOOLEAN],\n        ['inputposition', {value: 'last', ...PROP_STRING}],\n        ['inputwidth', {value: 'default', ...PROP_STRING}],\n        ['limit', PROP_NUMBER],\n        ['loadingdatamsg', {value: 'Loading items...', ...PROP_STRING}],\n        ['matchmode', PROP_STRING],\n        ['maxsize', PROP_NUMBER],\n        ['minchars', {value: 1 , ...PROP_NUMBER}],\n        ['name', PROP_STRING],\n        ['navsearchbar', {value: false, ...PROP_BOOLEAN}],\n        ['orderby', PROP_STRING],\n        ['placeholder', {value: 'Type here..', ...PROP_STRING}],\n        ['query', PROP_STRING],\n        ['readonly', PROP_BOOLEAN],\n        ['searchkey', PROP_STRING],\n        ['shortcutkey', PROP_STRING],\n        ['show', {value: true, ...PROP_BOOLEAN}],\n        ['showsearchicon', PROP_BOOLEAN],\n        ['tabindex', {value: 0, ...PROP_NUMBER}],\n        ['type', {value: 'search', ...PROP_STRING}],\n        ['debouncetime', {value: 250, ...PROP_NUMBER}],\n    ]\n);\n\nexport const registerProps = () => {\n    register(\n        'wm-chips',\n        chipsProps\n    );\n};\n\n","import { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const searchProps = new Map(\n    [\n        ['casesensitive', {value: false, ...PROP_BOOLEAN}],\n        ['class', PROP_STRING],\n        ['datacompletemsg', {value: 'No more data to load', ...PROP_STRING}],\n        ['datafield', {value: 'All Fields', ...PROP_STRING}],\n        ['dataoptions', PROP_ANY],\n        ['dataset', PROP_ANY],\n        ['datasource', PROP_ANY],\n        ['datavalue', PROP_STRING],\n        ['datavaluesource', PROP_ANY],\n        ['disabled', PROP_BOOLEAN],\n        ['displayimagesrc', PROP_STRING],\n        ['displaylabel', PROP_STRING],\n        ['dropup', PROP_BOOLEAN],\n        ['hint', PROP_STRING],\n        ['imagewidth', {value: '16px', ...PROP_STRING}],\n        ['limit', PROP_NUMBER],\n        ['loadingdatamsg', {value: 'Loading items...', ...PROP_STRING}],\n        ['matchmode', PROP_STRING],\n        ['minchars', PROP_NUMBER],\n        ['name', PROP_STRING],\n        ['navsearchbar', {value: false, ...PROP_BOOLEAN}],\n        ['orderby', PROP_STRING],\n        ['placeholder', {value: 'Search', ...PROP_STRING}],\n        ['position', PROP_STRING],\n        ['query', PROP_STRING],\n        ['readonly', PROP_BOOLEAN],\n        ['required', PROP_BOOLEAN],\n        ['searchkey', PROP_STRING],\n        ['searchon', {value: 'typing', ...PROP_STRING}],\n        ['shortcutkey', PROP_STRING],\n        ['show', {value: true, ...PROP_BOOLEAN}],\n        ['showsearchicon', PROP_BOOLEAN],\n        ['tabindex', {value: 0, ...PROP_NUMBER}],\n        ['type', {value: 'search', ...PROP_STRING}],\n        ['debouncetime', {value: 250, ...PROP_NUMBER}],\n        ['width', PROP_STRING]\n    ]\n);\n\nexport const registerProps = () => {\n    register(\n        'wm-search',\n        searchProps\n    );\n};\n","import { IDataProvider, IDataProviderConfig } from './data-provider';\n\ndeclare const _;\n\nexport class LocalDataProvider implements IDataProvider {\n    // LocalData filtering is done based on the searchkey.\n    public filter(config: IDataProviderConfig): Promise<any> {\n        const entries = config.dataset;\n        const casesensitive = config.casesensitive;\n        let queryText = config.query,\n        filteredData;\n\n        return new Promise((resolve, reject) => {\n            /**\n             * If searchKey is defined, then check for match string against each item in the dataset with item's field name as the searchKey\n             * return the filtered data containing the matching string.\n             */\n            if (config.searchKey) {\n                const keys = _.split(config.searchKey, ',');\n\n                filteredData = _.filter(config.dataset, (item: any) => {\n                    return keys.some(key => {\n                        let a = _.get(item, key),\n                            b = queryText;\n                        if (!casesensitive) {\n                            a = _.toLower(_.toString(a));\n                            b = _.toLower(_.toString(b));\n                        }\n                        return _.includes(a, b);\n                    });\n                });\n            } else {\n                // local search on data with array of objects.\n                // Iterate over each item and return the filtered data containing the matching string.\n                if (_.isArray(entries) && _.isObject(entries[0])) {\n                    filteredData = _.filter(entries, entry => {\n                        return (_.includes(_.toLower(_.values(entry).join(' ')), _.toLower(queryText)));\n                    });\n                } else {\n                    filteredData = _.filter(entries, entry => {\n                        if (!casesensitive) {\n                            entry = _.toLower(entry);\n                            queryText = _.toLower(queryText);\n                        }\n                        return _.includes(entry, queryText);\n                    });\n                }\n            }\n            resolve({\n                data: filteredData,\n                hasMoreData: false,\n                isLastPage: true\n            });\n        });\n    }\n}\n","import { AppConstants, DataSource, findValueOf, getClonedObject } from '@wm/core';\n\nimport { convertDataToObject } from '../../../../utils/form-utils';\nimport { IDataProvider, IDataProviderConfig } from './data-provider';\nimport { interpolateBindExpressions } from '../../../../utils/data-utils';\n\ndeclare const _;\n\nexport class RemoteDataProvider implements IDataProvider {\n    public filter(config: IDataProviderConfig): Promise<any> {\n        return this.filterData(config).then(response => this.onFilterSuccess(config, response), () => this.onFilterFailure());\n    }\n\n    private filterData(config) {\n        if (config.dataoptions) {\n            const dataoptions = config.dataoptions;\n\n            const requestParams = config.datasource.execute(DataSource.Operation.GET_REQUEST_PARAMS, config);\n\n            // If options are specified, make specifics calls to fetch the results\n            // Fetch the related field data\n            if (dataoptions.relatedField) {\n                return new Promise((resolve, reject) => {\n                    interpolateBindExpressions(config.viewParent, dataoptions.filterExpr, (filterexpressions) => {\n                        requestParams.filterExpr = dataoptions.filterExpr = filterexpressions;\n                        dataoptions.filterExpr = filterexpressions;\n\n                        config.datasource.execute(\n                            DataSource.Operation.GET_RELATED_TABLE_DATA, _.assign({relatedField: dataoptions.relatedField}, requestParams)\n                        ).then(resolve, reject);\n                    });\n                });\n            }\n            // Fetch the distinct data\n            if (dataoptions.distinctField) {\n                return config.datasource.execute(\n                    DataSource.Operation.GET_DISTINCT_DATA_BY_FIELDS,\n                    {\n                        pagesize: config.limit || config.pagesize,\n                        page: config.page,\n                        fields: dataoptions.distinctField,\n                        entityName: dataoptions.tableName,\n                        filterFields: _.assign(dataoptions.filterFields, requestParams.filterFields),\n                        filterExpr: getClonedObject(dataoptions.filterExpr || {})\n\n                    }\n                );\n            }\n        }\n\n        // search records using the searchkey\n        return config.datasource.execute(\n            DataSource.Operation.SEARCH_RECORDS, config\n        );\n    }\n\n\n    // Check if the page retrieved currently is the last page. If last page, don't send any more request\n    protected isLast(page: number, dataSize: number, maxResults: number, currentResults?: number): boolean {\n        // if last page info is not returned by backend and current results is less than max results, this is the last page\n        if (dataSize === AppConstants.INT_MAX_VALUE) {\n            return currentResults !== 0 && currentResults < maxResults;\n        }\n        const pageCount = ((dataSize > maxResults) ? (Math.ceil(dataSize / maxResults)) : (dataSize < 0 ? 0 : 1));\n        return page === pageCount;\n    }\n\n    // this function transform the response data in case it is not an array\n    protected getTransformedData(variable: any, data: any): any {\n        const operationResult = variable.operation + 'Result'; // when output is only string it is available as oprationNameResult\n        const tempResponse = data[operationResult];\n\n        // in case data received is value as string then add that string value to object and convert object into array\n        if (tempResponse) {\n            const tempObj = {};\n            _.set(tempObj, operationResult, tempResponse);\n            data = [tempObj]; // convert data into an array having tempObj\n        } else {\n            // in case data received is already an object then convert it into an array\n            data = [data];\n        }\n\n        return data;\n    }\n\n    protected onFilterFailure() {\n        return [];\n    }\n\n    private isLastPageForDistinctApi(data, page, totalElements, _isLastPage) {\n        return page > 1 && !_isLastPage && _.isEmpty(data) && totalElements === AppConstants.INT_MAX_VALUE;\n    }\n\n\n    // this function processes the response depending on pageOptions, isPageable and prepares the formattedDataset.\n    protected onFilterSuccess(config: IDataProviderConfig, response): Promise<any> {\n        let data: any = response.data;\n        let formattedData: any;\n        let _isLastPage: boolean;\n        let page: number;\n        let isPaginatedData: boolean;\n\n        const expressionArray = _.split(config.binddataset, '.');\n        const dataExpression = _.slice(expressionArray, _.indexOf(expressionArray, 'dataSet') + 1).join('.');\n        const $I = '[$i]';\n\n        return new Promise((resolve, reject) => {\n            const pageOptions = response.pagination;\n\n            if (config.datasource.execute(DataSource.Operation.IS_PAGEABLE)) {\n                page = pageOptions.number + 1;\n                _isLastPage = this.isLast(page, (config.limit > 0 && config.limit) || pageOptions.totalElements, pageOptions.size, pageOptions.numberOfElements);\n                isPaginatedData = true;\n\n                if (this.isLastPageForDistinctApi(data, page, pageOptions.totalElements, _isLastPage)) {\n                    _isLastPage = true;\n                    resolve({\n                        data: [],\n                        isLastPage: _isLastPage,\n                        hasMoreData: page > 1,\n                        isPaginatedData,\n                        page\n                    });\n                    return;\n                }\n            }\n            // if data expression exists, extract the data from the expression path\n            if (dataExpression) {\n                const index = dataExpression.lastIndexOf($I);\n                const restExpr = dataExpression.substr(index + 5);\n\n                if (_.isArray(data)) {\n                    formattedData = data.map(datum => findValueOf(datum, restExpr));\n                } else if (_.isObject(data)) {\n                    formattedData = _.get(data, dataExpression);\n                }\n\n                data = formattedData || data;\n            }\n            if (!_.isArray(data)) {\n                data = this.getTransformedData(config.datasource, data);\n            }\n            // in case of no data received, resolve the promise with empty array\n            if (!data.length) {\n                resolve({data: [], isLastPage: _isLastPage, hasMoreData: page > 1, isPaginatedData, page});\n            } else {\n                resolve({data: data, isLastPage: _isLastPage, hasMoreData: page > 1, isPaginatedData, page});\n            }\n        });\n    }\n}\n","import { DataSource } from '@wm/core';\n\nimport { LocalDataProvider } from './local-data-provider';\nimport { RemoteDataProvider } from './remote-data-provider';\n\ndeclare const _;\n\nexport interface IDataProviderConfig {\n    dataoptions?: any;\n    viewParent?: any;\n    dataset: any;\n    datafield: string;\n    binddataset?: string;\n    datasource?: any;\n    hasData: boolean;\n    query: Array<string> | string;\n    isLocalFilter: boolean;\n    searchKey?: string;\n    matchMode?: string;\n    casesensitive?: boolean;\n    isformfield?: boolean;\n    orderby?: string;\n    limit?: number;\n    pagesize?: number;\n    page: number;\n    noMoredata?: boolean;\n    onBeforeservicecall?: Function;\n}\n\nexport interface IDataProvider {\n    hasMoreData?: boolean;\n    isLastPage?: boolean;\n    hasNoMoreData?: boolean;\n    isPaginatedData?: boolean;\n    page?: number;\n    updateDataset?: boolean;\n\n    filter(config: IDataProviderConfig): Promise<any>;\n}\n\nexport class DataProvider implements IDataProvider {\n\n    public hasMoreData: boolean;\n    public isLastPage: boolean;\n    public page: number;\n    public isPaginatedData: boolean;\n    public updateDataset: boolean;\n\n    static remoteDataProvider = new RemoteDataProvider();\n    static localDataProvider = new LocalDataProvider();\n\n    public filter(config: IDataProviderConfig): Promise<any> {\n\n        let promise: Promise<any>;\n\n        /**\n         * Make call to remoteDataProvider when searchkey is available and data is not from local / model variable.\n         * Otherwise use localDataProvider\n         * If datasource is a serviceVariable with no input params, then perform local search.\n         * when there is no dataset on the datasource when first time make a remote call to set the dataset for service variable.\n         */\n        const hasNoVariableDataset = config.datasource && config.datasource.execute(DataSource.Operation.IS_UPDATE_REQUIRED, config.hasData);\n        if (!config.isLocalFilter && (config.dataoptions || ((config.datasource && config.datasource.execute(DataSource.Operation.IS_API_AWARE))\n            && config.searchKey\n            && hasNoVariableDataset))) {\n            promise = DataProvider.remoteDataProvider.filter(config);\n        } else {\n            promise = DataProvider.localDataProvider.filter(config);\n        }\n\n        return promise.then(response => {\n            this.updateDataset = config.datasource && !config.datasource.execute(DataSource.Operation.SUPPORTS_CRUD) && hasNoVariableDataset;\n            this.hasMoreData = response.hasMoreData;\n            this.isLastPage = response.isLastPage;\n            this.page = response.page;\n            this.isPaginatedData = response.isPaginatedData;\n\n            return response;\n        });\n    }\n}\n","import { AfterViewInit, Attribute, Component, ElementRef, Injector, OnInit, QueryList, ViewChild, ViewChildren } from '@angular/core';\n\nimport { from, Observable, of } from 'rxjs';\nimport { debounceTime, mergeMap } from 'rxjs/operators';\n\nimport { TypeaheadContainerComponent, TypeaheadDirective, TypeaheadMatch } from 'ngx-bootstrap';\n\nimport { addClass, adjustContainerPosition, DataSource, isDefined, isMobile, toBoolean } from '@wm/core';\n\nimport { provideAsNgValueAccessor, provideAsWidgetRef } from '../../../utils/widget-utils';\nimport { convertDataToObject, DataSetItem, extractDataAsArray, getUniqObjsByDataField, transformData } from '../../../utils/form-utils';\nimport { DatasetAwareFormComponent } from '../base/dataset-aware-form.component';\nimport { styler } from '../../framework/styler';\nimport { registerProps } from './search.props';\nimport { ALLFIELDS } from '../../../utils/data-utils';\nimport { DataProvider, IDataProvider, IDataProviderConfig } from './data-provider/data-provider';\n\ndeclare const _;\n\nconst WIDGET_CONFIG = {widgetType: 'wm-search', hostClass: 'input-group'};\n\n@Component({\n    selector: '[wmSearch]',\n    templateUrl: './search.component.html',\n    providers: [\n        provideAsNgValueAccessor(SearchComponent),\n        provideAsWidgetRef(SearchComponent)\n    ]\n})\nexport class SearchComponent extends DatasetAwareFormComponent implements OnInit, AfterViewInit {\n    static initializeProps = registerProps();\n    public casesensitive: boolean;\n    public searchkey: string;\n    public queryModel: Array<DataSetItem> | string;\n    public query = '';\n    public limit: any;\n    public showsearchicon: boolean;\n    public minchars: number;\n    public type: string;\n    public navsearchbar: any;\n    public debouncetime: number;\n\n    private typeaheadDataSource: Observable<any>;\n    private pagesize: any;\n    private page = 1;\n    public _loadingItems: boolean;\n    private dataProvider: IDataProvider;\n    private result: Array<any>; // contains the search result i.e. matches\n    private formattedDataset: any;\n    private isformfield: boolean;\n    private $typeaheadEvent: Event;\n\n    public tabindex: number;\n    public startIndex: number;\n    public binddisplaylabel: string;\n    public typeaheadContainer: TypeaheadContainerComponent;\n\n    @ViewChild(TypeaheadDirective) typeahead: TypeaheadDirective;\n    @ViewChild('ulElement') ulElement: ElementRef;\n    @ViewChildren('liElements') liElements: QueryList<ElementRef>;\n\n    private allowonlyselect: boolean;\n    private class: string;\n\n    private lastSelectedIndex: number;\n    private dataoptions: any;\n    public dropdownEl: any;\n    private _lastQuery: string;\n    private _lastResult: any;\n    private _isOpen: boolean; // set to true when dropdown is open\n    private showClosebtn: boolean;\n    private _unsubscribeDv: boolean;\n    private _datasource: any;\n    private isScrolled: boolean;\n    private parentEl: any;\n    private position: string;\n    private elIndex: number;\n    private listenQuery: boolean;\n    private _domUpdated: boolean;\n    private searchon: string;\n    public matchmode: string;\n\n    // getter setter is added to pass the datasource to searchcomponent.\n    get datasource() {\n        return this._datasource;\n    }\n\n    set datasource(nv) {\n        this._datasource = nv;\n        const data = this.datavalue || this.toBeProcessedDatavalue;\n        this.updateByDatavalue(data);\n    }\n\n    constructor(\n        inj: Injector,\n        @Attribute('datavalue.bind') public binddatavalue,\n        @Attribute('dataset.bind') public binddataset\n    ) {\n        super(inj, WIDGET_CONFIG);\n        // this flag will not allow the empty datafield values.\n        this.allowempty = false;\n\n        addClass(this.nativeElement, 'app-search', true);\n\n        /**\n         * Listens for the change in the ngModel on every search and retrieves the data as observable.\n         * This observable data is passed to the typeahead.\n         * @type {Observable<any>}\n         */\n        this.typeaheadDataSource = Observable\n            .create((observer: any) => {\n            // Runs on every search\n            if (this.listenQuery) {\n                if (this.isMobileAutoComplete() && !this.$element.hasClass('full-screen')) {\n                    this.renderMobileAutoComplete();\n                    return;\n                }\n                this._defaultQueryInvoked = false;\n                this._loadingItems = true;\n                observer.next(this.query);\n            }\n            // on keydown, while scrolling the dropdown items, when last item is reached next call is triggered\n            // unless the call is resolved, we are able to scroll next to first item and soon\n            // This shows flickering from first item to next new items appended.\n            // By setting container to undefined, key events changes will be stopped while loading items\n            if (this.lastSelectedIndex) {\n                this.typeahead._container = undefined;\n            }\n        }).pipe(\n            mergeMap((token: string) => this.getDataSourceAsObservable(token))\n        );\n\n        this.dataProvider = new DataProvider();\n\n        /**\n         * When default datavalue is not found within the dataset, a filter call is made to get the record using fetchDefaultModel.\n         * after getting the response, set the queryModel and query.\n         */\n        const datavalueSubscription = this.datavalue$.subscribe((val: Array<string> | string) => {\n\n            const query = (_.isArray(val) ? val[0] : val) as string;\n\n            if (query === null || query === '') {\n                this._modelByValue = '';\n                // reset the query.\n                this.query = this.queryModel = '';\n                // on clear or reset filter, empty the lastResults to fetch new records.\n                this._lastResult = undefined;\n                return;\n            }\n\n            if (!this._unsubscribeDv) {\n                this._defaultQueryInvoked = false;\n                // if prev datavalue is not equal to current datavalue then clear the modelByKey and queryModel\n                if (!_.isObject(val) && (this as any).prevDatavalue !== val) {\n                    this._modelByKey = undefined;\n                    this.query = this.queryModel = '';\n                }\n                // if the datafield is ALLFILEDS do not fetch the records\n                // update the query model with the values we have\n                this.updateByDatavalue(val);\n            }\n        });\n        this.registerDestroyListener(() => datavalueSubscription.unsubscribe());\n\n        const datasetSubscription = this.dataset$.subscribe(() => {\n            // set the next item index.\n            this.startIndex = this.datasetItems.length;\n            this.updateByDataset(this.datavalue || this.toBeProcessedDatavalue);\n        });\n        this.registerDestroyListener(() => datasetSubscription.unsubscribe());\n    }\n\n    // on clear, trigger search with page size 1\n    private clearSearch($event, loadOnClear) {\n        this.query = '';\n        this.onInputChange($event);\n        this.dataProvider.isLastPage = false;\n        this.listenQuery = false;\n        if (loadOnClear) {\n            this.listenQuery = true;\n            this._unsubscribeDv = false;\n            this.loadMoreData();\n        }\n        this.invokeEventCallback('clearsearch');\n    }\n\n    // Close the full screen mode in mobile view of auto complete\n    private closeSearch() {\n        this._loadingItems = false;\n        this.page = 1;\n        // after closing the search, insert the element at its previous position (elIndex)\n        this.insertAtIndex(this.elIndex);\n        this.elIndex = undefined;\n        this.parentEl = undefined;\n        this.$element.removeClass('full-screen');\n        if (this._domUpdated) {\n            this._domUpdated = false;\n        }\n        this.listenQuery = false;\n        this._unsubscribeDv = true;\n        this.typeahead.hide();\n    }\n\n    private renderMobileAutoComplete() {\n        // Get the parent element of the search element which can be next or prev element, if both are empty then get the parent of element.\n        if (!isDefined(this.elIndex)) {\n            this.parentEl = this.$element.parent();\n            this.elIndex = this.parentEl.children().index(this.$element);\n        }\n        if (!this.$element.hasClass('full-screen')) {\n            // this flag is set to notify that the typeahead-container dom has changed its position\n            this._domUpdated = true;\n            this.$element.appendTo('div[data-role=\"pageContainer\"]');\n            // Add full screen class on focus of the input element.\n            this.$element.addClass('full-screen');\n\n            // Add position to set the height to auto\n            if (this.position === 'inline') {\n                this.$element.addClass(this.position);\n            }\n        }\n        // focus is lost when element is changed to full-screen, keydown to select next items will not work\n        // Hence explicitly focusing the input\n        if (this.$element.hasClass('full-screen')) {\n            this.$element.find('.app-search-input').focus();\n        }\n    }\n\n    private getDataSourceAsObservable(query: string): Observable<any> {\n        // show dropdown only when there is change in query. This should not apply when dataoptions with filterFields are updated.\n        // when lastResult is not available i.e. still the first call is pending and second query is invoked then do not return.\n        if (this._lastQuery === query && !_.get(this.dataoptions, 'filterFields') && isDefined(this._lastResult)) {\n            this._loadingItems = false;\n            return of(this._lastResult);\n        }\n        this._lastQuery = this.query;\n        return from(this.getDataSource(query));\n    }\n\n    protected handleEvent(node: HTMLElement, eventName: string, eventCallback: Function, locals: any) {\n        if (!_.includes(['blur', 'focus', 'select', 'submit', 'change'], eventName)) {\n            super.handleEvent(node, eventName, eventCallback, locals);\n        }\n    }\n\n    // highlight the characters in the dropdown matching the query.\n    private highlight(match: TypeaheadMatch, query: string) {\n        if (this.typeaheadContainer) {\n            // highlight of chars will work only when label are strings.\n            (match as any).value = match.item.label.toString();\n            return this.typeaheadContainer.highlight(match, query);\n        }\n    }\n\n    // inserts the element at the index position\n    private insertAtIndex(i) {\n        if (i === 0) {\n            this.parentEl.prepend(this.$element);\n        } else {\n            const $elAtIndex = this.parentEl.children().eq(i);\n            if ($elAtIndex.length) {\n                this.$element.insertBefore(this.parentEl.children().eq(i));\n            } else {\n                this.$element.insertAfter(this.parentEl.children().eq(i - 1));\n            }\n        }\n    }\n\n    // Check if the widget is of type autocomplete in mobile view/ app\n    private isMobileAutoComplete() {\n        return this.type === 'autocomplete' && isMobile();\n    }\n\n    private loadMoreData(incrementPage?: boolean) {\n        if (this.dataProvider.isLastPage) {\n            return;\n        }\n        // Increase the page number and trigger force query update\n        this.page = incrementPage ? this.page + 1 : this.page;\n\n        this.isScrolled = true;\n        this._loadingItems = true;\n\n        // when invoking new set of results, reset the lastQuery.\n        if (incrementPage) {\n            this._lastQuery = undefined;\n        }\n\n        // trigger the typeahead change manually to fetch the next set of results.\n        this.typeahead.onInput({\n            target: {\n                value: _.trim(this.query) || '0' // dummy data to notify the observables\n            }\n        });\n    }\n\n    // on focusout, subscribe to the datavalue changes again\n    private onFocusOut() {\n        this._unsubscribeDv = false;\n        this._loadingItems = false;\n        // reset the page value on focusout.\n        this.page = 1;\n        // if domUpdated is true then do not hide the dropdown in the fullscreen\n        if (!this._domUpdated && this._isOpen) {\n            this.listenQuery = false;\n\n            // hide the typeahead only after the item is selected from dropdown.\n            setTimeout(() => {\n                if ((this.typeahead as any)._typeahead.isShown) {\n                    this.typeahead.hide();\n                }\n            }, 200);\n        }\n        this._isOpen = false;\n        // on outside click, typeahead is hidden. To avoid this, when fullscreen is set, overridding isFocused flag on the typeahead container\n        if (this._domUpdated && this.typeahead && (this.typeahead as any)._container) {\n            (this.typeahead as any)._container.isFocused = true;\n        }\n    }\n\n    private onInputChange($event) {\n        // reset all the previous page details in order to fetch new set of result.\n        this.result = [];\n        this.page = 1;\n        this.listenQuery = this.isUpdateOnKeyPress();\n        this._modelByValue = undefined;\n\n        // when input is cleared, reset the datavalue\n        if (this.query === '') {\n            this.queryModel = '';\n            this._modelByValue = '';\n            this.invokeOnChange(this._modelByValue, {}, true);\n\n            // trigger onSubmit only when the search input is cleared off and do not trigger when tab is pressed.\n            if ($event && $event.which !== 9) {\n                this.invokeEventCallback('submit', {$event});\n            }\n        } else {\n            // invoking change event on every input value change.\n            this.invokeEventCallback('change', {\n                $event: $event,\n                newVal: this._modelByValue || this.query,\n                oldVal: (this as any).prevDatavalue\n            });\n        }\n        this.showClosebtn = (this.query !== '');\n    }\n\n    // Triggered for enter event\n    private handleEnterEvent($event) {\n        // submit event triggered when there is no search results\n        if (!this.typeahead._container) {\n            this.onSelect($event);\n        }\n    }\n    // Triggerred when typeahead option is selected.\n    private onSelect($event: Event) {\n        // searchOn is set as onBtnClick, then invoke the search api call manually.\n        if (!this.isUpdateOnKeyPress()) {\n            this.listenQuery = true;\n            // trigger the typeahead change manually to fetch the next set of results.\n            this.typeahead.onInput({\n                target: {\n                    value: this.query // dummy data to notify the observables\n                }\n            });\n            return;\n        }\n        // when matches are available.\n        if (this.typeaheadContainer && this.liElements.length) {\n            this.typeaheadContainer.selectActiveMatch();\n        } else {\n            this.queryModel = this.query;\n            this.invokeEventCallback('submit', {$event});\n        }\n    }\n\n    private onBeforeservicecall(inputData) {\n        this.invokeEventCallback('beforeservicecall', {inputData});\n    }\n\n    private onDropdownOpen() {\n        // setting the ulElements, liElement on typeaheadContainer.\n        // as we are using customOption template, liElements are not available on typeaheadContainer so append them explicitly.\n        const fn = _.debounce(() => {\n            this._isOpen = true;\n            this.typeaheadContainer = this.typeahead._container || (this.typeahead as any)._typeahead.instance;\n            (this.typeaheadContainer as any).liElements = this.liElements;\n            (this.typeaheadContainer as any).ulElement = this.ulElement;\n            adjustContainerPosition($('typeahead-container'), this.nativeElement, (this.typeahead as any)._typeahead, $('typeahead-container .dropdown-menu'));\n\n        });\n\n        fn();\n\n        // open full-screen search view\n        if (this.isMobileAutoComplete()) {\n            const dropdownEl = this.dropdownEl.closest('typeahead-container');\n\n            dropdownEl.insertAfter(this.$element.find('input:first'));\n            const screenHeight = this.$element.closest('.app-content').height();\n            dropdownEl.css({position: 'relative', top: 0, height: screenHeight + 'px'});\n            this.showClosebtn = this.query && this.query !== '';\n\n            if (!this.dataProvider.isLastPage) {\n                this.triggerSearch();\n            }\n        }\n    }\n\n    private selectNext() {\n        const matches = this.typeaheadContainer.matches;\n\n        if (!matches) {\n            return;\n        }\n        const index = matches.indexOf(this.typeaheadContainer.active);\n\n        // on keydown, if scroll is at the bottom and next page records are available, fetch next page items.\n        if (!this._loadingItems && !this.dataProvider.isLastPage && index + 1 > matches.length - 1) {\n            // index is saved in order to select the lastSelected item in the dropdown after fetching next page items.\n            this.lastSelectedIndex = index;\n            this.loadMoreData(true);\n        }\n    }\n\n    private setLastActiveMatchAsSelected() {\n        if (this.lastSelectedIndex) {\n            (this.typeaheadContainer as any)._active = this.typeaheadContainer.matches[this.lastSelectedIndex];\n            this.typeaheadContainer.nextActiveMatch();\n            this.lastSelectedIndex = undefined;\n        }\n    }\n\n    private triggerSearch() {\n        if (this.dataProvider.isLastPage || !this.$element.hasClass('full-screen')) {\n            return;\n        }\n        const typeAheadDropDown = this.dropdownEl;\n        const $lastItem = typeAheadDropDown.find('li').last();\n\n        // Check if last item is not below the full screen\n        if ($lastItem.length && typeAheadDropDown.length && (typeAheadDropDown.height() + typeAheadDropDown.position().top >  $lastItem.height() + $lastItem.position().top)) {\n            this.loadMoreData(true);\n        }\n    }\n\n    private isUpdateOnKeyPress() {\n        return this.searchon === 'typing';\n    }\n\n    private debounceDefaultQuery(data) {\n        this._defaultQueryInvoked = true;\n        this.getDataSource(data, true).then((response) => {\n            if (response.length) {\n                this.queryModel = response;\n                this._lastQuery = this.query = this.queryModel[0].label || '';\n                this._modelByValue = this.queryModel[0].value;\n                this._modelByKey = this.queryModel[0].key;\n            } else {\n                this._modelByValue = undefined;\n                this.queryModel = undefined;\n                this.query = '';\n            }\n        });\n    }\n\n    private updateByDatavalue(data) {\n        this.updateByDataset(data);\n        this.updateByDataSource(data);\n    }\n\n    private updateByDataSource(data) {\n        // value is present but the corresponding key is not found then fetch next set\n        // modelByKey will be set only when datavalue is available inside the localData otherwise make a N/w call.\n        if (isDefined(data) && !_.isObject(data) && this.datasource && !isDefined(this._modelByKey) && this.datafield !== ALLFIELDS) {\n            // Avoid making default query if queryModel already exists.\n            if (isDefined(this.queryModel) && !_.isEmpty(this.queryModel)) {\n                this.updateDatavalueFromQueryModel();\n                return;\n            }\n\n            // Make default query call only when datasource supports CRUD (live variable).\n            if (!this._defaultQueryInvoked && this.datasource.execute(DataSource.Operation.SUPPORTS_CRUD)) {\n                this.debounceDefaultQuery(data);\n            }\n        }\n    }\n\n    // updates the model value using queryModel\n    private updateDatavalueFromQueryModel() {\n        this._modelByValue = _.isArray(this.queryModel) ? (this.queryModel[0] as DataSetItem).value : this.queryModel;\n        this._modelByKey = _.isArray(this.queryModel) ? (this.queryModel[0] as DataSetItem).key : this.queryModel;\n        this.toBeProcessedDatavalue = undefined;\n    }\n\n    private updateByDataset(data: any) {\n        // default query is already invoked then do not make other default query call.\n        // For local search i.e. searchkey is undefined, do not return, verify the datavalue against the datasetItems .\n        if (this._defaultQueryInvoked && this.searchkey) {\n            return;\n        }\n        const selectedItem = _.find(this.datasetItems, (item) => {\n            return  (_.isObject(item.value) ? _.isEqual(item.value, data) : (_.toString(item.value)).toLowerCase() === (_.toString(data)).toLowerCase());\n        });\n\n        // set the default only when it is available in dataset.\n        if (selectedItem) {\n            this.queryModel = [selectedItem];\n        } else if (this.datafield === ALLFIELDS && _.isObject(data)) {\n            this.queryModel = this.getTransformedData(extractDataAsArray(data));\n        } else {\n            this.queryModel = undefined;\n            this.query = '';\n            return;\n        }\n        this.updateDatavalueFromQueryModel();\n\n        // Show the label value on input.\n        this._lastQuery = this.query = this.queryModel.length ? this.queryModel[0].label : '';\n    }\n\n\n    // This method returns a promise that provides the filtered data from the datasource.\n    public getDataSource(query: Array<string> | string, searchOnDataField?: boolean, nextItemIndex?: number): Promise<DataSetItem[]> {\n        // For default query, searchOnDataField is set to true, then do not make a n/w call when datafield is ALLFIELDS\n        if (searchOnDataField && this.datafield === ALLFIELDS) {\n            this._loadingItems = false;\n            return Promise.resolve([]);\n        }\n\n        // For default datavalue, search key as to be on datafield to get the default data from the filter call.\n        const dataConfig: IDataProviderConfig = {\n            dataset: this.dataset ? convertDataToObject(this.dataset) : undefined,\n            binddataset: this.binddataset,\n            datasource: this.datasource,\n            datafield: this.datafield,\n            hasData: this.dataset && this.dataset.length,\n            query: query,\n            isLocalFilter: !this.searchkey,\n            searchKey: searchOnDataField ? this.datafield : this.searchkey,\n            // default search call match mode should be startignorecase\n            matchMode: searchOnDataField ? 'startignorecase' : this.matchmode,\n            casesensitive: this.casesensitive,\n            isformfield: this.isformfield,\n            orderby: this.orderby,\n            limit: this.limit,\n            pagesize: this.pagesize,\n            page: this.page,\n            onBeforeservicecall: this.onBeforeservicecall.bind(this)\n        };\n\n        if (this.dataoptions) {\n            dataConfig.dataoptions = this.dataoptions;\n            dataConfig.viewParent = this.viewParent;\n        }\n\n        this._loadingItems = true;\n\n        return this.dataProvider.filter(dataConfig)\n            .then((response: any) => {\n                    // response from dataProvider returns always data object.\n                    response = response.data || response;\n\n                    // for service variable, updating the dataset only if it is not defined or empty\n                    if ((!isDefined(this.dataset) || !this.dataset.length) && this.dataProvider.updateDataset) {\n                        this.dataset = response;\n                    }\n\n                    if (this.dataProvider.hasMoreData) {\n                        this.formattedDataset = this.formattedDataset.concat(response);\n                    } else {\n                        this.formattedDataset = response;\n                    }\n\n                    // explicitly setting the optionslimit as the matches more than 20 will be ignored if optionslimit is not specified.\n                    if (this.formattedDataset.length > 20 && !isDefined(this.limit)) {\n                        this.typeahead.typeaheadOptionsLimit = this.formattedDataset.length;\n                    }\n\n                // In mobile, trigger the search by default until the results have height upto page height. Other results can be fetched by scrolling\n                if (this._isOpen && this.isMobileAutoComplete() && !this.dataProvider.isLastPage) {\n                    this.triggerSearch();\n                }\n\n                    const transformedData = this.getTransformedData(this.formattedDataset, nextItemIndex);\n\n                    // result contains the datafield values.\n                    this.result = _.map(transformedData, 'value');\n                    return transformedData;\n                }, (error) => {\n                    this._loadingItems = false;\n                    return [];\n                }\n            ).then(result => {\n                if (this.isScrolled) {\n                    (_.debounce(() => {\n                        this.setLastActiveMatchAsSelected();\n                    }, 30))();\n                    this.isScrolled = false;\n                }\n                // When no result is found, set the datavalue to undefined.\n                if (!result.length) {\n                    this._modelByValue = undefined;\n                    this.queryModel = (query as string);\n                }\n                // on focusout i.e. on other widget focus, if n/w is pending loading icon is shown, when data is available then dropdown is shown again.\n                // on unsubscribing do not show the results.\n                if (this._unsubscribeDv) {\n                    result = [];\n                }\n                this._loadingItems = false;\n                this._lastResult = result;\n                return result;\n            });\n    }\n\n    public getTransformedData(data: any, itemIndex?: number, iscustom?: boolean): DataSetItem[] {\n        if (isDefined(itemIndex)) {\n            itemIndex++;\n        }\n\n        const transformedData = transformData(\n            this.viewParent,\n            data,\n            this.datafield,\n            {\n                displayField: this.displaylabel || this.displayfield,\n                displayExpr: iscustom ? '' : this.displayexpression,\n                bindDisplayExpr: iscustom ? '' : this.binddisplaylabel,\n                bindDisplayImgSrc: this.binddisplayimagesrc,\n                displayImgSrc: this.displayimagesrc\n            },\n            itemIndex\n        );\n        return getUniqObjsByDataField(transformedData, this.datafield, this.displayfield || this.displaylabel, toBoolean(this.allowempty));\n    }\n\n    // OptionsListTemplate listens to the scroll event and triggers this function.\n    public onScroll($scrollEl: Element, evt: Event) {\n        const totalHeight = $scrollEl.scrollHeight,\n            clientHeight = $scrollEl.clientHeight;\n\n        // If scroll is at the bottom and no request is in progress and next page records are available, fetch next page items.\n        if (!this._loadingItems && !this.dataProvider.isLastPage && ($scrollEl.scrollTop + clientHeight >= totalHeight)) {\n            this.loadMoreData(true);\n        }\n    }\n\n    public ngOnInit() {\n        super.ngOnInit();\n\n        if (!isDefined(this.minchars)) {\n            // for autocomplete set the minchars to 0\n            if (this.type === 'autocomplete') {\n                this.minchars = 0;\n            } else {\n                this.minchars = 1;\n            }\n        }\n\n        this.listenQuery = this.isUpdateOnKeyPress();\n\n        // by default for autocomplete do not show the search icon\n        // by default show the searchicon for type = search\n        this.showsearchicon = isDefined(this.showsearchicon) ? this.showsearchicon : (this.type === 'search');\n    }\n\n    public ngAfterViewInit() {\n        super.ngAfterViewInit();\n\n        styler(this.nativeElement as HTMLElement, this);\n    }\n\n    // triggered on select on option from the list. Set the queryModel, query and modelByKey from the matched item.\n    public typeaheadOnSelect(match: TypeaheadMatch, $event: Event): void {\n        const item = match.item;\n        this.queryModel = item;\n        item.selected = true;\n        this.query = item.label;\n        $event = $event || this.$typeaheadEvent;\n\n        // As item.key can vary from key in the datasetItems\n        this._modelByKey = item.key;\n        this._modelByValue = item.value;\n\n        this.invokeOnTouched();\n        this.invokeOnChange(this.datavalue, $event || {});\n        if (this.$element.hasClass('full-screen')) {\n            this.closeSearch();\n        }\n        this.invokeEventCallback('select', {$event, selectedValue: this.datavalue});\n        this.invokeEventCallback('submit', {$event});\n\n        this.updatePrevDatavalue(this.datavalue);\n    }\n\n    onPropertyChange(key: string, nv: any, ov: any) {\n        if (key === 'tabindex') {\n            return;\n        }\n        // when dataoptions are provided and there is no displaylabel given then displaylabel is set as the relatedfield\n        if (key === 'displaylabel' && this.dataoptions && this.binddisplaylabel === null) {\n            this.query = _.get(this._modelByValue, nv) || this._modelByValue;\n        }\n        super.onPropertyChange(key, nv, ov);\n    }\n}\n","import { AfterViewInit, Attribute, Component, Injector, OnInit, ViewChild } from '@angular/core';\n\nimport { $appDigest, $unwatch, $watch, debounce, isAppleProduct, isDefined, toBoolean } from '@wm/core';\n\nimport { registerProps } from './chips.props';\nimport { styler } from '../../framework/styler';\nimport { SearchComponent } from '../search/search.component';\nimport { DatasetAwareFormComponent } from '../base/dataset-aware-form.component';\nimport { configureDnD, DataSetItem, getUniqObjsByDataField } from '../../../utils/form-utils';\nimport { ALLFIELDS } from '../../../utils/data-utils';\nimport { IWidgetConfig } from '../../framework/types';\nimport { getConditionalClasses, provideAsNgValueAccessor, provideAsWidgetRef} from '../../../utils/widget-utils';\n\ndeclare const _;\n\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-chips',\n    hostClass: 'app-chips nav nav-pills list-inline'\n};\n\n@Component({\n    selector: '[wmChips]',\n    templateUrl: './chips.component.html',\n    providers: [\n        provideAsNgValueAccessor(ChipsComponent),\n        provideAsWidgetRef(ChipsComponent)\n    ]\n})\nexport class ChipsComponent extends DatasetAwareFormComponent implements OnInit, AfterViewInit {\n    static initializeProps = registerProps();\n    public allowonlyselect: boolean;\n    public enablereorder: boolean;\n    public maxsize: number;\n    public inputwidth: any;\n    private debouncetime: number;\n\n    public chipsList: Array<any> = [];\n    private readonly maxSizeReached = 'Max size reached';\n    private saturate: boolean;\n    private nextItemIndex: number;\n    private getTransformedData: (data, itemIndex?) => DataSetItem[];\n    private inputposition: string;\n    private showsearchicon: boolean;\n\n    @ViewChild(SearchComponent) searchComponent: SearchComponent;\n    private _datasource: any;\n    private _unsubscribeDv = false;\n    private searchkey: string;\n    private _debounceUpdateQueryModel: any;\n    private limit: number;\n    private _classExpr: any;\n    private minchars: number;\n    private matchmode: string;\n\n    // getter setter is added to pass the datasource to searchcomponent.\n    get datasource () {\n        return this._datasource;\n    }\n\n    set datasource(nv) {\n        this._datasource = nv;\n        this.searchComponent.datasource = nv;\n        this._debounceUpdateQueryModel(this.datavalue || this.toBeProcessedDatavalue);\n    }\n\n    constructor(\n        inj: Injector,\n        @Attribute('displayfield.bind') private bindDisplayField,\n        @Attribute('displayexpression.bind') private bindDisplayExpr,\n        @Attribute('displayimagesrc.bind') private bindDisplayImgSrc,\n        @Attribute('datafield.bind') private bindDataField,\n        @Attribute('dataset.bind') private bindDataSet,\n        @Attribute('chipclass.bind') private bindChipclass\n    ) {\n        super(inj, WIDGET_CONFIG);\n        styler(this.nativeElement, this);\n\n        // set the showsearchicon as false by default.\n        if (!isDefined(this.showsearchicon)) {\n            this.showsearchicon = false;\n        }\n\n        this.multiple = true;\n        this.nextItemIndex = 0; // default chip index\n\n        this._debounceUpdateQueryModel = debounce((val) => {\n            this.updateQueryModel(val).then(() => {\n                if (this.bindChipclass) {\n                    _.forEach(this.chipsList, (item, index) => {\n                        this.registerChipItemClass(item, index);\n                    });\n                }\n            });\n        }, 150);\n\n        const datasetSubscription = this.dataset$.subscribe(() => {\n            this.searchComponent.dataset = this.dataset;\n            this.nextItemIndex = this.datasetItems.length;\n            this._debounceUpdateQueryModel(this.datavalue || this.toBeProcessedDatavalue);\n        });\n        this.registerDestroyListener(() => datasetSubscription.unsubscribe());\n\n        const datavalueSubscription = this.datavalue$.subscribe((val: Array<string> | string) => {\n            // update queryModel only when parentRef is available.\n            if (!this._unsubscribeDv) {\n                this.chipsList = [];\n                // if the datafield is ALLFILEDS do not fetch the records\n                // update the query model with the values we have\n                this._debounceUpdateQueryModel(val);\n            }\n        });\n        this.registerDestroyListener(() => datavalueSubscription.unsubscribe());\n    }\n\n    ngOnInit() {\n        super.ngOnInit();\n\n        this.searchComponent.multiple = true;\n        this.searchComponent.binddisplayimagesrc = this.bindDisplayImgSrc;\n        this.searchComponent.displayimagesrc = this.displayimagesrc;\n        this.searchComponent.binddisplaylabel = this.bindDisplayExpr;\n        this.searchComponent.displaylabel = this.displayfield;\n        this.searchComponent.datafield = this.bindDataField || this.datafield;\n        this.searchComponent.binddataset = this.bindDataSet;\n        this.searchComponent.dataset = this.dataset;\n        this.searchComponent.searchkey = this.searchkey;\n        this.searchComponent.limit = this.limit;\n        this.searchComponent.debouncetime = this.debouncetime;\n        this.searchComponent.matchmode = this.matchmode;\n\n        this.getTransformedData = (val, isCustom) => {\n            return this.searchComponent.getTransformedData([val], this.nextItemIndex++, isCustom);\n        };\n    }\n\n    ngAfterViewInit() {\n        super.ngAfterViewInit();\n        if (this.enablereorder) {\n            this.configureDnD();\n        }\n    }\n\n    /**\n     * This method returns the evaluated class expression.\n     * @param $index index of the chip\n     * @param item chip object containing the key, value, label\n     * @returns {any} evaluated class expression value\n     */\n    private registerChipItemClass(item, $index) {\n        if (this.bindChipclass) {\n            const watchName = `${this.widgetId}_chipItemClass_${$index}`;\n            $unwatch(watchName);\n            this.registerDestroyListener($watch(this.bindChipclass, this.viewParent, {item, $index}, (nv, ov) => {\n                this.applyItemClass(getConditionalClasses(nv, ov), $index);\n            }, watchName));\n        }\n    }\n\n    private applyItemClass(val, index) {\n        const chipItem = this.nativeElement.querySelectorAll('.chip-item').item(index);\n        $(chipItem).removeClass(val.toRemove).addClass(val.toAdd);\n    }\n\n    private removeDuplicates() {\n        this.chipsList = getUniqObjsByDataField(this.chipsList, this.datafield, this.displayfield || this.displaylabel);\n    }\n\n    // This method updates the queryModel.\n    // default call to get the default data can be done only when defaultQuery is true.\n    private updateQueryModel(data: any): Promise<void> {\n        const promises = [];\n        if (!data) {\n            this.chipsList = [];\n            return Promise.resolve();\n        }\n\n        // clone the data as the updations on data will change the datavalue.\n        let dataValue = _.clone(data);\n        const prevChipsList = this.chipsList;\n        this.chipsList = [];\n\n        // update the model when model has items more than maxsize\n        if (this.maxsize && dataValue.length > this.maxsize) {\n            this._modelByValue = dataValue = _.slice(dataValue, 0, this.maxsize);\n            data = dataValue;\n        }\n\n        const searchQuery: Array<string> = [];\n\n        /**\n         * For each value in datavalue,\n         * 1. check whether value is in datasetItems, if item is found, addd to the chipsList.\n         * 2. else make a default query to the filter and get the record.\n         * 3. In step 2, if datavalue is not ALLFIELDS, then make a query. Extract the chipsList from the query response.\n         * 4. If there is no response for the value and allowonlyselect is true, remove the value from the datavalue. So that datavalue just contains the valid values.\n         * 5. In step 2, if datavalue is ALLFIELDS and value is object, then just prepare the datasetItem from the value.\n         * 6. If value is not object and allowonlyselect is false, then create a customModel and replace this value with customModel and prepare datasetItem from this value\n         */\n        dataValue.forEach((val: any, i: number) => {\n            const itemFound = _.find(this.datasetItems, item => {\n                return _.isObject(item.value) ? _.isEqual(item.value, val) : _.toString(item.value) === _.toString(val);\n            });\n\n            if (itemFound) {\n                this.chipsList.push(itemFound);\n            } else if (this.datafield !== ALLFIELDS) {\n                searchQuery.push(val);\n            } else if (this.datafield === ALLFIELDS) {\n                let dataObj, isCustom = false;\n                if (!_.isObject(val)) {\n                    dataObj = this.createCustomDataModel(val);\n                    isCustom = true;\n                    if (dataObj) {\n                        data.splice(i, 1, dataObj);\n                    }\n                } else {\n                    // if custom chips is already generated, val will be object as {'dataField_val': 'entered_val'}\n                    // Hence check this val in previous chipList and assign the iscustom flag\n                    const prevChipObj = prevChipsList.find(obj => {\n                        return _.isEqual(obj.value, val);\n                    });\n                    if (prevChipObj) {\n                        isCustom = prevChipObj.iscustom;\n                    }\n                }\n                dataObj = dataObj || val;\n\n                const transformedData = this.getTransformedData(dataObj, isCustom);\n                const chipObj = transformedData[0];\n                if (isCustom) {\n                    (chipObj as any).iscustom = isCustom;\n                }\n                this.chipsList.push(chipObj);\n            }\n        });\n\n        // make default query with all the values and if response for the value is not in datavalue then add a custom chip object.\n        if (searchQuery.length) {\n            promises.push(this.getDefaultModel(searchQuery, this.nextItemIndex)\n                .then(response => {\n                    this.chipsList = this.chipsList.concat(response || []);\n                    dataValue.forEach((val: any, i: number) => {\n                        const isExists = _.find(this.chipsList, (obj) => {\n                            return obj.value.toString() === val.toString();\n                        });\n\n                        if (!isExists) {\n                            if (this.allowonlyselect) {\n                                const index = data.indexOf(val);\n                                if (index > -1) {\n                                    data.splice(index, 1);\n                                }\n                                return;\n                            }\n                            const transformedData = this.getTransformedData(val, true);\n                            const chipObj = transformedData[0];\n                            (chipObj as any).iscustom = true;\n                            this.chipsList.push(chipObj);\n                        }\n                    });\n                }));\n        }\n\n        // default chip data is adding focus on to the search input. Hence this flag helps not to focus.\n        this.resetSearchModel(true);\n\n        return Promise.all(promises).then(() => {\n            this._modelByValue = data;\n            this.removeDuplicates();\n            this.updateMaxSize();\n            $appDigest();\n        });\n    }\n\n    private resetSearchModel(defaultQuery?: boolean) {\n        this._unsubscribeDv = true;\n        // clear search will empty the query model and gets the data when minchars is 0 (i.e. autocomplete) on focus\n        // defaultQuery flag is set when widget is not active. This will only load the autocomplete dropup with minchars as 0 when widget is focused/active\n        (this.searchComponent as any).clearSearch(undefined, !this.minchars && !defaultQuery);\n        this._unsubscribeDv = false;\n    }\n\n    // Triggerred when typeahead option is selected by enter keypress.\n    public onSelect($event: Event) {\n        if (!this.searchComponent.liElements.length) {\n            this.addItem($event);\n        }\n    }\n\n    // Add the newItem to the list\n    private addItem($event: Event, widget?: SearchComponent) {\n        const searchComponent = widget;\n        let allowAdd;\n        let chipObj;\n\n        if (searchComponent && isDefined(searchComponent.datavalue) && searchComponent.queryModel !== '') {\n            if (!searchComponent.query || !_.trim(searchComponent.query)) {\n                return;\n            }\n            chipObj = searchComponent.queryModel;\n        } else {\n            if (this.allowonlyselect) {\n                return;\n            }\n            let dataObj;\n            if (this.datafield === ALLFIELDS) {\n                if (!_.isObject(this.searchComponent.query) && _.trim(this.searchComponent.query)) {\n                    dataObj = this.createCustomDataModel(this.searchComponent.query);\n                    // return if the custom chip is empty\n                    if (!dataObj) {\n                        this.resetSearchModel();\n                        return;\n                    }\n                }\n            }\n\n            const data = dataObj || _.trim(this.searchComponent.query);\n            if (data) {\n                const transformedData = this.getTransformedData(data, true);\n                chipObj = transformedData[0];\n                chipObj.iscustom = true;\n            }\n        }\n\n        if (!isDefined(chipObj) || chipObj === '') {\n            return;\n        }\n\n        allowAdd = this.invokeEventCallback('beforeadd', {$event, newItem: chipObj});\n\n        if (isDefined(allowAdd) && !toBoolean(allowAdd)) {\n            return;\n        }\n\n        if (this.isDuplicate(chipObj)) {\n            this.resetSearchModel();\n            return;\n        }\n        this.registerChipItemClass(chipObj, this.chipsList.length);\n        this.chipsList.push(chipObj);\n\n        if (!this.datavalue) {\n            this._modelByValue = [chipObj.value];\n        } else {\n            this._modelByValue = [...this._modelByValue, chipObj.value];\n        }\n\n        this._unsubscribeDv = true;\n        this.invokeOnTouched();\n        this.invokeOnChange(this._modelByValue, $event || {}, true);\n\n        this.invokeEventCallback('add', {$event, $item: chipObj});\n\n        this.updateMaxSize();\n\n        // reset input box when item is added.\n        this.resetSearchModel();\n\n        // stop the event to not to call the submit event on enter press.\n        if ($event && (($event as any).key === 'Enter' || ($event as any).keyCode === 13)) {\n            this.stopEvent($event);\n        }\n    }\n\n    // Prepare datavalue object from a string(junk) value when datafield is allFields.\n    private createCustomDataModel(val: string) {\n        const key = this.displayfield || (this.datafield !== ALLFIELDS ? this.datafield : undefined);\n\n        if (key) {\n            const customObj = {};\n            customObj[key] = val;\n            return customObj;\n        }\n    }\n\n    // Check if newItem already exists\n    private isDuplicate(item: DataSetItem) {\n        if (this.datafield === ALLFIELDS) {\n            return _.findIndex(this.chipsList, {value: item.value}) > -1;\n        }\n        return _.findIndex(this.chipsList, {key: item.key}) > -1;\n    }\n\n    // Check if max size is reached\n    private updateMaxSize() {\n        this.saturate = this.maxsize > 0 && this.chipsList.length === this.maxsize;\n    }\n\n    // Makes call to searchComponent to filter the dataSource based on the query.\n    protected getDefaultModel(query: Array<string> | string, index?: number) {\n        this.nextItemIndex++;\n        return this.searchComponent.getDataSource(query, true, index)\n            .then((response) => {\n                return _.filter(query, queryVal => {\n                    _.find(response, {value: queryVal});\n                });\n            });\n    }\n\n    private handleChipClick($event: Event, chip: DataSetItem) {\n        if (this.readonly) {\n            return;\n        }\n        ($event.currentTarget as any).focus();\n        this.invokeEventCallback('chipclick', {$event, $item: chip});\n    }\n\n    private handleChipFocus($event: Event, chip: DataSetItem) {\n        if (this.readonly) {\n            return;\n        }\n        (chip as any).active = true;\n        this.invokeEventCallback('chipselect', {$event, $item: chip});\n    }\n\n    // To avoid form submit on pressing enter key\n    private stopEvent($event: Event) {\n        $event.stopPropagation();\n        $event.preventDefault();\n    }\n\n    public onTextDelete($event: Event) {\n        if (isAppleProduct) {\n            this.onInputClear($event);\n        }\n    }\n\n    public onInputClear($event: Event) {\n        if (!this.chipsList || !this.chipsList.length || this.searchComponent.query) {\n            return;\n        }\n        this.$element.find('li.chip-item > a.app-chip:last').focus();\n        this.stopEvent($event);\n    }\n\n    private onBackspace($event: Event, $item: DataSetItem, $index: number) {\n        if (this.readonly) {\n            return;\n        }\n        this.removeItem($event, $item, $index, true);\n    }\n\n    private onDelete($event: Event, $item: DataSetItem, $index: number) {\n        if (this.readonly) {\n            return;\n        }\n        this.removeItem($event, $item, $index);\n    }\n\n    public onArrowLeft($item?: DataSetItem, $index?: number) {\n        if (this.readonly) {\n            return;\n        }\n\n        // On left arrow click when search input query is empty.\n        if (!this.searchComponent.query && !isDefined($index) && !isDefined($item)) {\n            this.$element.find('li.chip-item > a.app-chip:last').focus();\n            return;\n        }\n\n        if ($index > 0) {\n            this.$element.find('li.chip-item > a.app-chip').get($index - 1).focus();\n        } else {\n            this.focusSearchBox();\n        }\n    }\n\n    public onArrowRight($item?: DataSetItem, $index?: number) {\n        if (this.readonly) {\n            return;\n        }\n        // On right arrow click when search input query is empty.\n        if (!this.searchComponent.query && !isDefined($index) && !isDefined($item)) {\n            this.$element.find('li.chip-item > a.app-chip:first').focus();\n            return;\n        }\n\n        if ($index < (this.chipsList.length - 1)) {\n            this.$element.find('li.chip-item > a.app-chip').get($index + 1).focus();\n        } else {\n            this.focusSearchBox();\n        }\n    }\n\n    // focus search box.\n    private focusSearchBox() {\n        this.$element.find('.app-chip-input > input.app-textbox').focus();\n    }\n\n    // Remove the item from list\n    private removeItem($event: Event, item: DataSetItem, index: number, canFocus?: boolean) {\n        $event.stopPropagation();\n\n        const indexes = _.isArray(index) ? index : [index];\n        const focusIndex = _.max(indexes);\n\n        const items = _.reduce(indexes, (result, i) => {\n            result.push(this.chipsList[i]);\n            return result;\n        }, []);\n\n        // prevent deletion if the before-remove event callback returns false\n        const allowRemove = this.invokeEventCallback('beforeremove', {$event, $item: items.length === 1 ? items[0] : items});\n        if (isDefined(allowRemove) && !toBoolean(allowRemove)) {\n            return;\n        }\n\n        const prevDatavalue = _.clone(this.datavalue);\n\n        // focus next chip after deletion.\n        // if there are no chips in the list focus search box\n        setTimeout(() => {\n            const chipsLength = this.chipsList.length;\n            const $chipsList = this.$element.find('li.chip-item > a.app-chip');\n\n            if (!chipsLength || !canFocus) {\n                this.focusSearchBox();\n            } else if ((chipsLength - 1) < focusIndex) {\n                // if focus index is greater than chips length select last chip\n                $chipsList.get(chipsLength - 1).focus();\n            } else {\n                // manually set the succeeding chip as active if there is a chip next to the current chip.\n                this.chipsList[focusIndex].active = true;\n                $chipsList.get(focusIndex).focus();\n            }\n        });\n\n        const pulledItems = _.pullAt(this.chipsList, indexes);\n\n        pulledItems.forEach(datasetItem => {\n            this._modelByValue = _.filter(this._modelByValue, val => {\n                return !(_.isObject(val) ? _.isEqual(val, datasetItem.value) : _.toString(val) === _.toString(datasetItem.value));\n            });\n        });\n\n        this._unsubscribeDv = false;\n\n        this.invokeOnChange(this._modelByValue, $event, true);\n        this.invokeEventCallback('change', {$event, newVal: this.datavalue, oldVal: prevDatavalue});\n\n        this.updateMaxSize();\n\n        this.invokeEventCallback('remove', {$event, $item: items.length === 1 ? items[0] : items});\n    }\n\n    /**\n     * Swaps items in an array if provided with indexes.\n     * @param data :- array to be swapped\n     * @param newIndex :- new index for the element to be placed\n     * @param currentIndex :- the current index of the element.\n     */\n    private swapElementsInArray(data: Array<any>, newIndex: number, currentIndex: number) {\n        const draggedItem = _.pullAt(data, currentIndex)[0];\n        data.splice(newIndex, 0, draggedItem);\n    }\n\n    /**\n     * Cancels the reorder by reseting the elements to the original position.\n     */\n    private resetReorder() {\n        this.$element.removeData('oldIndex');\n    }\n\n    private onBeforeservicecall(inputData) {\n        this.invokeEventCallback('beforeservicecall', {inputData});\n    }\n\n    protected handleEvent(node: HTMLElement, eventName: string, eventCallback: Function, locals: any) {\n        if (eventName === 'remove' || eventName === 'beforeremove' || eventName === 'chipselect'\n            || eventName === 'chipclick' || eventName === 'add' || eventName === 'reorder' || eventName === 'change') {\n            return;\n        }\n\n        super.handleEvent(node, eventName, eventCallback, locals);\n    }\n\n    // Configures the reordable feature in chips widgets.\n    private configureDnD() {\n        const options = {\n            items: '> li:not(.app-chip-search)',\n            placeholder: 'chip-placeholder'\n        };\n\n        configureDnD(this.$element, options, this.onReorderStart.bind(this), this.update.bind(this));\n    }\n\n    // Triggered on drag start while reordering.\n    private onReorderStart(evt: Event, ui: Object) {\n        const helper = (ui as any).helper;\n        // increasing the width of the dragged item by 1\n        helper.width(helper.width() + 1);\n        this.$element.data('oldIndex', (ui as any).item.index() - (this.inputposition === 'first' ? 1 : 0));\n    }\n\n    // updates the chipsList and datavalue on reorder.\n    private update($event: Event, ui: Object) {\n        let changedItem,\n            newIndex,\n            oldIndex;\n\n        // Get the index of the item at position before drag and after the reorder.\n        newIndex = (ui as any).item.index() - (this.inputposition === 'first' ? 1 : 0);\n        oldIndex = this.$element.data('oldIndex');\n\n        newIndex = this.chipsList.length === newIndex ? newIndex - 1 : newIndex;\n        changedItem = {\n            oldIndex: oldIndex,\n            newIndex: newIndex,\n            item: this.chipsList[oldIndex]\n        };\n\n        if (newIndex === oldIndex) {\n            this.resetReorder();\n            return;\n        }\n        changedItem.item = this.chipsList[oldIndex];\n\n        const allowReorder = this.invokeEventCallback('beforereorder', {$event, $data: this.chipsList, $changedItem: changedItem});\n\n        if (isDefined(allowReorder) && toBoolean(allowReorder) === false) {\n            this.resetReorder();\n            return;\n        }\n\n        // modify the chipsList and datavalue after the reorder.\n        this.swapElementsInArray(this.chipsList, newIndex, oldIndex);\n        this.swapElementsInArray(this._modelByValue, newIndex, oldIndex);\n\n        changedItem.item = this.chipsList[newIndex];\n\n        this.chipsList = [...this.chipsList];\n\n        this.resetReorder();\n        this.invokeEventCallback('reorder', {$event, $data: this.chipsList, $changedItem: changedItem});\n    }\n\n    onPropertyChange(key: string, nv: any, ov: any) {\n        if (key === 'tabindex') {\n            return;\n        }\n        if (key === 'dataoptions') {\n            (this.searchComponent as any).dataoptions = nv;\n        }\n        if (key === 'datafield') {\n            this.searchComponent.datafield = this.datafield;\n        }\n        if (key === 'displayfield') {\n            this.searchComponent.displaylabel = this.displayfield;\n        }\n        if (key === 'displayexpression') {\n            this.searchComponent.binddisplaylabel = this.binddisplayexpression ? this.binddisplayexpression : this.displayexpression;\n        }\n        if (key === 'displayimagesrc') {\n            this.searchComponent.binddisplayimagesrc = this.binddisplayimagesrc ? this.binddisplayimagesrc : this.displayimagesrc;\n        }\n        if (key === 'limit') {\n            this.searchComponent.limit = this.limit;\n        }\n        if (key === 'enablereorder') {\n            if (this.$element.hasClass('ui-sortable')) {\n                this.$element.sortable('option', 'disabled', !nv );\n            } else if (nv) {\n                this.configureDnD();\n            }\n        }\n        if (key === 'readonly') {\n            if (nv) {\n                this.$element.addClass('readonly');\n            } else {\n                this.$element.removeClass('readonly');\n            }\n        }\n        if (key === 'inputposition') {\n            const $inputEl = this.$element.find('li.app-chip-search');\n            if (nv === 'first') {\n                this.$element.prepend($inputEl);\n            } else {\n                this.$element.append($inputEl);\n            }\n        }\n        if (key === 'autofocus' && nv) {\n            // setting the autofocus on the input once after dom is updated\n            setTimeout(() => {\n                const $chipsList = this.$element.find('.app-chip-input > input.app-textbox');\n                if ($chipsList && $chipsList.length) {\n                    this.focusSearchBox();\n                }\n            });\n        }\n        super.onPropertyChange(key, nv, ov);\n    }\n}\n","import { AfterViewInit, ContentChildren, Directive, Injector } from '@angular/core';\n\nimport { addForIdAttributes, switchClass } from '@wm/core';\n\nimport { APPLY_STYLES_TYPE, styler } from '../../framework/styler';\nimport { IWidgetConfig, WidgetRef } from '../../framework/types';\nimport { StylableComponent } from '../base/stylable.component';\nimport { registerProps } from './composite.props';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\n\ndeclare const $;\n\nconst DEFAULT_CLS = 'form-group app-composite-widget clearfix';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-form-group',\n    hostClass: DEFAULT_CLS\n};\n\nconst CAPTION_POSITION = {\n    left: 'caption-left',\n    right: 'caption-right',\n    top: 'caption-top'\n};\n\n@Directive({\n    selector: 'div[wmComposite]',\n    providers: [\n        provideAsWidgetRef(CompositeDirective)\n    ]\n})\nexport class CompositeDirective extends StylableComponent implements AfterViewInit {\n    static initializeProps = registerProps();\n\n    // this is the reference to the component refs inside the form-group\n    @ContentChildren(WidgetRef, {descendants: true}) componentRefs;\n\n    public required: boolean;\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n        styler(this.nativeElement, this, APPLY_STYLES_TYPE.CONTAINER);\n    }\n\n    /**\n     * this is onPropertyChange handler for the form-group component\n     * @param key\n     * @param nv\n     * @param ov\n     */\n    onPropertyChange(key, nv, ov) {\n        if (key === 'captionposition') {\n            switchClass(this.nativeElement, CAPTION_POSITION[nv], CAPTION_POSITION[ov]);\n        } else if (key === 'required') {\n            this.required = nv;\n            this.assignRequiredToSubComponents();\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n\n    /**\n     * this method assigns the required on the component/directive based on the required attribute of the form-group\n     */\n    protected assignRequiredToSubComponents() {\n        if (this.required && this.componentRefs) {\n            setTimeout(() => {\n                this.componentRefs.forEach(componentRef => componentRef.widget.required = true);\n            }, 50);\n        }\n    }\n\n    ngAfterViewInit() {\n        super.ngAfterViewInit();\n        addForIdAttributes(this.nativeElement);\n\n        this.assignRequiredToSubComponents();\n    }\n}\n","import { PROP_BOOLEAN, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-form-group',\n        new Map(\n            [\n                ['captionposition', PROP_STRING],\n                ['name', PROP_STRING],\n                ['required', PROP_BOOLEAN],\n                ['show', {value: true, ...PROP_BOOLEAN}]\n            ]\n        )\n    );\n};\n","import { Attribute, Component, Injector, OnInit, TemplateRef, ViewChild } from '@angular/core';\n\nimport { toBoolean } from '@wm/core';\nimport { registerProps } from './confirm-dialog.props';\nimport { BaseDialog } from '../base/base-dialog';\nimport { provideAsDialogRef, provideAsWidgetRef } from '../../../../utils/widget-utils';\n\nconst DIALOG_CLS = 'app-dialog modal-dialog app-confirm-dialog';\nconst WIDGET_INFO = {widgetType: 'wm-confirmdialog'};\n\n@Component({\n    selector: 'div[wmConfirmDialog]',\n    templateUrl: './confirm-dialog.component.html',\n    providers: [\n        provideAsWidgetRef(ConfirmDialogComponent),\n        provideAsDialogRef(ConfirmDialogComponent)\n    ]\n})\nexport class ConfirmDialogComponent extends BaseDialog implements OnInit {\n    static initializeProps = registerProps();\n    @ViewChild('dialogTemplate') dialogTemplate: TemplateRef<any>;\n\n    constructor(\n        inj: Injector,\n        @Attribute('class') dialogClass: string,\n        @Attribute('modal') modal: string | boolean,\n        @Attribute('closable') closable: string | boolean,\n    ) {\n        if (modal === null || modal === undefined) {\n            modal = false;\n        }\n\n        if (closable === null || closable === undefined) {\n            closable = true;\n        }\n\n        // setting the backdrop to 'static' will not close the dialog on backdrop click\n        const backdrop = 'static';\n\n        super(\n            inj,\n            WIDGET_INFO,\n            {\n                class: `${DIALOG_CLS} ${dialogClass || ''}`,\n                backdrop,\n                keyboard: !toBoolean(modal)\n            }\n        );\n    }\n\n    protected getTemplateRef(): TemplateRef<any> {\n        return this.dialogTemplate;\n    }\n\n    /**\n     * Click event handler for the ok button\n     * invokes on-ok event callback\n     * @param {Event} $event\n     */\n    onOk($event: Event) {\n        this.invokeEventCallback('ok', {$event});\n    }\n\n    /**\n     * Click event handler for the cancel button\n     * invokes on-cancel event callback\n     * @param {Event} $event\n     */\n    onCancel($event: Event) {\n        this.invokeEventCallback('cancel', {$event});\n    }\n\n    ngOnInit() {\n        super.ngOnInit();\n        this.register(this.viewParent);\n    }\n}\n","import { PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-confirmdialog',\n        new Map(\n            [\n                ['animation', PROP_STRING],\n                ['canceltext', {value: 'CANCEL', ...PROP_STRING}],\n                ['class', PROP_STRING],\n                ['closable', {value: true, PROP_BOOLEAN}],\n                ['iconclass', {value: 'wi wi-done', PROP_STRING}],\n                ['iconheight', PROP_STRING],\n                ['iconmargin', PROP_STRING],\n                ['iconurl', PROP_STRING],\n                ['iconwidth', PROP_STRING],\n                ['message', {value: 'I am confirm box!', ...PROP_STRING}],\n                ['modal', {value: false, ...PROP_BOOLEAN}],\n                ['name', PROP_STRING],\n                ['oktext', {value: 'OK', ...PROP_STRING}],\n                ['tabindex', {value: 0, ...PROP_NUMBER}],\n                ['title', {value: 'Confirm', ...PROP_STRING}]\n            ]\n        )\n    );\n};\n","import { Directive, Injector } from '@angular/core';\n\nimport { addClass } from '@wm/core';\n\nimport { APPLY_STYLES_TYPE, styler } from '../../framework/styler';\nimport { IWidgetConfig } from '../../framework/types';\nimport { registerProps } from './container.props';\nimport { StylableComponent } from '../base/stylable.component';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\n\nconst DEFAULT_CLS = 'app-container';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-container',\n    hostClass: DEFAULT_CLS\n};\n\n@Directive({\n    selector: '[wmContainer]',\n    providers: [\n        provideAsWidgetRef(ContainerDirective)\n    ]\n})\nexport class ContainerDirective extends StylableComponent {\n    static initializeProps = registerProps();\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n\n        addClass(this.nativeElement, DEFAULT_CLS);\n        styler(this.nativeElement, this, APPLY_STYLES_TYPE.CONTAINER);\n    }\n}\n","import { PROP_ANY, PROP_BOOLEAN, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-container',\n        new Map(\n            [\n                ['class', PROP_STRING],\n                ['conditionalclass', PROP_ANY],\n                ['conditionalstyle', PROP_ANY],\n                ['content', PROP_STRING],\n                ['name', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}]\n            ]\n        )\n    );\n};\n","import { Component, Injector } from '@angular/core';\n\nimport { styler } from '../../framework/styler';\nimport { IWidgetConfig } from '../../framework/types';\nimport { StylableComponent } from '../base/stylable.component';\nimport { registerProps } from './content.props';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\n\nconst DEFAULT_CLS = 'app-content clearfix';\nconst WIDGET_CONFIG: IWidgetConfig = {widgetType: 'wm-content', hostClass: DEFAULT_CLS};\n\n@Component({\n    selector: '[wmContent]',\n    templateUrl: './content.component.html',\n    providers: [\n        provideAsWidgetRef(ContentComponent)\n    ]\n})\nexport class ContentComponent extends StylableComponent {\n    static initializeProps = registerProps();\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n\n        styler(this.nativeElement, this);\n    }\n}\n","import { PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-content',\n        new Map(\n            [\n                ['name', PROP_STRING],\n                ['class', PROP_STRING]\n            ]\n        )\n    );\n};\n","import { PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const currencyProps = new Map(\n    [\n        ['class', PROP_STRING],\n        ['currency', {value: 'USD', ...PROP_STRING}],\n        ['datavalue', PROP_STRING],\n        ['disabled', PROP_BOOLEAN],\n        ['hint', PROP_STRING],\n        ['maxvalue', PROP_NUMBER],\n        ['minvalue', PROP_NUMBER],\n        ['name', PROP_STRING],\n        ['placeholder', {value: 'Enter value', ...PROP_STRING}],\n        ['readonly', PROP_BOOLEAN],\n        ['required', PROP_BOOLEAN],\n        ['shortcutkey', PROP_STRING],\n        ['show', {value: true, ...PROP_BOOLEAN}],\n        ['step', {value: 1, ...PROP_NUMBER}],\n        ['tabindex', {value: 0, ...PROP_NUMBER}]\n    ]\n);\n\nexport const registerProps = () => {\n    register(\n        'wm-currency',\n        currencyProps\n    );\n};\n","import { AfterViewInit, ElementRef, Injector } from '@angular/core';\nimport { NgModel } from '@angular/forms';\n\nimport { $appDigest, addClass, switchClass } from '@wm/core';\n\nimport { BaseFormCustomComponent } from '../../base/base-form-custom.component';\nimport { styler } from '../../../framework/styler';\nimport { IWidgetConfig } from '../../../framework/types';\n\nexport abstract class BaseInput extends BaseFormCustomComponent implements AfterViewInit {\n    public class: string;\n\n    // possible values for ngModelOptions are 'blur' and 'change'\n    // default is 'blur'\n    public ngModelOptions = {\n        updateOn: ''\n    };\n\n    /**\n     * Reference to the input element. All the styles and classes will be applied on this node.\n     * Input components must override this\n     */\n    protected abstract inputEl: ElementRef;\n\n    /**\n     * Reference to the ngModel directive instance.\n     * Used to check the validity of the input\n     */\n    protected abstract ngModel: NgModel;\n\n    protected onPropertyChange(key: string, nv: any, ov: any) {\n        // set the class on the input element\n        if (key === 'tabindex') {\n            return;\n        }\n\n        if (key === 'class') {\n            if (this.inputEl.nativeElement) {\n                switchClass(this.inputEl.nativeElement, nv, ov);\n            }\n        } else if (key === 'datavalue') {\n            // update the oldDataValue when the datavalue is modified programmatically\n            this.updatePrevDatavalue(nv);\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n\n    // invoke the change callback\n    handleChange(newValue: any) {\n        this.invokeOnChange(this.datavalue, {type: 'change'}, this.ngModel.valid);\n    }\n\n    // Change event is registered from the template, Prevent the framework from registering one more event\n    protected handleEvent(node: HTMLElement, eventName: string, eventCallback: Function, locals: any) {\n        if (eventName !== 'change' && eventName !== 'blur') {\n            super.handleEvent(this.inputEl.nativeElement, eventName, eventCallback, locals);\n        }\n    }\n\n    // invoke the blur callback\n    handleBlur($event) {\n        this.invokeOnTouched($event);\n    }\n\n    // Update the model on enter key press\n    flushViewChanges(val) {\n        this.ngModel.update.next(val);\n        $appDigest();\n    }\n\n    ngAfterViewInit() {\n        super.ngAfterViewInit();\n\n        // add the class on the input element\n        if (this.class) {\n            addClass(this.inputEl.nativeElement, this.class);\n        }\n        styler(this.inputEl.nativeElement, this);\n    }\n\n    constructor(\n        inj: Injector,\n        config: IWidgetConfig\n    ) {\n        super(inj, config);\n        let updateOn = this.nativeElement.getAttribute('updateon') || 'blur';\n        updateOn = updateOn === 'default' ? 'change' : updateOn;\n        this.ngModelOptions.updateOn = updateOn;\n    }\n}\n","import { Injector } from '@angular/core';\nimport { AbstractControl, Validator } from '@angular/forms';\nimport { DecimalPipe, getLocaleNumberSymbol, NumberSymbol } from '@angular/common';\n\nimport { AbstractI18nService } from '@wm/core';\n\nimport { BaseInput } from '../base/base-input';\nimport { IWidgetConfig } from '../../../framework/types';\n\ndeclare const _;\n\nexport abstract class NumberLocale extends BaseInput implements Validator {\n    private DECIMAL: string;\n    private GROUP: string;\n    private selectedLocale: string;\n    private proxyModel: number;\n    private numberNotInRange: boolean;\n    private isInvalidNumber: boolean;\n    private isDefaultQuery: boolean = true;\n    public displayValue: string;\n    private numberfilter: string;\n    private localefilter: string;\n    public readonly: boolean;\n\n    public placeholder: string;\n    public minvalue: number;\n    public maxvalue: number;\n    public updateon: string;\n    public step: number;\n\n    constructor(\n        inj: Injector,\n        config: IWidgetConfig,\n        i18nService: AbstractI18nService,\n        private decimalPipe: DecimalPipe\n    ) {\n        super(inj, config);\n        this.selectedLocale = i18nService.getSelectedLocale();\n        this.DECIMAL = getLocaleNumberSymbol(this.localefilter || this.selectedLocale, NumberSymbol.Decimal);\n        this.GROUP = getLocaleNumberSymbol(this.localefilter || this.selectedLocale, NumberSymbol.Group);\n        this.numberfilter = '1.0-16';\n        this.resetValidations();\n    }\n\n    // Setter for the datavalue.\n    set datavalue (value: number) {\n        // set text value to null if data value is empty.\n        if (_.includes([null, undefined, ''], value)) {\n            const input = this.inputEl.nativeElement;\n            this.displayValue = input.value = this.proxyModel = null;\n            this.resetValidations();\n            this._onChange();\n            return;\n        }\n        // if the widget has default value and if we change the locale, the value should be in selected locale format.\n        if (this.isDefaultQuery) {\n            (value as any)  = this.transformNumber(value);\n        }\n\n        // get a valid number form the text.\n        const model = this.parseNumber(value.toString());\n        // if the number is valid or if number is not in range update the model value.\n        if (this.isValid(model)) {\n            this.proxyModel = model;\n            // update the display value in the text box.\n            this.updateDisplayText();\n            this.handleChange(model);\n        } else {\n            this.displayValue = value.toString();\n            this.proxyModel = null;\n            this.handleChange(null);\n        }\n    }\n\n    // returns the actual model value of the widget.\n    get datavalue(): number {\n        return this.proxyModel;\n    }\n\n    // resets all the flags related to the widget's validation.\n    protected resetValidations() {\n        this.isInvalidNumber = false;\n        this.numberNotInRange = false;\n    }\n\n    /**\n     * Adds validations for the number before updating the widget model. like validating min and max value for the widget.\n     * @param {number} val number to be validated\n     * @returns {number}\n     */\n    private isValid(val: number): boolean {\n        // id number is infinite then consider it as invalid value\n        if (_.isNaN(val) || !_.isFinite(val)) {\n            this.isInvalidNumber = true;\n            return false;\n        }\n        if (val !== this.getValueInRange(val)) {\n            this.numberNotInRange = true;\n            return true;\n        }\n        this.resetValidations();\n        return true;\n    }\n\n    /**\n     * returns a valid number by validating the minimum and maximum values.\n     * @param {number} value\n     * @returns {number}\n     */\n    private getValueInRange(value: number): number {\n        if (!_.isNaN(this.minvalue) && value < this.minvalue) {\n            return this.minvalue;\n\n        }\n        if (!_.isNaN(this.maxvalue) && value > this.maxvalue) {\n            return this.maxvalue;\n        }\n        return value;\n    }\n\n    /**\n     * convert number to localized number using angular decimal pipe. eg 10,00,000 or 1,000,000\n     * @param number\n     * @returns {string}\n     */\n    private transformNumber(number): string {\n        return this.decimalPipe.transform(number, this.numberfilter, this.localefilter || this.selectedLocale);\n    }\n\n    /**\n     * resets the cursor position in the text box.\n     * @param {number} value cursor position index form left to right.\n     */\n    private resetCursorPosition(value: number) {\n        const input = this.inputEl.nativeElement;\n        // position of the cursor should be given form right to left.\n        let position = input.value.length - value;\n        position = position < 0 ? 0 : position;\n        // set the cursor position in the text box.\n        input.setSelectionRange(position, position);\n    }\n\n    /**\n     * Method parses the Localized number(string) to a valid number.\n     * if the string dose not result to a valid number then returns NaN.\n     * @param {string} val Localized number.\n     * @returns {number}\n     */\n    private parseNumber(val: string): number {\n        // splits string into two parts. decimal and number.\n        const parts = val.split(this.DECIMAL);\n        if (!parts.length) {\n            return null;\n        }\n        if (parts.length > 2) {\n            return NaN;\n        }\n        // If number have decimal point and not have a decimal value then return.\n        if (parts[1] === '') {\n            return NaN;\n        }\n        // replaces all group separators form the number.\n        const number = Number(parts[0].split(this.GROUP).join(''));\n        const decimal = Number(`0.${parts[1] || 0}`);\n        if ( Number.isNaN(number) || Number.isNaN(decimal)) {\n            return NaN;\n        }\n        // if the number is negative then calculate the number as number - decimal\n        // Ex: number = -123 and decimal = 0.45 then number - decimal = -123-045 = -123.45\n        return number >= 0 ? number + decimal : number - decimal;\n    }\n\n    // updates the widgets text value.\n    private updateDisplayText() {\n        const input = this.inputEl.nativeElement;\n        const position: number = input.selectionStart;\n        const preValue: string = input.value;\n        this.displayValue = input.value  = this.transformNumber(this.proxyModel);\n        // in safari browser, setSelectionRange will focus the input by default, which may invoke the focus event on widget.\n        // Hence preventing the setSelectionRange when default value is set i.e. widget is not focused.\n        if (this.updateon === 'default' && !this.isDefaultQuery) {\n            this.resetCursorPosition(preValue.length - position);\n        }\n    }\n\n    /**\n     * returns the number of decimal places a number have.\n     * @param value: number\n     * @returns {number}\n     */\n    private countDecimals (value) {\n        if ((value % 1) !== 0) {\n            return value.toString().split('.')[1].length;\n        }\n        return 0;\n    }\n\n    /**\n     * handles the arrow press event. Increases or decreases the number. triggered fom the template\n     * @param $event keyboard event.\n     * @param key identifier to increase or decrease the number.\n     */\n    public onArrowPress($event, key) {\n        $event.preventDefault();\n        if (this.readonly || this.step === 0) {\n            return;\n        }\n        let proxyModel = this.proxyModel;\n        let value;\n\n        // if the number is not in range and when arrow buttons are pressed need to get appropriate number value.\n        if (this.numberNotInRange) {\n            const inputValue = this.parseNumber(this.inputEl.nativeElement.value);\n            // take the textbox value as current model if the value is valid.\n            if (!_.isNaN(inputValue)) {\n               value = this.getValueInRange(inputValue);\n               proxyModel = inputValue;\n               this.resetValidations();\n            }\n        } else {\n            if (_.isUndefined(proxyModel) || _.isNull(proxyModel)) {\n                proxyModel = value = this.getValueInRange( (this.minvalue || 0));\n                this.resetValidations();\n            } else {\n                value = this.getValueInRange( proxyModel + (key === 'UP' ? this.step : -this.step));\n            }\n        }\n        if ((key === 'UP' && proxyModel <= value) || (key === 'DOWN' && proxyModel >= value)) {\n            const decimalRoundValue = Math.max(this.countDecimals(proxyModel), this.countDecimals(this.step));\n\n            // update the modelProxy.\n            this.proxyModel = _.round(value, decimalRoundValue);\n            this.updateDisplayText();\n            this.handleChange(this.proxyModel);\n        }\n    }\n\n    /**\n     * method is called from the from widget. to check whether the value entered is valid or not.\n     * @returns {object}\n     */\n    public validate(c: AbstractControl) {\n        if (this.isInvalidNumber) {\n            return {\n                invalidNumber: {\n                    valid: false\n                },\n            };\n        }\n        if (this.numberNotInRange) {\n            return {\n                numberNotInRange: {\n                    valid: false\n                },\n            };\n        }\n        return null;\n    }\n\n    public validateInputEntry($event) {\n\n        this.isDefaultQuery = false;\n\n        // allow actions if control key is pressed or if backspace is pressed. (for Mozilla).\n        if ($event.ctrlKey || _.includes(['Backspace', 'ArrowRight', 'ArrowLeft', 'Tab', 'Enter'], $event.key)) {\n            return;\n        }\n\n        const validity = new RegExp(`^[\\\\d\\\\s-,.e+${this.GROUP}${this.DECIMAL}]$`, 'i');\n        const inputValue = $event.target.value;\n        // validates if user entered an invalid character.\n        if (!validity.test($event.key)) {\n            return false;\n        }\n        // a decimal value can be entered only once in the input.\n        if (_.includes(inputValue, this.DECIMAL) && $event.key === this.DECIMAL) {\n            return false;\n        }\n        // 'e' can be entered only once in the input.\n        if (_.intersection(_.toArray(inputValue), ['e', 'E']).length && _.includes('eE', $event.key)) {\n            return false;\n        }\n        if ((_.includes(inputValue, '+') || _.includes(inputValue, '-') ) &&  ($event.key === '+' || $event.key === '-')) {\n            return false;\n        }\n    }\n\n    onEnter($event) {\n        this.datavalue = $event.target.value;\n    }\n}\n","import { Component, ElementRef, Injector, ViewChild } from '@angular/core';\nimport { NgModel } from '@angular/forms';\nimport {  DecimalPipe } from '@angular/common';\n\nimport { CURRENCY_INFO, AbstractI18nService } from '@wm/core';\n\nimport { IWidgetConfig } from '../../framework/types';\nimport { provideAsNgValidators, provideAsNgValueAccessor, provideAsWidgetRef } from '../../../utils/widget-utils';\nimport { registerProps } from './currency.props';\nimport { NumberLocale } from '../text/locale/number-locale';\n\nconst DEFAULT_CLS = 'input-group app-currency';\n\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-currency',\n    hostClass: DEFAULT_CLS\n};\n\n@Component({\n    selector: '[wmCurrency]',\n    templateUrl: './currency.component.html',\n    providers: [\n        provideAsNgValueAccessor(CurrencyComponent),\n        provideAsNgValidators(CurrencyComponent),\n        provideAsWidgetRef(CurrencyComponent)\n    ]\n})\nexport class CurrencyComponent extends NumberLocale {\n    static initializeProps = registerProps();\n\n    currency: string;\n    currencySymbol: string;\n    public required: boolean;\n    public regexp: any;\n    public disabled: boolean;\n    public autofocus: boolean;\n    public name: string;\n    public tabindex: any;\n    public shortcutkey: string;\n\n    @ViewChild(NgModel) ngModel: NgModel;\n    @ViewChild('input', {read: ElementRef}) inputEl: ElementRef;\n\n    constructor(inj: Injector, i18nService: AbstractI18nService, decimalPipe: DecimalPipe) {\n        super(inj, WIDGET_CONFIG, i18nService, decimalPipe);\n    }\n\n    onPropertyChange(key: string, nv: any, ov?: any) {\n        if (key === 'currency') {\n            this.currencySymbol = CURRENCY_INFO[this.currency || 'USD'].symbol;\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n}\n","import { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\nimport { isMobileApp } from '@wm/core';\n\nexport const dateProps = new Map(\n    [\n        ['autofocus', PROP_BOOLEAN],\n        ['class', PROP_STRING],\n        ['datavaluesource', PROP_ANY],\n        ['datavalue', PROP_STRING],\n        ['datepattern', PROP_STRING],\n        ['disabled', PROP_BOOLEAN],\n        ['excludedays', PROP_STRING],\n        ['excludedates', PROP_STRING],\n        ['hint', PROP_STRING],\n        ['maxdate', PROP_STRING],\n        ['mindate', PROP_STRING],\n        ['name', PROP_STRING],\n        ['outputformat', {value: 'yyyy-MM-dd', ...PROP_STRING}],\n        ['placeholder', {value: 'Select Date', ...PROP_STRING}],\n        ['readonly', PROP_BOOLEAN],\n        ['required', PROP_BOOLEAN],\n        ['shortcutkey', PROP_STRING],\n        ['show', {value: true, ...PROP_BOOLEAN}],\n        ['showdropdownon', {value: 'default', ...PROP_STRING}],\n        ['showbuttonbar', {value: true, ...PROP_BOOLEAN}], // TODO not addressed\n        ['showindevice', {displayType: 'inline-block', value: 'all', ...PROP_STRING}],\n        ['showweeks', {value: false, ...PROP_BOOLEAN}],\n        ['tabindex', {value: 0, ...PROP_NUMBER}]\n    ]\n);\n\nexport const registerProps = () => {\n    if (isMobileApp()) {\n        dateProps.set('datepattern', {value: 'yyyy-MM-dd', ...PROP_STRING});\n    }\n    register(\n        'wm-date',\n        dateProps\n    );\n};\n","import { AfterViewInit, Injector, OnDestroy, ViewChild } from '@angular/core';\nimport { Validator } from '@angular/forms';\nimport { Subscription } from 'rxjs';\nimport { BsDropdownDirective } from 'ngx-bootstrap';\n\nimport { getDateObj, getFormattedDate, getNativeDateObject, isString, setAttr } from '@wm/core';\n\nimport { BaseFormCustomComponent } from './base-form-custom.component';\nimport { BsDatepickerConfig, BsDatepickerDirective } from 'ngx-bootstrap';\nimport { ToDatePipe } from '../../../pipes/custom-pipes';\n\ndeclare const moment, _, $;\n\nconst CURRENT_DATE = 'CURRENT_DATE';\nconst months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\nconst DATEPICKER_DROPDOWN_OPTIONS = {\n    BUTTON: 'button',\n    DEFAULT: 'default'\n};\n\nexport abstract class BaseDateTimeComponent extends BaseFormCustomComponent implements AfterViewInit, OnDestroy, Validator {\n    public excludedays: string;\n    public excludedates;\n    public outputformat;\n    public mindate;\n    public maxdate;\n    public useDatapicker = true;\n    protected activeDate;\n    private keyEventPluginInstance;\n    private elementScope;\n    public datepattern: string;\n    public timepattern: string;\n    protected showseconds: boolean;\n    protected ismeridian: boolean;\n    protected datePipe;\n\n    protected dateNotInRange: boolean;\n    protected timeNotInRange: boolean;\n    protected invalidDateTimeFormat: boolean;\n\n    private dateOnShowSubscription: Subscription;\n\n    /**\n     * This is an internal property used to map the containerClass, showWeekNumbers etc., to the bsDatepicker\n     */\n    protected _dateOptions: BsDatepickerConfig = new BsDatepickerConfig();\n    protected bsDatePickerDirective: BsDatepickerDirective;\n\n    @ViewChild(BsDropdownDirective) protected bsDropdown;\n\n    constructor(inj: Injector, WIDGET_CONFIG) {\n        super(inj, WIDGET_CONFIG);\n        this.datePipe = this.inj.get(ToDatePipe);\n    }\n\n\n    /**\n     * returns true if the input value is default (i.e open date picker on input click)\n     * @param1 dropdownvalue, user selected value (by default datepicker opens on input click)\n     * **/\n    protected isDropDownDisplayEnabledOnInput(dropdownvalue) {\n        return dropdownvalue === DATEPICKER_DROPDOWN_OPTIONS.DEFAULT;\n    }\n\n    /**\n     * This method is used to show validation message depending on the isNativePicker flag.\n     */\n    private showValidation($event, displayValue, isNativePicker, msg) {\n        if (isNativePicker) {\n            alert(msg);\n            return $($event.target).val(displayValue);\n        }\n    }\n\n    resetDisplayInput() {\n        $(this.nativeElement).find('.display-input').val('');\n    }\n\n    public validate() {\n        if (this.invalidDateTimeFormat) {\n            return {\n                invalidDateTimeFormat: {\n                    valid: false\n                }\n            };\n        }\n        if (!_.isUndefined(this.dateNotInRange) && this.dateNotInRange) {\n            return {\n                dateNotInRange: {\n                    valid: false\n                },\n            };\n        }\n        if (!_.isUndefined(this.timeNotInRange) && this.timeNotInRange) {\n            return {\n                timeNotInRange: {\n                    valid: false\n                },\n            };\n        }\n        return null;\n    }\n\n    /**\n     * This method is used to validate date pattern and time pattern\n     * If user selects one pattern in design time and if he tries to enter the date in another pattern then the device is throwing an error\n     */\n    protected formatValidation(newVal, inputVal, isNativePicker?: boolean) {\n        const pattern = this.datepattern || this.timepattern;\n        const formattedDate = getFormattedDate(this.datePipe, newVal, pattern);\n        inputVal = inputVal.trim();\n        if (inputVal) {\n            if (pattern === 'timestamp') {\n                if (!_.isNaN(inputVal) && _.parseInt(inputVal) !== formattedDate) {\n                    this.invalidDateTimeFormat = true;\n                    this.invokeOnChange(this.datavalue, undefined, false);\n                    return false;\n                }\n            } else {\n                if (isNativePicker) {\n                    // format the date value only when inputVal is obtained from $event.target.value, as the format doesnt match.\n                    inputVal = getFormattedDate(this.datePipe, inputVal, pattern);\n                }\n                if (inputVal !== formattedDate) {\n                    this.invalidDateTimeFormat = true;\n                    this.invokeOnChange(this.datavalue, undefined, false);\n                    return false;\n                }\n            }\n\n        }\n        return true;\n    }\n\n    /**\n     * This method is used to validate min date, max date, exclude dates and exclude days\n     * In mobile if invalid dates are entered, device is showing an alert.\n     * In web if invalid dates are entered, device is showing validation message.\n     */\n    protected minDateMaxDateValidationOnInput(newVal, $event?: Event, displayValue?: string, isNativePicker?: boolean) {\n        if (newVal) {\n            newVal = moment(newVal).startOf('day').toDate();\n            const minDate = moment(getDateObj(this.mindate)).startOf('day').toDate();\n            const maxDate =  moment(getDateObj(this.maxdate)).startOf('day').toDate();\n            if (this.mindate && newVal < minDate) {\n                const msg = `${this.appLocale.LABEL_MINDATE_VALIDATION_MESSAGE} ${this.mindate}.`;\n                this.dateNotInRange = true;\n                this.invokeOnChange(this.datavalue, undefined, false);\n                return this.showValidation($event, displayValue, isNativePicker, msg);\n            }\n            if (this.maxdate && newVal > maxDate) {\n                const msg = `${this.appLocale.LABEL_MAXDATE_VALIDATION_MESSAGE} ${this.maxdate}.`;\n                this.dateNotInRange = true;\n                this.invokeOnChange(this.datavalue, undefined, false);\n                return this.showValidation($event, displayValue, isNativePicker, msg);\n            }\n            if (this.excludedates) {\n                let excludeDatesArray;\n                if (isString(this.excludedates)) {\n                    excludeDatesArray = _.split(this.excludedates, ',');\n                } else {\n                    excludeDatesArray = this.excludedates;\n                }\n                excludeDatesArray = excludeDatesArray.map(d => getFormattedDate(this.datePipe, d, this.datepattern));\n                if (excludeDatesArray.indexOf(getFormattedDate(this.datePipe, newVal, this.datepattern)) > -1) {\n                    this.dateNotInRange = true;\n                    this.invokeOnChange(this.datavalue, undefined, false);\n                    return;\n                }\n            }\n            if (this.excludedays) {\n                const excludeDaysArray =  _.split(this.excludedays, ',');\n                if (excludeDaysArray.indexOf(newVal.getDay().toString()) > -1) {\n                    this.dateNotInRange = true;\n                    this.invokeOnChange(this.datavalue, undefined, false);\n                    return;\n                }\n            }\n        }\n\n        if (!isNativePicker) {\n            this.dateNotInRange = false;\n            this.invokeOnChange(this.datavalue, undefined, false);\n        }\n    }\n\n    /**\n     * This method is used to highlight the current date\n     */\n    protected hightlightToday() {\n        const toDay = new Date().getDate().toString();\n        _.filter($(`span:contains(${toDay})`).not('.is-other-month'), (obj) => {\n            if ($(obj).text() === toDay) {\n                $(obj).addClass('current-date text-info');\n            }\n        });\n    }\n\n    /**\n     * This method is used to find the new date is from another year or not\n     * @param newDate - newly selected date value\n     */\n    private isOtheryear(newDate) {\n        return (newDate.getMonth() === 0 && this.activeDate.getMonth() === 11) || (newDate.getMonth() === 11 && this.activeDate.getMonth() === 0);\n    }\n\n    /**\n     * This method is used to set focus for active day\n     * @param newDate - newly selected date value\n     * @param isMouseEvent - boolean value represents the event is mouse event/ keyboard event\n     */\n    private setActiveDateFocus(newDate, isMouseEvent?: boolean) {\n        const activeMonth = this.activeDate.getMonth();\n        // check for keyboard event\n         if (!isMouseEvent) {\n            if (newDate.getMonth() < activeMonth) {\n                this.isOtheryear(newDate) ?  this.goToOtherMonthOryear('next', 'days') :  this.goToOtherMonthOryear('previous', 'days');\n            } else if (newDate.getMonth() > activeMonth) {\n                this.isOtheryear(newDate) ? this.goToOtherMonthOryear('previous', 'days') : this.goToOtherMonthOryear('next', 'days');\n            }\n         }\n        setTimeout( () => {\n            if (newDate.getMonth() === new Date().getMonth() && newDate.getFullYear() === new Date().getFullYear()) {\n                this.hightlightToday();\n            }\n            const newDay = newDate.getDate().toString();\n            _.filter($(`span:contains(${newDay})`).not('.is-other-month'), (obj) => {\n                if ($(obj).text() === newDay) {\n                    $(obj).focus();\n                    this.activeDate = newDate;\n                }\n            });\n        });\n\n    }\n\n    /**\n     * This method is used to load other month days or other month or other year\n     * @param btnClass - class(previous/next) of the button which we have to click\n     * @param timePeriod - String value decides to load other month days or other month or other year\n     */\n    private goToOtherMonthOryear(btnClass, timePeriod) {\n        const $node = $(`.bs-datepicker-head .${btnClass}`);\n        if ($node.attr('disabled')) {\n            return;\n        }\n        $node.trigger('click');\n        if (timePeriod === 'days') {\n            this.loadDays();\n        } else if (timePeriod === 'month') {\n            this.loadMonths();\n        } else if (timePeriod === 'year') {\n            this.loadYears();\n        }\n    }\n\n    /**\n    * This method sets the mouse events to Datepicker popup. These events are required when we navigate date picker through mouse.\n     */\n    private addDatepickerMouseEvents() {\n        const datePikcerHead = $(`.bs-datepicker-head`);\n        datePikcerHead.find(`.previous`).click((event) => {\n            // check for original mouse click\n            if (event.originalEvent) {\n                this.setFocusForDate(-1);\n            }\n        });\n        datePikcerHead.find(`.next`).click((event) => {\n            // check for original mouse click\n            if (event.originalEvent) {\n                this.setFocusForDate(1);\n            }\n        });\n        datePikcerHead.find(`.current`).click((event) => {\n            // check for original mouse click\n            if (event.originalEvent) {\n                this.setFocusForCurrentMonthOryear();\n            }\n        });\n        $('.bs-datepicker-body').click((event) => {\n            event.stopPropagation();\n            // check for original mouse click\n            if (event.originalEvent) {\n                this.setFocusForMonthOrDay();\n            }\n        });\n    }\n\n    /**\n     * This method sets focus for months/days depending on the loaded datepicker table\n     */\n    private setFocusForMonthOrDay() {\n        const activeMonthOrYear = $(`.bs-datepicker-head .current`).first().text();\n        const datePickerBody = $('.bs-datepicker-body');\n        if (datePickerBody.find('table.months').length > 0) {\n            if (_.parseInt(activeMonthOrYear) !== this.activeDate.getFullYear()) {\n                this.loadMonths();\n            }\n            const newDate = new Date(_.parseInt(activeMonthOrYear), this.activeDate.getMonth(), this.activeDate.getDate());\n            this.setActiveMonthFocus(newDate, true);\n        } else if (datePickerBody.find('table.days').length > 0) {\n            const newMonth = months.indexOf(activeMonthOrYear);\n            if (newMonth !== this.activeDate.getMonth()) {\n                this.loadDays();\n            }\n            const newDate = new Date(this.activeDate.getFullYear(), newMonth, 1);\n            this.setActiveDateFocus(newDate, true);\n        }\n    }\n\n    /**\n     * This method sets focus for months/years depending on the loaded datepicker table\n     */\n    private setFocusForCurrentMonthOryear() {\n        const datePickerBody = $('.bs-datepicker-body');\n        if (datePickerBody.find('table.months').length > 0) {\n            this.loadMonths();\n            this.setActiveMonthFocus(this.activeDate, true);\n        } else if (datePickerBody.find('table.years').length > 0) {\n            this.loadYears();\n            this.setActiveYearFocus(this.activeDate, true);\n        }\n    }\n\n    /**\n     * This method sets focus for months/years/days depending on the loaded datepicker table\n     */\n    private setFocusForDate(count) {\n        const datePickerBody = $('.bs-datepicker-body');\n        if (datePickerBody.find('table.months').length > 0) {\n            this.loadMonths();\n            const newDate = new Date(this.activeDate.getFullYear() + count, 0, this.activeDate.getDate());\n            this.setActiveMonthFocus(newDate, true);\n        } else if (datePickerBody.find('table.years').length > 0) {\n            this.loadYears();\n            const startYear = datePickerBody.find('table.years span').first().text();\n            const newDate = new Date(_.parseInt(startYear), this.activeDate.getMonth(), this.activeDate.getDate());\n            this.setActiveYearFocus(newDate, true);\n        } else if (datePickerBody.find('table.days').length > 0) {\n            this.loadDays();\n            const newDate = new Date(this.activeDate.getFullYear(), this.activeDate.getMonth() + count, 1);\n            this.setActiveDateFocus(newDate, true);\n        }\n    }\n\n    /**\n     * This method is used to add keyboard events while opening the date picker\n     * @param scope - scope of the date/datetime widget\n     * @param isDateTime - boolean value represents the loaded widget is date or datetime\n     */\n    protected addDatepickerKeyboardEvents(scope, isDateTime) {\n        this.keyEventPluginInstance = scope.keyEventPlugin.constructor;\n        this.elementScope = scope;\n        const dateContainer  = document.querySelector(`.${scope.dateContainerCls}`) as HTMLElement;\n        setAttr(dateContainer, 'tabindex', '0');\n        dateContainer.onkeydown = (event) => {\n            const action = this.keyEventPluginInstance.getEventFullKey(event);\n            // Check for Shift+Tab key or Tab key or escape\n            if (action === 'shift.tab' || action === 'escape' || (action === 'tab' && !isDateTime)) {\n                this.elementScope.hideDatepickerDropdown();\n                const displayInputElem = this.elementScope.nativeElement.querySelector('.display-input') as HTMLElement;\n                setTimeout(() => displayInputElem.focus());\n            }\n            if (action === 'tab' && isDateTime) {\n                this.bsDatePickerDirective.hide();\n                this.elementScope.toggleTimePicker(true);\n            }\n        };\n        this.loadDays();\n        this.setActiveDateFocus(this.activeDate);\n    }\n\n    /**\n     * This method is used to add tabindex, keybord and mouse events for days\n     */\n    private loadDays() {\n        setTimeout(() => {\n            $('.bs-datepicker-body').attr('tabindex', '0');\n            $('[bsdatepickerdaydecorator]').not('.is-other-month').attr('tabindex', '0');\n            this.addKeyBoardEventsForDays();\n            this.addDatepickerMouseEvents();\n        });\n    }\n\n    /**\n     * This method sets keyboard events for days\n     */\n    private addKeyBoardEventsForDays() {\n        const datePickerBody = $('.bs-datepicker-body');\n        if (datePickerBody.length > 0) {\n            datePickerBody[0].addEventListener('mouseenter', (event) => {\n                event.stopPropagation();\n            }, true);\n        }\n        datePickerBody.keydown((event) => {\n            const action = this.keyEventPluginInstance.getEventFullKey(event);\n            let newdate;\n            if (action === 'arrowdown') {\n                event.preventDefault();\n                newdate = moment(this.activeDate).add(+7, 'days').toDate();\n                this.setActiveDateFocus(newdate);\n            } else if (action === 'arrowup') {\n                event.preventDefault();\n                newdate = moment(this.activeDate).add(-7, 'days').toDate();\n                this.setActiveDateFocus(newdate);\n            } else if (action === 'arrowleft') {\n                newdate = moment(this.activeDate).add(-1, 'days').toDate();\n                this.setActiveDateFocus(newdate);\n            } else if (action === 'arrowright') {\n                newdate = moment(this.activeDate).add(+1, 'days').toDate();\n                this.setActiveDateFocus(newdate);\n            } else if (action === 'control.arrowup') {\n                // clicking on table header month name to load list of months\n                $('.bs-datepicker-head .current').first().click();\n                this.loadMonths();\n                this.setActiveMonthFocus(this.activeDate);\n            } else if (action === 'enter') {\n                if ($(document.activeElement).hasClass('disabled')) {\n                    return;\n                }\n                $(document.activeElement).click();\n                this.elementScope.hideDatepickerDropdown();\n                const displayInputElem = this.elementScope.nativeElement.querySelector('.display-input') as HTMLElement;\n                setTimeout(() => displayInputElem.focus());\n            }\n        });\n    }\n\n    /**\n     * This method is used to add tabindex, keybord and mouse events for months\n     */\n    private loadMonths() {\n        setTimeout(() => {\n            const datePickerBody = $('.bs-datepicker-body');\n            datePickerBody.attr('tabindex', '0');\n            datePickerBody.find('table.months span').attr('tabindex', '0');\n            this.addKeyBoardEventsForMonths();\n            this.addDatepickerMouseEvents();\n        });\n    }\n\n    /**\n     * This method sets keyboard events for months\n     */\n    private addKeyBoardEventsForMonths() {\n        $('.bs-datepicker-body').keydown((event) => {\n            const action = this.keyEventPluginInstance.getEventFullKey(event);\n            let newdate;\n            if (action === 'arrowdown') {\n                event.preventDefault();\n                newdate = moment(this.activeDate).add(+3, 'month').toDate();\n                this.setActiveMonthFocus(newdate);\n            } else if (action === 'arrowup') {\n                event.preventDefault();\n                newdate = moment(this.activeDate).add(-3, 'month').toDate();\n                this.setActiveMonthFocus(newdate);\n            } else if (action === 'arrowleft') {\n                newdate = moment(this.activeDate).add(-1, 'month').toDate();\n                this.setActiveMonthFocus(newdate);\n            } else if (action === 'arrowright') {\n                newdate = moment(this.activeDate).add(+1, 'month').toDate();\n                this.setActiveMonthFocus(newdate);\n            } else if (action === 'control.arrowup') {\n                // clicking on table header year to load list of years\n                $('.bs-datepicker-head .current').first().click();\n                this.loadYears();\n                this.setActiveYearFocus(this.activeDate);\n            } else if (action === 'control.arrowdown' || action === 'enter') {\n                if ($(document.activeElement).parent().hasClass('disabled')) {\n                    return;\n                }\n                $(document.activeElement).click();\n                this.loadDays();\n                const newDate = new Date(this.activeDate.getFullYear(), this.activeDate.getMonth(), 1);\n                this.setActiveDateFocus(newDate);\n            }\n        });\n    }\n\n    /**\n     * This method is used to add tabindex, keybord and mouse events for years\n     */\n    private loadYears() {\n        setTimeout(() => {\n            const datePickerBody = $('.bs-datepicker-body');\n            datePickerBody.attr('tabindex', '0');\n            datePickerBody.find('table.years span').attr('tabindex', '0');\n            this.addKeyBoardEventsForYears();\n            this.addDatepickerMouseEvents();\n        });\n    }\n\n    /**\n     * This method is used to set focus for active month\n     */\n    private setActiveMonthFocus(newDate, isMoouseEvent?: boolean) {\n        const newMonth = months[newDate.getMonth()];\n        // check for keyboard event\n        if (!isMoouseEvent) {\n            if (newDate.getFullYear() < this.activeDate.getFullYear()) {\n                this.goToOtherMonthOryear('previous', 'month');\n            } else if (newDate.getFullYear() > this.activeDate.getFullYear()) {\n                this.goToOtherMonthOryear('next', 'month');\n            }\n        }\n        setTimeout( () => {\n            $(`.bs-datepicker-body table.months span:contains(${newMonth})`).focus();\n            this.activeDate = newDate;\n        });\n    }\n\n    /**\n     * This method sets keyboard events for years\n     */\n    private addKeyBoardEventsForYears() {\n        $('.bs-datepicker-body').keydown((event) => {\n            const action = this.keyEventPluginInstance.getEventFullKey(event);\n            let newdate;\n            if (action === 'arrowdown') {\n                event.preventDefault();\n                newdate = moment(this.activeDate).add(+4, 'year').toDate();\n                this.setActiveYearFocus(newdate);\n            } else if (action === 'arrowup') {\n                event.preventDefault();\n                newdate = moment(this.activeDate).add(-4, 'year').toDate();\n                this.setActiveYearFocus(newdate);\n            } else if (action === 'arrowleft') {\n                newdate = moment(this.activeDate).add(-1, 'year').toDate();\n                this.setActiveYearFocus(newdate);\n            } else if (action === 'arrowright') {\n                newdate = moment(this.activeDate).add(+1, 'year').toDate();\n                this.setActiveYearFocus(newdate);\n            }  else if (action === 'control.arrowdown' || action === 'enter') {\n                if ($(document.activeElement).parent().hasClass('disabled')) {\n                    return;\n                }\n                $(document.activeElement).click();\n                this.loadMonths();\n                this.setActiveMonthFocus(this.activeDate);\n            }\n        });\n    }\n\n    /**\n     * This method is used to set focus for active year\n     */\n    private setActiveYearFocus(newDate, isMouseEvent?: boolean) {\n        const newYear = newDate.getFullYear();\n        const datePickerYears = $('.bs-datepicker-body table.years span');\n        const startYear = datePickerYears.first().text();\n        const endYear = datePickerYears.last().text();\n        // check for keyboard event\n        if (!isMouseEvent) {\n            if (newDate.getFullYear() < _.parseInt(startYear)) {\n                this.goToOtherMonthOryear('previous', 'year');\n            } else if (newDate.getFullYear() > _.parseInt(endYear)) {\n                this.goToOtherMonthOryear('next', 'year');\n            }\n        }\n        setTimeout( () => {\n            $(`.bs-datepicker-body table.years span:contains(${newYear})`).focus();\n            this.activeDate = newDate;\n        });\n    }\n\n    /**\n     * This method sets focus for timepicker first input field(hours field) while opening time picker\n     * @param scope - scope of the time picker widget\n     */\n    protected focusTimePickerPopover(scope) {\n        this.keyEventPluginInstance = scope.keyEventPlugin.constructor;\n        this.elementScope = scope;\n        // setTimeout is used so that by then time input has the updated value. focus is setting back to the input field\n        this.elementScope.ngZone.runOutsideAngular(() => {\n            setTimeout(() => {\n                $('timepicker .form-group:first > input.form-control').focus();\n            });\n        });\n\n\n    }\n    /**\n     * This function sets the keyboard events to Timepicker popup\n     */\n    protected bindTimePickerKeyboardEvents() {\n        setTimeout(() => {\n            const $timepickerPopup = $('body').find('> bs-dropdown-container timepicker');\n            $timepickerPopup.attr('tabindex', 0);\n            this.addEventsOnTimePicker($timepickerPopup);\n        });\n    }\n\n    /**\n     * This function checks whether the given date is valid or not\n     * @returns boolean value, true if date is valid else returns false\n     */\n    private isValidDate(date) {\n        return date && date instanceof Date && !isNaN(date.getTime());\n    }\n\n    /**\n     * This function checks whether the given time is valid or not\n     */\n    private timeFormatValidation() {\n        const enteredDate = $(this.nativeElement).find('input').val();\n        const newVal = getNativeDateObject(enteredDate);\n        if (!this.formatValidation(newVal, enteredDate)) {\n            return;\n        }\n        this.invalidDateTimeFormat = false;\n        this.invokeOnChange(this.datavalue, undefined, false);\n    }\n\n    /**\n     * This function sets the events to given element\n     * @param $el - element on which the event is added\n     */\n    private addEventsOnTimePicker($el: JQuery) {\n        $el.on('keydown', evt => {\n            const $target = $(evt.target);\n            const $parent = $target.parent();\n            const elementScope = this.elementScope;\n\n            const action = this.keyEventPluginInstance.getEventFullKey(evt);\n\n            let stopPropogation, preventDefault;\n\n            if (action === 'escape') {\n                elementScope.hideTimepickerDropdown();\n            }\n\n            if ($target.hasClass('bs-timepicker-field')) {\n                if ($parent.is(':first-child')) {\n                    if (action === 'shift.tab' || action === 'enter' || action === 'escape') {\n                        elementScope.setIsTimeOpen(false);\n                        this.focus();\n                        stopPropogation = true;\n                        preventDefault = true;\n                    }\n                } else if ($parent.is(':last-child') || ($parent.next().next().find('button.disabled').length)) {\n                    if (action === 'tab' || action === 'escape' || action === 'enter') {\n                        elementScope.setIsTimeOpen(false);\n                        this.focus();\n                        stopPropogation = true;\n                        preventDefault = true;\n                    }\n                } else {\n                    if (action === 'enter' || action === 'escape') {\n                        elementScope.setIsTimeOpen(false);\n                        this.focus();\n                        stopPropogation = true;\n                        preventDefault = true;\n                    }\n                }\n                if (stopPropogation) {\n                    evt.stopPropagation();\n                }\n                if (preventDefault) {\n                    evt.preventDefault();\n                }\n                if (elementScope.mintime && elementScope.maxtime && !this.isValidDate(elementScope.bsTimeValue)) {\n                    if (action === 'arrowdown') {\n                        elementScope.bsTimeValue = elementScope.maxTime;\n                    } else if (action === 'arrowup') {\n                        elementScope.bsTimeValue = elementScope.minTime;\n                    }\n                }\n                if (action === 'tab') {\n                   this.invalidDateTimeFormat = false;\n                   this.invokeOnChange(this.datavalue, undefined, false);\n                   const pattern = this.datepattern || this.timepattern;\n                    if (getFormattedDate(elementScope.datePipe, elementScope.bsTimeValue, pattern) === elementScope.displayValue) {\n                        $(this.nativeElement).find('.display-input').val(elementScope.displayValue);\n                    }\n                }\n                if (action === 'arrowdown' ||  action === 'arrowup') {\n                    this.timeFormatValidation();\n                }\n             } else if ($target.hasClass('btn-default')) {\n                if (action === 'tab' || action === 'escape') {\n                    elementScope.setIsTimeOpen(false);\n                    this.focus();\n                }\n            }\n        });\n        $el.find('a').on('click', evt => {\n            const elementScope = this.elementScope;\n            const $target = $(evt.target);\n            if (elementScope.mintime && elementScope.maxtime && !this.isValidDate(elementScope.bsTimeValue)) {\n                if ($target.find('span').hasClass('bs-chevron-down')) {\n                    elementScope.bsTimeValue = elementScope.maxTime;\n                } else if ($target.find('span').hasClass('bs-chevron-up')) {\n                    elementScope.bsTimeValue = elementScope.minTime;\n                }\n            }\n            this.timeFormatValidation();\n        });\n    }\n\n    public updateFormat(pattern) {\n        if (pattern === 'datepattern') {\n            this._dateOptions.dateInputFormat = this.datepattern;\n            this.showseconds = _.includes(this.datepattern, 's');\n            this.ismeridian = _.includes(this.datepattern, 'h');\n        } else if (pattern === 'timepattern') {\n            this.showseconds = _.includes(this.timepattern, 's');\n            this.ismeridian = _.includes(this.timepattern, 'h');\n        }\n    }\n\n    onPropertyChange(key, nv, ov?) {\n\n        if (key === 'tabindex') {\n            return;\n        }\n        if (this.useDatapicker && key === 'datepattern') {\n            this.updateFormat(key);\n        } else if (key === 'showweeks') {\n            this._dateOptions.showWeekNumbers = nv;\n        } else if (key === 'mindate') {\n            this._dateOptions.minDate = (nv === CURRENT_DATE) ?  this.mindate = new Date() : getDateObj(nv);\n            this.minDateMaxDateValidationOnInput(this.datavalue);\n        } else if (key === 'maxdate') {\n           this._dateOptions.maxDate = (nv === CURRENT_DATE) ?  this.maxdate = new Date() : getDateObj(nv);\n            this.minDateMaxDateValidationOnInput(this.datavalue);\n        }  else if (key === 'excludedates' || key === 'excludedays') {\n            this.minDateMaxDateValidationOnInput(this.datavalue);\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n\n    ngAfterViewInit() {\n        super.ngAfterViewInit();\n        if (this.bsDatePickerDirective) {\n            this.dateOnShowSubscription = this.bsDatePickerDirective\n                .onShown\n                .subscribe(cal => {\n                    cal.daysCalendar.subscribe(data => {\n                        let excludedDates;\n                        if (this.excludedates) {\n                            if (isString(this.excludedates)) {\n                                excludedDates = _.split(this.excludedates, ',');\n                            } else {\n                                excludedDates = this.excludedates;\n                            }\n                            excludedDates = excludedDates.map(d => moment(d));\n                        }\n                        data[0].weeks.forEach(week => {\n                            week.days.forEach(day => {\n                                if (!day.isDisabled && this.excludedays) {\n                                    day.isDisabled = _.includes(this.excludedays, day.dayIndex);\n                                }\n\n                                if (!day.isDisabled && excludedDates) {\n                                    const md = moment(day.date);\n                                    day.isDisabled = excludedDates.some(ed => md.isSame(ed, 'day'));\n                                }\n                            });\n                        });\n                    });\n                });\n        }\n\n    }\n\n    ngOnDestroy() {\n        if (this.dateOnShowSubscription) {\n            this.dateOnShowSubscription.unsubscribe();\n        }\n\n        super.ngOnDestroy();\n    }\n}\n","import { ChangeDetectorRef, Component, Inject, Injector, ViewChild } from '@angular/core';\nimport { EVENT_MANAGER_PLUGINS } from '@angular/platform-browser';\n\nimport { BsDatepickerDirective } from 'ngx-bootstrap';\n\nimport { adjustContainerPosition, addEventListenerOnElement, AppDefaults, EVENT_LIFE, FormWidgetType, getDateObj, getDisplayDateTimeFormat, getFormattedDate } from '@wm/core';\n\nimport { styler } from '../../framework/styler';\nimport { IWidgetConfig } from '../../framework/types';\nimport { registerProps } from './date.props';\nimport { provideAsNgValidators, provideAsNgValueAccessor, provideAsWidgetRef } from '../../../utils/widget-utils';\nimport { BaseDateTimeComponent } from '../base/base-date-time.component';\n\ndeclare const _, $;\n\nconst CURRENT_DATE = 'CURRENT_DATE';\nconst DEFAULT_CLS = 'app-date input-group';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-date',\n    hostClass: DEFAULT_CLS\n};\n\n@Component({\n    selector: '[wmDate]',\n    templateUrl: './date.component.html',\n    providers: [\n        provideAsNgValueAccessor(DateComponent),\n        provideAsNgValidators(DateComponent),\n        provideAsWidgetRef(DateComponent)\n    ]\n})\nexport class DateComponent extends BaseDateTimeComponent {\n    static initializeProps = registerProps();\n\n    private bsDataValue;\n    public showdropdownon: string;\n    private dateContainerCls: string;\n    private isCurrentDate = false;\n    private isOpen: boolean;\n    private timeinterval;\n    private isEnterPressedOnDateInput = false;\n\n    private keyEventPlugin;\n    private deregisterEventListener;\n\n    get timestamp() {\n        return this.bsDataValue ? this.bsDataValue.valueOf() : undefined;\n    }\n\n    get displayValue() {\n        return getFormattedDate(this.datePipe, this.bsDataValue, this._dateOptions.dateInputFormat) || '';\n    }\n\n    get datavalue () {\n        return getFormattedDate(this.datePipe, this.bsDataValue, this.outputformat) || '';\n    }\n\n    // Todo[Shubham]: needs to be redefined\n    // sets the dataValue and computes the display model values\n    set datavalue(newVal) {\n        if (newVal === CURRENT_DATE) {\n            this.isCurrentDate = true;\n            this.setTimeInterval();\n            this.bsDataValue = new Date();\n        } else {\n            this.bsDataValue = newVal ? getDateObj(newVal) : undefined;\n            this.clearTimeInterval();\n        }\n        // update the previous datavalue.\n        this.invokeOnChange(this.datavalue, undefined, true);\n        this.cdRef.detectChanges();\n    }\n\n    @ViewChild(BsDatepickerDirective) protected bsDatePickerDirective;\n\n    // TODO use BsLocaleService to set the current user's locale to see the localized labels\n    constructor(\n        inj: Injector,\n        private cdRef: ChangeDetectorRef,\n        private appDefaults: AppDefaults,\n        @Inject(EVENT_MANAGER_PLUGINS) evtMngrPlugins\n    ) {\n        super(inj, WIDGET_CONFIG);\n        styler(this.nativeElement, this);\n\n        // KeyEventsPlugin\n        this.keyEventPlugin = evtMngrPlugins[1];\n        this.dateContainerCls = `app-date-${this.widgetId}`;\n        this._dateOptions.containerClass = `app-date ${this.dateContainerCls}`;\n        this._dateOptions.showWeekNumbers = false;\n\n        this.datepattern = this.appDefaults.dateFormat || getDisplayDateTimeFormat(FormWidgetType.DATE);\n        this.updateFormat('datepattern');\n    }\n\n    /**\n     * This is an internal method triggered when the date input changes\n     */\n    onDisplayDateChange($event, isNativePicker) {\n        if (this.isEnterPressedOnDateInput) {\n            this.isEnterPressedOnDateInput = false;\n            return;\n        }\n        const newVal = getDateObj($event.target.value);\n        // date pattern validation\n        // if invalid pattern is entered, device is showing an error.\n        if (!this.formatValidation(newVal, $event.target.value, isNativePicker)) {\n           return;\n        }\n        // min date and max date validation in mobile view.\n        // if invalid dates are entered, device is showing an alert.\n        if (isNativePicker && this.minDateMaxDateValidationOnInput(newVal, $event, this.displayValue, isNativePicker)) {\n            return;\n        }\n        this.setDataValue(newVal);\n    }\n\n    // sets the dataValue and computes the display model values\n    private setDataValue(newVal): void {\n        this.invalidDateTimeFormat = false;\n        // min date and max date validation in web.\n        // if invalid dates are entered, device is showing validation message.\n        this.minDateMaxDateValidationOnInput(newVal);\n        if (getFormattedDate(this.datePipe, newVal, this._dateOptions.dateInputFormat) === this.displayValue) {\n            $(this.nativeElement).find('.app-dateinput').val(this.displayValue);\n        }\n        if (newVal) {\n            this.bsDataValue = newVal;\n        } else {\n            this.bsDataValue = undefined;\n        }\n        this.invokeOnChange(this.datavalue, {}, true);\n    }\n\n    onDatePickerOpen() {\n        this.isOpen = true;\n        this.bsDataValue ? this.activeDate = this.bsDataValue : this.activeDate = new Date();\n        if (!this.bsDataValue) {\n            this.hightlightToday();\n        }\n        this.addDatepickerKeyboardEvents(this, false);\n        adjustContainerPosition($('bs-datepicker-container'), this.nativeElement, this.bsDatePickerDirective._datepicker);\n\n    }\n    onInputBlur($event) {\n        if (!$($event.relatedTarget).hasClass('current-date')) {\n            this.invokeOnTouched();\n            this.invokeEventCallback('blur', {$event});\n        }\n    }\n\n    private hideDatepickerDropdown() {\n        this.invokeOnTouched();\n        this.isOpen = false;\n        this.isEnterPressedOnDateInput = false;\n        if (this.deregisterEventListener) {\n            this.deregisterEventListener();\n        }\n    }\n\n    // change and blur events are added from the template\n    protected handleEvent(node: HTMLElement, eventName: string, callback: Function, locals: any) {\n        if (!_.includes(['blur', 'focus', 'change', 'click'], eventName)) {\n            super.handleEvent(node, eventName, callback, locals);\n        }\n    }\n\n    /**\n     * This is an internal method used to toggle the dropdown of the date widget\n     */\n    toggleDpDropdown($event) {\n        if ($event.type === 'click') {\n            this.invokeEventCallback('click', {$event: $event});\n        }\n        if ($event.target && $($event.target).is('input') && !(this.isDropDownDisplayEnabledOnInput(this.showdropdownon))) {\n            $event.stopPropagation();\n            return;\n        }\n        this.bsDatePickerDirective.toggle();\n        this.addBodyClickListener(this.bsDatePickerDirective.isOpen);\n    }\n\n    private addBodyClickListener(skipListener) {\n        if (!skipListener) {\n            return;\n        }\n        const bodyElement = document.querySelector('body');\n        setTimeout(() => {\n            const bsDateContainerElement = bodyElement.querySelector(`.${this.dateContainerCls}`);\n            this.deregisterEventListener = addEventListenerOnElement(bodyElement, bsDateContainerElement, this.nativeElement, 'click', this.isDropDownDisplayEnabledOnInput(this.showdropdownon), () => {\n                this.isOpen = false;\n            }, EVENT_LIFE.ONCE, true);\n        }, 350);\n    }\n\n    /**\n     * This is an internal method triggered when pressing key on the date input\n     */\n    private onDisplayKeydown(event) {\n        if (this.isDropDownDisplayEnabledOnInput(this.showdropdownon)) {\n            event.stopPropagation();\n            const newVal = getDateObj(event.target.value);\n            const action = this.keyEventPlugin.constructor.getEventFullKey(event);\n            if (action === 'enter' || action === 'arrowdown') {\n                event.preventDefault();\n                const formattedDate = getFormattedDate(this.datePipe, newVal, this._dateOptions.dateInputFormat);\n                const inputVal = event.target.value.trim();\n                if (inputVal && this.datepattern === 'timestamp') {\n                    if (!_.isNaN(inputVal) && _.parseInt(inputVal) !== formattedDate) {\n                        this.invalidDateTimeFormat = true;\n                        this.invokeOnChange(this.datavalue, event, false);\n                    }\n                } else if (inputVal && inputVal !== formattedDate ) {\n                    this.invalidDateTimeFormat = true;\n                    this.invokeOnChange(this.datavalue, event, false);\n                } else {\n                    this.invalidDateTimeFormat = false;\n                    this.isEnterPressedOnDateInput = true;\n                    this.bsDatePickerDirective.bsValue =  newVal;\n                }\n                this.toggleDpDropdown(event);\n            } else {\n                this.hideDatepickerDropdown();\n            }\n        } else {\n            this.hideDatepickerDropdown();\n        }\n    }\n\n    /**\n     * This is an internal method used to maintain a time interval to update the time model when the data value is set to CURRENT_TIME\n     */\n    private setTimeInterval() {\n        if (this.timeinterval) {\n            return;\n        }\n        this.timeinterval = setInterval( () => {\n            this.bsDataValue = new Date();\n        }, 1000 * 60);\n    }\n\n    /**\n     * This is an internal method used to clear the time interval created\n     */\n    private clearTimeInterval() {\n        if (this.timeinterval) {\n            clearInterval(this.timeinterval);\n            this.timeinterval = null;\n        }\n    }\n\n    /**\n     * This is an internal method triggered when the date selection changes\n     */\n    onDateChange(newVal): void {\n        const displayInputElem = this.nativeElement.querySelector('.display-input') as HTMLElement;\n        if (this.isOpen) {\n            setTimeout(() => displayInputElem.focus());\n        }\n        this.setDataValue(newVal);\n    }\n}\n","import { isMobileApp } from '@wm/core';\n\nimport { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const dateTimeProps = new Map(\n    [\n        ['autofocus', PROP_BOOLEAN],\n        ['class', PROP_STRING],\n        ['datavaluesource', PROP_ANY],\n        ['datavalue', PROP_STRING],\n        ['datepattern', PROP_STRING],\n        ['disabled', PROP_BOOLEAN],\n        ['excludedays', PROP_STRING],\n        ['excludedates', PROP_STRING],\n        ['hint', PROP_STRING],\n        ['hourstep', {value: 1, ...PROP_NUMBER}],\n        ['maxdate', PROP_STRING],\n        ['mindate', PROP_STRING],\n        ['minutestep', {value: 15, ...PROP_NUMBER}],\n        ['name', PROP_STRING],\n        ['outputformat', {value: 'timestamp', ...PROP_STRING}],\n        ['placeholder', {value: 'Select date time', ...PROP_STRING}],\n        ['readonly', PROP_BOOLEAN],\n        ['required', PROP_BOOLEAN],\n        ['secondsstep', {value: 1, ...PROP_NUMBER}],\n        ['shortcutkey', PROP_STRING],\n        ['show', {value: true, ...PROP_BOOLEAN}],\n        ['showdropdownon', {value: 'default', ...PROP_STRING}],\n        ['showbuttonbar', PROP_BOOLEAN],\n        ['showindevice', {displayType: 'inline-block', value: 'all', ...PROP_STRING}],\n        ['showweeks', PROP_BOOLEAN],\n        ['tabindex', {value: 0, ...PROP_NUMBER}],\n        ['timestamp', PROP_STRING]\n    ]\n);\n\nexport const registerProps = () => {\n    if (isMobileApp()) {\n        dateTimeProps.set('datepattern', {value: 'yyyy-MM-ddTHH:mm:ss', ...PROP_STRING});\n    }\n    register(\n        'wm-datetime',\n        dateTimeProps\n    );\n};\n","import { AfterViewInit, ChangeDetectorRef, Component, Inject, Injector, NgZone, OnDestroy, ViewChild } from '@angular/core';\nimport { EVENT_MANAGER_PLUGINS } from '@angular/platform-browser';\n\nimport { BsDatepickerDirective, TimepickerComponent } from 'ngx-bootstrap';\n\nimport { addClass, addEventListenerOnElement, adjustContainerPosition, AppDefaults, EVENT_LIFE, FormWidgetType, getDateObj, getDisplayDateTimeFormat, getFormattedDate, getNativeDateObject } from '@wm/core';\n\nimport { styler } from '../../framework/styler';\nimport { registerProps } from './date-time.props';\nimport { provideAsNgValidators, provideAsNgValueAccessor, provideAsWidgetRef } from '../../../utils/widget-utils';\nimport { BaseDateTimeComponent } from '../base/base-date-time.component';\n\ndeclare const moment, $, _;\n\nconst DEFAULT_CLS = 'app-datetime input-group';\nconst WIDGET_CONFIG = {widgetType: 'wm-datetime', hostClass: DEFAULT_CLS};\n\nconst CURRENT_DATE = 'CURRENT_DATE';\n\n@Component({\n    selector: '[wmDateTime]',\n    templateUrl: './date-time.component.html',\n    providers: [\n        provideAsNgValueAccessor(DatetimeComponent),\n        provideAsNgValidators(DatetimeComponent),\n        provideAsWidgetRef(DatetimeComponent)\n    ]\n})\nexport class DatetimeComponent extends BaseDateTimeComponent implements AfterViewInit, OnDestroy {\n    static initializeProps = registerProps();\n    /**\n     * The below propeties prefixed with \"bs\" always holds the value that is selected from the datepicker.\n     * The bsDateTimeValue = bsDateValue + bsTimeValue.\n     */\n    private bsDateTimeValue: any;\n    private bsDateValue;\n    private bsTimeValue;\n    private proxyModel;\n\n    public showdropdownon: string;\n    private keyEventPlugin;\n    private deregisterDatepickerEventListener;\n    private deregisterTimepickeEventListener;\n    private isEnterPressedOnDateInput = false;\n\n    get timestamp() {\n        return this.proxyModel ? this.proxyModel.valueOf() : undefined;\n    }\n\n    /**\n     * The displayValue is the display value of the bsDateTimeValue after applying the datePattern on it.\n     * @returns {any|string}\n     */\n    get displayValue(): any {\n        return getFormattedDate(this.datePipe, this.proxyModel, this._dateOptions.dateInputFormat) || '';\n    }\n\n    @ViewChild(BsDatepickerDirective) bsDatePickerDirective;\n    @ViewChild(TimepickerComponent) bsTimePicker;\n\n    /**\n     * This property checks if the timePicker is Open\n     */\n    private isTimeOpen = false;\n\n    /**\n     * This property checks if the datePicker is Open\n     */\n    private isDateOpen = false;\n\n    /**\n     * This timeinterval is used to run the timer when the time component value is set to CURRENT_TIME in properties panel.\n     */\n    private timeinterval: any;\n\n    /**\n     * This property is set to TRUE if the time component value is set to CURRENT_TIME; In this case the timer keeps changing the time value until the widget is available.\n     */\n    private isCurrentDate = false;\n\n    private _debouncedOnChange: Function =  _.debounce(this.invokeOnChange, 10);\n\n    private dateContainerCls: string;\n\n    get datavalue(): any {\n        if (this.isCurrentDate && !this.proxyModel) {\n            return CURRENT_DATE;\n        }\n        return getFormattedDate(this.datePipe, this.proxyModel, this.outputformat);\n    }\n\n    /**Todo[Shubham]: needs to be redefined\n     * This property sets the default value for the date selection\n     */\n    set datavalue(newVal: any) {\n        if (newVal === CURRENT_DATE) {\n            this.isCurrentDate = true;\n            this.setTimeInterval();\n        } else {\n            this.proxyModel = newVal ? getDateObj(newVal) : undefined;\n            this.clearTimeInterval();\n            this.isCurrentDate = false;\n        }\n        this.bsTimeValue = this.bsDateValue = this.proxyModel;\n        this.cdRef.detectChanges();\n    }\n\n    constructor(\n        inj: Injector,\n        private ngZone: NgZone,\n        private cdRef: ChangeDetectorRef,\n        private appDefaults: AppDefaults,\n        @Inject(EVENT_MANAGER_PLUGINS) evtMngrPlugins\n    ) {\n        super(inj, WIDGET_CONFIG);\n        this.registerDestroyListener(() => this.clearTimeInterval());\n        styler(this.nativeElement, this);\n        // KeyEventsPlugin\n        this.keyEventPlugin = evtMngrPlugins[1];\n        this.dateContainerCls = `app-date-${this.widgetId}`;\n        this._dateOptions.containerClass = `app-date ${this.dateContainerCls}`;\n        this._dateOptions.showWeekNumbers = false;\n\n        this.datepattern = this.appDefaults.dateTimeFormat || getDisplayDateTimeFormat(FormWidgetType.DATETIME);\n        this.updateFormat('datepattern');\n    }\n\n    /**\n     * This is an internal method used to maintain a time interval to update the time model when the data value is set to CURRENT_TIME\n     */\n    private setTimeInterval() {\n        if (this.timeinterval) {\n            return;\n        }\n        this.timeinterval = setInterval( () => {\n            const currentTime = new Date();\n            this.onModelUpdate(currentTime);\n        }, 1000);\n    }\n\n    /**\n     * This is an internal method used to clear the time interval created\n     */\n    private clearTimeInterval() {\n        if (this.timeinterval) {\n            clearInterval(this.timeinterval);\n            this.timeinterval = null;\n        }\n    }\n\n    /**\n     * This is an internal method to toggle the time picker\n     */\n    private toggleTimePicker(newVal, $event?: any) {\n        this.isTimeOpen = newVal;\n        if ($event && $event.type === 'click') {\n            this.invokeEventCallback('click', {$event: $event});\n        }\n        this.addTimepickerClickListener(this.isTimeOpen);\n    }\n\n    private addTimepickerClickListener(skipListener) {\n        if (!skipListener) {\n            return;\n        }\n        const bodyElement = document.querySelector('body');\n        setTimeout(() => {\n            const dropdownElement = $(bodyElement).find('>bs-dropdown-container .dropdown-menu').get(0);\n            this.deregisterTimepickeEventListener = addEventListenerOnElement(bodyElement, dropdownElement, this.nativeElement, 'click', this.isDropDownDisplayEnabledOnInput(this.showdropdownon), () => {\n                this.toggleTimePicker(false);\n            }, EVENT_LIFE.ONCE, true);\n        }, 350);\n    }\n\n    /**\n     * This function sets the value isOpen/isTimeOpen (i.e when datepicker popup is closed) based on widget type(i.e  DateTime, Time)\n     * @param val - isOpen/isTimeOpen is set based on the timepicker popup is open/closed\n     */\n    private setIsTimeOpen(val: boolean) {\n        this.isTimeOpen = val;\n    }\n\n    private hideTimepickerDropdown() {\n        this.invokeOnTouched();\n        this.toggleTimePicker(false);\n        if (this.deregisterTimepickeEventListener) {\n            this.deregisterTimepickeEventListener();\n        }\n    }\n\n    /**\n     * This is an internal method to add a click listener once the time dropdown is open\n     */\n    private onTimepickerOpen() {\n        // adding class for time widget dropdown menu\n        const tpElements  = document.querySelectorAll('timepicker');\n        _.forEach(tpElements, (element) => {\n            addClass(element.parentElement as HTMLElement, 'app-datetime', true);\n        });\n\n        this.bsDatePickerDirective.hide();\n        this.focusTimePickerPopover(this);\n        this.bindTimePickerKeyboardEvents();\n        adjustContainerPosition($('bs-dropdown-container'), this.nativeElement, this.bsDropdown._dropdown, $('bs-dropdown-container .dropdown-menu'));\n    }\n\n    private onDatePickerOpen() {\n        this.isDateOpen = !this.isDateOpen;\n        this.toggleTimePicker(false);\n        this.bsDateValue ? this.activeDate = this.bsDateValue : this.activeDate = new Date();\n        if (!this.bsDateValue) {\n           this.hightlightToday();\n        }\n        this.addDatepickerKeyboardEvents(this, true);\n        adjustContainerPosition($('bs-datepicker-container'), this.nativeElement, this.bsDatePickerDirective._datepicker);\n    }\n\n    /**\n     * This is an internal method to update the model\n     */\n    private onModelUpdate(newVal, type?) {\n        if (type === 'date') {\n            this.invalidDateTimeFormat = false;\n            if (getFormattedDate(this.datePipe, newVal, this._dateOptions.dateInputFormat) === this.displayValue) {\n               $(this.nativeElement).find('.display-input').val(this.displayValue);\n            }\n        }\n        // min date and max date validation in web.\n        // if invalid dates are entered, device is showing validation message.\n        this.minDateMaxDateValidationOnInput(newVal);\n        if (!newVal) {\n            // Set timevalue as 00:00:00 if we remove any one from hours/minutes/seconds field in timepicker after selecting date\n            if (this.bsDateValue && this.bsTimePicker && (this.bsTimePicker.hours === '' || this.bsTimePicker.minutes === '' || this.bsTimePicker.seconds === '')) {\n                this.bsDateValue = this.bsTimeValue = this.proxyModel = moment(this.bsDateValue).startOf('day').toDate();\n            } else {\n                this.bsDateValue = this.bsTimeValue = this.proxyModel = undefined;\n            }\n            this._debouncedOnChange(this.datavalue, {}, true);\n            return;\n        }\n        if (type === 'date') {\n            if (this.isDateOpen) {\n                this.toggleTimePicker(true);\n            }\n        }\n        this.proxyModel = newVal;\n        if (this.proxyModel) {\n            this.bsDateValue = this.bsTimeValue = this.proxyModel;\n        }\n        this._debouncedOnChange(this.datavalue, {}, true);\n        this.cdRef.detectChanges();\n    }\n\n    /**\n     * This is an internal method used to Prevent time picker close while changing time value\n     */\n    private preventTpClose($event) {\n        $event.stopImmediatePropagation();\n    }\n\n    /**\n     * This is an internal method used to toggle the dropdown of the date widget\n     */\n    private toggleDpDropdown($event) {\n        if ($event.type === 'click') {\n            this.invokeEventCallback('click', {$event: $event});\n        }\n        if ($event.target && $($event.target).is('input') && !(this.isDropDownDisplayEnabledOnInput(this.showdropdownon))) {\n            $event.stopPropagation();\n            return;\n        }\n        this.bsDatePickerDirective.toggle();\n        this.addBodyClickListener(this.bsDatePickerDirective.isOpen);\n    }\n\n    private addBodyClickListener(skipListener) {\n        if (!skipListener) {\n            return;\n        }\n        const bodyElement = document.querySelector('body');\n        setTimeout(() => {\n            const bsDateContainerElement = bodyElement.querySelector(`.${this.dateContainerCls}`);\n            this.deregisterDatepickerEventListener = addEventListenerOnElement(bodyElement, bsDateContainerElement, this.nativeElement, 'click', this.isDropDownDisplayEnabledOnInput(this.showdropdownon), () => {\n                this.bsDatePickerDirective.hide();\n            }, EVENT_LIFE.ONCE, true);\n        }, 350);\n    }\n\n    private hideDatepickerDropdown() {\n        this.isDateOpen = false;\n        this.invokeOnTouched();\n        this.bsDatePickerDirective.hide();\n        this.isEnterPressedOnDateInput = false;\n        if (this.deregisterDatepickerEventListener) {\n            this.deregisterDatepickerEventListener();\n        }\n    }\n\n    private onDateChange($event, isNativePicker) {\n        if (this.isEnterPressedOnDateInput) {\n            this.isEnterPressedOnDateInput = false;\n            return;\n        }\n        let newVal = $event.target.value.trim();\n        newVal = newVal ? getNativeDateObject(newVal) : undefined;\n        // datetime pattern validation\n        // if invalid pattern is entered, device is showing an error.\n        if (!this.formatValidation(newVal, $event.target.value, isNativePicker)) {\n            return;\n        }\n        // min date and max date validation in mobile view.\n        // if invalid dates are entered, device is showing an alert.\n        if (isNativePicker && this.minDateMaxDateValidationOnInput(newVal, $event, this.displayValue, isNativePicker)) {\n            return;\n        }\n        this.invalidDateTimeFormat = false;\n        this.onModelUpdate(newVal);\n    }\n\n    /**\n     * This is an internal method triggered when pressing key on the datetime input\n     */\n    private onDisplayKeydown(event) {\n        if (this.isDropDownDisplayEnabledOnInput(this.showdropdownon)) {\n            event.stopPropagation();\n            let newVal = event.target.value.trim();\n            newVal = newVal ? getNativeDateObject(newVal) : undefined;\n            const action = this.keyEventPlugin.constructor.getEventFullKey(event);\n            if (action === 'enter' || action === 'arrowdown') {\n                event.preventDefault();\n                const formattedDate = getFormattedDate(this.datePipe, newVal, this._dateOptions.dateInputFormat);\n                const inputVal = event.target.value.trim();\n                if (inputVal && this.datepattern === 'timestamp') {\n                    if (!_.isNaN(inputVal) && _.parseInt(inputVal) !== formattedDate) {\n                        this.invalidDateTimeFormat = true;\n                        this.invokeOnChange(this.datavalue, event, false);\n                    }\n                } else if (inputVal && inputVal !== formattedDate ) {\n                    this.invalidDateTimeFormat = true;\n                    this.invokeOnChange(this.datavalue, event, false);\n                } else {\n                    this.invalidDateTimeFormat = false;\n                    this.isEnterPressedOnDateInput = true;\n                    this.bsDatePickerDirective.bsValue =  newVal;\n                }\n                this.toggleDpDropdown(event);\n            } else {\n                this.hideDatepickerDropdown();\n                this.hideTimepickerDropdown();\n            }\n        } else {\n            this.hideDatepickerDropdown();\n            this.hideTimepickerDropdown();\n        }\n    }\n\n    private isValid(event) {\n        if (!event) {\n            const enteredDate = $(this.nativeElement).find('input').val();\n            const newVal = getNativeDateObject(enteredDate);\n            if (!this.formatValidation(newVal, enteredDate)) {\n                return;\n            }\n        }\n    }\n\n    // change and blur events are added from the template\n    protected handleEvent(node: HTMLElement, eventName: string, callback: Function, locals: any) {\n        if (!_.includes(['blur', 'focus', 'change', 'click'], eventName)) {\n            super.handleEvent(node, eventName, callback, locals);\n        }\n    }\n\n    onInputBlur($event) {\n        if (!$($event.relatedTarget).hasClass('current-date')) {\n            this.invokeOnTouched();\n            this.invokeEventCallback('blur', {$event});\n        }\n    }\n}\n","import { isMobileApp } from '@wm/core';\n\nimport { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nconst propsMap = new Map(\n    [\n        ['autocomplete', {value: false, ...PROP_BOOLEAN}],\n        ['captionalign', {value: 'left', ...PROP_STRING}],\n        ['captionposition', {value: 'left', ...PROP_STRING}],\n        ['captionsize', PROP_STRING],\n        ['captionwidth', {value: 'xs-12 sm-3 md-3 lg-3', ...PROP_STRING}],\n        ['class', PROP_STRING],\n        ['collapsible', PROP_BOOLEAN],\n        ['dataset', PROP_ANY],\n        ['datasource', PROP_STRING],\n        ['expanded', {value: true, ...PROP_BOOLEAN}],\n        ['formdatasource', PROP_STRING],\n        ['name', PROP_STRING],\n        ['show', {value: true, ...PROP_BOOLEAN}],\n        ['showindevice', {displayType: 'inline-block', value: 'all', ...PROP_STRING}],\n        ['subheading', PROP_STRING],\n        ['tabindex', {value: 0, ...PROP_NUMBER}],\n        ['title', PROP_STRING]\n    ]\n);\n\n\nexport const registerFormProps = () => {\n    if (isMobileApp()) {\n        propsMap.set('captionwidth', {value: 'xs-4 sm-4 md-4 lg-4', ...PROP_STRING});\n    }\n    const formMap = new Map(propsMap);\n    formMap.set('action', PROP_STRING);\n    formMap.set('defaultmode', {value: 'Edit', ...PROP_STRING});\n    formMap.set('metadata', PROP_STRING);\n    formMap.set('method', PROP_STRING);\n    formMap.set('postmessage', {value: 'Data posted successfully', ...PROP_STRING});\n    formMap.set('target', PROP_STRING);\n    formMap.set('enctype', PROP_STRING);\n    formMap.set('errormessage', {value: 'An error occured. Please try again!', ...PROP_STRING});\n    formMap.set('messagelayout', {value: 'Inline', ...PROP_STRING});\n    formMap.set('formdata', PROP_STRING);\n    formMap.set('novalidate', PROP_BOOLEAN);\n    formMap.set('validationtype', {value: 'default', ...PROP_STRING});\n    formMap.set('iconclass', PROP_STRING);\n\n    register(\n        'wm-form',\n        formMap\n    );\n};\n\nexport const registerLiveFormProps = () => {\n    if (isMobileApp()) {\n        propsMap.set('captionwidth', {value: 'xs-4 sm-4 md-4 lg-4', ...PROP_STRING});\n    }\n    const liveFormMap = new Map(propsMap);\n    liveFormMap.set('defaultmode', {value: 'View', ...PROP_STRING});\n    liveFormMap.set('formlayout', {value: 'inline', ...PROP_STRING});\n    liveFormMap.set('insertmessage', {value: 'Record added successfully', ...PROP_STRING});\n    liveFormMap.set('updatemessage', {value: 'Record updated successfully', ...PROP_STRING});\n    liveFormMap.set('deletemessage', {value: 'Record deleted successfully', ...PROP_STRING});\n    liveFormMap.set('errormessage', {value: 'An error occured. Please try again!', ...PROP_STRING});\n    liveFormMap.set('messagelayout', {value: 'Toaster', ...PROP_STRING});\n    liveFormMap.set('formdata', PROP_STRING);\n    liveFormMap.set('novalidate', PROP_BOOLEAN);\n    liveFormMap.set('validationtype', {value: 'default', ...PROP_STRING});\n    liveFormMap.set('iconclass', PROP_STRING);\n\n    register(\n        'wm-liveform',\n        liveFormMap\n    );\n};\n\nexport const registerLiveFilterProps = () => {\n    if (isMobileApp()) {\n        propsMap.set('captionwidth', {value: 'xs-4 sm-4 md-4 lg-4', ...PROP_STRING});\n    }\n    const liveFilterMap = new Map(propsMap);\n    liveFilterMap.set('autoupdate', PROP_BOOLEAN);\n    liveFilterMap.set('enableemptyfilter', {value: ' ', ...PROP_STRING});\n    liveFilterMap.set('pagesize', {value: 20, ...PROP_NUMBER});\n    liveFilterMap.set('iconclass', {value: 'wi wi-filter-list', ...PROP_STRING});\n\n    register(\n        'wm-livefilter',\n        liveFilterMap\n    );\n};\n","import { isNumberType, FormWidgetType, DataType, isMobileApp, isAndroid } from '@wm/core';\n\ndeclare const _;\n\nconst  VIEW_MODE_OPTIONS = {\n    DEFAULT : 'default',\n    LABEL : 'label'\n};\n\nexport const EDIT_MODE = {\n    QUICK_EDIT : 'quickedit',\n    INLINE : 'inline',\n    FORM : 'form',\n    DIALOG : 'dialog'\n};\n\n// Method to set the header config of the data table\nexport const setHeaderConfig = (headerConfig, config, field): void => {\n    _.forEach(headerConfig, cols => {\n        if (cols.isGroup) {\n            if (cols.field === field) {\n                cols.columns.push(config);\n            } else {\n                setHeaderConfig(cols.columns, config, field);\n            }\n        }\n    });\n};\n\nexport const setHeaderConfigForTable = (headerConfig, config, fieldName): void => {\n    if (fieldName) {\n        setHeaderConfig(headerConfig, config, fieldName);\n    } else {\n        headerConfig.push(config);\n    }\n};\n\nexport const getRowOperationsColumn = (): any => {\n    return {\n        'field'         : 'rowOperations',\n        'type'          : 'custom',\n        'displayName'   : 'Actions',\n        'width'         : '120px',\n        'readonly'      : true,\n        'sortable'      : false,\n        'searchable'    : false,\n        'resizable'     : false,\n        'selectable'    : false,\n        'show'          : true,\n        'operations'    : [],\n        'opConfig'      : {},\n        'pcDisplay'     : true,\n        'mobileDisplay' : true,\n        'include'       : true,\n        'isRowOperation': true\n    };\n};\n\n/**\n * Returns caption and widget bootstrap classes for the field\n */\nexport const getFieldLayoutConfig = (captionWidth, captionPosition, os): any => {\n    let captionCls = '',\n        widgetCls = '';\n\n    captionPosition = captionPosition || 'top';\n\n    if (captionPosition === 'top') {\n        if ((os && os === 'android') || !isMobileApp() || isAndroid()) { // Is android or not a mobile application\n            captionCls = widgetCls = 'col-xs-12';\n        } else if (isMobileApp()) { // Is a mobile application and not android\n            captionCls = 'col-xs-4';\n            widgetCls = 'col-xs-8';\n        }\n    } else if (captionWidth) {\n        // handling itemsperrow containing string of classes\n        _.forEach(_.split(captionWidth, ' '), function (cls) {\n            const keys = _.split(cls, '-'),\n                tier = keys[0];\n            let _captionWidth,\n                widgetWidth;\n            _captionWidth = parseInt(keys[1], 10);\n            widgetWidth  = 12 - _captionWidth;\n            widgetWidth  = widgetWidth <= 0 ? 12 : widgetWidth;\n            captionCls += ' ' + 'col-' + tier + '-' + _captionWidth;\n            widgetCls  += ' ' + 'col-' + tier + '-' + widgetWidth;\n        });\n    }\n    return {\n        'captionCls' : captionCls,\n        'widgetCls'  : widgetCls\n    };\n};\n\nexport const getDefaultViewModeWidget = widget => {\n    if (_.includes(['checkbox', 'toggle', 'rating'], widget)) {\n        return VIEW_MODE_OPTIONS.DEFAULT;\n    }\n    return VIEW_MODE_OPTIONS.LABEL;\n};\n\nconst parseBooleanValue = value => {\n    if (value === 'true') {\n        return true;\n    }\n    if (value === 'false') {\n        return false;\n    }\n    if (/^\\d+$/.test(value)) { // Check if the value is a string of number type like '123'\n        return +value;\n    }\n    return value;\n};\n\nexport const parseValueByType = (value, type, widget) => {\n    if (widget) {\n        if (widget === FormWidgetType.NUMBER || widget === FormWidgetType.SLIDER || widget === FormWidgetType.CURRENCY) {\n            return isNaN(Number(value)) ? null : Number(value);\n        }\n        if (widget === FormWidgetType.CHECKBOX || widget === FormWidgetType.TOGGLE) {\n            return parseBooleanValue(value);\n        }\n        return value;\n    }\n    if (isNumberType(type)) {\n        return isNaN(Number(value)) ? null : Number(value);\n    }\n    if (type === DataType.BOOLEAN) {\n        return parseBooleanValue(value);\n    }\n    return value;\n};\n\nconst fieldTypeWidgetTypeMap = {\n    'integer'    : ['number', 'text', 'select', 'checkboxset', 'radioset', 'rating', 'slider', 'currency', 'autocomplete', 'chips'],\n    'big_integer': ['number', 'text', 'select', 'checkboxset', 'radioset', 'rating', 'slider', 'currency', 'autocomplete', 'chips'],\n    'short'      : ['number', 'text', 'select', 'checkboxset', 'radioset', 'slider', 'currency', 'autocomplete', 'chips'],\n    'float'      : ['number', 'text', 'select', 'checkboxset', 'radioset', 'slider', 'currency', 'autocomplete', 'chips'],\n    'big_decimal': ['number', 'text', 'select', 'checkboxset', 'radioset', 'slider', 'currency', 'autocomplete', 'chips'],\n    'number'     : ['number', 'text', 'select', 'checkboxset', 'radioset', 'slider', 'currency', 'autocomplete', 'chips'],\n    'double'     : ['number', 'text', 'select', 'checkboxset', 'radioset', 'slider', 'currency', 'autocomplete', 'chips'],\n    'long'       : ['number', 'text', 'select', 'checkboxset', 'radioset', 'rating', 'slider', 'currency', 'autocomplete', 'chips'],\n    'byte'       : ['number', 'text', 'select', 'checkboxset', 'radioset', 'slider', 'currency', 'autocomplete', 'chips'],\n    'string'     : ['text', 'number',  'textarea', 'password', 'richtext', 'select', 'checkboxset', 'radioset', 'date', 'time', 'timestamp', 'switch', 'currency', 'autocomplete', 'chips', 'colorpicker'],\n    'character'  : ['text', 'number',  'textarea', 'password', 'richtext', 'select', 'checkboxset', 'radioset', 'switch', 'currency', 'autocomplete', 'chips'],\n    'text'       : ['text', 'number',  'textarea', 'password', 'richtext', 'select', 'checkboxset', 'radioset', 'date', 'time', 'timestamp', 'switch', 'currency', 'autocomplete', 'chips', 'colorpicker'],\n    'date'       : ['date', 'text', 'number', 'select', 'checkboxset', 'radioset', 'autocomplete', 'chips'],\n    'time'       : ['time', 'text', 'number', 'select', 'checkboxset', 'radioset', 'autocomplete', 'chips'],\n    'timestamp'  : ['timestamp', 'text', 'number', 'select', 'checkboxset', 'radioset', 'autocomplete', 'chips'],\n    'datetime'   : ['datetime', 'text', 'select', 'checkboxset', 'radioset', 'autocomplete', 'chips'],\n    'boolean'    : ['checkbox', 'radioset', 'toggle', 'select'],\n    'list'       : ['select', 'radioset', 'checkboxset', 'switch', 'autocomplete', 'chips'],\n    'clob'       : ['text', 'textarea', 'richtext'],\n    'blob'       : ['upload'],\n    'file'       : ['upload'],\n    'custom'     : ['text', 'number',  'textarea', 'password', 'checkbox', 'toggle', 'slider', 'richtext', 'currency', 'switch',\n        'select', 'checkboxset', 'radioset', 'date', 'time', 'timestamp', 'rating', 'datetime', 'autocomplete', 'chips', 'colorpicker']\n};\n\n// Get widgets applicable to the given type\nexport const getFieldTypeWidgetTypesMap = () => {\n    return fieldTypeWidgetTypeMap;\n};\n\n// Get filter widget applicable to the given type\nexport const getDataTableFilterWidget = type => {\n    let widget = fieldTypeWidgetTypeMap[type] && fieldTypeWidgetTypeMap[type][0];\n    if (type === DataType.BOOLEAN) {\n        widget = FormWidgetType.SELECT;\n    }\n    if (_.includes([FormWidgetType.TEXT, FormWidgetType.NUMBER, FormWidgetType.SELECT, FormWidgetType.AUTOCOMPLETE,\n            FormWidgetType.DATE, FormWidgetType.TIME, FormWidgetType.DATETIME], widget)) {\n        return widget;\n    }\n    return FormWidgetType.TEXT;\n};\n\n/**\n * @ngdoc function\n * @name wm.widgets.live.getEditModeWidget\n * @methodOf wm.widgets.live.LiveWidgetUtils\n * @function\n *\n * @description\n * This function returns the default widget for grid\n *\n * @param {object} colDef field definition\n */\nexport const getEditModeWidget = colDef => {\n    if (colDef['related-entity-name'] && colDef['primary-key']) {\n        return FormWidgetType.SELECT;\n    }\n    return (fieldTypeWidgetTypeMap[colDef.type] && fieldTypeWidgetTypeMap[colDef.type][0]) || FormWidgetType.TEXT;\n};\n\n/**\n * @ngdoc function\n * @name wm.widgets.live.LiveWidgetUtils#getDefaultValue\n * @methodOf wm.widgets.live.LiveWidgetUtils\n * @function\n *\n * @description\n * return the formatted default value\n *\n * @param {string} value value to be formatted\n * @param {string} type column type of the value\n */\nexport const getDefaultValue = (value, type, widget) => {\n    if (widget) {\n        if (widget === FormWidgetType.NUMBER || widget === FormWidgetType.SLIDER || widget === FormWidgetType.CURRENCY) {\n            return isNaN(Number(value)) ? null : Number(value);\n        }\n        if (widget === FormWidgetType.CHECKBOX || widget === FormWidgetType.TOGGLE) {\n            return parseBooleanValue(value);\n        }\n        return value;\n    }\n    if (isNumberType(type)) {\n        return isNaN(Number(value)) ? null : Number(value);\n    }\n    if (type === DataType.BOOLEAN) {\n        return parseBooleanValue(value);\n    }\n    return value;\n};\n","import { Component, Injector } from '@angular/core';\n\nimport { switchClass } from '@wm/core';\n\nimport { styler } from '../../framework/styler';\nimport { IWidgetConfig } from '../../framework/types';\nimport { StylableComponent } from '../base/stylable.component';\nimport { registerProps } from './message.props';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\n\nconst DEFAULT_CLS = 'alert app-message';\nconst WIDGET_CONFIG: IWidgetConfig = {widgetType: 'wm-message', hostClass: DEFAULT_CLS};\n\n@Component({\n    selector: '[wmMessage]',\n    templateUrl: './message.component.html',\n    providers: [\n        provideAsWidgetRef(MessageComponent)\n    ]\n})\nexport class MessageComponent extends StylableComponent {\n    static initializeProps = registerProps();\n    messageClass = '';\n    messageIconClass = '';\n    type = '';\n    caption: string;\n    public hideclose: any;\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n        styler(this.nativeElement, this);\n    }\n\n    public showMessage(caption?: string, type?: string) {\n        if (caption) {\n            this.caption = caption;\n        }\n        if (type) {\n            this.setWidgetProperty('type', type);\n        }\n        this.setWidgetProperty('show', true);\n    }\n\n    public hideMessage() {\n        this.setWidgetProperty('show', false);\n    }\n\n    public dismiss($event) {\n        this.hideMessage();\n        this.invokeEventCallback('close', {$event});\n    }\n\n    private onMessageTypeChange(nv: string) {\n        let msgCls, msgIconCls;\n        switch (nv) {\n            case 'success':\n                msgCls = 'alert-success';\n                msgIconCls = 'wi wi-done';\n                break;\n            case 'error':\n                msgCls = 'alert-danger';\n                msgIconCls = 'wi wi-cancel';\n                break;\n            case 'warn':  /*To support old projects with type as \"warn\"*/\n            case 'warning':\n                msgCls = 'alert-warning';\n                msgIconCls = 'wi wi-bell';\n                break;\n            case 'info':\n                msgCls = 'alert-info';\n                msgIconCls = 'wi wi-info';\n                break;\n            case 'loading':\n                msgCls = 'alert-info alert-loading';\n                msgIconCls = 'fa fa-spinner fa-spin';\n                break;\n        }\n        switchClass(this.nativeElement, msgCls, this.messageClass);\n        this.messageClass = msgCls;\n        this.messageIconClass = msgIconCls;\n    }\n\n    onPropertyChange(key, nv, ov?) {\n        if (key === 'type') {\n            this.onMessageTypeChange(nv);\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n}\n","import { PROP_BOOLEAN, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-message',\n        new Map(\n            [\n                ['caption', {value: 'Message', ...PROP_STRING}],\n                ['class', PROP_STRING],\n                ['hideclose', {value: false, ...PROP_BOOLEAN}],\n                ['name', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n                ['type', {value: 'success', ...PROP_STRING}],\n            ]\n        )\n    );\n};\n","import { Component, EventEmitter, Inject, Injector, Output, SkipSelf, AfterViewInit } from '@angular/core';\n\nimport { $appDigest, $watch, AppConstants, DataSource, debounce, isDefined, switchClass, triggerFn } from '@wm/core';\n\nimport { registerProps } from './pagination.props';\nimport { styler } from '../../framework/styler';\nimport { StylableComponent } from '../base/stylable.component';\nimport { getOrderByExpr, provideAsWidgetRef } from '../../../utils/widget-utils';\nimport { WidgetRef } from '../../framework/types';\nimport { DEBOUNCE_TIMES } from '../../framework/constants';\n\ndeclare const _;\n\nconst DEFAULT_CLS = 'app-datanavigator clearfix';\nconst WIDGET_CONFIG = {widgetType: 'wm-pagination', hostClass: DEFAULT_CLS};\n\nconst sizeClasses = {\n    'Pager': {\n        'small': 'pager-sm',\n        'large': 'pager-lg'\n    },\n    'Basic': {\n        'small': 'pagination-sm',\n        'large': 'pagination-lg'\n    },\n    'Classic': {\n        'small': 'pagination-sm',\n        'large': 'pagination-lg'\n    }\n};\n\n@Component({\n    selector: '[wmPagination]',\n    templateUrl: './pagination.component.html',\n    providers: [\n        provideAsWidgetRef(PaginationComponent)\n    ]\n})\nexport class PaginationComponent extends StylableComponent implements AfterViewInit {\n    static initializeProps = registerProps();\n    @Output() resultEmitter: EventEmitter<any> = new EventEmitter();\n    @Output() maxResultsEmitter: EventEmitter<any> = new EventEmitter();\n\n    datasource;\n    maxResults;\n    navigationsize;\n    showrecordcount;\n\n    navcontrols;\n    navigation;\n\n    boundarylinks;\n    directionlinks;\n\n    navigationClass;\n    dn = {\n        currentPage: 1\n    };\n\n    pageCount = 0;\n    isDisableNext = true;\n    isDisablePrevious = true;\n    isDisableFirst = true;\n    isDisableLast = true;\n    isDisableCurrent;\n    dataSize;\n    prevshowrecordcount;\n    isDisableCount;\n    firstRow;\n    result;\n    __fullData;\n    dataset;\n    options;\n    filterFields;\n    sortOptions;\n    binddataset;\n    pagination;\n\n    private _debouncedApplyDataset = debounce(() => this.widget.dataset = this.dataset, DEBOUNCE_TIMES.PAGINATION_DEBOUNCE_TIME);\n    private _debouncedPageChanged = debounce(event => {\n        const currentPage = event && event.page;\n        // Do not call goToPage if page has not changed\n        if (currentPage !== this.dn.currentPage) {\n            const inst = (this as any).parent || this;\n            this.dn.currentPage = currentPage;\n            inst.invokeEventCallback('paginationchange', {$event: undefined, $index: this.dn.currentPage});\n            this.goToPage();\n        }\n    }, DEBOUNCE_TIMES.PAGINATION_DEBOUNCE_TIME);\n\n    constructor(inj: Injector, @SkipSelf() @Inject(WidgetRef) public parent) {\n        super(inj, WIDGET_CONFIG);\n        styler(this.nativeElement, this);\n    }\n\n    setResult(result) {\n        // TODO: Emit event only if result is changed\n        this.result = result;\n        this.resultEmitter.emit(this.result);\n    }\n\n    // Update navigationClass based on navigation and navigationSize props\n    private updateNavSize() {\n        const sizeCls = sizeClasses[this.navcontrols];\n        if (sizeCls && this.navigationsize) {\n            this.navigationClass = sizeCls[this.navigationsize];\n        } else {\n            this.navigationClass = '';\n        }\n    }\n\n    // Function to reset the paging values to default.\n    resetPageNavigation() {\n        this.pageCount = 0;\n        this.dn.currentPage = 1;\n        this.dataSize = 0;\n    }\n\n    /*Function to calculate the paging values.*/\n    calculatePagingValues() {\n        this.pageCount = (this.dataSize > this.maxResults) ? (Math.ceil(this.dataSize / this.maxResults)) : (this.dataSize < 0 ? 0 : 1);\n        this.dn.currentPage = this.dn.currentPage || 1;\n    }\n\n    /*Function to set default values to the paging parameters*/\n    setDefaultPagingValues(dataSize, maxResults, currentPage) {\n        /*If neither 'dataSize' nor 'maxResults' is set, then set default values to the paging parameters.*/\n        if (!dataSize && !maxResults) {\n            this.pageCount = 1;\n            this.dn.currentPage = 1;\n            this.maxResults = dataSize;\n            this.dataSize = dataSize;\n        } else { /*Else, set the specified values and recalculate paging parameters.*/\n            this.maxResults = maxResults || this.maxResults;\n            this.dataSize = isDefined(dataSize) ? dataSize : this.dataSize;\n            this.dn.currentPage = currentPage || this.dn.currentPage;\n            this.calculatePagingValues();\n        }\n        this.maxResultsEmitter.emit(this.maxResults);\n    }\n\n    /*Function to check the dataSize and manipulate the navigator accordingly.*/\n    checkDataSize(dataSize, numberOfElements?, size?) {\n        /*If the dataSize is -1 or Integer.MAX_VALUE( which is 2147483647), then the total number of records is not known.\n         * Hence,\n         * 1. Hide the 'Total Record Count'.\n         * 2. Disable the 'GoToLastPage' link as the page number of the last page is not known.*/\n        if (dataSize === -1 || dataSize === AppConstants.INT_MAX_VALUE) {\n            this.prevshowrecordcount = this.showrecordcount;\n            this.isDisableLast = true;\n            this.isDisableCount = true;\n            this.showrecordcount = false;\n            // If number of records in current page is less than the max records size, this is the last page. So disable next button.\n            if (numberOfElements < size) {\n                this.isDisableNext = true;\n            }\n        } else {\n            this.isDisableCount = false;\n            this.showrecordcount = this.prevshowrecordcount || this.showrecordcount;\n        }\n    }\n\n    /*Function to disable navigation based on the current and total pages.*/\n    disableNavigation() {\n        const isCurrentPageFirst = (this.dn.currentPage === 1),\n            isCurrentPageLast = (this.dn.currentPage === this.pageCount);\n        this.isDisableFirst = this.isDisablePrevious = isCurrentPageFirst;\n        this.isDisableNext = this.isDisableLast = isCurrentPageLast;\n        this.isDisableCurrent = isCurrentPageFirst && isCurrentPageLast;\n    }\n\n    /*Function to check if the variable bound to the data-navigator has paging.*/\n    isDataSourceHasPaging() {\n        return this.datasource && this.datasource.execute(DataSource.Operation.IS_PAGEABLE);\n    }\n\n    // Set the result for client side pagination\n    setNonPageableData(newVal) {\n        let dataSize,\n            maxResults,\n            currentPage,\n            startIndex;\n        dataSize = _.isArray(newVal) ? newVal.length : (_.isEmpty(newVal) ? 0 : 1);\n        maxResults = (this.options && this.options.maxResults) || dataSize;\n\n        // For static variable, keep the current page. For other variables without pagination reset the page to 1\n        if (this.datasource && this.datasource.execute(DataSource.Operation.IS_API_AWARE)) {\n            currentPage = 1;\n        } else {\n            currentPage = this.dn.currentPage || 1;\n        }\n\n        this.setDefaultPagingValues(dataSize, maxResults, currentPage);\n        this.disableNavigation();\n\n        startIndex = (this.dn.currentPage - 1) * this.maxResults;\n        this.setResult(_.isArray(newVal) ? newVal.slice(startIndex, startIndex + this.maxResults) : newVal);\n    }\n\n    /*Function to set the values needed for pagination*/\n    private setPagingValues(newVal) {\n        let dataSize,\n            maxResults,\n            currentPage,\n            dataSource;\n        let variableOptions: any = {};\n        // Store the data in __fullData. This is used for client side searching witvah out modifying the actual dataset.\n        this.__fullData = newVal;\n        /*Check for sanity*/\n        if (this.binddataset) {\n            dataSource = this.datasource || {};\n            variableOptions = dataSource._options || {};\n            /*Check for number of elements in the data set*/\n            if (newVal) {\n                if (this.isDataSourceHasPaging()) {\n                    this.pagination = this.datasource.execute(DataSource.Operation.GET_PAGING_OPTIONS) || {};\n                    // If \"filterFields\" and \"sortOptions\" have been set, then set them so that the filters can be retained while fetching data upon page navigation.\n                    this.filterFields = variableOptions.filterFields || {};\n                    this.sortOptions = variableOptions.orderBy ||\n                        (_.isArray(this.pagination.sort) ? getOrderByExpr(this.pagination.sort) : '');\n                    dataSize = this.pagination.totalElements;\n                    maxResults = this.pagination.size;\n                    if (this.pagination.numberOfElements > 0) {\n                        if (isDefined(this.pagination.number)) { // number is page number received from backend\n                            this.dn.currentPage = this.pagination.number + 1;\n                        }\n                        currentPage = this.dn.currentPage || 1;\n                    } else {\n                        currentPage = 1;\n                    }\n                    /* Sending pageCount undefined to calculate it again for query.*/\n                    this.setDefaultPagingValues(dataSize, maxResults, currentPage);\n                    this.disableNavigation();\n                    this.checkDataSize(dataSize, this.pagination.numberOfElements, this.pagination.size);\n                    this.setResult(newVal);\n                } else if (!_.isString(newVal)) {\n                    this.setNonPageableData(newVal);\n                }\n            } else {\n                this.setResult(newVal);\n                this.resetPageNavigation();\n            }\n        } else {\n            if (newVal && !_.isString(newVal)) {\n                this.setNonPageableData(newVal);\n            }\n        }\n    }\n\n    /*Function to check if the current page is the first page*/\n    isFirstPage() {\n        return (this.dn.currentPage === 1 || !this.dn.currentPage);\n    }\n\n    /*Function to check if the current page is the last page*/\n    isLastPage() {\n        return (this.dn.currentPage === this.pageCount);\n    }\n\n    /*Function to navigate to the last page*/\n    goToLastPage(isRefresh, event, callback) {\n        if (!this.isLastPage()) {\n            this.dn.currentPage = this.pageCount;\n            this.goToPage(event, callback);\n        } else if (isRefresh) {\n            this.goToPage(event, callback);\n        }\n    }\n\n    /*Function to navigate to the first page*/\n    goToFirstPage(isRefresh, event, callback) {\n        if (!this.isFirstPage()) {\n            this.dn.currentPage = 1;\n            this.goToPage(event, callback);\n        } else if (isRefresh) {\n            this.goToPage(event, callback);\n        }\n    }\n\n    /*Function to navigate to the current page*/\n    goToPage(event?, callback?) {\n        this.firstRow = (this.dn.currentPage - 1) * this.maxResults;\n        this.getPageData(event, callback);\n    }\n\n    /*Function to be invoked after the data of the page has been fetched.*/\n    onPageDataReady(event, data, callback) {\n        this.disableNavigation();\n        this.invokeSetRecord(event, data);\n        triggerFn(callback);\n    }\n\n    /*Function to get data for the current page*/\n    getPageData(event, callback) {\n        let data,\n            startIndex;\n\n        if (this.isDataSourceHasPaging()) {\n            this.datasource.execute(DataSource.Operation.LIST_RECORDS, {\n                'page': this.dn.currentPage,\n                'filterFields': this.filterFields,\n                'orderBy': this.sortOptions,\n                'matchMode': 'anywhereignorecase'\n            }).then(response => {\n                this.onPageDataReady(event, response && response.data, callback);\n                $appDigest();\n            }, error => {\n                // If error is undefined, do not show any message as this may be discarded request\n                if (error) {\n                    // TODO: Handle Error\n                    // wmToaster.show('error', 'ERROR', 'Unable to get data of page -' + this.dn.currentPage + ':' + error);\n                }\n            });\n        } else {\n            startIndex = (this.dn.currentPage - 1) * this.maxResults;\n            data = _.isArray(this.__fullData) ? this.__fullData.slice(startIndex, startIndex + this.maxResults) : this.__fullData;\n            this.setResult(data);\n            this.onPageDataReady(event, data, callback);\n        }\n    }\n\n    invokeSetRecord(event, data) {\n        // Trigger the event handler if exists.\n        const pageInfo = {\n            currentPage: this.dn.currentPage,\n            size: this.maxResults,\n            totalElements: this.dataSize,\n            totalPages: this.pageCount\n        };\n        if (this.parent) {\n            this.parent.invokeEventCallback('setrecord', {$event: event, $data: data, $index: this.dn.currentPage, pageInfo, data});\n        } else {\n            this.invokeEventCallback('setrecord', {$event: event, $data: data, $index: this.dn.currentPage, pageInfo, data});\n        }\n    }\n\n    /*Function to validate the page input.\n     In case of invalid input, navigate to the appropriate page; also return false.\n     In case of valid input, return true.*/\n    validateCurrentPage(event, callback?) {\n        /*If the value entered is greater than the last page number or invalid value, then highlighting the field showing error.*/\n        if ( event && (isNaN(this.dn.currentPage) || this.dn.currentPage <= 0 || (this.pageCount && (this.dn.currentPage > this.pageCount || _.isNull(this.dn.currentPage))))) {\n            $(event.target).closest('a').addClass('ng-invalid');\n            return false;\n        }\n        return true;\n    }\n\n    onModelChange(event) {\n        if (!this.validateCurrentPage(event)) {\n            return;\n        }\n        this.goToPage(event);\n    }\n\n    onKeyDown(event) {\n        const targetEle = $(event.target).closest('a');\n        if (event.code === 'KeyE') {\n            targetEle.addClass('ng-invalid');\n            return false;\n        }\n        targetEle.removeClass('ng-invalid');\n        return true;\n    }\n\n    pageChanged(event: any) {\n       this._debouncedPageChanged(event);\n    }\n\n    /*Function to navigate to the respective pages.*/\n    navigatePage(index, event, isRefresh, callback) {\n        this.invokeEventCallback('paginationchange', {$event: undefined, $index: this.dn.currentPage});\n\n        // Convert the current page to a valid page number.\n        this.dn.currentPage = +this.dn.currentPage;\n\n        switch (index) {\n            case 'first':\n                this.goToFirstPage(isRefresh, event, callback);\n                return;\n            case 'prev':\n                /*Return if already on the first page.*/\n                if (this.isFirstPage() || !this.validateCurrentPage(event, callback)) {\n                    return;\n                }\n                /*Decrement the current page by 1.*/\n                this.dn.currentPage -= 1;\n                break;\n            case 'next':\n                /*Return if already on the last page.*/\n                if (this.isLastPage() || !this.validateCurrentPage(event, callback)) {\n                    return;\n                }\n                /*Increment the current page by 1.*/\n                this.dn.currentPage += 1;\n                break;\n            case 'last':\n                this.goToLastPage(isRefresh, event, callback);\n                return;\n            default:\n                break;\n        }\n\n        /*Navigate to the current page.*/\n        this.goToPage(event, callback);\n    }\n\n    setBindDataSet(binddataset, parent, dataSource, dataset?, binddatasource?) {\n        const parts = binddataset.split('.');\n        let bindPagingOptions;\n        if (parts[0] === 'Variables' || parts[0] === 'Widgets') {\n            bindPagingOptions = `${parts[0]}.${parts[1]}.pagination`;\n        }\n        if (!binddatasource && dataset) {\n            this.dataset = dataset;\n            this._debouncedApplyDataset();\n            return;\n        }\n        this.binddataset = binddataset;\n        setTimeout(() => {\n            this.registerDestroyListener(\n                $watch(\n                    binddataset,\n                    parent,\n                    {},\n                    nv => {\n                        this.dataset = nv;\n                        this._debouncedApplyDataset();\n                    }\n                )\n            );\n\n            // Register a watch on paging options. Call dataset property change handler even if paging options changes to reflect pagination state\n            if (!bindPagingOptions) {\n                return;\n            }\n            this.registerDestroyListener(\n                $watch(\n                    bindPagingOptions,\n                    parent,\n                    {},\n                    () => this._debouncedApplyDataset()\n                )\n            );\n        });\n        this.datasource = dataSource;\n    }\n\n    // Set the datasource of pagination from the parent widget\n    setDataSource(dataSource) {\n        this.datasource = dataSource;\n    }\n\n    onPropertyChange(key: string, nv, ov) {\n        if (key === 'dataset') {\n            let data;\n            if (this.parent && this.parent.onDataNavigatorDataSetChange) {\n                data = this.parent.onDataNavigatorDataSetChange(nv);\n            } else {\n                data = nv;\n            }\n            this.setPagingValues(data);\n        } else if (key === 'navigation') {\n            if (nv === 'Advanced') { // Support for older projects where navigation type was advanced instead of clasic\n                this.navigation = 'Classic';\n            }\n            this.updateNavSize();\n            this.navcontrols = nv;\n        } else if (key === 'navigationsize') {\n            this.updateNavSize();\n        } else if (key === 'navigationalign') {\n            switchClass(this.nativeElement, `text-${nv}`, `text-${ov}`);\n        } else if (key === 'maxResults') {\n            this.setPagingValues(this.dataset);\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n\n    ngAfterViewInit() {\n        const paginationElem =  this.nativeElement as HTMLElement;\n        paginationElem.onclick = (event) => {\n            event.stopPropagation();\n        };\n    }\n}\n","import { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-pagination',\n        new Map(\n            [\n                ['boundarylinks', {value: false, ...PROP_BOOLEAN}],\n                ['class', PROP_STRING],\n                ['dataset', PROP_ANY],\n                ['directionlinks', {value: true, ...PROP_BOOLEAN}],\n                ['forceellipses', {value: true, ...PROP_BOOLEAN}],\n                ['maxResults', PROP_NUMBER],\n                ['maxsize', {value: 5, ...PROP_NUMBER}],\n                ['name', PROP_STRING],\n                ['navigation', {value: 'Basic', ...PROP_STRING}],\n                ['navigationalign', {value: 'left', ...PROP_STRING}],\n                ['navigationsize', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n                ['showrecordcount', PROP_BOOLEAN],\n                ['tabindex', {value: 0, ...PROP_NUMBER}]\n            ]\n        )\n    );\n};\n","import { AfterViewInit, ContentChildren, Directive, ElementRef, HostBinding, HostListener, Injector, Input, OnInit, QueryList } from '@angular/core';\nimport { NgForOfContext } from '@angular/common';\n\nimport { Observable, Subject } from 'rxjs';\n\nimport { $invokeWatchers, $watch, App } from '@wm/core';\n\nimport { ListComponent } from './list.component';\nimport { WidgetRef } from '../../framework/types';\n\ndeclare const $, _;\n\n@Directive({\n    selector: '[wmListItem]',\n    exportAs: 'listItemRef'\n})\nexport class ListItemDirective implements OnInit, AfterViewInit {\n\n    public item;\n    public context;\n    public destroy: Subject<any> = new Subject();\n    public destroy$: Observable<any> = this.destroy.asObservable();\n    public nativeElement: HTMLElement;\n    public readonly listComponent: ListComponent;\n\n    private itemClass = '';\n    private _currentItemWidgets = {};\n\n    @HostBinding('class.active') isActive = false;\n    @HostBinding('class.disable-item') disableItem = false;\n\n    @HostListener('focus')\n    onFocus() {\n        // maintains which element is focused/selected most recently.\n        this.listComponent.lastSelectedItem = this;\n    }\n\n    get $index() {\n        return this.context.index;\n    }\n\n    get $even() {\n        return this.context.even;\n    }\n\n    get $odd() {\n        return this.context.odd;\n    }\n\n    get $first() {\n        return this.context.first;\n    }\n\n    get $last() {\n        return this.context.last;\n    }\n\n    get currentItemWidgets () {\n        const componentElements = Array.from(this.nativeElement.querySelectorAll('[widget-id]'));\n        return Object.assign(this._currentItemWidgets, componentElements.reduce((result, comp: any) => {\n            result[comp.widget.name] = comp.widget;\n            return result;\n        }, {}));\n    }\n\n    @Input() set wmListItem(val) {\n        this.item = val;\n    }\n\n    constructor(private inj: Injector, elRef: ElementRef, private app: App) {\n        this.nativeElement = elRef.nativeElement;\n        this.listComponent = (<ListComponent>(<any>inj).view.component);\n        this.context = (<NgForOfContext<ListItemDirective>>(<any>inj).view.context);\n        this.itemClassWatcher(this.listComponent);\n        this.disableItemWatcher(this.listComponent);\n        $(this.nativeElement).data('listItemContext', this);\n    }\n\n    private registerWatch(expression: string, callback: Function) {\n        // Removing ngFor context as the same properties are availble on listitem scope.\n        // passing viewparent context for accessing varibales and widgets.\n        this.destroy$.subscribe($watch(expression, (this.listComponent as any).viewParent, this, callback));\n    }\n\n    private itemClassWatcher(listComponent: ListComponent) {\n        if (listComponent.binditemclass) {\n            this.registerWatch(listComponent.binditemclass, nv => this.itemClass = nv || '');\n        } else {\n            this.itemClass = listComponent.itemclass;\n        }\n    }\n\n    private disableItemWatcher($list: ListComponent) {\n        if ($list.binddisableitem) {\n            this.registerWatch($list.binddisableitem, nv => this.disableItem = nv || false);\n        } else {\n            this.disableItem = $list.disableitem || false;\n        }\n    }\n\n    private triggerWMEvent(eventName) {\n        $invokeWatchers(true);\n        // If we have multiselect for the livelist(List with form template), in run mode deleting a record is getting failed. Becuase the selecteditem will be array of objects. So consider the last object.\n        const row = this.listComponent.multiselect ? _.last(this.listComponent.selecteditem) : this.listComponent.selecteditem;\n        this.app.notify('wm-event', {eventName, widgetName: this.listComponent.name, row: row});\n    }\n\n    private setUpCUDHandlers() {\n        const $editItem = this.nativeElement.querySelector('.edit-list-item');\n        const $deleteItem = this.nativeElement.querySelector('.delete-list-item');\n\n        if ($editItem) {\n            // Triggered on click of edit action\n            $editItem.addEventListener('click', evt => {\n                this.triggerWMEvent('update');\n            });\n        }\n\n        if ($deleteItem) {\n            // Triggered on click of delete action\n            $deleteItem.addEventListener('click', evt => {\n                this.triggerWMEvent('delete');\n            });\n        }\n    }\n\n\n    ngOnInit() {\n        if (this.listComponent.mouseEnterCB) {\n            this.nativeElement.addEventListener('mouseenter', ($event) => {\n                this.listComponent.invokeEventCallback('mouseenter', {widget: this, $event});\n            });\n        }\n        if (this.listComponent.mouseLeaveCB) {\n            this.nativeElement.addEventListener('mouseleave', ($event) => {\n                this.listComponent.invokeEventCallback('mouseleave', {widget: this, $event});\n            });\n        }\n    }\n\n    ngAfterViewInit() {\n        this.setUpCUDHandlers();\n    }\n}\n","import { QueryList } from '@angular/core';\nimport { Subscription } from 'rxjs';\n\nimport { SwipeAnimation } from '@swipey';\n\nimport { ListComponent } from './list.component';\nimport { ButtonComponent } from '../button/button.component';\n\ndeclare  const _, $;\n\nexport class ListAnimator extends SwipeAnimation {\n    private $el: JQuery<HTMLElement>;\n    private li: JQuery<HTMLElement>;\n    private limit: number;\n    private transitionProportions: any;\n    private rightChildrenCount: number;\n    private leftChildrenCount: number;\n    private position: string;\n    private actionPanel: JQuery<HTMLElement>;\n    private actionItems: QueryList<ButtonComponent>;\n    public $btnSubscription: Subscription;\n\n    constructor(private list: ListComponent) {\n        super();\n        this.$el = $(this.list.getNativeElement()).find('ul.app-livelist-container:first');\n\n        this.leftChildrenCount = this.$el.find('>.app-list-item-left-action-panel > button:visible').length;\n        this.rightChildrenCount = this.$el.find('>.app-list-item-right-action-panel > button:visible').length;\n\n        // when there are no children in both the templates then do not apply swipeAnimation;\n        if (!this.leftChildrenCount && !this.rightChildrenCount) {\n            return;\n        }\n\n        // initialise swipe animation on the list component.\n        this.init(this.$el);\n\n        // retrieves all the button components which are placed outside the listTemplate.\n        this.$btnSubscription = this.list.btnComponents.changes.subscribe(items => this.actionItems = items);\n    }\n\n    // This method sets the css for left or right action panels based on the template. Appends the actionTemplate before li.\n    private createActionPanel(li: JQuery<HTMLElement>, actionPanelTemplate: JQuery<HTMLElement>): JQuery<HTMLElement> {\n        actionPanelTemplate.css({\n            width: li.outerWidth() + 'px',\n            height: li.outerHeight() + 'px',\n            marginBottom: -1 * li.outerHeight() + 'px',\n            float: 'left',\n            padding: 0\n        });\n\n        return actionPanelTemplate.insertBefore(li);\n    }\n\n    // Returns the total width occupied by all the children inside the element\n    private computeTotalChildrenWidth($ele: JQuery<HTMLElement>): number {\n        return _.reduce($ele.children(), (totalWidth, el) => {\n            return totalWidth + $(el).outerWidth();\n        }, 0);\n    }\n\n    // Returns amount of transition to be applied on element when swiped left or right\n    private computeTransitionProportions($ele: JQuery<HTMLElement>): number {\n        const totalWidth = this.computeTotalChildrenWidth($ele);\n        const reverse = this.position === 'right';\n        let d = 0;\n        return _.map($ele.children(), e => {\n            const f = (totalWidth - d) / totalWidth;\n            d += $(e).outerWidth();\n            return reverse ? f : (d / totalWidth);\n        });\n    }\n\n    // Resets the transform applied on the element.\n    private resetElement(el: JQuery<HTMLElement>): void {\n        if (el) {\n            el.css({\n                transform: 'none',\n                transition: 'none'\n            });\n        }\n    }\n\n    private resetState(): void {\n        this.resetElement(this.li);\n        this.resetElement(this.actionPanel);\n        if (this.actionPanel) {\n            this.actionPanel = null;\n        }\n    }\n\n    // Returns the target button (child element) inside the left and right actionPanels.\n    private getChildActionElement(actionTemplate): JQuery<HTMLElement> {\n        if (actionTemplate.children().length) {\n            if (this.position === 'left') {\n                return actionTemplate.children().first();\n            }\n            return actionTemplate.children().last();\n        }\n    }\n\n    // create the actionPanels and set the background-color for remaining panel as that of first child element\n    // calculates the children's width and its transition proportionates.\n    private initActionPanel(actionTemplate: JQuery<HTMLElement>): void {\n        this.actionPanel = this.createActionPanel(this.li, actionTemplate);\n        this.actionPanel.css({\n            backgroundColor: this.getChildActionElement(this.actionPanel).css('background-color')\n        });\n        this.limit = this.computeTotalChildrenWidth(this.actionPanel);\n        this.transitionProportions = this.computeTransitionProportions(this.actionPanel);\n    }\n\n    public bounds(e?: any, $d?: number): any {\n        const target = $(e.target).closest('li');\n        // default bounds when action template markup is not available.\n        let bounds: {} = {\n            strictUpper: true,\n            strictLower: true,\n            lower: 0,\n            center: 0,\n            upper: 0\n        };\n        // apply swipe animation only on list items having \"app-list-item\" class.\n        if (!target.hasClass('app-list-item')) {\n            return bounds;\n        }\n        if (!this.li || this.li[0] !== target[0]) {\n            let selector =  $d > 0 ? '.app-list-item-left-action-panel' : '.app-list-item-right-action-panel';\n            let actionTemplate = this.$el.find('>' + selector);\n\n            // when groupby is set select the action panel from the list group items.\n            if (!actionTemplate.length && this.list.groupby) {\n                selector = 'li > ul.list-group >' + selector;\n                actionTemplate = this.$el.find('>' + selector);\n            }\n\n            // check for children visiblity. If children are visible then initiate the action panel.\n            if (!actionTemplate.length || !actionTemplate.find('button:visible').length) {\n                return bounds;\n            }\n\n            this.resetState();\n            this.li = target;\n\n            this.position = actionTemplate.attr('position');\n            this.initActionPanel(actionTemplate);\n\n            if ($d > 0) {\n                // bounds while swiping from right to left to open left action panel. It can be moved upto limit value (Upper bound).\n                bounds = {\n                    strictUpper: false,\n                    lower: 0,\n                    center: 0,\n                    upper: this.limit\n                };\n            } else {\n                // bounds while swiping from left to right to open right action panel. It can be moved in reverse direction with -limit value (lower bound).\n                bounds = {\n                    strictLower: false,\n                    lower: -this.limit,\n                    center: 0,\n                    upper: 0\n                };\n            }\n        } else if (this.position === 'left') {\n            // when left action panel is visible (i.e. center at limit value) then this can be moved by distance (limit) in reverse direction to close the view.\n            bounds = {\n                strictUpper: false,\n                lower: -this.limit,\n                center: this.limit\n            };\n        } else if (this.position === 'right') {\n            // when right action panel is visible (i.e. center at -limit value) then this can be moved by distance (limit) to close the view.\n            bounds = {\n                center: -this.limit,\n                upper: this.limit,\n                strictLower: false\n            };\n        }\n        return bounds;\n    }\n\n    public context(): any {\n        return {\n            computeActionTransition: (index: number, $d: number): number => {\n                const sign = $d > 0 ? 1 : -1;\n\n                if (sign * $d > this.limit) {\n                    // once the distance swiped is beyond the limit, then calculate the proportionate distance moved after the limit value.\n                    return ($d - sign * this.limit) + (this.transitionProportions[index] * sign * this.limit);\n                }\n                return this.transitionProportions[index] * $d;\n            }\n        };\n    }\n\n    public animation(): any {\n        return [{\n            target: () => this.li,\n            css: {\n                transform: 'translate3d(${{$D + $d}}px, 0, 0)'\n            }\n        }, { // styles to be applied on the child elements of action panel\n            target: () => (this.actionPanel && this.actionPanel.children()),\n            css: {\n                transform: 'translate3d(${{computeActionTransition($i, $D + $d)}}px, 0, 0)'\n            }\n        }];\n    }\n\n    // Triggers full swipe event on the target element.\n    public invokeFullSwipeEvt($event: Event): void {\n        let target, actions, index;\n        // Check if button are visible or not, invoke the tap event of the last button which is visible.\n        if (this.position === 'left') {\n            actions = this.actionItems.filter(btn => {\n                return btn.getAttr('swipe-position') === 'left' && btn.$element.is(':visible');\n            });\n            index = 0;\n        } else {\n            actions = this.actionItems.filter(btn => {\n                return btn.getAttr('swipe-position') === 'right' && btn.$element.is(':visible');\n            });\n            index = actions.length - 1;\n        }\n        target = actions[index];\n        if (target && target.hasEventCallback('tap')) {\n            target.invokeEventCallback('tap', {$event});\n        }\n        this.resetState();\n        this.li = null;\n    }\n\n    // Called when swipeEnd is triggered. d contains the total distance covered by the element until touchEnd.\n    public onAnimation($event: Event, d: number): void {\n        // set the selecteditem on the list component on swipe.\n        this.list.triggerListItemSelection(this.li, $event);\n        if (this.actionPanel && this.actionPanel.attr('enablefullswipe') === 'true') {\n            const sign = d > 0 ? 1 : -1;\n            const $el = this.getChildActionElement(this.actionPanel);\n            if ($el) {\n                const index = this.position === 'right' ? this.rightChildrenCount - 1 : 0;\n                // proportionate amount of distance covered by the target element.\n                const distPercentage = this.transitionProportions[index] * sign * d * 100 / (this.li.outerWidth() - this.limit + $el.width());\n\n                // If distance travelled by the target button element is more than 50% of the list item width then invoke the fullswipe.\n                if (distPercentage > 50) {\n                    // invoke fullswipe event\n                    this.invokeFullSwipeEvt($event);\n                }\n            }\n        }\n    }\n\n    public onLower(): void {\n        if (this.position === 'left') {\n            this.resetState();\n            this.li = null;\n        }\n    }\n\n    public onUpper(): void {\n        if (this.position === 'right') {\n            this.resetState();\n            this.li = null;\n        }\n    }\n\n    public threshold(): number {\n        return 10;\n    }\n}\n","import { AfterViewInit, Attribute, ChangeDetectorRef, Component, ContentChild, ContentChildren, ElementRef, Injector, NgZone, OnDestroy, OnInit, QueryList, TemplateRef, ViewChild, ViewChildren } from '@angular/core';\n\nimport { Subscription } from 'rxjs';\n\nimport { $appDigest, App, AppDefaults, DataSource, getClonedObject, isDataSourceEqual, isDefined, isMobile, isMobileApp, isNumber, isObject, noop, switchClass } from '@wm/core';\n\nimport { APPLY_STYLES_TYPE, styler } from '../../framework/styler';\nimport { ToDatePipe } from '../../../pipes/custom-pipes';\nimport { StylableComponent } from '../base/stylable.component';\nimport { registerProps } from './list.props';\nimport { NAVIGATION_TYPE, provideAsWidgetRef } from '../../../utils/widget-utils';\nimport { PaginationComponent } from '../pagination/pagination.component';\nimport { ListItemDirective } from './list-item.directive';\nimport { ListAnimator } from './list.animator';\nimport { configureDnD, getOrderedDataset, groupData, handleHeaderClick, toggleAllHeaders } from '../../../utils/form-utils';\nimport { WidgetRef } from '../../framework/types';\nimport { ButtonComponent } from '../button/button.component';\nimport { DEBOUNCE_TIMES } from '../../framework/constants';\n\ndeclare const _;\ndeclare const $;\n\nconst DEFAULT_CLS = 'app-livelist app-panel';\nconst WIDGET_CONFIG = {widgetType: 'wm-list', hostClass: DEFAULT_CLS};\n\n@Component({\n    selector: 'div[wmList]',\n    templateUrl: './list.component.html',\n    providers: [\n        provideAsWidgetRef(ListComponent)\n    ]\n})\nexport class ListComponent extends StylableComponent implements OnInit, AfterViewInit, OnDestroy {\n    static initializeProps = registerProps();\n\n    @ContentChild('listTemplate') listTemplate: TemplateRef<ElementRef>;\n\n    @ContentChild('listLeftActionTemplate') listLeftActionTemplate:  TemplateRef<ElementRef>;\n    @ContentChild('listRightActionTemplate') listRightActionTemplate:  TemplateRef<ElementRef>;\n    @ContentChildren(ButtonComponent) btnComponents;\n\n    @ViewChild(PaginationComponent) dataNavigator;\n    @ViewChildren(ListItemDirective) listItems: QueryList<ListItemDirective>;\n\n    private itemsPerRowClass: string;\n    private firstSelectedItem: ListItemDirective;\n    private navigatorMaxResultWatch: Subscription;\n    private navigatorResultWatch: Subscription;\n    private navControls: string;\n    private onDemandLoad: boolean;\n    private _items: Array<any>;\n    private dataNavigatorWatched: boolean;\n    private datasource: any;\n    private showNavigation: boolean;\n    public noDataFound: boolean;\n    private debouncedFetchNextDatasetOnScroll: Function;\n    private reorderProps: any;\n    private app: any;\n    private appDefaults: any;\n    private ngZone: NgZone;\n\n    public lastSelectedItem: ListItemDirective;\n    public fieldDefs: Array<any>;\n    public disableitem;\n    public navigation: string;\n    public navigationalign: string;\n    public pagesize: number;\n    public dataset: any;\n    public multiselect: boolean;\n    public selectfirstitem: boolean;\n    public orderby: string;\n    public loadingicon: string;\n    public paginationclass: string;\n    public ondemandmessage: string;\n    public loadingdatamsg: string;\n    public selectionlimit: number;\n    public infScroll: boolean;\n    public enablereorder: boolean;\n    public itemsperrow: string;\n    public itemclass: string;\n    public selectedItemWidgets: Array<WidgetRef> | WidgetRef;\n    public variableInflight;\n    public name;\n\n    public handleHeaderClick: Function;\n    public toggleAllHeaders: void;\n    public groupby: string;\n    public collapsible: string;\n    public datePipe: ToDatePipe;\n    public binditemclass: string;\n    public binddisableitem: string;\n    public binddataset: string;\n    private binddatasource: string;\n    public mouseEnterCB: string;\n    public mouseLeaveCB: string;\n\n    private match: string;\n    private dateformat: string;\n    private groupedData: any;\n    private cdRef: ChangeDetectorRef;\n    private promiseResolverFn: Function;\n    private propsInitPromise: Promise<any>;\n    private $ulEle: any;\n    private _listAnimator: ListAnimator;\n    public pulltorefresh: boolean;\n    private cancelSubscription: Function;\n\n    public title: string;\n    public subheading: string;\n    public iconclass: string;\n    public listclass: any;\n    private isDataChanged: boolean;\n\n    public get selecteditem() {\n        if (this.multiselect) {\n            return getClonedObject(this._items);\n        }\n        if (_.isEmpty(this._items)) {\n            return {};\n        }\n        return getClonedObject(this._items[0]);\n    }\n\n    /**\n     * Returns list of widgets present on list item by considering name and index of the widget.\n     * If we did'nt pass index, it returns array of all the widgets which are matching to widget name\n     * @param widgteName: Name of the widget\n     * @param index: Index of the widget\n     */\n    public getWidgets(widgteName: string, index: number) {\n        let $target;\n        const retVal = [];\n\n        if (!widgteName) {\n            return;\n        }\n\n        if (!isDefined(index)) {\n            _.forEach(this.listItems.toArray(), (el) => {\n                $target = _.get(el.currentItemWidgets, widgteName);\n                if ($target) {\n                    retVal.push($target);\n                }\n            });\n\n            return retVal;\n        }\n        index = +index || 0;\n\n        $target = _.get(this.listItems.toArray(), index);\n\n        if ($target) {\n            return [_.get($target.currentItemWidgets, widgteName)];\n        }\n    }\n\n    // returns listitem reference by index value. This refers to the same method getListItemByIndex.\n    public getItem(index: number) {\n        return this.getListItemByIndex(index);\n    }\n\n    // return index of listItem(listItemDirective). This refers to the same method getListItemIndex.\n    public getIndex(item: ListItemDirective) {\n        return this.getListItemIndex(item);\n    }\n\n    public set selecteditem(items) {\n        this._items.length = 0;\n        this.deselectListItems();\n\n        if (_.isArray(items)) {\n            items.forEach(item => this.selectItem(item));\n        } else {\n            this.selectItem(items);\n        }\n        $appDigest();\n    }\n\n    constructor(\n        inj: Injector,\n        cdRef: ChangeDetectorRef,\n        datePipe: ToDatePipe,\n        app: App,\n        appDefaults: AppDefaults,\n        ngZone: NgZone,\n        @Attribute('itemclass.bind') binditemclass: string,\n        @Attribute('disableitem.bind') binddisableitem: string,\n        @Attribute('dataset.bind') binddataset: string,\n        @Attribute('datasource.bind') binddatasource: string,\n        @Attribute('mouseenter.event') mouseEnterCB: string,\n        @Attribute('mouseleave.event') mouseLeaveCB: string,\n    ) {\n        let resolveFn: Function = noop;\n        const propsInitPromise = new Promise(res => resolveFn = res);\n        super(inj, WIDGET_CONFIG, propsInitPromise);\n        this.propsInitPromise = propsInitPromise;\n        this.promiseResolverFn = resolveFn;\n        styler(this.nativeElement, this, APPLY_STYLES_TYPE.SHELL);\n        this.cdRef = cdRef;\n        this.ngZone = ngZone;\n        this.datePipe = datePipe;\n\n        this.binditemclass = binditemclass;\n        this.binddisableitem = binddisableitem;\n        this.binddataset = binddataset;\n        this.mouseEnterCB = mouseEnterCB;\n        this.mouseLeaveCB = mouseLeaveCB;\n        this.binddatasource = binddatasource;\n\n        this.app = app;\n        this.appDefaults = appDefaults;\n        this.variableInflight = false;\n\n        this.noDataFound = !binddataset;\n\n        // Show loading status based on the variable life cycle\n        this.app.subscribe('toggle-variable-state', this.handleLoading.bind(this));\n    }\n\n    handleLoading(data) {\n        const dataSource = this.datasource;\n        if (dataSource && dataSource.execute(DataSource.Operation.IS_API_AWARE) && isDataSourceEqual(data.variable, dataSource)) {\n            this.ngZone.run(() => {\n                this.variableInflight = data.active;\n            });\n        }\n    }\n\n    private resetNavigation() {\n        this.showNavigation = false;\n        this.navControls = undefined;\n        this.infScroll = false;\n        this.onDemandLoad = false;\n    }\n\n    private enableBasicNavigation() {\n        this.navControls = NAVIGATION_TYPE.BASIC;\n        this.showNavigation = true;\n    }\n\n    private enableInlineNavigation() {\n        this.navControls = NAVIGATION_TYPE.INLINE;\n    }\n\n    private enableClassicNavigation() {\n        this.navControls = NAVIGATION_TYPE.CLASSIC;\n        this.showNavigation = true;\n    }\n\n    private enablePagerNavigation() {\n        this.navControls = NAVIGATION_TYPE.PAGER;\n        this.showNavigation = true;\n    }\n\n    private setNavigationTypeNone() {\n        this.navControls = NAVIGATION_TYPE.NONE;\n        this.showNavigation = false;\n    }\n\n    private enableInfiniteScroll() {\n        this.infScroll = true;\n    }\n\n    private enableOnDemandLoad() {\n        this.onDemandLoad = true;\n        this.showNavigation = true;\n    }\n\n    /* this function sets the itemclass depending on itemsperrow.\n     * if itemsperrow is 2 for large device, then itemclass is 'col-xs-1 col-sm-1 col-lg-2'\n     * if itemsperrow is 'lg-3' then itemclass is 'col-lg-3'\n     */\n    private setListClass() {\n        let temp = '';\n        if (this.itemsperrow) {\n            if (isNaN(parseInt(this.itemsperrow, 10))) {\n                // handling itemsperrow containing string of classes\n                _.split(this.itemsperrow, ' ').forEach((cls: string) => {\n                    const keys = _.split(cls, '-');\n                    cls = `${keys[0]}-${(12 / parseInt(keys[1], 10))}`;\n                    temp += ` col-${cls}`;\n                });\n                this.itemsPerRowClass = temp.trim();\n            } else {\n                // handling itemsperrow having integer value.\n                this.itemsPerRowClass = `col-xs-${(12 / parseInt(this.itemsperrow, 10))}`;\n            }\n        } else { // If itemsperrow is not specified make it full width\n            this.itemsPerRowClass = 'col-xs-12';\n        }\n    }\n\n    /**\n     * Sets Navigation type for the list.\n     * @param type\n     */\n    private onNavigationTypeChange(type) {\n        this.resetNavigation();\n        switch (type) {\n            case NAVIGATION_TYPE.BASIC:\n                this.enableBasicNavigation();\n                break;\n            case NAVIGATION_TYPE.INLINE:\n                this.enableInlineNavigation();\n                break;\n            case NAVIGATION_TYPE.ADVANCED:\n            case NAVIGATION_TYPE.CLASSIC:\n                this.enableClassicNavigation();\n                break;\n            case NAVIGATION_TYPE.PAGER:\n                this.enablePagerNavigation();\n                break;\n            case NAVIGATION_TYPE.NONE :\n                this.setNavigationTypeNone();\n                break;\n            case NAVIGATION_TYPE.SCROLL:\n                this.enableInfiniteScroll();\n                break;\n            case NAVIGATION_TYPE.ONDEMAND:\n                this.enableOnDemandLoad();\n                break;\n        }\n    }\n\n    private fetchNextDatasetOnScroll() {\n        this.dataNavigator.navigatePage('next');\n    }\n\n    private setIscrollHandlers(el) {\n        let lastScrollTop = 0;\n        const wrapper = _.get(el.iscroll, 'wrapper');\n        const self = el.iscroll;\n\n        el.iscroll.on('scrollEnd', () => {\n            const clientHeight = wrapper.clientHeight,\n                totalHeight = wrapper.scrollHeight,\n                scrollTop = Math.abs(el.iscroll.y);\n\n            if ((lastScrollTop < scrollTop) && (totalHeight * 0.9 < scrollTop + clientHeight)) {\n                this.debouncedFetchNextDatasetOnScroll();\n                if (self.indicatorRefresh) {\n                    self.indicatorRefresh();\n                }\n            }\n\n            lastScrollTop = scrollTop;\n        });\n    }\n\n    // Applying iscroll event to invoke the next calls for infinte scroll.\n    private bindIScrollEvt() {\n        const $scrollParent = this.$element.closest('[wmsmoothscroll=\"true\"]');\n\n        const iScroll = _.get($scrollParent[0], 'iscroll');\n\n        // when iscroll is not initialised the notify the smoothscroll and subscribe to the iscroll update\n        if (!iScroll) {\n            const iScrollSubscription = this.app.subscribe('iscroll-update', (_el) => {\n                if (!_.isEmpty(_el) && _el.isSameNode($scrollParent[0])) {\n                    this.setIscrollHandlers($scrollParent[0]);\n                    iScrollSubscription();\n                }\n            });\n            this.app.notify('no-iscroll', $scrollParent[0]);\n            return;\n        }\n        this.setIscrollHandlers($scrollParent[0]);\n    }\n\n    private bindScrollEvt() {\n        const $el = this.$element;\n        const $ul = $el.find('> ul');\n        const $firstChild = $ul.children().first();\n        const self = this;\n\n        let $scrollParent;\n        let scrollNode;\n        let lastScrollTop = 0;\n\n        if (!$firstChild.length) {\n            return;\n        }\n\n        $scrollParent = $firstChild.scrollParent(false);\n\n        if ($scrollParent[0] === document) {\n            scrollNode = document.body;\n        } else {\n            scrollNode = $scrollParent[0];\n        }\n\n        // has scroll\n        if (scrollNode.scrollHeight > scrollNode.clientHeight) {\n            $scrollParent\n                .each((index: number, node: HTMLElement | Document) =>  {\n                    // scrollTop property is 0 or undefined for body in IE, safari.\n                    lastScrollTop = node === document ? (node.body.scrollTop || $(window).scrollTop()) : (node as HTMLElement).scrollTop;\n                })\n                .off('scroll.scroll_evt')\n                .on('scroll.scroll_evt', function (evt) {\n                    let target = evt.target;\n                    let clientHeight;\n                    let totalHeight;\n                    let scrollTop;\n                    // scrollingElement is undefined for IE, safari. use body as target Element\n                    target =  target === document ? (target.scrollingElement || document.body) : target;\n\n                    clientHeight = target.clientHeight;\n                    totalHeight = target.scrollHeight;\n                    scrollTop = target === document.body ? $(window).scrollTop() : target.scrollTop;\n\n                    if ((lastScrollTop < scrollTop) && (totalHeight * 0.9 < scrollTop + clientHeight)) {\n                        $(this).off('scroll.scroll_evt');\n                        self.debouncedFetchNextDatasetOnScroll();\n                    }\n\n                    lastScrollTop = scrollTop;\n                });\n            $ul.off('wheel.scroll_evt');\n        } else {\n            // if there is no scrollable element register wheel event on ul element\n            $ul.on('wheel.scroll_evt', e => {\n                if (e.originalEvent.deltaY > 0) {\n                    $ul.off('wheel.scroll_evt');\n                    this.debouncedFetchNextDatasetOnScroll();\n                }\n            });\n        }\n    }\n\n    /**\n     * Update fieldDefs property, fieldDefs is the model of the List Component.\n     * fieldDefs is an Array type.\n     * @param newVal\n     */\n    private updateFieldDefs(newVal: Array<any>) {\n        if (this.infScroll || this.onDemandLoad) {\n\n            if (!isDefined(this.fieldDefs) || this.dataNavigator.isFirstPage()) {\n                this.fieldDefs = [];\n            }\n            this.fieldDefs = [...this.fieldDefs, ...newVal];\n        } else {\n            this.fieldDefs = newVal;\n        }\n\n        if (this.orderby) {\n            this.fieldDefs = getOrderedDataset(this.fieldDefs, this.orderby);\n        }\n        if (this.groupby) {\n            this.groupedData = groupData(this, this.fieldDefs, this.groupby, this.match, this.orderby, this.dateformat, this.datePipe, undefined, this.appDefaults);\n        }\n\n        if (!this.fieldDefs.length) {\n            this.noDataFound = true;\n            this.selecteditem = undefined;\n        }\n        $appDigest();\n        this.listItems.setDirty();\n    }\n\n    private onDataChange(newVal) {\n        // Check for newVal is not empty\n        if (!_.isEmpty(newVal)) {\n\n            this.noDataFound = false;\n            this.isDataChanged = true;\n\n            if (this.datasource && this.datasource.execute(DataSource.Operation.IS_API_AWARE)) {\n                // clone the the data in case of live and service variables to prevent the two-way binding for these variables.\n                newVal = _.cloneDeep(newVal);\n            }\n\n            if (isObject(newVal) && !_.isArray(newVal)) {\n                newVal = _.isEmpty(newVal) ? [] : [newVal];\n            }\n\n            if (_.isString(newVal)) {\n                newVal = newVal.split(',');\n            }\n\n            if (_.isArray(newVal)) {\n                if (newVal.length) {\n                    this.invokeEventCallback('beforedatarender', {$data: newVal});\n                }\n                this.updateFieldDefs(newVal);\n            }\n        } else {\n            this.updateFieldDefs([]);\n        }\n    }\n\n    // Updates the dataSource when pagination is enabled for the Component.\n    private setupDataSource() {\n        const dataNavigator = this.dataNavigator;\n\n        dataNavigator.options = {\n            maxResults: this.pagesize || 5\n        };\n\n        this.dataNavigatorWatched = true;\n\n        if (this.navigatorResultWatch) {\n            this.navigatorResultWatch.unsubscribe();\n        }\n        /*Register a watch on the \"result\" property of the \"dataNavigator\" so that the paginated data is displayed in the live-list.*/\n        this.navigatorResultWatch = dataNavigator.resultEmitter.subscribe((newVal: any) => {\n            this.onDataChange(newVal);\n        }, true);\n        /*De-register the watch if it is exists */\n        if (this.navigatorMaxResultWatch) {\n            this.navigatorMaxResultWatch.unsubscribe();\n        }\n        /*Register a watch on the \"maxResults\" property of the \"dataNavigator\" so that the \"pageSize\" is displayed in the live-list.*/\n        this.navigatorMaxResultWatch = dataNavigator.maxResultsEmitter.subscribe((val) => {\n            this.pagesize = val;\n        });\n\n        dataNavigator.maxResults = this.pagesize || 5;\n        this.removePropertyBinding('dataset');\n        this.dataNavigator.setBindDataSet(this.binddataset, this.viewParent, this.datasource, this.dataset, this.binddatasource);\n    }\n\n    private onDataSetChange(newVal) {\n        if (!this.dataNavigatorWatched) {\n            if (this.navigation && this.navigation !== NAVIGATION_TYPE.NONE) {\n                this.setupDataSource();\n            } else {\n                this.onDataChange(newVal);\n            }\n        } else if (this.navigation && this.navigation !== NAVIGATION_TYPE.NONE) {\n            // If navigation is already setup and datasource is changed, update the datasource on navigation\n            this.dataNavigator.setDataSource(this.datasource);\n        }\n    }\n\n    // All the ListItem's Active state is set to false.\n    private deselectListItems() {\n        this.listItems.forEach(item => item.isActive = false);\n    }\n\n    // Deselect all the ListItems and clear the selecteditem(InOutBound Property model)\n    private clearSelectedItems() {\n        this.deselectListItems();\n        this._items.length = 0;\n        $appDigest();\n    }\n\n    /**\n     * return the ListItemDirective instance by checking the equality of the model.\n     * @param listModel: model to be searched for\n     * @returns ListItem if the model is matched else return null.\n     */\n    private getListItemByModel(listModel): ListItemDirective {\n        return this.listItems.find((listItem) => {\n            let itemObj = listItem.item;\n            if (this.groupby && !_.has(listModel, '_groupIndex')) {\n                // If groupby is enabled, item contains _groupIndex property which should be excluded while comparing model.\n                itemObj = _.clone(itemObj);\n                delete itemObj._groupIndex;\n            }\n            if (_.isEqual(itemObj, listModel)) {\n                return true;\n            }\n        }) || null;\n    }\n\n    private updateSelectedItemsWidgets() {\n        if (this.multiselect) {\n            (this.selectedItemWidgets as Array<WidgetRef>).length = 0;\n        }\n        this.listItems.forEach((item: ListItemDirective) => {\n            if (item.isActive) {\n                if (this.multiselect) {\n                    (this.selectedItemWidgets as Array<WidgetRef>).push(item.currentItemWidgets);\n                } else {\n                    this.selectedItemWidgets = item.currentItemWidgets;\n                }\n            }\n        });\n    }\n\n    /**\n     * Selects the listItem and updates selecteditem property.\n     * If the listItem is already a selected item then deselects the item.\n     * @param {ListItemDirective} $listItem: Item to be selected of deselected.\n     */\n    private toggleListItemSelection($listItem: ListItemDirective) {\n        // item is not allowed to get selected if it is disabled.\n        if ($listItem && !$listItem.disableItem) {\n            let item = $listItem.item;\n            if (this.groupby && _.has(item, '_groupIndex')) {\n                // If groupby is enabled, item contains _groupIndex property which should be excluded from selecteditem.\n                item = _.clone(item);\n                delete item._groupIndex;\n            }\n            if ($listItem.isActive) {\n                this._items = _.pullAllWith(this._items, [item], _.isEqual);\n                $listItem.isActive = false;\n            } else {\n                // if multiselect is false, clear the selectItem list before adding an item to the selectItem list.\n                if (!this.multiselect) {\n                    this.clearSelectedItems();\n                }\n                this._items.push(item);\n                this.invokeEventCallback('select', {widget: $listItem, $data: item});\n                $listItem.isActive = true;\n            }\n            this.updateSelectedItemsWidgets();\n        }\n    }\n\n    /**\n     * Method is Invoked when the model for the List Widget is changed.\n     * @param {QueryList<ListItemDirective>} listItems\n     */\n    private onListRender(listItems: QueryList<ListItemDirective>) {\n        // Added render callback event. This method(onListRender) is calling multiple times so checking isDatachanged flag because this falg is changed whenever new data is rendered.\n        if (this.isDataChanged) {\n            this.invokeEventCallback('render', {$data: this.fieldDefs});\n        }\n        const selectedItems = _.isArray(this.selecteditem) ? this.selecteditem : [this.selecteditem];\n\n        this.firstSelectedItem = this.lastSelectedItem = null;\n\n        // don't select first item if multi-select is enabled and at least item is already selected in the list.\n        if (listItems.length && this.selectfirstitem && !( this._items.length && this.multiselect)) {\n            const $firstItem: ListItemDirective = listItems.first;\n\n            if (\n                !$firstItem.disableItem &&\n                this.isDataChanged &&\n                // \"infinite scroll\" or \"load on demand\" is enabled and at least one item is selected then dont alter the selected list items.\n                !(\n                    (this.infScroll || this.onDemandLoad) &&\n                    this._items.length\n                )\n            ) {\n                this.clearSelectedItems();\n                this.firstSelectedItem = this.lastSelectedItem = $firstItem;\n                // selecting the first record\n                this.selectItem(0);\n            }\n        } else {\n            this.deselectListItems();\n            selectedItems.forEach(selecteditem => {\n                const listItem: ListItemDirective = this.getListItemByModel(selecteditem);\n                if (listItem) {\n                    listItem.isActive = true;\n                    this.lastSelectedItem = listItem;\n                    // focus the active element\n                    listItem.nativeElement.focus();\n                }\n            });\n        }\n\n        if (this.fieldDefs.length && this.infScroll) {\n            if (isMobileApp()) {\n                this.bindIScrollEvt();\n            } else {\n                this.bindScrollEvt();\n            }\n        }\n\n        this.isDataChanged = false;\n    }\n\n    public triggerListItemSelection($el: JQuery<HTMLElement>, $event: Event) {\n        if ($el && $el[0]) {\n            const listItemContext = $el.data('listItemContext');\n            // Trigger click event only if the list item is from the corresponding list.\n            if (listItemContext.listComponent === this) {\n                this.onItemClick($event, listItemContext);\n            }\n        }\n    }\n\n    private setupHandlers() {\n        this.listItems.changes.subscribe( listItems => {\n            this.onListRender(listItems);\n            this.cdRef.detectChanges();\n        });\n        // handle click event in capturing phase.\n        this.nativeElement.querySelector('ul.app-livelist-container').addEventListener('click', ($event) => {\n            let target = $($event.target).closest('.app-list-item');\n            // Recursively find the current list item\n            while (target.get(0) && (target.closest('ul.app-livelist-container').get(0) !== $event.currentTarget)) {\n                target = target.parent().closest('.app-list-item');\n            }\n            this.triggerListItemSelection(target, $event);\n        }, true);\n    }\n\n    // Triggers on drag start while reordering.\n    private onReorderStart(evt, ui) {\n        ui.placeholder.height(ui.item.height());\n        this.$ulEle.data('oldIndex', ui.item.index());\n    }\n\n    // Triggers after the sorting.\n    private onUpdate(evt, ui) {\n        const data = this.fieldDefs;\n        const newIndex = ui.item.index();\n        const oldIndex = this.$ulEle.data('oldIndex');\n\n        const minIndex = _.min([newIndex, oldIndex]);\n        const maxIndex = _.max([newIndex, oldIndex]);\n\n        const draggedItem = _.pullAt(data, oldIndex)[0];\n\n        this.reorderProps.minIndex = _.min([minIndex, this.reorderProps.minIndex]);\n        this.reorderProps.maxIndex = _.max([maxIndex, this.reorderProps.maxIndex]);\n\n        data.splice(newIndex, 0, draggedItem);\n\n        this.cdRef.markForCheck();\n        this.cdRef.detectChanges();\n        const $changedItem = {\n            oldIndex: oldIndex,\n            newIndex: newIndex,\n            item: data[newIndex]\n        };\n        this.invokeEventCallback('reorder', {$event: evt, $data: data, $changedItem});\n        this.$ulEle.removeData('oldIndex');\n    }\n\n    // configures reordering the list items.\n    private configureDnD() {\n        const options = {\n            appendTo: 'body',\n        };\n\n        const $el = $(this.nativeElement);\n        this.$ulEle = $el.find('.app-livelist-container');\n\n        configureDnD(this.$ulEle, options, this.onReorderStart.bind(this), this.onUpdate.bind(this));\n\n        this.$ulEle.droppable({'accept': '.app-list-item'});\n    }\n\n    // returns true if the selection limit is reached.\n    private checkSelectionLimit(count: number) {\n        return (!this.selectionlimit || count < this.selectionlimit);\n    }\n\n    // returns listitem reference by index value.\n    private getListItemByIndex(index: number): ListItemDirective {\n        return this.listItems.toArray()[index];\n    }\n\n    /**\n     * return index of an (listItemDirective) in the listItem\n     * @param {ListItemDirective} item\n     * @returns {number}\n     */\n    private getListItemIndex(item: ListItemDirective) {\n        return this.listItems.toArray().indexOf(item);\n    }\n\n    // this method is called form other data widgets like table.\n    public execute(operation, options) {\n        if ([DataSource.Operation.IS_API_AWARE, DataSource.Operation.IS_PAGEABLE, DataSource.Operation.SUPPORTS_SERVER_FILTER].includes(operation)) {\n            return false;\n        }\n        return this.datasource.execute(operation, options);\n    }\n\n    public handleKeyDown($event, action: string) {\n        $event.stopPropagation();\n        const listItems: QueryList<ListItemDirective> = this.listItems;\n\n        let presentIndex: number = this.getListItemIndex(this.lastSelectedItem);\n\n        if (this.multiselect) {\n            const firstIndex: number = this.getListItemIndex(this.firstSelectedItem);\n            const selectCount: number = _.isArray(this.selecteditem) ? this.selecteditem.length : (_.isObject(this.selecteditem) ? 1 : 0);\n            if (action === 'selectPrev') {\n                if (presentIndex > 0) {\n                    if ((presentIndex <= firstIndex) && this.checkSelectionLimit(selectCount)) {\n                        this.lastSelectedItem = this.getListItemByIndex( presentIndex - 1);\n                        this.toggleListItemSelection(this.lastSelectedItem);\n                    } else if (presentIndex > firstIndex) {\n                        this.toggleListItemSelection(this.getListItemByIndex(presentIndex));\n                        this.lastSelectedItem = this.getListItemByIndex(presentIndex - 1);\n                    } else {\n                        this.invokeEventCallback('selectionlimitexceed', {$event});\n                    }\n                }\n            } else if (action === 'selectNext') {\n                if (presentIndex < listItems.length - 1) {\n                    if ((presentIndex >= firstIndex) && this.checkSelectionLimit(selectCount)) {\n                        this.lastSelectedItem = this.getListItemByIndex(presentIndex + 1);\n                        this.toggleListItemSelection(this.lastSelectedItem);\n                    } else if (presentIndex < firstIndex) {\n                        this.toggleListItemSelection(this.getListItemByIndex(presentIndex));\n                        this.lastSelectedItem = this.getListItemByIndex(presentIndex + 1);\n                    } else {\n                        this.invokeEventCallback('selectionlimitexceed', {$event});\n                    }\n                }\n            }\n        }\n        if (action === 'focusPrev') {\n            presentIndex = presentIndex <= 0 ? 0 : (presentIndex - 1);\n            this.lastSelectedItem = this.getListItemByIndex(presentIndex);\n            this.lastSelectedItem.nativeElement.focus();\n        } else if (action === 'focusNext') {\n            presentIndex = presentIndex < (listItems.length - 1) ? (presentIndex + 1) : (listItems.length - 1);\n            this.lastSelectedItem = this.getListItemByIndex(presentIndex);\n            this.lastSelectedItem.nativeElement.focus();\n        } else if (action === 'select') {\n            // if the enter click is pressed on the item which is not the last selected item, the find the item from which the event is originated.\n            if (presentIndex === -1 || !$($event.target).closest(this.lastSelectedItem.nativeElement)) {\n                const $li = $($event.target).closest('li.app-list-item');\n                const $ul = $li.closest('ul.app-livelist-container');\n                presentIndex = $ul.find('li.app-list-item').index($li);\n            }\n            this.onItemClick($event, this.getListItemByIndex(presentIndex));\n        }\n    }\n\n    onPropertyChange(key: string, nv: any, ov?: any) {\n        if (key === 'dataset') {\n            if (!nv && this.binddatasource && !this.datasource) {\n                return;\n            }\n            this.onDataSetChange(nv);\n        } else if (key === 'datasource') {\n            if (this.dataset) {\n                this.onDataSetChange(this.dataset);\n            }\n        } else if (key === 'navigation') {\n            // Support for older projects where navigation type was advanced instead of classic\n            if (nv === 'Advanced') {\n                this.navigation = 'Classic';\n                return;\n            }\n            switchClass(this.nativeElement, nv, ov);\n            this.onNavigationTypeChange(nv);\n            if (this.dataNavigator) {\n                this.dataNavigator.navigationClass = this.paginationclass;\n            }\n        } else if (key === 'itemsperrow') {\n            this.setListClass();\n        } else if (key === 'tabindex') {\n            return;\n        } else if (key === 'pulltorefresh' && nv) {\n            this.app.notify('pullToRefresh:enable');\n            this.subscribeToPullToRefresh();\n        } else if (key === 'paginationclass') {\n            if (this.dataNavigator) {\n                // Adding setTimeout because in pagination component updateNavSize method is overriding navigationclass\n                setTimeout( () => this.dataNavigator.navigationClass = nv);\n            }\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n\n    public onItemClick(evt: any, $listItem: ListItemDirective) {\n        let selectCount: number;\n\n        if (!$listItem.disableItem) {\n            this.firstSelectedItem = this.firstSelectedItem || $listItem;\n            // Setting selectCount value based number of items selected.\n            selectCount = _.isArray(this.selecteditem) ? this.selecteditem.length : (_.isObject(this.selecteditem) ? 1 : 0);\n\n            // Handling multiselect for mobile applications\n            if (this.multiselect && isMobileApp()) {\n                if (this.checkSelectionLimit(selectCount) || $listItem.isActive) {\n                    this.toggleListItemSelection($listItem);\n                } else {\n                    this.invokeEventCallback('selectionlimitexceed', {$event: evt});\n                }\n            } else if ((evt.ctrlKey || evt.metaKey) && this.multiselect) {\n                if (this.checkSelectionLimit(selectCount) || $listItem.isActive) {\n                    this.firstSelectedItem = this.lastSelectedItem = $listItem;\n                    this.toggleListItemSelection($listItem);\n                } else {\n                    this.invokeEventCallback('selectionlimitexceed', {$event: evt});\n                }\n            } else if (evt.shiftKey && this.multiselect) {\n                let first = $listItem.context.index;\n                let last = this.firstSelectedItem.context.index;\n\n                // if first is greater than last, then swap values\n                if (first > last) {\n                    last = [first, first = last][0];\n                }\n                if (this.checkSelectionLimit(last - first)) {\n                    this.clearSelectedItems();\n                    this.listItems.forEach(($liItem: ListItemDirective) => {\n                        const index = $liItem.context.index;\n                        if (index >= first && index <= last) {\n                            this.toggleListItemSelection($liItem);\n                        }\n                    });\n                    this.lastSelectedItem = $listItem;\n                }  else {\n                    this.invokeEventCallback('selectionlimitexceed', {$event: evt});\n                }\n\n            } else {\n                if (!$listItem.isActive || selectCount > 1) {\n                    this.clearSelectedItems();\n                    this.toggleListItemSelection($listItem);\n                    this.firstSelectedItem = this.lastSelectedItem = $listItem;\n                }\n            }\n            $appDigest();\n        }\n    }\n\n    // Empty the list content on clear\n    public clear () {\n        this.updateFieldDefs([]);\n    }\n\n    /**\n     *  Returns ListItem Reference based on the input provided.\n     * @param val: index | model of the list item.\n     * @returns {ListItemDirective}\n     */\n    private getItemRefByIndexOrModel(val: any): ListItemDirective {\n        let listItem: ListItemDirective;\n        if (isNumber(val)) {\n            listItem = this.getListItemByIndex(val);\n        } else {\n            listItem = this.getListItemByModel(val);\n        }\n        return listItem;\n    }\n\n    /**\n     * deselects item in the list.\n     * @param val: index | model of the list item.\n     */\n    public deselectItem (val: any) {\n        const listItem = this.getItemRefByIndexOrModel(val);\n        if (listItem && listItem.isActive) {\n            this.toggleListItemSelection(listItem);\n        }\n    }\n\n    /**\n     * selects item in the list.\n     * @param val: index | model of the list item.\n     */\n    public selectItem(val) {\n        const listItem = this.getItemRefByIndexOrModel(val);\n        if (!listItem) {\n            return;\n        }\n        if (!listItem.isActive) {\n            this.toggleListItemSelection(listItem);\n        }\n        // focus the element.\n        listItem.nativeElement.focus();\n    }\n\n    private beforePaginationChange($event, $index) {\n        this.invokeEventCallback('paginationchange', {$event, $index});\n    }\n\n    protected handleEvent(node: HTMLElement, eventName: string, eventCallback: Function, locals: any) {\n        // tap and doubleTap events are not getting propagated.So, using mouse events instead.\n        const touchToMouse = {\n            tap: 'click',\n            doubletap: 'dblclick'\n        };\n        if (_.includes(['click', 'tap', 'dblclick', 'doubletap'], eventName)) {\n            this.eventManager.addEventListener(\n                this.nativeElement,\n                touchToMouse[eventName] || eventName,\n                (evt) => {\n                    const target = $(evt.target).closest('.app-list-item');\n                    if (target.length) {\n                        const listItemContext: ListItemDirective = target.data('listItemContext');\n                        if (!listItemContext.disableItem) {\n                            this.invokeEventCallback(eventName, {widget: listItemContext, $event: evt, item: listItemContext.item});\n                        }\n                    }\n                }\n            );\n        }\n    }\n\n    // Invoke the datasource variable by default when pulltorefresh event is not specified.\n    private subscribeToPullToRefresh() {\n        this.cancelSubscription = this.app.subscribe('pulltorefresh', () => {\n            if (this.datasource && this.datasource.listRecords) {\n                this.datasource.listRecords();\n            }\n        });\n    }\n\n    ngOnInit() {\n        super.ngOnInit();\n        this.handleHeaderClick = noop;\n        this._items = [];\n        this.fieldDefs = [];\n        // When pagination is infinite scroll dataset is applying after debounce time(250ms) so making next call after previous data has rendered\n        this.debouncedFetchNextDatasetOnScroll = _.debounce(this.fetchNextDatasetOnScroll, DEBOUNCE_TIMES.PAGINATION_DEBOUNCE_TIME);\n        this.reorderProps = {\n            minIndex: null,\n            maxIndex: null\n        };\n    }\n\n    ngAfterViewInit() {\n        this.promiseResolverFn();\n        this.propsInitPromise.then(() => {\n            super.ngAfterViewInit();\n            this.selectedItemWidgets = this.multiselect ? [] : {};\n            if (this.enablereorder && !this.groupby) {\n                this.configureDnD();\n            }\n            if (this.groupby && this.collapsible) {\n                this.handleHeaderClick = handleHeaderClick;\n                this.toggleAllHeaders = toggleAllHeaders.bind(undefined, this);\n            }\n            this.setListClass();\n        });\n        this.setupHandlers();\n        const $ul = this.nativeElement.querySelector('ul.app-livelist-container');\n        styler($ul as HTMLElement, this, APPLY_STYLES_TYPE.SCROLLABLE_CONTAINER);\n\n        if (isMobileApp() && $ul.querySelector('.app-list-item-action-panel')) {\n            this._listAnimator = new ListAnimator(this);\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._listAnimator && this._listAnimator.$btnSubscription) {\n            this._listAnimator.$btnSubscription.unsubscribe();\n        }\n        if (this.cancelSubscription) {\n            this.cancelSubscription();\n        }\n    }\n}\n","import { isMobileApp } from '@wm/core';\n\nimport { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-list',\n        new Map(\n            [\n                ['boundarylinks', {value: false, ...PROP_BOOLEAN}],\n                ['class', PROP_STRING],\n                ['collapsible', PROP_BOOLEAN],\n                ['dateformat', PROP_STRING],\n                ['dataset', PROP_ANY],\n                ['datasource', PROP_ANY],\n                ['directionlinks', {value: true, ...PROP_BOOLEAN}],\n                ['disableitem', PROP_BOOLEAN],\n                ['enablereorder', PROP_BOOLEAN],\n                ['forceellipses', {value: true, ...PROP_BOOLEAN}],\n                ['groupby', PROP_STRING],\n                ['iconclass', PROP_STRING],\n                ['itemclass', {value: '', ...PROP_STRING}],\n                ['itemsperrow', PROP_STRING],\n                ['listclass', {value: 'list-group', ...PROP_STRING}],\n                ['multiselect', PROP_BOOLEAN],\n                ['loadingdatamsg', {value : 'Loading...', ...PROP_STRING}],\n                ['loadingicon', {value : 'fa fa-circle-o-notch', ...PROP_STRING}],\n                ['match', PROP_STRING],\n                ['maxsize', {value: 5, ...PROP_NUMBER}],\n                ['name', PROP_STRING],\n                ['navigation', PROP_STRING],\n                ['navigationalign', {value: 'left', ...PROP_STRING}],\n                ['nodatamessage', {value : 'No data found', ...PROP_STRING}],\n                ['ondemandmessage', {value : 'Load More', ...PROP_STRING}],\n                ['orderby', PROP_STRING],\n                ['paginationclass', PROP_STRING],\n                ['pagesize', PROP_NUMBER],\n                ['pulltorefresh', {value: isMobileApp(), ...PROP_BOOLEAN}],\n                ['selectfirstitem', PROP_BOOLEAN],\n                ['selectionlimit', PROP_NUMBER],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n                ['showcount', PROP_BOOLEAN],\n                ['showrecordcount', PROP_BOOLEAN],\n                ['subheading', PROP_STRING],\n                ['tabindex', {value: 0, ...PROP_NUMBER}],\n                ['title', PROP_STRING]\n            ]\n        )\n    );\n};\n","import { Attribute, Component, HostBinding, HostListener, Injector, OnDestroy, SkipSelf, Optional, ViewChild, ViewContainerRef, ContentChildren, AfterContentInit, NgZone } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\n\nimport { $appDigest, getClonedObject, getFiles, removeClass, App, $parseEvent, debounce, DynamicComponentRefProvider, extendProto, DataSource } from '@wm/core';\n\nimport { styler } from '../../framework/styler';\nimport { WidgetRef } from '../../framework/types';\nimport { StylableComponent } from '../base/stylable.component';\nimport { registerFormProps } from './form.props';\nimport { getFieldLayoutConfig, parseValueByType } from '../../../utils/live-utils';\nimport { performDataOperation } from '../../../utils/data-utils';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\nimport { MessageComponent } from '../message/message.component';\nimport { ListComponent } from '../list/list.component';\n\ndeclare const _;\n\nconst WIDGET_CONFIG = {widgetType: 'wm-form', hostClass: 'panel app-panel app-form'};\nconst LOGIN_FORM_CONFIG = {widgetType: 'wm-form', hostClass: 'app-form app-login-form'};\nconst LIVE_FORM_CONFIG = {widgetType: 'wm-liveform', hostClass: 'panel app-panel app-liveform liveform-inline'};\nconst LIVE_FILTER_CONFIG = {widgetType: 'wm-livefilter', hostClass: 'panel app-panel app-livefilter clearfix liveform-inline'};\n\nconst getWidgetConfig = (isLiveForm, isLiveFilter, role) => {\n    let config = WIDGET_CONFIG;\n    if (isLiveForm !== null) {\n        config = LIVE_FORM_CONFIG;\n    } else if (isLiveFilter !== null) {\n        config = LIVE_FILTER_CONFIG;\n    } else if (role === 'app-login') {\n        config = LOGIN_FORM_CONFIG;\n    }\n    return config;\n};\n\n// Generate the form field with given field definition. Add a grid column wrapper around the form field.\nconst setMarkupForFormField = (field, columnWidth) =>  {\n    let propsTmpl = '';\n    _.forEach(field, (value, key) => {\n        propsTmpl = `${propsTmpl} ${key}=\"${value}\"`;\n    });\n    return `<wm-gridcolumn columnwidth=\"${columnWidth}\">\n                  <wm-form-field ${propsTmpl}></wm-form-field>\n            </wm-gridcolumn>`;\n};\n\n// Function to find out the first invalid element in form\nconst findInvalidElement = ($formEle, ngForm) => {\n    const $ele = $formEle.find('form.ng-invalid:visible, [formControlName].ng-invalid:visible').first();\n    let formObj = ngForm;\n    // If element is form, find out the first invalid element in this form\n    if ($ele.is('form')) {\n        formObj = ngForm && ngForm.controls[$ele.attr('formControlName') || $ele.attr('name')];\n        if (formObj) {\n            return findInvalidElement($ele, formObj);\n        }\n    }\n    return {\n        ngForm: formObj,\n        $ele: $ele\n    };\n};\n\nconst setTouchedState = ngForm => {\n    if (ngForm.valid) {\n        return;\n    }\n    if (ngForm.controls) {\n        _.forEach(ngForm.controls, ctrl => {\n            setTouchedState(ctrl);\n        });\n    } else {\n        ngForm.markAsTouched();\n    }\n};\n\n@Component({\n    selector: 'form[wmForm]',\n    templateUrl: './form.component.html',\n    providers: [\n        provideAsWidgetRef(FormComponent)\n    ]\n})\nexport class FormComponent extends StylableComponent implements OnDestroy, AfterContentInit {\n    static  initializeProps = registerFormProps();\n    @ViewChild('dynamicForm', {read: ViewContainerRef}) dynamicFormRef: ViewContainerRef;\n    @ViewChild(MessageComponent) messageRef;\n    // this is the reference to the component refs inside the form-group\n    @ContentChildren(WidgetRef, {descendants: true}) componentRefs;\n\n    autoupdate;\n    public formlayout: any;\n    public isDataSourceUpdated: boolean;\n    captionAlignClass: string;\n    validationtype: string;\n    captionalign: string;\n    captionposition: string;\n    captionsize;\n    collapsible: boolean;\n    expanded: boolean;\n    elScope;\n    _widgetClass = '';\n    captionwidth: string;\n    _captionClass = '';\n    ngform: FormGroup;\n    formFields = [];\n    formfields = {};\n    formWidgets = {};\n    filterWidgets = {};\n    buttonArray = [];\n    dataoutput = {};\n    datasource;\n    formdatasource;\n    formdata = {};\n    isSelected;\n    prevDataValues;\n    prevDataObject;\n    prevformFields;\n    statusMessage = {\n        caption: '',\n        type: ''\n    };\n    messagelayout;\n    metadata;\n    errormessage;\n    primaryKey = [];\n    postmessage;\n    _liveTableParent;\n    updateMode;\n    name;\n    // Live Form Methods\n    clearData: Function;\n    edit: Function;\n    new: Function;\n    cancel: Function;\n    delete: Function;\n    save: Function;\n    saveAndNew: Function;\n    saveAndView: Function;\n    setPrimaryKey: () => {};\n    dialogId: string;\n    // Live Filter\n    enableemptyfilter;\n    pagesize;\n    result;\n    pagination;\n    clearFilter: Function;\n    applyFilter: Function;\n    filter: Function;\n    filterOnDefault: Function;\n    onMaxDefaultValueChange: Function;\n\n    private _debouncedUpdateFieldSource: Function = _.debounce(this.updateFieldSource, 350);\n    private operationType;\n    private _isLayoutDialog;\n    private _dynamicContext;\n    private _isGridLayoutPresent;\n    private validationMessages = [];\n    private formGroupName;\n\n    private _debouncedSubmitForm = debounce(($event) => {\n        // calling submit event in ngZone as change detection is not triggered post the submit callback and actions like notification are not shown\n        this.ngZone.run(() => {\n            this.submitForm($event);\n        });\n    }, 250);\n\n    set isLayoutDialog(nv) {\n        if (nv) {\n            removeClass(this.nativeElement, 'panel app-panel liveform-inline');\n        }\n        this._isLayoutDialog = nv;\n    }\n\n    get isLayoutDialog() {\n        return this._isLayoutDialog;\n    }\n\n    private _isUpdateMode;\n    set isUpdateMode(nv) {\n        this._isUpdateMode = nv;\n        this.formFields.forEach(field => {\n            field.setReadOnlyState(nv);\n        });\n    }\n\n    get isUpdateMode() {\n        return this._isUpdateMode;\n    }\n\n    @HostBinding('action') action: string;\n\n    @HostListener('submit', ['$event']) submit($event) {\n        this._debouncedSubmitForm($event);\n    }\n\n    @HostListener('reset') onReset() {\n        this.reset();\n    }\n\n    constructor(\n        inj: Injector,\n        private fb: FormBuilder,\n        private app: App,\n        private dynamicComponentProvider: DynamicComponentRefProvider,\n        private ngZone: NgZone,\n        @Optional() public parentList: ListComponent,\n        @SkipSelf() @Optional() public parentForm: FormComponent,\n        @Attribute('beforesubmit.event') public onBeforeSubmitEvt,\n        @Attribute('submit.event') public onSubmitEvt,\n        @Attribute('beforerender.event') public onBeforeRenderEvt,\n        @Attribute('dataset.bind') public binddataset,\n        @Attribute('formdata.bind') private bindformdata,\n        @Attribute('wmLiveForm') isLiveForm,\n        @Attribute('wmLiveFilter') isLiveFilter,\n        @Attribute('role') role,\n        @Attribute('key') key,\n        @Attribute('name') name\n    ) {\n        super(inj, getWidgetConfig(isLiveForm, isLiveFilter, role));\n\n        styler(this.nativeElement, this);\n\n        this.isUpdateMode = true;\n        this.dialogId = this.nativeElement.getAttribute('dialogId');\n        this.ngform = fb.group({});\n        this.addInnerNgFormToForm(key || name);\n\n        // On value change in form, update the dataoutput\n        const onValueChangeSubscription =  this.ngform.valueChanges\n            .subscribe(this.updateDataOutput.bind(this));\n        this.registerDestroyListener(() => onValueChangeSubscription.unsubscribe());\n        this.elScope = this;\n\n        this.addEventsToContext(this.context);\n    }\n\n    ngAfterContentInit() {\n        setTimeout(() => {\n            this.componentRefs.forEach(componentRef => {\n                if (componentRef.name) {\n                    // Register widgets inside form with formWidgets\n                    this.formWidgets[componentRef.name] = componentRef;\n                }\n            });\n        }, 250);\n    }\n\n    findOperationType() {}\n\n    private addInnerNgFormToForm(binding) {\n        if (this.parentForm && this.parentForm.ngform) {\n            let counter = 1;\n            let innerBinding = binding;\n            // Inner forms may have same names. If same name is present, append unqiue identifier\n            while (this.parentForm.ngform.controls.hasOwnProperty(innerBinding)) {\n                innerBinding = `${binding}_${counter}`;\n                counter++;\n            }\n            this.formGroupName = innerBinding;\n            // If parent form is present, add the current form as as formGroup for parent form\n            this.parentForm.ngform.addControl(innerBinding, this.ngform);\n        }\n    }\n\n    // Expose the events on context so that they can be accessed by form actions\n    private addEventsToContext(context) {\n        context.cancel = () => this.cancel();\n        context.reset = () => this.reset();\n        context.save = evt => this.save(evt);\n        context.saveAndNew = () => this.saveAndNew();\n        context.saveAndView = () => this.saveAndView();\n        context.delete = () => this.delete();\n        context.new = () => this.new();\n        context.edit = () => this.edit();\n        context.highlightInvalidFields = () => this.highlightInvalidFields();\n        context.filter = () => this.filter();\n        context.clearFilter = () => this.clearFilter();\n        context.submit = evt => this.submit(evt);\n    }\n\n    // This method gets all the inner forms and validates each form.\n    private setValidationOnInnerForms(validateTouch) {\n        const formEle = this.getNativeElement();\n        const formObjs = formEle.querySelectorAll('.app-form');\n        const validationMsgs = [];\n        _.forEach(formObjs, e => {\n            const formInstance = (e as any).widget;\n            // differentiating the validationMessages prefix based on the formGroupName\n            // as the formName's are same when forms are in list\n            let formName = _.get(formInstance, 'formGroupName') || formInstance.name;\n            let current = formInstance;\n            while (_.get(current, 'parentForm')) {\n                const parentName = current.parentForm.formGroupName || current.parentForm.name;\n                formName = parentName + '.' + formName;\n                current = current.parentForm;\n            }\n            this.setValidationOnFields(formInstance, formName, validateTouch);\n        });\n    }\n\n    /**\n     * This method sets validation on formFields.\n     * Applies to innerform and also sets innerform validation on parent form.\n     * @param prefix contains the form name, which also includes its parents form name\n     * @param {boolean} validateTouch\n     */\n    private setValidationOnFields(form: FormComponent, prefix: string, validateTouch?: boolean) {\n        const controls = form.ngform.controls;\n        const formFields = form.formFields;\n        if (!formFields) {\n            return;\n        }\n        _.forEach(controls, (v, k) => {\n            const field = formFields.find(e => e.key === k);\n            if (!field || (validateTouch && !v.touched)) {\n                return;\n            }\n            // invoking the prepareValidation on both parent form and current form.\n            this.prepareValidationObj(v, k, field, prefix);\n            this.prepareValidationObj.call(form, v, k, field, prefix);\n        });\n    }\n\n    // Assigns / updates validationMessages based on angular errors on field\n    private prepareValidationObj(v, k, field, prefix) {\n        const index = this.validationMessages.findIndex(e => (e.field === k && e.fullyQualifiedFormName === prefix));\n        if (v.invalid) {\n            if (index === -1) {\n                /**\n                 * field contains the fieldName\n                 * value contains the field value\n                 * errorType contains the list of errors\n                 * message contains the validation message\n                 * getElement returns the element having focus-target\n                 * formName returns the name of the form\n                 */\n                this.validationMessages.push({\n                    field: k,\n                    value: field.value,\n                    errorType: _.keys(v.errors),\n                    message: field.validationmessage || '',\n                    getElement: () => {\n                        return field.$element.find('[focus-target]');\n                    },\n                    formName: _.last(prefix.split('.')),\n                    fullyQualifiedFormName: prefix\n                });\n            } else {\n                this.validationMessages[index].value = field.value;\n                this.validationMessages[index].errorType = _.keys(v.errors);\n            }\n        } else if (v.valid && index > -1) {\n            this.validationMessages.splice(index, 1);\n        }\n    }\n\n    // This will return a object containing the error details from the list of formFields that are invalid\n    private setValidationMsgs(validateTouch?: boolean) {\n        if (!this.formFields.length && _.isEmpty(this.ngform.controls)) {\n            return;\n        }\n        this.setValidationOnFields(this, this.name, validateTouch);\n        this.setValidationOnInnerForms(validateTouch);\n    }\n\n    // change and blur events are added from the template\n    protected handleEvent(node: HTMLElement, eventName: string, callback: Function, locals: any) {\n        if (eventName !== 'submit') {\n            super.handleEvent(this.nativeElement, eventName, callback, locals);\n        }\n    }\n\n    private updateFieldSource() {\n        if (this.formdatasource && this.formdatasource.execute(DataSource.Operation.IS_API_AWARE)) {\n            return;\n        } else if (this.formdatasource && !this.formdatasource.twoWayBinding) {\n            return;\n        }\n        this.formFields.forEach(formField => {\n            formField.setFormWidget('datavaluesource', this.formdatasource);\n            formField.setFormWidget('binddatavalue', `${this.bindformdata}.${formField.key}`);\n        });\n    }\n\n    // This method loops through the form fields and highlights the invalid fields by setting state to touched\n    highlightInvalidFields() {\n        setTouchedState(this.ngform);\n    }\n\n    // Disable the form submit if form is in invalid state. Highlight all the invalid fields if validation type is default\n    validateFieldsOnSubmit() {\n        this.setValidationMsgs();\n        // Disable the form submit if form is in invalid state. For delete operation, do not check the validation.\n        if (this.operationType !== 'delete' && (this.validationtype === 'html' || this.validationtype === 'default')\n                && this.ngform && this.ngform.invalid) {\n\n            if (this.ngform.invalid) {\n                if (this.validationtype === 'default') {\n                    this.highlightInvalidFields();\n                }\n                // Find the first invalid untoched element and set it to touched.\n                // Safari does not form validations. this will ensure that error is shown for user\n                const eleForm = findInvalidElement(this.$element, this.ngform);\n                const $invalidForm = eleForm.ngForm;\n                let $invalidEle  = eleForm.$ele;\n                $invalidEle = $invalidEle.parent().find('[focus-target]');\n                if ($invalidEle.length) {\n                    // on save click in page layout liveform, focus of autocomplete widget opens full-screen search.\n                    if (!$invalidEle.hasClass('app-search-input')) {\n                        $invalidEle.focus();\n                    }\n                    const ngEle = $invalidForm && $invalidForm.controls[$invalidEle.attr('formControlName') || $invalidEle.attr('name')];\n                    if (ngEle && ngEle.markAsTouched) {\n                        ngEle.markAsTouched();\n                    }\n                    $appDigest();\n                    return true;\n                }\n                return true;\n            }\n            return false;\n        }\n        return false;\n    }\n\n    onPropertyChange(key, nv, ov?) {\n        switch (key) {\n            case 'captionalign':\n                this.captionAlignClass = 'align-' + nv;\n                break;\n            case 'captionposition':\n                this.setLayoutConfig();\n                break;\n            case 'captionwidth':\n                this.setLayoutConfig();\n                break;\n            case 'captionsize':\n                this.captionsize = nv;\n                break;\n            case 'novalidate':\n                //  Set validation type based on the novalidate property\n                this.widget.validationtype = (nv === true || nv === 'true') ? 'none' : 'default';\n                break;\n            case 'formdata':\n                // For livelist when multiselect is enabled, formdata will be array of objects. In this case consider the last object as formdata.\n                _.isArray(nv) ? this.setFormData(_.last(nv)) : this.setFormData(nv);\n                // if dataset on the formFields are not set as the datasourceChange is triggered before the formFields are registered.\n                if (!this.isDataSourceUpdated && this.datasource) {\n                    this.onDataSourceChange();\n                }\n                break;\n            case 'defaultmode':\n                if (!this.isLayoutDialog) {\n                    if (nv && nv === 'Edit') {\n                        this.updateMode = true;\n                    } else {\n                        this.updateMode = false;\n                    }\n                    this.isUpdateMode = this.updateMode;\n                }\n                break;\n            case 'datasource':\n                this.onDataSourceChange();\n                break;\n            case 'formdatasource':\n                this.onFormDataSourceChange();\n                break;\n            case 'metadata':\n                this.generateFormFields();\n                break;\n            default:\n                super.onPropertyChange(key, nv, ov);\n        }\n    }\n\n    // Event callbacks on success/error\n    onResult(data, status, event?) {\n        const params = {$event: event, $data: data, $operation: this.operationType};\n        // whether service call success or failure call this method\n        this.invokeEventCallback('result', params);\n        if (status) {\n            // if service call is success call this method\n            this.invokeEventCallback('success', params);\n        } else {\n            // if service call fails call this method\n            this.invokeEventCallback('error', params);\n        }\n    }\n\n    // Display or hide the inline message/ toaster\n    toggleMessage(show: boolean, msg?: string, type?: string, header?: string) {\n        let template;\n        if (show && msg) {\n            template = (type === 'error' && this.errormessage) ? this.errormessage : msg;\n            if (this.messagelayout === 'Inline') {\n                this.statusMessage = {'caption': template || '', type: type};\n                if (this.messageRef) {\n                    this.messageRef.showMessage(this.statusMessage.caption, this.statusMessage.type);\n                }\n            } else {\n                this.app.notifyApp(template, type, header);\n            }\n        } else {\n            this.statusMessage.caption = '';\n        }\n    }\n\n    // Hide the inline message/ toaster\n    clearMessage() {\n        this.toggleMessage(false);\n    }\n\n    // Set the classes on the form based on the captionposition and captionwidth properties\n    private setLayoutConfig() {\n        let layoutConfig;\n        layoutConfig = getFieldLayoutConfig(this.captionwidth, this.captionposition, _.get(this.app.selectedViewPort, 'os'));\n        this._widgetClass = layoutConfig.widgetCls;\n        this._captionClass = layoutConfig.captionCls;\n\n        $appDigest();\n    }\n\n    registerFormWidget(widget) {\n        const name = widget.name || widget.key;\n        this.formWidgets[name] = widget;\n    }\n\n    registerFormFields(formField) {\n        this.formFields.push(formField);\n        this.formfields[formField.key] = formField;\n        this.registerFormWidget(formField);\n        this._debouncedUpdateFieldSource();\n        if (this.parentForm) {\n            this.parentForm.formFields.push(formField);\n            this.parentForm.formfields[formField.key] = formField;\n        }\n    }\n\n    registerActions(formAction) {\n        this.buttonArray.push(formAction);\n    }\n\n    // Update the dataoutput whenever there is a change in inside form widget value\n    updateFormDataOutput(dataObject) {\n        // Set the values of the widgets inside the live form (other than form fields) in form data\n        _.forEach(this.ngform.value, (val, key) => {\n            if (!_.find(this.formFields, {key})) {\n                dataObject[key] = val;\n            }\n        });\n        this.dataoutput = dataObject;\n    }\n\n    // Construct the data object merging the form fields and custom widgets data\n    constructDataObject() {\n        const formData     = {};\n        const formFields = this.getFormFields();\n        // Get all form fields and prepare form data as key value pairs\n        formFields.forEach(field => {\n            let fieldName,\n                fieldValue;\n            fieldValue = field.datavalue || field._control.value;\n            fieldValue = (fieldValue === null || fieldValue === '') ? undefined : fieldValue;\n\n            if (field.type === 'file') {\n                fieldValue = getFiles(this.name, field.key + '_formWidget', field.multiple);\n            }\n\n            fieldName = field.key || field.target || field.name;\n            // In case of update the field will be already present in form data\n            _.set(formData, fieldName, fieldValue);\n        });\n        this.updateFormDataOutput(formData);\n        return this.dataoutput;\n    }\n\n    updateDataOutput() {\n        this.constructDataObject();\n        if (this.ngform.touched) {\n            this.setValidationMsgs(true);\n        }\n    }\n\n    // FormFields will contain all the fields in parent and inner form also.\n    // This returns the formFields in the form based on the form name.\n    getFormFields() {\n        return _.filter(this.formFields, formField => {\n            return formField.form.name === this.name;\n        });\n    }\n\n    setFormData(data) {\n        const formFields = this.getFormFields();\n        formFields.forEach(field => {\n            field.value =  _.get(data, field.key || field.name);\n        });\n\n        this.constructDataObject();\n    }\n\n    resetFormState() {\n        // clearing the validationMessages on reset.\n        if (this.validationMessages.length) {\n            this.validationMessages = [];\n        }\n        if (!this.ngform) {\n            return;\n        }\n        setTimeout(() => {\n            this.ngform.markAsUntouched();\n            this.ngform.markAsPristine();\n        });\n    }\n\n    reset() {\n        this.resetFormState();\n        this.formFields.forEach(field => {\n            field.value = '';\n        });\n        this.constructDataObject();\n        this.clearMessage();\n    }\n\n    submitForm($event) {\n        let formData, template, params;\n        const dataSource = this.datasource;\n        // Disable the form submit if form is in invalid state.\n        if (this.validateFieldsOnSubmit()) {\n            return;\n        }\n\n        this.resetFormState();\n\n        formData = getClonedObject(this.constructDataObject());\n\n        params = {$event, $formData: formData, $data: formData};\n\n        if (this.onBeforeSubmitEvt && (this.invokeEventCallback('beforesubmit', params) === false)) {\n            return;\n        }\n\n        if (this.onSubmitEvt || dataSource) {\n            // If on submit is there execute it and if it returns true do service variable invoke else return\n            // If its a service variable call setInput and assign form data and invoke the service\n            if (dataSource) {\n                performDataOperation(dataSource, formData, {})\n                    .then((data) => {\n                        this.onResult(data, true, $event);\n                        this.toggleMessage(true, this.postmessage, 'success');\n                        this.invokeEventCallback('submit', params);\n                    }, (error) => {\n                        template = this.errormessage || error.error || error;\n                        this.onResult(error, false, $event);\n                        this.toggleMessage(true, template, 'error');\n                        this.invokeEventCallback('submit', params);\n                        $appDigest();\n                    });\n            } else {\n                this.onResult({}, true, $event);\n                this.invokeEventCallback('submit', params);\n            }\n        } else {\n            this.onResult({}, true, $event);\n        }\n    }\n\n    // Method to show/hide the panel header or footer based on the buttons\n    showButtons(position) {\n        return _.some(this.buttonArray, btn => {\n            return _.includes(btn.position, position) && btn.updateMode === this.isUpdateMode;\n        });\n    }\n\n    // Expand or collapse the panel\n    expandCollapsePanel() {\n        if (this.collapsible) {\n            // flip the active flag\n            this.expanded = !this.expanded;\n        }\n    }\n\n    // On form data source change. This method is overridden by live form and live filter\n    onDataSourceChange() {\n    }\n\n    // On form data source change. This method is overridden by live form and live filter\n    onFormDataSourceChange() {\n        this.updateFieldSource();\n    }\n\n    // On form field default value change. This method is overridden by live form and live filter\n    onFieldDefaultValueChange(field, nv) {\n        field.value = parseValueByType(nv, undefined, field.widgettype);\n    }\n\n    // On form field value change. This method is overridden by live form and live filter\n    onFieldValueChange() {\n    }\n\n    // Function to generate and compile the form fields from the metadata\n    async generateFormFields() {\n        let noOfColumns;\n        let $gridLayout;\n        // Check if grid layout is present or not for first time\n        if (_.isUndefined(this._isGridLayoutPresent)) {\n            this._isGridLayoutPresent = this.$element.find('.panel-body [wmlayoutgrid]').length > 0;\n        }\n        if (this._isGridLayoutPresent) {\n            $gridLayout = this.$element.find('.form-elements [wmlayoutgrid]:first');\n            noOfColumns = Number($gridLayout.attr('columns')) || 1;\n        } else {\n            $gridLayout = this.$element.find('.form-elements .dynamic-form-container');\n            if (!$gridLayout.length) {\n                this.$element.find('.form-elements').prepend('<div class=\"dynamic-form-container\"></div>');\n                $gridLayout = this.$element.find('.form-elements .dynamic-form-container');\n            }\n            noOfColumns = 1;\n        }\n        const columnWidth = 12 / noOfColumns;\n        let fieldTemplate = '';\n        let colCount = 0;\n        let index;\n        let userFields;\n        let fields = this.metadata ? this.metadata.data || this.metadata : [];\n\n        this.formFields = []; // empty the form fields\n\n        if (_.isEmpty(fields)) {\n            return;\n        }\n\n        if (this.onBeforeRenderEvt) {\n            userFields = this.invokeEventCallback('beforerender', {$metadata: fields});\n            if (userFields) {\n                fields = userFields;\n            }\n        }\n\n        if (!_.isArray(fields)) {\n            return;\n        }\n\n        while (fields[colCount]) {\n            let colTmpl = '';\n            for (index = 0; index < noOfColumns; index++) {\n                if (fields[colCount]) {\n                    colTmpl += setMarkupForFormField(fields[colCount], columnWidth);\n                }\n                colCount++;\n            }\n            fieldTemplate += `<wm-gridrow>${colTmpl}</wm-gridrow>`;\n        }\n\n        if (!this._isGridLayoutPresent) {\n            fieldTemplate = `<wm-layoutgrid>${fieldTemplate}</wm-layoutgrid>`;\n        }\n\n        this.dynamicFormRef.clear();\n\n        if (!this._dynamicContext) {\n            this._dynamicContext = Object.create(this.viewParent);\n            this._dynamicContext.form = this;\n        }\n        const componentFactoryRef = await this.dynamicComponentProvider.getComponentFactoryRef(\n            'app-form-dynamic-' + this.widgetId,\n            fieldTemplate,\n            {\n                noCache: true,\n                transpile: true\n            });\n        const component = this.dynamicFormRef.createComponent(componentFactoryRef, 0, this.inj);\n        extendProto(component.instance, this._dynamicContext);\n        $gridLayout[0].appendChild(component.location.nativeElement);\n        this.setFormData(this.formdata);\n    }\n\n    get mode() {\n        return this.operationType || this.findOperationType();\n    }\n\n    get dirty() {\n        return this.ngform && this.ngform.dirty;\n    }\n\n    get invalid() {\n        return this.ngform && this.ngform.invalid;\n    }\n\n    get touched() {\n        return this.ngform && this.ngform.touched;\n    }\n\n    invokeActionEvent($event, expression: string) {\n        const fn = $parseEvent(expression);\n        fn(this.viewParent, Object.assign(this.context, {$event}));\n    }\n}\n","import { Directive, Attribute, ContentChildren, AfterContentInit, OnDestroy } from '@angular/core';\n\nimport { AbstractDialogService, App } from '@wm/core';\n\nimport { FormComponent } from '../form.component';\nimport { Live_Operations } from '../../../../utils/data-utils';\n\n@Directive({\n    selector: '[dependson]'\n})\nexport class DependsonDirective implements AfterContentInit, OnDestroy {\n\n    @ContentChildren(FormComponent, {descendants: true}) formChildren;\n\n    private dialogId;\n    private dependson;\n    private isLayoutDialog;\n    private form;\n    private currentOp;\n    private formSubscription;\n    private eventSubscription;\n\n    constructor(\n        @Attribute('dialogid') dialogId: string,\n        @Attribute('dependson') dependson: string,\n        private dialogService: AbstractDialogService,\n        private app: App\n    ) {\n        // If dialogId is present, form is in dialog mode\n        if (dialogId) {\n            this.isLayoutDialog = true;\n            this.dialogId = dialogId;\n        }\n        this.dependson = dependson;\n        // Listen to the wm-event called from subscribed widgets\n        this.eventSubscription = this.app.subscribe('wm-event', this.handleEvent.bind(this));\n    }\n\n    private openFormDialog() {\n        this.dialogService.open(this.dialogId);\n    }\n\n    private onUpdate() {\n        this.form.operationType = Live_Operations.UPDATE;\n        this.form.isSelected = true;\n        this.form.edit();\n    }\n\n    private onInsert() {\n        this.form.operationType = Live_Operations.INSERT;\n        this.form.isSelected = true;\n        this.form.new();\n    }\n\n    private handleEvent(options) {\n        if (this.dependson !== options.widgetName) {\n            return;\n        }\n        this.currentOp = options.eventName;\n        switch (options.eventName) {\n            case Live_Operations.UPDATE:\n                if (this.isLayoutDialog) {\n                    this.openFormDialog();\n                } else {\n                   this.onUpdate();\n                }\n                break;\n            case Live_Operations.INSERT:\n                if (this.isLayoutDialog) {\n                    this.openFormDialog();\n                } else {\n                   this.onInsert();\n                }\n                break;\n            case Live_Operations.DELETE:\n                (<any>this.app).Widgets[this.dependson].call('delete', {row: options.row});\n                break;\n            case Live_Operations.READ:\n                if (!this.isLayoutDialog) {\n                    this.form.isUpdateMode = false;\n                }\n                break;\n        }\n    }\n\n    private onFormRender() {\n        // On opening the form in dialog mode, complete the pending operations\n        if (this.form && this.isLayoutDialog) {\n            setTimeout(() => {\n                if (this.currentOp === Live_Operations.UPDATE) {\n                    this.onUpdate();\n                } else if (this.currentOp === Live_Operations.INSERT) {\n                    this.onInsert();\n                }\n            }, 250);\n        }\n    }\n\n    ngAfterContentInit() {\n        // If form instance is present, form is in inline mode. Else, it is in dialog mode and listen to form instance changes\n        if (this.formChildren.first) {\n            this.form = this.formChildren.first;\n        } else {\n            this.formSubscription = this.formChildren.changes.subscribe((val) => {\n                this.form = val.first;\n                this.onFormRender();\n            });\n        }\n    }\n\n    ngOnDestroy() {\n        if (this.formSubscription) {\n            this.formSubscription.unsubscribe();\n        }\n        if (this.eventSubscription) {\n            this.eventSubscription();\n        }\n    }\n}\n","import { Attribute, Component, ContentChild, Inject, Injector, OnInit, Self, TemplateRef, ViewChild } from '@angular/core';\n\nimport { toBoolean } from '@wm/core';\n\nimport { Context } from '../../../framework/types';\nimport { registerProps } from './dialog.props';\nimport { BaseDialog } from '../base/base-dialog';\nimport { provideAsDialogRef, provideAsWidgetRef } from '../../../../utils/widget-utils';\n\nconst DIALOG_CLS = 'app-dialog modal-dialog';\n\nconst WIDGET_INFO = {widgetType: 'wm-dialog'};\n\n@Component({\n    selector: 'div[wmDialog]',\n    templateUrl: './dialog.component.html',\n    providers: [\n        provideAsWidgetRef(DialogComponent),\n        provideAsDialogRef(DialogComponent),\n        {provide: Context, useValue: {}, multi: true}\n    ]\n})\nexport class DialogComponent extends BaseDialog implements OnInit {\n    static initializeProps = registerProps();\n\n    @ViewChild('dialogTemplate', {read: TemplateRef}) dialogTemplate: TemplateRef<any>;\n    @ContentChild('dialogBody', {read: TemplateRef}) dialogBody: TemplateRef<any>;\n    @ContentChild('dialogFooter', {read: TemplateRef}) dialogFooter: TemplateRef<any>;\n\n    constructor(\n        inj: Injector,\n        @Attribute('class') dialogClass: string,\n        @Attribute('modal') modal: string | boolean,\n        @Attribute('closable') closable: string | boolean,\n        @Self() @Inject(Context) contexts: Array<any>\n    ) {\n        if (modal === null || modal === undefined) {\n            modal = true;\n        }\n\n        if (closable === null || closable === undefined) {\n            closable = true;\n        }\n\n        // contexts[0] will refer to the self context provided by this component\n        contexts[0].closeDialog = () => this.close();\n\n        // setting the backdrop to 'static' will not close the dialog on backdrop click\n        const backdrop: boolean | 'static' = toBoolean(modal) ? 'static' : true;\n\n        super(\n            inj,\n            WIDGET_INFO,\n            {\n                class: `${DIALOG_CLS} ${dialogClass || ''}`,\n                backdrop,\n                keyboard: !toBoolean(modal)\n            }\n        );\n    }\n\n    protected getTemplateRef(): TemplateRef<any> {\n        return this.dialogTemplate;\n    }\n\n    ngOnInit() {\n        super.ngOnInit();\n        this.register(this.viewParent);\n    }\n}\n","import { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-dialog',\n        new Map(\n            [\n                ['animation', PROP_STRING],\n                ['class', PROP_STRING],\n                ['closable', {value: true, PROP_BOOLEAN}],\n                ['iconclass', {value: 'wi wi-file-text', PROP_STRING}],\n                ['iconheight', PROP_STRING],\n                ['iconmargin', PROP_STRING],\n                ['iconurl', PROP_STRING],\n                ['iconwidth', PROP_STRING],\n                ['modal', {value: true, ...PROP_BOOLEAN}],\n                ['name', PROP_STRING],\n                ['showheader', {value: true, ...PROP_BOOLEAN}],\n                ['tabindex', {value: 0, ...PROP_NUMBER}],\n                ['title', {value: 'Information', ...PROP_STRING}],\n                ['eventsource', PROP_ANY]\n            ]\n        )\n    );\n};\n","import { Directive, ElementRef, HostBinding, Inject } from '@angular/core';\n\nimport { BsModalService } from 'ngx-bootstrap';\n\nimport { addClass, setAttr, setCSS } from '@wm/core';\n\nimport { DialogRef } from '../../../../framework/types';\n\ndeclare const $;\n\nconst DEFAULT_CLS = 'app-dialog-body modal-body';\n\n@Directive({\n    selector: 'div[wmDialogBody]',\n})\nexport class DialogBodyDirective {\n    @HostBinding('style.height') height;\n\n    constructor(\n        elRef: ElementRef,\n        @Inject(DialogRef) private dialogRef,\n        bsModal: BsModalService\n    ) {\n        addClass(elRef.nativeElement, DEFAULT_CLS);\n\n        const subscription = bsModal.onShown.subscribe(() => {\n            const dialogRoot = $(elRef.nativeElement).closest('.app-dialog')[0];\n            const width = this.dialogRef.width;\n            if (dialogRoot) {\n                if (width) {\n                    setCSS(dialogRoot, 'width', width);\n                }\n                setAttr(dialogRoot, 'tabindex', this.dialogRef.tabindex);\n                setAttr(dialogRoot, 'name', this.dialogRef.name);\n\n            }\n            subscription.unsubscribe();\n        });\n    }\n}\n","import { Directive, Injector } from '@angular/core';\n\nimport { IWidgetConfig } from '../../../../framework/types';\nimport { BaseComponent } from '../../../base/base.component';\nimport { registerProps } from './dialog-footer.props';\nimport { provideAsWidgetRef } from '../../../../../utils/widget-utils';\n\nconst WIDGET_INFO: IWidgetConfig = {\n    widgetType: 'wm-dialogfooter',\n    hostClass: 'app-dialog-footer modal-footer'\n};\n\n@Directive({\n    selector: 'div[wmDialogFooter]',\n    providers: [\n        provideAsWidgetRef(DialogFooterDirective)\n    ]\n})\nexport class DialogFooterDirective extends BaseComponent {\n    static initializeProps = registerProps();\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_INFO);\n    }\n}\n","import { PROP_BOOLEAN, PROP_STRING, register } from '../../../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-dialogfooter',\n        new Map([\n            ['class', PROP_STRING],\n            ['name', PROP_STRING],\n            ['show', {value: true, ...PROP_BOOLEAN}]\n        ])\n    );\n};\n","import { Component, ElementRef, Inject, Input } from '@angular/core';\n\nimport { addClass, toBoolean } from '@wm/core';\n\nimport { DialogRef } from '../../../../framework/types';\nimport { BaseDialog } from '../base-dialog';\n\nconst DEFAULT_CLS = 'app-dialog-header modal-header';\nconst DEFAULT_ICON_DIMENSIONS = '21px';\n\n@Component({\n    selector: 'div[wmDialogHeader]',\n    templateUrl: './dialog-header.component.html'\n})\nexport class DialogHeaderComponent {\n\n    @Input() public iconwidth = DEFAULT_ICON_DIMENSIONS;\n    @Input() public iconheight = DEFAULT_ICON_DIMENSIONS;\n    @Input() public iconmargin: string;\n    @Input() public iconclass: string;\n    @Input() public iconurl: string;\n    @Input() public closable = true;\n    @Input() public heading: string;\n    @Input() public subheading: string;\n\n    public get isClosable() {\n        return toBoolean(this.closable);\n    }\n\n    constructor(elRef: ElementRef, @Inject(DialogRef) private dialogRef: BaseDialog) {\n        addClass(elRef.nativeElement, DEFAULT_CLS);\n    }\n\n    public closeDialog() {\n        this.dialogRef.close();\n    }\n}\n","import { Directive, Injector } from '@angular/core';\n\nimport { APPLY_STYLES_TYPE, styler } from '../../framework/styler';\nimport { IWidgetConfig } from '../../framework/types';\nimport { StylableComponent } from '../base/stylable.component';\nimport { registerProps } from './footer.props';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\n\nconst DEFAULT_CLS = 'app-footer clearfix';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-footer',\n    hostClass: DEFAULT_CLS\n};\n\n@Directive({\n    selector: '[wmFooter]',\n    providers: [\n        provideAsWidgetRef(FooterDirective)\n    ]\n})\nexport class FooterDirective extends StylableComponent {\n    static initializeProps = registerProps();\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n\n        styler(this.nativeElement, this, APPLY_STYLES_TYPE.CONTAINER);\n    }\n}\n","import { PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-footer',\n        new Map(\n            [\n                ['name', PROP_STRING],\n                ['class', PROP_STRING],\n                ['content', PROP_STRING]\n            ]\n        )\n    );\n};\n","import { Directive, Injector, OnInit, Optional } from '@angular/core';\n\nimport { BaseComponent } from '../../base/base.component';\nimport { registerProps } from './form-action.props';\nimport { provideAsWidgetRef } from '../../../../utils/widget-utils';\nimport { FormComponent } from '../form.component';\n\ndeclare const _;\n\nconst WIDGET_CONFIG = {widgetType: 'wm-form-action', hostClass: ''};\n\n@Directive({\n    selector: '[wmFormAction]',\n    providers: [\n        provideAsWidgetRef(FormActionDirective)\n    ]\n})\nexport class FormActionDirective extends BaseComponent implements OnInit {\n    static initializeProps = registerProps();\n\n    accessroles;\n    action;\n    binding;\n    class;\n    disabled;\n    displayName;\n    iconclass;\n    iconname;\n    key;\n    position;\n    shortcutkey;\n    show;\n    tabindex;\n    title;\n    type;\n    updateMode;\n    buttonDef;\n    hyperlink;\n    target;\n\n    private _propsInitialized: boolean;\n\n    constructor(inj: Injector, @Optional() public form: FormComponent) {\n        super(inj, WIDGET_CONFIG);\n    }\n\n    populateAction() {\n        this.buttonDef = {\n            key: this.key || this.binding,\n            displayName: this['display-name'],\n            show: this.show,\n            class: this.class ? this.class : (this['widget-type'] === 'button' ? 'btn-secondary' : ''),\n            iconclass: this.iconclass || '',\n            title: _.isUndefined(this.title) ? (this['display-name'] || '') : this.title,\n            action: this.action,\n            accessroles: this.accessroles,\n            shortcutkey: this.shortcutkey,\n            disabled: this.disabled,\n            tabindex: this.tabindex,\n            iconname: this.iconname,\n            type: this.type,\n            updateMode: this['update-mode'],\n            position: this.position,\n            widgetType: this['widget-type'],\n            hyperlink: this.hyperlink,\n            target: this.target\n        };\n        this._propsInitialized = true;\n    }\n\n    ngOnInit() {\n        super.ngOnInit();\n        this.populateAction();\n        this.form.registerActions(this.buttonDef);\n    }\n\n    onPropertyChange(key, nv, ov) {\n        if (!this._propsInitialized) {\n            return;\n        }\n        switch (key) {\n            case 'display-name':\n                this.buttonDef.displayName = nv;\n            default:\n                this.buttonDef[key] = nv;\n            break;\n        }\n    }\n}\n","import { PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-form-action',\n        new Map(\n            [\n                ['accessroles', PROP_STRING],\n                ['action', PROP_STRING],\n                ['class', PROP_STRING],\n                ['binding', PROP_STRING],\n                ['disabled', PROP_BOOLEAN],\n                ['display-name', PROP_STRING],\n                ['hyperlink', PROP_STRING],\n                ['iconclass', PROP_STRING],\n                ['iconname', PROP_STRING],\n                ['key', PROP_STRING],\n                ['position', {value: 'footer', ...PROP_STRING}],\n                ['shortcutkey', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n                ['tabindex', {value: 0, ...PROP_NUMBER}],\n                ['target', PROP_STRING],\n                ['title', PROP_STRING],\n                ['type', {value: 'button', ...PROP_STRING}],\n                ['update-mode', {value: true, ...PROP_BOOLEAN}],\n                ['widget-type', {value: 'button', ...PROP_STRING}]\n            ]\n        )\n    );\n};\n","import { PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const colorPickerProps = new Map(\n    [\n        ['class', PROP_STRING],\n        ['datavalue', PROP_STRING],\n        ['disabled', PROP_BOOLEAN],\n        ['hint', PROP_STRING],\n        ['name', PROP_STRING],\n        ['placeholder', {value: 'Select Color', ...PROP_STRING}],\n        ['readonly', PROP_BOOLEAN],\n        ['required', PROP_BOOLEAN],\n        ['shortcutkey', PROP_STRING],\n        ['show', {value: true, ...PROP_BOOLEAN}],\n        ['tabindex', {value: 0, ...PROP_NUMBER}]\n    ]\n);\n\nexport const registerProps = () => {\n    register(\n        'wm-colorpicker',\n        colorPickerProps\n    );\n};\n","import { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const numberProps = new Map(\n    [\n        ['autofocus', PROP_BOOLEAN],\n        ['class', PROP_STRING],\n        ['datavaluesource', PROP_ANY],\n        ['datavalue', PROP_STRING],\n        ['disabled', PROP_BOOLEAN],\n        ['hint', PROP_STRING],\n        ['localefilter', PROP_STRING],\n        ['minvalue', PROP_NUMBER],\n        ['maxvalue', PROP_NUMBER],\n        ['name', PROP_STRING],\n        ['numberfilter', PROP_STRING],\n        ['placeholder', {value: 'Enter number', ...PROP_STRING}],\n        ['readonly', PROP_BOOLEAN],\n        ['regexp', PROP_STRING],\n        ['required', PROP_BOOLEAN],\n        ['shortcutkey', PROP_STRING],\n        ['show', {value: true, ...PROP_BOOLEAN}],\n        ['step', {value: 1, ...PROP_NUMBER}],\n        ['tabindex', {value: 0, ...PROP_NUMBER}],\n        ['updateon', PROP_STRING]\n    ]\n);\n\nexport const registerProps = () => {\n    register(\n        'wm-number',\n        numberProps\n    );\n};\n","import { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../../framework/widget-props';\n\nexport const inputNumberTypeProps = new Map(\n    [\n        ['autocomplete', {value: true, ...PROP_BOOLEAN}],\n        ['autofocus', PROP_BOOLEAN],\n        ['class', PROP_STRING],\n        ['datavaluesource', PROP_ANY],\n        ['datavalue', PROP_STRING],\n        ['disabled', PROP_BOOLEAN],\n        ['hint', PROP_STRING],\n        ['maxchars', PROP_NUMBER],\n        ['maxvalue', PROP_NUMBER],\n        ['minvalue', PROP_NUMBER],\n        ['name', PROP_STRING],\n        ['placeholder', {value: 'Enter text', ...PROP_STRING}],\n        ['readonly', PROP_BOOLEAN],\n        ['regexp', PROP_STRING],\n        ['required', PROP_BOOLEAN],\n        ['shortcutkey', PROP_STRING],\n        ['show', {value: true, ...PROP_BOOLEAN}],\n        ['step', PROP_NUMBER],\n        ['tabindex', {value: 0, ...PROP_NUMBER}],\n        ['type', PROP_STRING],\n        ['updateon', PROP_STRING]\n    ]\n);\n\nexport const registerProps = () => {\n    register(\n        'wm-input-number',\n        inputNumberTypeProps\n    );\n};\n","import { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../../framework/widget-props';\n\nexport const inputTextTypeProps = new Map(\n    [\n        ['autocomplete', {value: true, ...PROP_BOOLEAN}],\n        ['autofocus', PROP_BOOLEAN],\n        ['class', PROP_STRING],\n        ['datavaluesource', PROP_ANY],\n        ['datavalue', PROP_STRING],\n        ['disabled', PROP_BOOLEAN],\n        ['displayformat', PROP_STRING],\n        ['hint', PROP_STRING],\n        ['maxchars', PROP_NUMBER],\n        ['name', PROP_STRING],\n        ['placeholder', {value: 'Enter text', ...PROP_STRING}],\n        ['readonly', PROP_BOOLEAN],\n        ['regexp', PROP_STRING],\n        ['required', PROP_BOOLEAN],\n        ['shortcutkey', PROP_STRING],\n        ['show', {value: true, ...PROP_BOOLEAN}],\n        ['tabindex', {value: 0, ...PROP_NUMBER}],\n        ['type', {value: 'text', ...PROP_STRING}],\n        ['updateon', PROP_STRING]\n    ]\n);\n\nexport const registerProps = () => {\n    register(\n        'wm-input-text',\n        inputTextTypeProps\n    );\n};\n","import { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../../framework/widget-props';\n\nexport const inputCalendarTypeProps = new Map(\n    [\n        ['autocomplete', {value: true, ...PROP_BOOLEAN}],\n        ['autofocus', PROP_BOOLEAN],\n        ['class', PROP_STRING],\n        ['datasource', PROP_ANY],\n        ['datavalue', PROP_STRING],\n        ['disabled', PROP_BOOLEAN],\n        ['hint', PROP_STRING],\n        ['maxvalue', PROP_NUMBER],\n        ['minvalue', PROP_NUMBER],\n        ['name', PROP_STRING],\n        ['placeholder', {value: 'Enter text', ...PROP_STRING}],\n        ['readonly', PROP_BOOLEAN],\n        ['required', PROP_BOOLEAN],\n        ['shortcutkey', PROP_STRING],\n        ['show', {value: true, ...PROP_BOOLEAN}],\n        ['step', PROP_NUMBER],\n        ['tabindex', {value: 0, ...PROP_NUMBER}],\n        ['type', PROP_STRING],\n        ['updateon', PROP_STRING]\n    ]\n);\n\nexport const registerProps = () => {\n    register(\n        'wm-input-calendar',\n        inputCalendarTypeProps\n    );\n};\n","import { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../../framework/widget-props';\n\nexport const inputColorTypeProps = new Map([\n    ['autocomplete', {value: true, ...PROP_BOOLEAN}],\n    ['autofocus', PROP_BOOLEAN],\n    ['class', PROP_STRING],\n    ['datavaluesource', PROP_ANY],\n    ['datavalue', PROP_STRING],\n    ['disabled', PROP_BOOLEAN],\n    ['hint', PROP_STRING],\n    ['name', PROP_STRING],\n    ['placeholder', {value: 'Enter text', ...PROP_STRING}],\n    ['readonly', PROP_BOOLEAN],\n    ['required', PROP_BOOLEAN],\n    ['shortcutkey', PROP_STRING],\n    ['show', {value: true, ...PROP_BOOLEAN}],\n    ['tabindex', {value: 0, ...PROP_NUMBER}],\n    ['type', PROP_STRING],\n    ['updateon', PROP_STRING]\n]);\n\nexport const registerProps = () => {\n    register(\n        'wm-input-color',\n        inputColorTypeProps\n    );\n};\n","import { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../../framework/widget-props';\n\nexport const inputEmailTypeProps = new Map(\n    [\n        ['autocomplete', {value: true, ...PROP_BOOLEAN}],\n        ['autofocus', PROP_BOOLEAN],\n        ['class', PROP_STRING],\n        ['datavaluesource', PROP_ANY],\n        ['datavalue', PROP_STRING],\n        ['disabled', PROP_BOOLEAN],\n        ['hint', PROP_STRING],\n        ['maxchars', PROP_NUMBER],\n        ['name', PROP_STRING],\n        ['placeholder', {value: 'Enter text', ...PROP_STRING}],\n        ['readonly', PROP_BOOLEAN],\n        ['regexp', PROP_STRING],\n        ['required', PROP_BOOLEAN],\n        ['shortcutkey', PROP_STRING],\n        ['show', {value: true, ...PROP_BOOLEAN}],\n        ['tabindex', {value: 0, ...PROP_NUMBER}],\n        ['type', PROP_STRING],\n        ['updateon', PROP_STRING]\n    ]\n);\n\nexport const registerProps = () => {\n    register(\n        'wm-input-email',\n        inputEmailTypeProps\n    );\n};\n","import { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const radiosetProps = new Map(\n    [\n        ['class', PROP_STRING],\n        ['compareby', PROP_STRING],\n        ['datafield', PROP_STRING],\n        ['dataset', {value: 'Option 1, Option 2, Option 3', ...PROP_ANY}],\n        ['datavaluesource', PROP_ANY],\n        ['datavalue', PROP_STRING],\n        ['disabled', PROP_BOOLEAN],\n        ['displayexpression', PROP_STRING],\n        ['displayfield', PROP_STRING],\n        ['displayValue', PROP_STRING],\n        ['itemclass', {value: '', ...PROP_STRING}],\n        ['layout', {value: 'stacked', ...PROP_STRING}],\n        ['listclass', {value: '', ...PROP_STRING}],\n        ['name', PROP_STRING],\n        ['orderby', PROP_STRING],\n        ['readonly', PROP_BOOLEAN],\n        ['required', PROP_BOOLEAN],\n        ['show', {value: true, ...PROP_BOOLEAN}],\n        ['showindevice', {displayType: 'inline-block', value: 'all', ...PROP_STRING}],\n        ['tabindex', {value: 0, ...PROP_NUMBER}],\n        ['usekeys', PROP_BOOLEAN]\n    ]\n);\n\nexport const registerProps = () => {\n    register(\n        'wm-radioset',\n        radiosetProps\n    );\n};\n","import { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const ratingProps = new Map(\n    [\n        ['caption', PROP_STRING],\n        ['class', PROP_STRING],\n        ['datafield', PROP_STRING],\n        ['dataset', PROP_ANY],\n        ['datavaluesource', PROP_ANY],\n        ['datavalue', PROP_STRING],\n        ['displayexpression', PROP_STRING],\n        ['displayfield', PROP_STRING],\n        ['hint', PROP_STRING],\n        ['iconcolor', PROP_STRING],\n        ['iconsize', PROP_STRING],\n        ['maxvalue', {value: 5, ...PROP_NUMBER}],\n        ['name', PROP_STRING],\n        ['orderby', PROP_STRING],\n        ['readonly', PROP_BOOLEAN],\n        ['show', {value: true, ...PROP_BOOLEAN}],\n        ['showcaptions', {value: true, ...PROP_BOOLEAN}],\n        ['tabindex', {value: 0, ...PROP_NUMBER}],\n        ['usekeys', PROP_BOOLEAN]\n    ]\n);\n\nexport const registerProps = () => {\n    register(\n        'wm-rating',\n        ratingProps\n    );\n};\n","import { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const richTextProps = new Map(\n    [\n        ['class', PROP_STRING],\n        ['datavaluesource', PROP_ANY],\n        ['datavalue', PROP_STRING],\n        ['height', PROP_STRING],\n        ['name', PROP_STRING],\n        ['placeholder', PROP_STRING],\n        ['readonly', PROP_BOOLEAN],\n        ['show', {value: true, ...PROP_BOOLEAN}],\n        ['showpreview', {value: false, ...PROP_BOOLEAN}],\n        ['tabindex', {value: 0, ...PROP_NUMBER}]\n    ]\n);\n\nexport const registerProps = () => {\n    register(\n        'wm-richtexteditor',\n        richTextProps\n    );\n};\n","import { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const selectProps = new Map(\n    [\n        ['autofocus', PROP_BOOLEAN],\n        ['class', {value: '', ...PROP_STRING}],\n        ['compareby', PROP_STRING],\n        ['datafield', PROP_STRING],\n        ['dataset', PROP_ANY],\n        ['datavaluesource', PROP_ANY],\n        ['datavalue', PROP_STRING],\n        ['disabled', PROP_BOOLEAN],\n        ['displayexpression', PROP_STRING],\n        ['displayfield', PROP_STRING],\n        ['displayValue', PROP_STRING],\n        ['hint', PROP_STRING],\n        ['multiple', {value: false, ...PROP_BOOLEAN}],\n        ['name', PROP_STRING],\n        ['orderby', PROP_STRING],\n        ['placeholder', PROP_STRING],\n        ['readonly', PROP_BOOLEAN],\n        ['required', PROP_BOOLEAN],\n        ['shortcutkey', PROP_STRING],\n        ['show', {value: true, ...PROP_BOOLEAN}],\n        ['tabindex', {value: 0, ...PROP_NUMBER}],\n        ['usekeys', PROP_BOOLEAN]\n    ]\n);\n\nexport const registerProps = () => {\n    register(\n        'wm-select',\n        selectProps\n    );\n};\n","import { PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const sliderProps = new Map(\n    [\n        ['class', PROP_STRING],\n        ['datavalue', PROP_STRING],\n        ['disabled', PROP_BOOLEAN],\n        ['hint', PROP_STRING],\n        ['maxvalue', PROP_NUMBER],\n        ['minvalue', PROP_NUMBER],\n        ['name', PROP_STRING],\n        ['readonly', PROP_BOOLEAN],\n        ['shortcutkey', PROP_STRING],\n        ['show', {value: true, ...PROP_BOOLEAN}],\n        ['step', PROP_NUMBER],\n        ['tabindex', {value: 0, ...PROP_NUMBER}]\n    ]\n);\n\nexport const registerProps = () => {\n    register(\n        'wm-slider',\n        sliderProps\n    );\n};\n","import { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const switchProps = new Map(\n    [\n        ['class', PROP_STRING],\n        ['compareby', PROP_STRING],\n        ['datafield', PROP_STRING],\n        ['dataset', {value: 'yes, no, maybe', ...PROP_ANY}],\n        ['datavaluesource', PROP_ANY],\n        ['datavalue', PROP_STRING],\n        ['disabled', PROP_BOOLEAN],\n        ['displayexpression', PROP_STRING],\n        ['displayfield', PROP_STRING],\n        ['hint', PROP_STRING],\n        ['iconclass', PROP_STRING],\n        ['name', PROP_STRING],\n        ['orderby', PROP_STRING],\n        ['required', PROP_BOOLEAN],\n        ['show', {value: true, ...PROP_BOOLEAN}],\n        ['tabindex', {value: 0, ...PROP_NUMBER}]\n    ]\n);\n\n\nexport const registerProps = () => {\n    register(\n        'wm-switch',\n        switchProps\n    );\n};\n","import { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const textareaProps = new Map(\n    [\n        ['autofocus', PROP_BOOLEAN],\n        ['class', PROP_STRING],\n        ['datavaluesource', PROP_ANY],\n        ['datavalue', PROP_STRING],\n        ['disabled', PROP_BOOLEAN],\n        ['hint', PROP_STRING],\n        ['maxchars', PROP_NUMBER],\n        ['name', PROP_STRING],\n        ['placeholder', {value: 'Place your text', ...PROP_STRING}],\n        ['readonly', PROP_BOOLEAN],\n        ['required', PROP_BOOLEAN],\n        ['shortcutkey', PROP_STRING],\n        ['show', {value: true, ...PROP_BOOLEAN}],\n        ['tabindex', {value: 0, ...PROP_NUMBER}],\n        ['updateon', PROP_STRING]\n    ]\n);\n\nexport const registerProps = () => {\n    register(\n        'wm-textarea',\n        textareaProps\n    );\n};\n","import { isMobileApp } from '@wm/core';\n\nimport { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const timeProps = new Map(\n    [\n        ['autofocus', PROP_BOOLEAN],\n        ['class', PROP_STRING],\n        ['datavaluesource', PROP_ANY],\n        ['datavalue', PROP_STRING],\n        ['disabled', PROP_BOOLEAN],\n        ['hint', PROP_STRING],\n        ['hourstep', {value: 1, ...PROP_NUMBER}],\n        ['maxtime', PROP_STRING],\n        ['mintime', PROP_STRING],\n        ['minutestep', {value: 15, ...PROP_NUMBER}],\n        ['name', PROP_STRING],\n        ['outputformat', {value: 'HH:mm:ss', ...PROP_STRING}],\n        ['placeholder', {value: 'Select time', ...PROP_STRING}],\n        ['readonly', PROP_BOOLEAN],\n        ['required', PROP_BOOLEAN],\n        ['shortcutkey', PROP_STRING],\n        ['show', {value: true, ...PROP_BOOLEAN}],\n        ['showdropdownon', {value: 'default', ...PROP_STRING}],\n        ['secondsstep', {value: 1, ...PROP_NUMBER}],\n        ['tabindex', {value: 0, ...PROP_NUMBER}],\n        ['timepattern', PROP_STRING],\n        ['timestamp', PROP_STRING]\n    ]\n);\n\nexport const registerProps = () => {\n    if (isMobileApp()) {\n        timeProps.set('timepattern', {value: 'HH:mm', ...PROP_STRING});\n    }\n    register(\n        'wm-time',\n        timeProps\n    );\n};\n","import {AfterContentInit, Attribute, ContentChild, Directive, Inject, Injector, OnInit, Optional, Self} from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\n\nimport { debounceTime } from 'rxjs/operators';\n\nimport { debounce, FormWidgetType, isDefined, isMobile, addForIdAttributes } from '@wm/core';\n\nimport { registerProps } from './form-field.props';\nimport { getEvaluatedData, provideAsNgValueAccessor, provideAsWidgetRef } from '../../../../utils/widget-utils';\nimport { getDefaultViewModeWidget } from '../../../../utils/live-utils';\nimport { StylableComponent } from '../../base/stylable.component';\nimport { FormComponent } from '../form.component';\nimport { Context } from '../../../framework/types';\nimport { ListComponent } from '../../list/list.component';\n\ndeclare const _, $;\n\n// Custom validator to show validation error, if setValidationMessage method is used\nconst customValidatorFn = () => {\n    return { custom: true };\n};\n\nconst FILE_TYPES = {\n    'image' : 'image/*',\n    'video' : 'video/*',\n    'audio' : 'audio/*'\n};\n\n@Directive({\n    selector: '[wmFormField]',\n    exportAs: 'wmFormField',\n    providers: [\n        provideAsWidgetRef(FormFieldDirective),\n        provideAsNgValueAccessor(FormFieldDirective),\n        {provide: Context, useValue: {}, multi: true}\n    ]\n})\nexport class FormFieldDirective extends StylableComponent implements OnInit, AfterContentInit {\n    static initializeProps = registerProps();\n\n    @ContentChild('formWidget') formWidget;\n    @ContentChild('formWidgetMax') formWidgetMax;\n\n    private fb;\n    // excludeProps is used to store the props that should not be applied on inner widget\n    private excludeProps;\n    private _validators;\n    private _oldUploadVal;\n\n    ngform: FormGroup;\n    defaultvalue;\n    displayexpression;\n    displayfield;\n    displaylabel;\n    displayname;\n    generator;\n    key;\n    target;\n    binding;\n    widgettype;\n    class;\n    readonly;\n    show;\n    type;\n    isDataSetBound;\n    viewmodewidget;\n    binddataset;\n    binddisplayexpression;\n    binddisplaylabel;\n    form;\n    filetype;\n    extensions;\n    permitted;\n    period;\n    isRange;\n    name;\n\n    // Validation properties\n    required;\n    maxchars;\n    minvalue;\n    maxvalue;\n    regexp;\n    validationmessage;\n\n    public _fieldName;\n\n    private _debounceSetUpValidators;\n    private _initPropsRes;\n    private parentList;\n\n    constructor(\n        inj: Injector,\n        form: FormComponent,\n        fb: FormBuilder,\n        @Optional() parentList: ListComponent,\n        @Attribute('dataset.bind') binddataset,\n        @Attribute('displayexpression.bind') binddisplayexpression: string,\n        @Attribute('displaylabel.bind') binddisplaylabel: string,\n        @Attribute('widgettype') _widgetType,\n        @Attribute('name') name,\n        @Attribute('key') key,\n        @Attribute('is-range') isRange,\n        @Attribute('pc-display') pcDisplay,\n        @Attribute('mobile-display') mobileDisplay,\n        @Self() @Inject(Context) contexts: Array<any>\n    ) {\n\n        const WIDGET_CONFIG = {\n            widgetType: 'wm-form-field',\n            hostClass: '',\n            widgetSubType: 'wm-form-field-' + (_widgetType || FormWidgetType.TEXT).trim()\n        };\n\n        super(inj, WIDGET_CONFIG, new Promise(res => this._initPropsRes = res));\n\n        this._validators = [];\n        this.class = '';\n        this.binddataset = binddataset;\n        this.binddisplayexpression = binddisplayexpression;\n        this.binddisplaylabel = binddisplaylabel;\n        this.form = form;\n        this.fb = fb;\n        this._fieldName = key || name;\n        this.isRange = isRange;\n        this.excludeProps = new Set(['type', 'name']);\n        this.widgettype = _widgetType;\n        this.parentList = parentList;\n\n        if (this.binddataset || this.$element.attr('dataset')) {\n            this.isDataSetBound = true;\n        }\n\n        contexts[0]._onFocusField = this._onFocusField.bind(this);\n        contexts[0]._onBlurField = this._onBlurField.bind(this);\n\n        this._debounceSetUpValidators = debounce(() => this.setUpValidators(), 500);\n    }\n\n    _onFocusField($evt) {\n        $($evt.target).closest('.live-field').addClass('active');\n    }\n\n    _onBlurField($evt) {\n        $($evt.target).closest('.live-field').removeClass('active');\n        this.setUpValidators();\n    }\n\n    // Expression to be evaluated in view mode of form field\n    evaluateExpr(object, displayExpr) {\n        if (!displayExpr) {\n            displayExpr = Object.keys(object)[0];\n            // If dataset is not ready, display expression will not be defined\n            if (!displayExpr) {\n                return;\n            }\n        }\n        return getEvaluatedData(object, {\n            expression: displayExpr\n        }, this.viewParent);\n    }\n\n    // Expression to be evaluated in view mode of form field\n    getDisplayExpr() {\n        const caption = [];\n        const value = this.value;\n        const displayExpr = this.displayexpression || this.displayfield || this.displaylabel;\n        if (_.isObject(value)) {\n            if (_.isArray(value)) {\n                _.forEach(value, obj => {\n                    if (_.isObject(obj)) {\n                        caption.push(this.evaluateExpr(obj, displayExpr));\n                    }\n                });\n            } else {\n                caption.push(this.evaluateExpr(value, displayExpr));\n            }\n            return _.join(caption, ',');\n        }\n        return (value === undefined || value === null) ? '' : this.value;\n    }\n\n    getCaption() {\n        return (this.value === undefined || this.value === null) ? (_.get(this.form.dataoutput, this._fieldName) || '') : this.value;\n    }\n\n    // Method to setup validators for reactive form control\n    private setUpValidators(customValidator?) {\n        this._validators = [];\n\n        if (this.required && this.show !== false) {\n            // For checkbox/toggle widget, required validation should consider true value only\n            if (this.widgettype === FormWidgetType.CHECKBOX || this.widgettype === FormWidgetType.TOGGLE) {\n                this._validators.push(Validators.requiredTrue);\n            } else {\n                this._validators.push(Validators.required);\n            }\n        }\n        if (this.maxchars) {\n            this._validators.push(Validators.maxLength(this.maxchars));\n        }\n        if (this.minvalue) {\n            this._validators.push(Validators.min(this.minvalue));\n        }\n        if (this.maxvalue && this.widgettype !== FormWidgetType.RATING) {\n            this._validators.push(Validators.max(this.maxvalue));\n        }\n        if (this.regexp) {\n            this._validators.push(Validators.pattern(this.regexp));\n        }\n        if (_.isFunction(this.formWidget.validate)) {\n            this._validators.push(this.formWidget.validate.bind(this.formWidget));\n        }\n        if (customValidator) {\n            this._validators.push(customValidator);\n        }\n\n        if (this.ngform) {\n            this._control.setValidators(this._validators);\n            const opt = {};\n            // updating the value only when prevData is not equal to current value.\n            // emitEvent flag will prevent from emitting the valueChanges when value is equal to the prevDatavalue.\n            if (this.value === this.formWidget.prevDatavalue) {\n                opt['emitEvent'] = false;\n            }\n            this._control.updateValueAndValidity(opt);\n\n        }\n    }\n\n    // Method to set the properties on inner form widget\n    setFormWidget(key, val) {\n        if (this.formWidget && this.formWidget.widget) {\n            this.formWidget.widget[key] = val;\n        }\n    }\n\n    // Method to set the properties on inner max form widget (when range is selected)\n    setMaxFormWidget(key, val) {\n        if (this.formWidgetMax) {\n            this.formWidgetMax.widget[key] = val;\n        }\n    }\n\n    onPropertyChange(key, nv, ov?) {\n        if (key !== 'tabindex') {\n            super.onPropertyChange(key, nv, ov);\n        }\n\n        if (this.excludeProps.has(key)) {\n            return;\n        }\n\n        // As upload widget is an HTML widget, only required property is setup\n        if (this.widgettype === FormWidgetType.UPLOAD) {\n            if (key === 'required') {\n                this._debounceSetUpValidators();\n            }\n            super.onPropertyChange(key, nv, ov);\n            return;\n        }\n\n        this.setFormWidget(key, nv);\n\n        // Placeholder should not be setup on max widget\n        if (key !== 'placeholder') {\n            this.setMaxFormWidget(key, nv);\n        }\n\n        switch (key) {\n            case 'defaultvalue':\n                this.form.onFieldDefaultValueChange(this, nv);\n                break;\n            case 'maxdefaultvalue':\n                this.maxValue = nv;\n                this.setMaxFormWidget('datavalue', nv);\n                this.form.onMaxDefaultValueChange();\n                break;\n            case 'maxplaceholder':\n                this.setMaxFormWidget('placeholder', nv);\n                break;\n            case 'required':\n            case 'maxchars':\n            case 'minvalue':\n            case 'maxvalue':\n            case 'regexp':\n            case 'show':\n                this._debounceSetUpValidators();\n                break;\n            case 'primary-key':\n                if (nv) {\n                    this.form.setPrimaryKey(this._fieldName);\n                }\n                break;\n            case 'display-name':\n                this.displayname = nv;\n                break;\n            case 'readonly':\n               this.setReadOnlyState();\n                break;\n        }\n    }\n\n    onStyleChange(key, nv, ov?) {\n        this.setFormWidget(key, nv);\n        this.setMaxFormWidget(key, nv);\n        super.onStyleChange(key, nv, ov);\n    }\n\n    get datavalue() {\n        return this.formWidget && this.formWidget.datavalue;\n    }\n\n    set datavalue(val) {\n        if (this._control && this.widgettype !== FormWidgetType.UPLOAD) {\n            this._control.setValue(val);\n        }\n    }\n\n    get value() {\n        return this.datavalue;\n    }\n\n    set value(val) {\n        this.datavalue = val;\n    }\n\n    get maxValue() {\n        return this.formWidgetMax && this.formWidgetMax.datavalue;\n    }\n\n    set maxValue(val) {\n        if (this._maxControl) {\n            this._maxControl.setValue(val);\n        }\n    }\n\n    get minValue() {\n        return this.value;\n    }\n\n    set minValue(val) {\n        this.value = val;\n    }\n\n    // Get the reactive form control\n    get _control() {\n        return this.ngform && this.ngform.controls[this._fieldName];\n    }\n\n    // Get the reactive max form control\n    get _maxControl() {\n        return this.ngform && this.ngform.controls[this._fieldName + '_max'];\n    }\n\n    // Create the reactive form control\n    createControl() {\n        return this.fb.control(undefined, {\n            validators: this._validators\n        });\n    }\n\n    // On field value change, propagate event to parent form\n    onValueChange(val) {\n        if (!this.isDestroyed) {\n            this.form.onFieldValueChange(this, val);\n        }\n    }\n\n    // Method to expose validation message and set control to invalid\n    setValidationMessage(val) {\n        setTimeout(() => {\n            this.validationmessage = val;\n            this.setUpValidators(customValidatorFn);\n        });\n    }\n\n    setReadOnlyState() {\n        let readOnly;\n        if (this.form.isUpdateMode) {\n            if (this['primary-key'] && !this['is-related'] && !this.period) {\n                /*If the field is primary but is assigned set readonly false.\n                   Assigned is where the user inputs the value while a new entry.\n                   This is not editable(in update mode) once entry is successful*/\n                readOnly = !(this.generator === 'assigned' && this.form.operationType !== 'update');\n            } else {\n                readOnly = this.readonly;\n            }\n        } else {\n            // In view mode, set widget state to readonly always\n            readOnly = true;\n        }\n        this.setFormWidget('readonly', readOnly);\n    }\n\n    resetDisplayInput() {\n        if ((!isDefined(this.value) || this.value === '')) {\n            this.formWidget && this.formWidget.resetDisplayInput && this.formWidget.resetDisplayInput();\n        }\n    }\n\n    triggerUploadEvent($event, eventName) {\n        const params: any = {$event};\n        if (eventName === 'change') {\n            params.newVal = $event.target.files;\n            params.oldVal = this._oldUploadVal;\n            this._oldUploadVal = params.newVal;\n        }\n        this.invokeEventCallback(eventName, params);\n    }\n\n    private registerFormField() {\n\n        const fieldName = this._fieldName;\n\n        if (this.parentList && !(this.form.parentList === this.parentList)) {\n            let counter = 1;\n            let _fieldName = fieldName;\n            while (this.ngform.controls.hasOwnProperty(_fieldName)) {\n                _fieldName = `${fieldName}_${counter}`;\n                counter++;\n            }\n            this.ngform.addControl(_fieldName, this.createControl());\n            this._fieldName = _fieldName;\n         } else {\n            this.ngform.addControl(fieldName, this.createControl());\n        }\n        const onValueChangeSubscription = this._control.valueChanges\n            .pipe(debounceTime(200))\n            .subscribe(this.onValueChange.bind(this));\n        this.registerDestroyListener(() => onValueChangeSubscription.unsubscribe());\n\n        if (this.isRange === 'true') {\n            this.ngform.addControl(fieldName + '_max', this.createControl());\n            // registering for valueChanges on MaxformWidget\n            const onMaxValueChangeSubscription = this._maxControl.valueChanges\n                .pipe(debounceTime(200))\n                .subscribe(this.onValueChange.bind(this));\n            this.registerDestroyListener(() => onMaxValueChangeSubscription.unsubscribe());\n        }\n        this.value =  _.get(this.form.formdata, this._fieldName);\n    }\n\n    ngOnInit() {\n        this.ngform = this.form.ngform;\n        this.registerFormField();\n        super.ngOnInit();\n    }\n\n    ngAfterContentInit() {\n        super.ngAfterContentInit();\n\n        if (this.formWidget) {\n            this._initPropsRes();\n\n            // setting displayExpressions on the formwidget explicitly as expr was evaluated to \"\".\n            this.setFormWidget('binddisplaylabel', this.binddisplaylabel);\n            this.setFormWidget('binddisplayexpression', this.binddisplayexpression);\n        }\n\n        this.registerReadyStateListener(() => {\n            this.key = this._fieldName || this.target || this.binding;\n            this.viewmodewidget = this.viewmodewidget || getDefaultViewModeWidget(this.widgettype);\n\n            // For upload widget, generate the permitted field\n            if (this.widgettype === FormWidgetType.UPLOAD) {\n                let fileType;\n                // Create the accepts string from file type and extensions\n                fileType = this.filetype ? FILE_TYPES[this.filetype] : '';\n                this.permitted = fileType + (this.extensions ? (fileType ? ',' : '') + this.extensions : '');\n            }\n\n            if (isMobile()) {\n                if (!this['mobile-display']) {\n                    this.widget.show = false;\n                }\n            } else {\n                if (!this['pc-display']) {\n                    this.widget.show = false;\n                }\n            }\n\n            // Register the form field with parent form\n            this.form.registerFormFields(this.widget);\n\n            addForIdAttributes(this.nativeElement);\n\n            this.setReadOnlyState();\n        });\n    }\n}\n","import { FormWidgetType } from '@wm/core';\n\nimport { PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../../framework/widget-props';\nimport { searchProps } from '../../search/search.props';\nimport { checkboxProps } from '../../checkbox/checkbox.props';\nimport { colorPickerProps } from '../../color-picker/color-picker.props';\nimport { currencyProps } from '../../currency/currency.props';\nimport { checkboxsetProps } from '../../checkboxset/checkboxset.props';\nimport { chipsProps } from '../../chips/chips.props';\nimport { dateProps } from '../../date/date.props';\nimport { dateTimeProps } from '../../date-time/date-time.props';\nimport { numberProps } from '../../number/number.props';\nimport { inputNumberTypeProps } from '../../text/number/input-number.props';\nimport { inputTextTypeProps } from '../../text/text/input-text.props';\nimport { inputCalendarTypeProps } from '../../text/calendar/input-calendar.props';\nimport { inputColorTypeProps } from '../../text/color/input-color.props';\nimport { inputEmailTypeProps } from '../../text/email/input-email.props';\nimport { radiosetProps } from '../../radioset/radioset.props';\nimport { ratingProps } from '../../rating/rating.props';\nimport { richTextProps } from '../../rich-text-editor/rich-text-editor.props';\nimport { selectProps } from '../../select/select.props';\nimport { sliderProps } from '../../slider/slider.props';\nimport { switchProps } from '../../switch/switch.props';\nimport { textareaProps } from '../../textarea/textarea.props';\nimport { timeProps } from '../../time/time.props';\n\nexport const registerProps = () => {\n    const uploadProps = new Map([\n        ['disabled', PROP_BOOLEAN],\n        ['extensions', PROP_STRING],\n        ['filetype', PROP_STRING],\n        ['multiple', PROP_BOOLEAN],\n        ['readonly', PROP_BOOLEAN],\n        ['required', PROP_BOOLEAN]\n    ]);\n\n    const textProps = new Map(inputTextTypeProps);\n\n    const mergeTextProps = (typeProps) => {\n        typeProps.forEach((v: any, k) => textProps.set(k, v));\n    };\n    mergeTextProps(inputCalendarTypeProps);\n    mergeTextProps(inputColorTypeProps);\n    mergeTextProps(inputEmailTypeProps);\n    mergeTextProps(inputNumberTypeProps);\n\n    const widgetPropsMap = new Map(\n        [\n            [FormWidgetType.AUTOCOMPLETE, searchProps],\n            [FormWidgetType.CHECKBOX, checkboxProps],\n            [FormWidgetType.CHECKBOXSET, checkboxsetProps],\n            [FormWidgetType.CHIPS, chipsProps],\n            [FormWidgetType.COLORPICKER, colorPickerProps],\n            [FormWidgetType.CURRENCY, currencyProps],\n            [FormWidgetType.DATE, dateProps],\n            [FormWidgetType.DATETIME, dateTimeProps],\n            [FormWidgetType.NUMBER, numberProps],\n            [FormWidgetType.PASSWORD, inputTextTypeProps],\n            [FormWidgetType.RADIOSET, radiosetProps],\n            [FormWidgetType.RATING, ratingProps],\n            [FormWidgetType.RICHTEXT, richTextProps],\n            [FormWidgetType.SELECT, selectProps],\n            [FormWidgetType.SLIDER, sliderProps],\n            [FormWidgetType.SWITCH, switchProps],\n            [FormWidgetType.TEXT, textProps],\n            [FormWidgetType.TEXTAREA, textareaProps],\n            [FormWidgetType.TIME, timeProps],\n            [FormWidgetType.TIMESTAMP, dateTimeProps],\n            [FormWidgetType.TOGGLE, checkboxProps],\n            [FormWidgetType.TYPEAHEAD, searchProps],\n            [FormWidgetType.UPLOAD, uploadProps]\n        ]\n    );\n    const formFieldMap = new Map(\n        [\n            ['debouncetime', {value: 250, ...PROP_NUMBER}],\n            ['defaultvalue', PROP_STRING],\n            ['displayname', PROP_STRING],\n            ['display-name', PROP_STRING],\n            ['field', PROP_STRING],\n            ['filterexpressions', PROP_STRING],\n            ['filter-on', PROP_STRING],\n            ['generator', PROP_STRING],\n            ['hint', PROP_STRING],\n            ['inputtype', PROP_STRING],\n            ['is-primary-key', PROP_BOOLEAN],\n            ['is-range', PROP_BOOLEAN],\n            ['is-related', PROP_BOOLEAN],\n            ['isformfield', {value: true}],\n            ['key', PROP_STRING],\n            ['limit', PROP_NUMBER],\n            ['lookup-type', PROP_STRING],\n            ['lookup-field', PROP_STRING],\n            ['name', PROP_STRING],\n            ['matchmode', PROP_STRING],\n            ['maxdefaultvalue', PROP_STRING],\n            ['maxplaceholder', PROP_STRING],\n            ['mobile-display', {value: true, ...PROP_BOOLEAN}],\n            ['period', PROP_BOOLEAN],\n            ['pc-display', {value: true, ...PROP_BOOLEAN}],\n            ['placeholder', PROP_STRING],\n            ['primary-key', PROP_BOOLEAN],\n            ['related-entity-name', PROP_STRING],\n            ['required', PROP_BOOLEAN],\n            ['show', {value: true, ...PROP_BOOLEAN}],\n            ['type', PROP_STRING],\n            ['validationmessage', PROP_STRING],\n            ['viewmodewidget', PROP_STRING],\n            ['widgettype', PROP_STRING]\n        ]\n    );\n    widgetPropsMap.forEach((val, key) => {\n        const propsMap = new Map(formFieldMap);\n        const widgetProps = widgetPropsMap.get(key);\n        widgetProps.forEach((v: any, k) => propsMap.set(k, v));\n        register(\n            'wm-form-field-' + key,\n            propsMap\n        );\n    });\n};\n","import { Component, Injector } from '@angular/core';\n\nimport { APPLY_STYLES_TYPE, styler } from '../../framework/styler';\nimport { IWidgetConfig } from '../../framework/types';\nimport { StylableComponent } from '../base/stylable.component';\nimport { registerProps } from './header.props';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\n\nconst DEFAULT_CLS = 'app-header clearfix';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-header',\n    hostClass: DEFAULT_CLS\n};\n\n@Component({\n    selector: '[wmHeader]',\n    templateUrl: './header.component.html',\n    providers: [\n        provideAsWidgetRef(HeaderComponent)\n    ]\n})\nexport class HeaderComponent extends StylableComponent {\n    static initializeProps = registerProps();\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n\n        styler(this.nativeElement, this, APPLY_STYLES_TYPE.CONTAINER);\n    }\n}\n","import { PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-header',\n        new Map(\n            [\n                ['name', PROP_STRING],\n                ['class', PROP_STRING],\n                ['content', PROP_STRING]\n            ]\n        )\n    );\n};\n","import { Pipe, PipeTransform, SecurityContext } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Pipe({\n    name: 'trustAs'\n})\nexport class TrustAsPipe implements PipeTransform {\n\n    constructor(private domSanitizer: DomSanitizer) {}\n\n    transform(content: string, as: string | SecurityContext) {\n        if (as === 'resource' || as === SecurityContext.RESOURCE_URL) {\n            if (!content) {\n                return '';\n            }\n            return this.domSanitizer.bypassSecurityTrustResourceUrl(content);\n        }\n\n        if (as === 'html' || as === SecurityContext.HTML) {\n            if (content === null || content === undefined) {\n                return '';\n            }\n            return this.domSanitizer.sanitize(SecurityContext.HTML, content);\n        }\n    }\n}\n","import { Attribute, Directive, Injector, SecurityContext, OnInit } from '@angular/core';\n\nimport { setCSS, setProperty } from '@wm/core';\n\nimport { styler } from '../../framework/styler';\nimport { IWidgetConfig } from '../../framework/types';\nimport { StylableComponent } from '../base/stylable.component';\nimport { registerProps } from './html.props';\nimport { TrustAsPipe } from '../../../pipes/trust-as.pipe';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\n\nconst DEFAULT_CLS = 'app-html-container';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-html',\n    hostClass: DEFAULT_CLS\n};\n\n@Directive({\n    selector: '[wmHtml]',\n    providers: [\n        provideAsWidgetRef(HtmlDirective)\n    ]\n})\nexport class HtmlDirective extends StylableComponent implements OnInit {\n    static initializeProps = registerProps();\n    public content: string;\n\n    constructor(\n        inj: Injector,\n        @Attribute('height') height: string,\n        @Attribute('content.bind') private boundContent: string,\n        private trustAsPipe: TrustAsPipe,\n    ) {\n        super(inj, WIDGET_CONFIG);\n\n        // if the height is provided set the overflow to auto\n        if (height) {\n            setCSS(this.nativeElement, 'overflow', 'auto');\n        }\n\n        styler(this.nativeElement, this);\n    }\n\n    ngOnInit() {\n        super.ngOnInit();\n        if (this.boundContent) {\n            this.nativeElement.innerHTML = '';\n        }\n        if (!this.content && this.nativeElement.innerHTML) {\n            this.content = this.nativeElement.innerHTML;\n        }\n    }\n\n    onPropertyChange(key: string, nv: any, ov?: any) {\n        if (key === 'content') {\n            setProperty(this.nativeElement, 'innerHTML', this.trustAsPipe.transform(nv, SecurityContext.HTML));\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n}\n","import { PROP_BOOLEAN, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-html',\n        new Map(\n            [\n                ['class', PROP_STRING],\n                ['content', PROP_STRING],\n                ['hint', PROP_STRING],\n                ['name', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}]\n            ]\n        )\n    );\n};\n","import { Component, HostBinding, Injector } from '@angular/core';\n\nimport { styler } from '../../framework/styler';\nimport { IWidgetConfig } from '../../framework/types';\nimport { registerProps } from './icon.props';\nimport { StylableComponent } from '../base/stylable.component';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\n\nconst DEFAULT_CLS = 'app-icon-wrapper';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-icon',\n    hostClass: DEFAULT_CLS\n};\n\n@Component({\n    selector: '[wmIcon]',\n    templateUrl: './icon.component.html',\n    providers: [\n        provideAsWidgetRef(IconComponent)\n    ]\n})\nexport class IconComponent extends StylableComponent {\n    static initializeProps = registerProps();\n\n    public iconclass: any;\n    public caption: string;\n    @HostBinding('attr.icon-position') iconposition: string;\n    @HostBinding('style.fontSize') iconsize: string;\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n\n        styler(this.nativeElement, this);\n    }\n}\n","import { PROP_ANY, PROP_BOOLEAN, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-icon',\n        new Map(\n            [\n                ['caption', PROP_STRING],\n                ['class', PROP_STRING],\n                ['conditionalclass', PROP_ANY],\n                ['conditionalstyle', PROP_ANY],\n                ['hint', PROP_STRING],\n                ['iconclass', {value: 'wi wi-star-border', ...PROP_STRING}],\n                ['iconposition', {value: 'left', ...PROP_STRING}],\n                ['iconsize', PROP_STRING],\n                ['iconurl', PROP_STRING],\n                ['name', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}]\n            ]\n        )\n    );\n};\n","import { Component, Injector, SecurityContext } from '@angular/core';\nimport { SafeResourceUrl } from '@angular/platform-browser';\n\nimport { encodeUrl, isInsecureContentRequest } from '@wm/core';\n\nimport { styler } from '../../framework/styler';\nimport { IWidgetConfig } from '../../framework/types';\nimport { StylableComponent } from '../base/stylable.component';\nimport { registerProps } from './iframe.props';\nimport { TrustAsPipe } from '../../../pipes/trust-as.pipe';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\n\nconst DEFAULT_CLS = 'embed-responsive app-iframe';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-iframe',\n    hostClass: DEFAULT_CLS\n};\n\n@Component({\n    selector: '[wmIframe]',\n    templateUrl: './iframe.component.html',\n    providers: [\n        provideAsWidgetRef(IframeComponent)\n    ]\n})\nexport class IframeComponent extends StylableComponent {\n    static initializeProps = registerProps();\n\n    public iframesrc: string;\n    public encodeurl: boolean;\n\n    public _iframesrc: SafeResourceUrl;\n    private errorMsg: string;\n    private hintMsg: string;\n\n    public caption: any;\n    public name: string;\n    /**\n     * this property member is set to true when the content request url doesn't match windows protocol\n     */\n    public showContentLoadError = false;\n\n    constructor(inj: Injector, private trustAsPipe: TrustAsPipe) {\n        super(inj, WIDGET_CONFIG);\n        styler(this.nativeElement, this);\n    }\n\n    protected computeIframeSrc() {\n        this.showContentLoadError = false;\n        this._iframesrc = undefined;\n\n        if (this.iframesrc) {\n            let url = this.iframesrc;\n            if (this.encodeurl) {\n                url = encodeUrl(this.iframesrc);\n            }\n\n            const trustedUrl = this.trustAsPipe.transform(url, SecurityContext.RESOURCE_URL);\n\n            if (isInsecureContentRequest(url)) {\n                this.showContentLoadError = true;\n\n                this.errorMsg = `${this.appLocale.MESSAGE_ERROR_CONTENT_DISPLAY} ${this.iframesrc}`;\n                this.hintMsg = this.errorMsg;\n            }\n\n            this._iframesrc = trustedUrl;\n        }\n    }\n\n    onPropertyChange(key, nv, ov?) {\n        if (key === 'iframesrc' || key === 'encodeurl') {\n            this.computeIframeSrc();\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n}\n","import { PROP_BOOLEAN, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-iframe',\n        new Map(\n            [\n                ['class', PROP_STRING],\n                ['encodeurl', PROP_BOOLEAN],\n                ['height', {value: '150px', ...PROP_STRING}],\n                ['iframesrc', PROP_STRING],\n                ['name', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n                ['width', {value: '300px', ...PROP_STRING}]\n            ]\n        )\n    );\n};\n","import { Attribute, Component, Injector, OnInit, TemplateRef, ViewChild } from '@angular/core';\n\nimport { toBoolean } from '@wm/core';\n\nimport { registerProps } from './iframe-dialog.props';\nimport { BaseDialog } from '../base/base-dialog';\nimport { provideAsDialogRef, provideAsWidgetRef } from '../../../../utils/widget-utils';\n\nconst DIALOG_CLS = 'app-dialog modal-dialog app-iframe-dialog';\nconst WIDGET_INFO = {widgetType: 'wm-iframedialog'};\n\n@Component({\n    selector: 'div[wmIframeDialog]',\n    templateUrl: './iframe-dialog.component.html',\n    providers: [\n        provideAsWidgetRef(IframeDialogComponent),\n        provideAsDialogRef(IframeDialogComponent)\n    ]\n})\nexport class IframeDialogComponent extends BaseDialog implements OnInit {\n    static initializeProps = registerProps();\n\n    @ViewChild('dialogTemplate') dialogTemplate: TemplateRef<any>;\n\n    constructor(\n        inj: Injector,\n        @Attribute('class') dialogClass: string,\n        @Attribute('modal') modal: string | boolean,\n        @Attribute('closable') closable: string | boolean,\n    ) {\n        if (modal === null || modal === undefined) {\n            modal = false;\n        }\n\n        if (closable === null || closable === undefined) {\n            closable = true;\n        }\n\n        // setting the backdrop to 'static' will not close the dialog on backdrop click\n        const backdrop: boolean | 'static' = toBoolean(modal) ? 'static' : true;\n\n        super(\n            inj,\n            WIDGET_INFO,\n            {\n                class: `${DIALOG_CLS} ${dialogClass || ''}`,\n                backdrop,\n                keyboard: !toBoolean(modal)\n            }\n        );\n    }\n\n    protected getTemplateRef(): TemplateRef<any> {\n        return this.dialogTemplate;\n    }\n\n    /**\n     * Click event handler for the ok button\n     * invokes on-ok event callback\n     * @param {Event} $event\n     */\n    onOk($event: Event) {\n        this.invokeEventCallback('ok', {$event});\n    }\n\n    ngOnInit() {\n        super.ngOnInit();\n        this.register(this.viewParent);\n    }\n}\n","import { PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-iframedialog',\n        new Map(\n            [\n                ['animation', PROP_STRING],\n                ['class', PROP_STRING],\n                ['closable', {value: true, PROP_BOOLEAN}],\n                ['encodeurl', {value: false, ...PROP_BOOLEAN}],\n                ['height', {value: '400px', ...PROP_STRING}],\n                ['iconclass', {value: 'wi wi-globe', PROP_STRING}],\n                ['iconheight', PROP_STRING],\n                ['iconmargin', PROP_STRING],\n                ['iconurl', PROP_STRING],\n                ['iconwidth', PROP_STRING],\n                ['modal', {value: false, ...PROP_BOOLEAN}],\n                ['name', PROP_STRING],\n                ['oktext', {value: 'OK', ...PROP_STRING}],\n                ['showactions', {value: true, ...PROP_BOOLEAN}],\n                ['showheader', {value: true, ...PROP_BOOLEAN}],\n                ['tabindex', {value: 0, ...PROP_NUMBER}],\n                ['title', {value: 'External Content', ...PROP_STRING}],\n                ['url', {value: '//www.wavemaker.com', ...PROP_STRING}]\n            ]\n        )\n    );\n};\n","import { Pipe, PipeTransform } from '@angular/core';\n\nimport { getImageUrl } from '../utils/widget-utils';\n\n@Pipe({\n    name: 'image'\n})\nexport class ImagePipe implements PipeTransform {\n    transform(url: string, encode?: boolean, defaultImageUrl?: string) {\n        return getImageUrl(url, encode, defaultImageUrl);\n    }\n}\n","import { Component, ElementRef, Injector, ViewChild } from '@angular/core';\nimport { NgModel } from '@angular/forms';\n\nimport { IWidgetConfig } from '../../../framework/types';\nimport { registerProps } from './input-calendar.props';\nimport { BaseInput } from '../base/base-input';\nimport { provideAsNgValueAccessor, provideAsWidgetRef } from '../../../../utils/widget-utils';\n\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-input-calendar',\n    hostClass: 'app-input-wrapper'\n};\n\n@Component({\n    selector: 'wm-input[type=\"date\"], wm-input[type=\"datetime-local\"], wm-input[type=\"month\"], wm-input[type=\"time\"], wm-input[type=\"week\"]',\n    templateUrl: './input-calendar.component.html',\n    providers: [\n        provideAsNgValueAccessor(InputCalendarComponent),\n        provideAsWidgetRef(InputCalendarComponent)\n    ]\n})\nexport class InputCalendarComponent extends BaseInput {\n    static initializeProps = registerProps();\n\n    public required: boolean;\n    public disabled: boolean;\n    public type: string;\n    public name: string;\n    public readonly: string;\n    public minvalue: any;\n    public maxvalue: any;\n    public step: number;\n    public tabindex: any;\n    public placeholder: any;\n    public shortcutkey: string;\n    public autofocus: boolean;\n    public autocomplete: any;\n\n    @ViewChild('input') inputEl: ElementRef;\n    @ViewChild(NgModel) ngModel: NgModel;\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n    }\n}\n","import { Component, ElementRef, Injector, ViewChild } from '@angular/core';\nimport { NgModel } from '@angular/forms';\n\nimport { IWidgetConfig } from '../../../framework/types';\nimport { registerProps } from './input-color.props';\nimport { BaseInput } from '../base/base-input';\nimport { provideAsNgValueAccessor, provideAsWidgetRef } from '../../../../utils/widget-utils';\n\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-input-color',\n    hostClass: 'app-input-wrapper'\n};\n\n@Component({\n    selector: 'wm-input[type=\"color\"]',\n    templateUrl: './input-color.component.html',\n    providers: [\n        provideAsNgValueAccessor(InputColorComponent),\n        provideAsWidgetRef(InputColorComponent)\n    ]\n})\nexport class InputColorComponent extends BaseInput {\n    static initializeProps = registerProps();\n\n    public required: boolean;\n    public maxchars: number;\n    public name: string;\n    public readonly: boolean;\n    public tabindex: any;\n    public shortcutkey: string;\n    public autofocus: boolean;\n    public disabled: boolean;\n    public placeholder: any;\n    @ViewChild('input') inputEl: ElementRef;\n    @ViewChild(NgModel) ngModel: NgModel;\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n    }\n}\n","import { Component, ElementRef, Injector, ViewChild } from '@angular/core';\nimport { NgModel } from '@angular/forms';\n\nimport { IWidgetConfig } from '../../../framework/types';\nimport { registerProps } from './input-email.props';\nimport { BaseInput } from '../base/base-input';\nimport { provideAsNgValueAccessor, provideAsWidgetRef } from '../../../../utils/widget-utils';\n\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-input-email',\n    hostClass: 'app-input-wrapper'\n};\n\n@Component({\n    selector: 'wm-input[type=\"email\"]',\n    templateUrl: './input-email.component.html',\n    providers: [\n        provideAsNgValueAccessor(InputEmailComponent),\n        provideAsWidgetRef(InputEmailComponent)\n    ]\n})\nexport class InputEmailComponent extends BaseInput {\n    static initializeProps = registerProps();\n\n    public required: boolean;\n    public maxchars: number;\n    public disabled: boolean;\n    public name: string;\n    public readonly: boolean;\n    public tabindex: any;\n    public shortcutkey: string;\n    public autofocus: boolean;\n    public autocomplete: any;\n    public regexp: string;\n    public placeholder: any;\n\n    @ViewChild('input') inputEl: ElementRef;\n    @ViewChild(NgModel) ngModel: NgModel;\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n    }\n}\n","import { Component, ElementRef, Injector, ViewChild } from '@angular/core';\nimport { NgModel } from '@angular/forms';\n\nimport { IWidgetConfig } from '../../../framework/types';\nimport { registerProps } from './input-number.props';\nimport { BaseInput } from '../base/base-input';\nimport { provideAsNgValueAccessor, provideAsWidgetRef } from '../../../../utils/widget-utils';\n\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-input-number',\n    hostClass: 'app-input-wrapper'\n};\n\n@Component({\n    selector: 'wm-input[type=\"number\"]',\n    templateUrl: './input-number.component.html',\n    providers: [\n        provideAsNgValueAccessor(InputNumberComponent),\n        provideAsWidgetRef(InputNumberComponent)\n    ]\n})\nexport class InputNumberComponent extends BaseInput {\n    static initializeProps = registerProps();\n\n    public required: boolean;\n    public maxchars: number;\n    public disabled: boolean;\n    public name: string;\n    public readonly: boolean;\n    public minvalue: number;\n    public maxvalue: number;\n    public tabindex: any;\n    public placeholder: any;\n    public shortcutkey: string;\n    public autofocus: boolean;\n    public autocomplete: any;\n\n    @ViewChild('input') inputEl: ElementRef;\n    @ViewChild(NgModel) ngModel: NgModel;\n\n    public step;\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n    }\n\n    onArrowPress($event) {\n        if (this.step === 0) {\n           $event.preventDefault();\n        }\n    }\n\n    public validateInputEntry($event) {\n        if ($event.key === 'e' &&  $event.target.value.indexOf($event.key) !== -1) {\n            return false;\n        }\n    }\n}\n","import { Component, ElementRef, Injector, ViewChild } from '@angular/core';\nimport { NgModel } from '@angular/forms';\n\nimport { IWidgetConfig } from '../../../framework/types';\nimport { registerProps } from './input-text.props';\nimport { BaseInput } from '../base/base-input';\nimport { provideAsNgValueAccessor, provideAsWidgetRef } from '../../../../utils/widget-utils';\n\ndeclare const _;\n\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-input-text',\n    hostClass: 'app-input-wrapper'\n};\n\n@Component({\n    selector: 'wm-input[type=\"text\"], wm-input:not([type]), wm-input[type=\"password\"], wm-input[type=\"search\"], wm-input[type=\"tel\"], wm-input[type=\"url\"]',\n    templateUrl: './input-text.component.html',\n    providers: [\n        provideAsNgValueAccessor(InputTextComponent),\n        provideAsWidgetRef(InputTextComponent)\n    ]\n})\nexport class InputTextComponent extends BaseInput {\n    static initializeProps = registerProps();\n\n    public required: boolean;\n    public maxchars: number;\n    public regexp: string;\n    public displayformat: string;\n    public disabled: boolean;\n    public type: any;\n    public name: string;\n    public readonly: boolean;\n    public tabindex: any;\n    public placeholder: any;\n    public shortcutkey: string;\n    public autofocus: boolean;\n    public autocomplete: any;\n    public maskVal: any;\n\n    @ViewChild('input') inputEl: ElementRef;\n    @ViewChild(NgModel) ngModel: NgModel;\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n    }\n\n    /* Define the property change handler. This function will be triggered when there is a change in the widget property */\n    onPropertyChange(key, nv, ov) {\n        /*Monitoring changes for styles or properties and accordingly handling respective changes.*/\n        switch (key) {\n            case 'displayformat':\n                this.maskVal = [];\n                _.forEach(this.displayformat, (dF) => {\n                    // This condition is used to support all numbers from 0-9\n                    if (dF === '9') {\n                        this.maskVal.push(/\\d/);\n                    }\n                    // This condition is used to support all capital and small alphabets\n                    else if (dF === 'A') {\n                        this.maskVal.push(/[A-Z, a-z]/);\n                    }\n                    // This condition is used to support all small alphabets\n                    else if (dF === 'a') {\n                        this.maskVal.push(/[a-z]/);\n                    }\n                    // This condition is used to support all characters except new line\n                    else if (dF === '*') {\n                        this.maskVal.push(/\\w/);\n                    } else {\n                        this.maskVal.push(dF);\n                    }\n                });\n                break;\n            default:\n                super.onPropertyChange(key, nv, ov);\n        }\n    }\n\n    get mask() {\n        if (this.displayformat) {\n            return {mask: this.maskVal, showMask: true};\n        } else {\n            return {mask: false};\n        }\n    }\n}\n","import { AfterContentInit, Attribute, Component, ContentChildren, ContentChild, ElementRef, HostListener, Injector, NgZone, OnDestroy, QueryList, ViewChild, ViewContainerRef, TemplateRef } from '@angular/core';\nimport { ControlValueAccessor, FormBuilder, FormGroup } from '@angular/forms';\n\nimport { Subject } from 'rxjs';\n\nimport { $appDigest, $parseEvent, $unwatch, $watch, App, closePopover, DataSource, getClonedObject, getValidJSON, IDGenerator, isDataSourceEqual, isDefined, isMobile, triggerFn, DynamicComponentRefProvider, extendProto } from '@wm/core';\n\nimport { styler } from '../../framework/styler';\nimport { StylableComponent } from '../base/stylable.component';\nimport { PaginationComponent } from '../pagination/pagination.component';\nimport { registerProps } from './table.props';\nimport { EDIT_MODE, getRowOperationsColumn } from '../../../utils/live-utils';\nimport { transformData } from '../../../utils/data-utils';\nimport { getConditionalClasses, getOrderByExpr, prepareFieldDefs, provideAsNgValueAccessor, provideAsWidgetRef } from '../../../utils/widget-utils';\n\ndeclare const _, $;\n\nconst DEFAULT_CLS = 'app-grid app-panel panel';\nconst WIDGET_CONFIG = {widgetType: 'wm-table', hostClass: DEFAULT_CLS};\n\nconst exportIconMapping = {\n    EXCEL: 'fa fa-file-excel-o',\n    CSV: 'fa fa-file-text-o'\n};\n\nconst ROW_OPS_FIELD = 'rowOperations';\n\nconst noop = () => {};\n\nconst isInputBodyWrapper = target => {\n    const classes = ['.dropdown-menu', '.uib-typeahead-match', '.modal-dialog', '.toast'];\n    let isInput = false;\n    classes.forEach(cls => {\n        if (target.closest(cls).length) {\n            isInput = true;\n            return false;\n        }\n    });\n    const attrs = ['bsdatepickerdaydecorator'];\n    if (!isInput) {\n        attrs.forEach(attr => {\n            if (target[0].hasAttribute(attr)) {\n                isInput = true;\n                return false;\n            }\n        });\n    }\n    return isInput;\n};\n\n@Component({\n    selector: '[wmTable]',\n    templateUrl: './table.component.html',\n    providers: [\n        provideAsNgValueAccessor(TableComponent),\n        provideAsWidgetRef(TableComponent)\n    ]\n})\nexport class TableComponent extends StylableComponent implements AfterContentInit, OnDestroy, ControlValueAccessor {\n    static initializeProps = registerProps();\n    @ViewChild(PaginationComponent) dataNavigator;\n\n    @ViewChild('datagridElement') private _tableElement: ElementRef;\n\n    @ContentChildren('rowActionTmpl') rowActionTmpl: QueryList<any>;\n    @ViewChild('rowActionsView', {read: ViewContainerRef}) rowActionsViewRef: ViewContainerRef;\n\n    @ContentChildren('filterTmpl', {descendants: true}) filterTmpl: QueryList<any>;\n    @ViewChild('multiColumnFilterView', {read: ViewContainerRef}) filterViewRef: ViewContainerRef;\n\n    @ContentChildren('inlineWidgetTmpl', {descendants: true}) inlineWidgetTmpl: QueryList<any>;\n    @ViewChild('inlineEditView', {read: ViewContainerRef}) inlineEditViewRef: ViewContainerRef;\n\n    @ContentChildren('inlineWidgetTmplNew', {descendants: true}) inlineWidgetNewTmpl: QueryList<any>;\n    @ViewChild('inlineEditNewView', {read: ViewContainerRef}) inlineEditNewViewRef: ViewContainerRef;\n\n    @ContentChildren('customExprTmpl', {descendants: true}) customExprTmpl: QueryList<any>;\n    @ViewChild('customExprView', {read: ViewContainerRef}) customExprViewRef: ViewContainerRef;\n\n    @ContentChildren('rowExpansionActionTmpl') rowExpansionActionTmpl: QueryList<any>;\n    @ContentChild('rowExpansionTmpl') rowExpansionTmpl: TemplateRef<any>;\n    @ViewChild('rowDetailView', {read: ViewContainerRef}) rowDetailViewRef: ViewContainerRef;\n    @ViewChild('rowExpansionActionView', {read: ViewContainerRef}) rowExpansionActionViewRef: ViewContainerRef;\n\n    @ViewChild('dynamicTable', {read: ViewContainerRef}) dynamicTableRef: ViewContainerRef;\n\n    private rowActionsCompiledTl: any  = {};\n    private rowFilterCompliedTl: any = {};\n    private inlineCompliedTl: any = {};\n    private inlineNewCompliedTl: any = {};\n    private customExprCompiledTl: any = {};\n    private rowDefInstances = {};\n    private rowDefMap = {};\n    private rowExpansionActionTl: any = {};\n\n    columns = {};\n    formfields = {};\n    datagridElement;\n    datasource;\n    editmode;\n    enablecolumnselection;\n    enablesort = true;\n    filtermode;\n    searchlabel;\n    formposition;\n    gridclass;\n    gridfirstrowselect;\n    iconclass;\n    isGridEditMode;\n    loadingdatamsg;\n    multiselect;\n    name;\n    navigation;\n    navigationSize;\n    navigationalign;\n    nodatamessage;\n    pagesize;\n    prevData;\n    primaryKey;\n    radioselect;\n    rowclass;\n    rowngclass;\n    selectedItems = [];\n    showheader;\n    showrecordcount;\n    showrowindex;\n    subheading;\n    title;\n    shownewrow;\n    deleteoktext;\n    deletecanceltext;\n\n    selectedItemChange = new Subject();\n    selectedItemChange$ = this.selectedItemChange.asObservable();\n\n    actions = [];\n    _actions = {\n        'header': [],\n        'footer': []\n    };\n    exportOptions = [];\n    exportdatasize;\n    formWidgets;\n    headerConfig = [];\n    items = [];\n    navControls;\n    rowActions = [];\n    selectedColumns;\n    shownavigation = false;\n    dataset;\n    _liveTableParent;\n    isPartOfLiveGrid;\n    gridElement;\n    isMobile;\n    isLoading;\n    documentClickBind = noop;\n\n    fieldDefs = [];\n    rowDef: any = {};\n    rowInstance: any = {};\n\n    private fullFieldDefs = [];\n    private __fullData;\n    private dataNavigatorWatched;\n    private navigatorResultWatch;\n    private navigatorMaxResultWatch;\n    private filterInfo;\n    private sortInfo;\n    private serverData;\n    private filternullrecords;\n    private variableInflight;\n    private isdynamictable;\n    private _dynamicContext;\n    private noOfColumns;\n\n    private applyProps = new Map();\n\n    redraw = _.debounce(this._redraw, 150);\n    debouncedHandleLoading = _.debounce(this.handleLoading, 350);\n\n    // Filter and Sort Methods\n    rowFilter: any = {};\n    matchModeTypesMap;\n    matchModeMsgs;\n    emptyMatchModes;\n    _searchSortHandler = noop;\n    searchSortHandler = (...args) => { this._searchSortHandler.apply(this, args); };\n    _isPageSearch;\n    _isClientSearch;\n    checkFiltersApplied: Function;\n    getSearchResult: Function;\n    getSortResult: Function;\n    getFilterFields: Function;\n    onRowFilterChange = noop;\n    onFilterConditionSelect = noop;\n    showClearIcon = noop;\n    clearRowFilter = noop;\n    getNavigationTargetBySortInfo: Function;\n    refreshData: Function;\n    clearFilter: Function;\n\n    // Inline Edit\n    ngform: FormGroup;\n    updateVariable: Function;\n    updateRecord: Function;\n    deleteRecord: Function;\n    insertRecord: Function;\n    editRow: Function;\n    addNewRow: Function;\n    addRow: Function;\n    deleteRow: Function;\n    onRecordDelete: Function;\n    initiateSelectItem: Function;\n    hideEditRow: Function;\n    saveRow: Function;\n    cancelRow: Function;\n\n    private gridOptions = {\n        data: [],\n        colDefs: [],\n        startRowIndex: 1,\n        sortInfo: {\n            field: '',\n            direction: ''\n        },\n        filtermode: '',\n        searchLabel: '',\n        rowActions: [],\n        headerConfig: [],\n        rowClass: '',\n        editmode: '',\n        formPosition: '',\n        isMobile: false,\n        rowExpansionEnabled: false,\n        rowDef: {\n            position: '0'\n        },\n        name: '',\n        messages: {\n            selectField: 'Select Field'\n        },\n        onDataRender: () => {\n            this.ngZone.run(() => {\n                if (this.gridData.length) {\n                    this.invokeEventCallback('datarender', {$data: this.gridData, data: this.gridData});\n                }\n                // select rows selected in previous pages. (Not finding intersection of data and selecteditems as it will be heavy)\n                if (!this.multiselect) {\n                    this.items.length = 0;\n                }\n                this.callDataGridMethod('selectRows', this.items);\n                this.selectedItems = this.callDataGridMethod('getSelectedRows');\n                this.selectedItemChange.next(this.selectedItems);\n                // On render, apply the filters set for query service variable\n                if (this._isPageSearch && this.filterInfo) {\n                    this.searchSortHandler(this.filterInfo, undefined, 'search');\n                }\n            });\n        },\n        onRowSelect: (row, e) => {\n            this.ngZone.run(() => {\n                this.selectedItems = this.callDataGridMethod('getSelectedRows');\n                this.selectedItemChange.next(this.selectedItems);\n                const rowData = this.addRowIndex(row);\n                this.invokeEventCallback('rowselect', {$data: rowData, $event: e, row: rowData});\n            });\n        },\n        // assigns the items on capture phase of the click handler.\n        assignSelectedItems: (row, e) => {\n            this.ngZone.run(() => {\n                /*\n                 * in case of single select, update the items with out changing the reference.\n                 * for multi select, keep old selected items in tact\n                 */\n                if (this.multiselect) {\n                    if (_.findIndex(this.items, row) === -1) {\n                        this.items.push(row);\n                    }\n                } else {\n                    this.items.length = 0;\n                    this.items.push(row);\n                }\n            });\n        },\n        onRowDblClick: (row, e) => {\n            const rowData = this.addRowIndex(row);\n            this.invokeEventCallback('rowdblclick', {$data: rowData, $event: e, row: rowData});\n        },\n        onRowDeselect: (row, e) => {\n            if (this.multiselect) {\n                this.ngZone.run(() => {\n                    this.items = _.pullAllWith(this.items, [row], _.isEqual);\n                    this.selectedItems = this.callDataGridMethod('getSelectedRows');\n                    this.invokeEventCallback('rowdeselect', {$data: row, $event: e, row});\n                });\n            }\n        },\n        callOnRowDeselectEvent: (row, e) => {\n            this.invokeEventCallback('rowdeselect', {$data: row, $event: e, row});\n        },\n        callOnRowClickEvent: (row, e) => {\n            // Call row click only if click is triggered by user\n            if (e && e.hasOwnProperty('originalEvent')) {\n                const rowData = this.addRowIndex(row);\n                this.invokeEventCallback('rowclick', {$data: rowData, $event: e, row: rowData});\n            }\n        },\n        closePopover: closePopover,\n        onColumnSelect: (col, e) => {\n            this.selectedColumns = this.callDataGridMethod('getSelectedColumns');\n            this.invokeEventCallback('columnselect', {$data: col, $event: e});\n        },\n        onColumnDeselect: (col, e) => {\n            this.selectedColumns = this.callDataGridMethod('getSelectedColumns');\n            this.invokeEventCallback('columndeselect', {$data: col, $event: e});\n        },\n        onHeaderClick: (col, e) => {\n            // if onSort function is registered invoke it when the column header is clicked\n            this.invokeEventCallback('headerclick', {$event: e, $data: col, column: col});\n        },\n        onRowDelete: (row, cancelRowDeleteCallback, e, callBack, options) => {\n            this.ngZone.run(() => {\n                this.deleteRecord(_.extend({}, options, {row, 'cancelRowDeleteCallback': cancelRowDeleteCallback, 'evt': e, 'callBack': callBack}));\n            });\n        },\n        onRowInsert: (row, e, callBack, options) => {\n            this.insertRecord(_.extend({}, options, {row, event: e, 'callBack': callBack}));\n        },\n        beforeRowUpdate: (row, eventName?) => {\n            if (this._liveTableParent) {\n                this._liveTableParent.updateRow(row, eventName);\n            }\n            this.prevData = getClonedObject(row);\n        },\n        afterRowUpdate: (row, e, callBack, options) => {\n            this.updateRecord(_.extend({}, options, {row, 'prevData': this.prevData, 'event': e, 'callBack': callBack}));\n        },\n        onBeforeRowUpdate: (row, e, options) => {\n            return this.invokeEventCallback('beforerowupdate', {$event: e, $data: row, row, options: options});\n        },\n        onBeforeRowInsert: (row, e, options) => {\n            return this.invokeEventCallback('beforerowinsert', {$event: e, $data: row, row, options: options});\n        },\n        onBeforeRowDelete: (row, e, options) => {\n            const rowData = this.addRowIndex(row);\n            return this.invokeEventCallback('beforerowdelete', {$event: e, row: rowData, options: options});\n        },\n        onFormRender: ($row, e, operation, alwaysNewRow) => {\n            const widget = alwaysNewRow ? 'inlineInstanceNew' : 'inlineInstance';\n            setTimeout(() => {\n                this.formWidgets = {};\n                this.fieldDefs.forEach(col => {\n                    if (col[widget]) {\n                        this.formWidgets[col.field] = col[widget];\n                        this.setDisabledOnField(operation, col, widget);\n                    }\n                });\n                this.invokeEventCallback('formrender', {$event: e, formWidgets: this.formWidgets, $operation: operation});\n            }, 250);\n        },\n        onBeforeFormRender: (row, e, operation) => {\n            return this.invokeEventCallback('beforeformrender', {$event: e, row, $operation: operation});\n        },\n        registerRowNgClassWatcher: (rowData, index) => {\n            if (!this.rowngclass) {\n                return;\n            }\n            const row = this.getClonedRowObject(rowData);\n            const watchName = `${this.widgetId}_rowNgClass_${index}`;\n            $unwatch(watchName);\n            this.registerDestroyListener($watch(this.rowngclass, this.viewParent, {row}, (nv, ov) => {\n                this.callDataGridMethod('applyRowNgClass', getConditionalClasses(nv, ov), index);\n            }, watchName));\n        },\n        registerColNgClassWatcher: (rowData, colDef, rowIndex, colIndex) => {\n            if (!colDef['col-ng-class']) {\n                return;\n            }\n            const row = this.getClonedRowObject(rowData);\n            const watchName = `${this.widgetId}_colNgClass_${rowIndex}_${colIndex}`;\n            $unwatch(watchName);\n            this.registerDestroyListener($watch(colDef['col-ng-class'], this.viewParent, {row}, (nv, ov) => {\n                this.callDataGridMethod('applyColNgClass', getConditionalClasses(nv, ov), rowIndex, colIndex);\n            }, watchName));\n        },\n        clearCustomExpression: () => {\n            this.customExprViewRef.clear();\n            this.customExprCompiledTl = {};\n        },\n        clearRowDetailExpression: () => {\n            this.rowDetailViewRef.clear();\n            this.rowDefMap = {};\n            this.rowDefInstances = {};\n        },\n        generateCustomExpressions: (rowData, index) => {\n            const row = this.getClonedRowObject(rowData);\n            const compileTemplate = (tmpl) => {\n                if (!tmpl) {\n                    return;\n                }\n                const colDef = {};\n                const context = {\n                    row,\n                    colDef\n                };\n                this.addEventsToContext(context);\n                const customExprView = this.customExprViewRef.createEmbeddedView(tmpl, context);\n                const rootNode = customExprView.rootNodes[0];\n                const fieldName = rootNode.getAttribute('data-col-identifier');\n                _.extend(colDef, this.columns[fieldName]);\n                this.customExprCompiledTl[fieldName + index] = rootNode;\n            };\n            if (this.isdynamictable) {\n                this.fieldDefs.forEach(col => {\n                    compileTemplate(col.customExprTmpl);\n                });\n                return;\n            }\n            // For all the columns inside the table, generate the custom expression\n            this.customExprTmpl.forEach(compileTemplate.bind(this));\n        },\n        generateRowExpansionCell: (rowData, index) => {\n            const row = this.getClonedRowObject(rowData);\n            // For all the columns inside the table, generate the inline widget\n            this.rowExpansionActionTmpl.forEach((tmpl) => {\n                this.rowExpansionActionTl[index] = this.rowExpansionActionViewRef.createEmbeddedView(tmpl, {row}).rootNodes;\n            });\n        },\n        getRowExpansionAction: (index) => {\n            return this.rowExpansionActionTl[index];\n        },\n        generateRowDetailView: ($event, rowData, rowId, $target, $overlay, callback) => {\n            const row = this.getClonedRowObject(rowData);\n            const rowDef = getClonedObject(this.rowDef);\n            if (this.rowInstance.invokeEventCallback('beforerowexpand', {$event, $data: rowDef, row}) === false) {\n                return;\n            }\n            if (!rowDef.content) {\n                return;\n            }\n            // Expand the row detail\n            callback();\n            // Row is already rendered. Return here\n            if (this.rowDefMap[rowId] && this.rowDefMap[rowId].content === rowDef.content) {\n                this.rowInstance.invokeEventCallback('rowexpand', {$event, row, $data: this.rowDefInstances[rowId]});\n                return;\n            }\n            this.rowDefMap[rowId] = rowDef;\n            $target.empty();\n            $target.hide();\n            $overlay.show();\n            const context = {\n                    row,\n                    rowDef,\n                    containerLoad: (widget) => {\n                        setTimeout(() => {\n                            $overlay.hide();\n                            $target.show();\n                            this.rowDefInstances[rowId] = widget;\n                            this.rowInstance.invokeEventCallback('rowexpand', {$event, row, $data: widget});\n                        }, 500);\n                    }};\n            const rootNode = this.rowDetailViewRef.createEmbeddedView(this.rowExpansionTmpl, context).rootNodes[0];\n            $target[0].appendChild(rootNode);\n            $appDigest();\n        },\n        onBeforeRowCollapse: ($event, row, rowId) => {\n            return this.rowInstance.invokeEventCallback('beforerowcollapse', {$event, row, $data: this.rowDefInstances[rowId]});\n        },\n        onRowCollapse: ($event, row) => {\n            this.rowInstance.invokeEventCallback('rowcollapse', {$event, row});\n        },\n        getCustomExpression: (fieldName, index) => {\n            return this.customExprCompiledTl[fieldName + index] || '';\n        },\n        clearRowActions: () => {\n            this.rowActionsViewRef.clear();\n            this.rowActionsCompiledTl = {};\n            this.rowExpansionActionViewRef.clear();\n            this.rowExpansionActionTl = {};\n        },\n        generateRowActions: (rowData, index) => {\n            const row = this.getClonedRowObject(rowData);\n            this.rowActionsCompiledTl[index] = [];\n            // For all the columns inside the table, generate the inline widget\n            this.rowActionTmpl.forEach((tmpl) => {\n                this.rowActionsCompiledTl[index].push(...this.rowActionsViewRef.createEmbeddedView(tmpl, {row}).rootNodes);\n            });\n        },\n        getRowAction: (index) => {\n            return this.rowActionsCompiledTl[index];\n        },\n        generateInlineEditRow: (rowData, alwaysNewRow) => {\n            const row = this.getClonedRowObject(rowData);\n            if (alwaysNewRow) {\n                // Clear the view container ref\n                this.inlineEditNewViewRef.clear();\n                this.inlineNewCompliedTl = {};\n                // For all the columns inside the table, generate the inline widget\n                this.inlineWidgetNewTmpl.forEach(tmpl => {\n                    let fieldName;\n                    const context = {\n                        row,\n                        getControl: () => {\n                            return this.ngform.controls[fieldName + '_new'] || {};\n                        },\n                        getValidationMessage: () => {\n                            return this.columns[fieldName] && this.columns[fieldName].validationmessage;\n                        }\n                    };\n                    const rootNode = this.inlineEditNewViewRef.createEmbeddedView(tmpl, context).rootNodes[0];\n                    fieldName = rootNode.getAttribute('data-col-identifier');\n                    this.inlineNewCompliedTl[fieldName] = rootNode;\n                });\n                this.clearForm(true);\n                return;\n            }\n            // Clear the view container ref\n            this.inlineEditViewRef.clear();\n            this.inlineCompliedTl = {};\n            this.clearForm();\n            // For all the columns inside the table, generate the inline widget\n            this.inlineWidgetTmpl.forEach(tmpl => {\n                let fieldName;\n                const context = {\n                    row,\n                    getControl: () => {\n                        return this.ngform.controls[fieldName] || {};\n                    },\n                    getValidationMessage: () => {\n                        return this.columns[fieldName] && this.columns[fieldName].validationmessage;\n                    }\n                 };\n                const rootNode = this.inlineEditViewRef.createEmbeddedView(tmpl, context).rootNodes[0];\n                fieldName = rootNode.getAttribute('data-col-identifier');\n                this.inlineCompliedTl[fieldName] = rootNode;\n            });\n        },\n        getInlineEditWidget: (fieldName, value, alwaysNewRow) => {\n            if (alwaysNewRow) {\n                this.gridOptions.setFieldValue(fieldName + '_new', value);\n                return this.inlineNewCompliedTl[fieldName];\n            }\n            this.gridOptions.setFieldValue(fieldName, value);\n            return this.inlineCompliedTl[fieldName];\n        },\n        setFieldValue: (fieldName, value) => {\n            const control = this.ngform.controls && this.ngform.controls[fieldName];\n            if (control) {\n                control.setValue(value);\n            }\n        },\n        getFieldValue: fieldName => {\n            const control = this.ngform.controls && this.ngform.controls[fieldName];\n            return control && control.value;\n        },\n        generateFilterRow: () => {\n            // Clear the view container ref\n            this.filterViewRef.clear();\n            this.rowFilterCompliedTl = {};\n            // For all the columns inside the table, generate the compiled filter template\n            this.filterTmpl.forEach((tmpl) => {\n                const rootNode = this.filterViewRef.createEmbeddedView(tmpl, {\n                    changeFn: this.onRowFilterChange.bind(this),\n                    isDisabled: (fieldName) => {\n                        return this.emptyMatchModes.indexOf(this.rowFilter[fieldName] && this.rowFilter[fieldName].matchMode) > -1;\n                    }\n                }).rootNodes[0];\n                this.rowFilterCompliedTl[rootNode.getAttribute('data-col-identifier')] = rootNode;\n            });\n        },\n        getFilterWidget: (fieldName) => {\n            // Move the generated filter template to the filter row\n            return this.rowFilterCompliedTl[fieldName];\n        },\n        setGridEditMode: (val) => {\n            this.ngZone.run(() => {\n                this.isGridEditMode = val;\n                $appDigest();\n            });\n        },\n        setGridState: (val) => {\n            this.isLoading = val === 'loading';\n        },\n        noChangesDetected: () => {\n            this.toggleMessage(true, 'info', 'No Changes Detected');\n        },\n        // Function to redraw the widgets on resize of columns\n        redrawWidgets: () => {\n            this.fieldDefs.forEach(col => {\n                triggerFn(col.inlineInstance && col.inlineInstance.redraw);\n                triggerFn(col.inlineInstanceNew && col.inlineInstanceNew.redraw);\n                triggerFn(col.filterInstance && col.filterInstance.redraw);\n            });\n        },\n        searchHandler: this.searchSortHandler.bind(this),\n        sortHandler: this.searchSortHandler.bind(this),\n        timeoutCall: (fn, delay) => {\n            setTimeout(fn, delay);\n        },\n        runInNgZone: fn => {\n            this.ngZone.run(fn);\n        },\n        safeApply: () => {\n            $appDigest();\n        },\n        setTouched: (name) => {\n            const ctrl = this.ngform.controls[name];\n            if (ctrl) {\n                ctrl.markAsTouched();\n            }\n        },\n        clearForm: this.clearForm.bind(this)\n    };\n\n    private _gridData;\n    set gridData(newValue) {\n        this._gridData = newValue;\n        let startRowIndex = 0;\n        let gridOptions;\n\n        this._onChange(newValue);\n        this._onTouched();\n\n        if (isDefined(newValue)) {\n            /*Setting the serial no's only when show navigation is enabled and data navigator is compiled\n             and its current page is set properly*/\n            if (this.isNavigationEnabled() && this.dataNavigator.dn.currentPage) {\n                startRowIndex = ((this.dataNavigator.dn.currentPage - 1) * (this.dataNavigator.maxResults || 1)) + 1;\n                this.setDataGridOption('startRowIndex', startRowIndex);\n            }\n            /* If colDefs are available, but not already set on the datagrid, then set them.\n             * This will happen while switching from markup to design tab. */\n            gridOptions = this.callDataGridMethod('getOptions');\n\n            if (!gridOptions) {\n                return;\n            }\n\n            if (!gridOptions.colDefs.length && this.fieldDefs.length) {\n                this.setDataGridOption('colDefs', getClonedObject(this.fieldDefs));\n            }\n            // If data and colDefs are present, call on before data render event\n            if (!this.isdynamictable && !_.isEmpty(newValue) && gridOptions.colDefs.length) {\n                this.invokeEventCallback('beforedatarender', {$data: newValue, $columns: this.columns, data: newValue, columns: this.columns});\n            }\n            this.setDataGridOption('data', getClonedObject(newValue));\n        }\n    }\n\n    get gridData() {\n        return this._gridData || [];\n    }\n\n    get selecteditem() {\n        if (this.multiselect) {\n            return getClonedObject(this.items);\n        }\n        if (_.isEmpty(this.items)) {\n            return {};\n        }\n        return getClonedObject(this.items[0]);\n    }\n\n    set selecteditem(val) {\n        // Select the rows in the table based on the new selected items passed\n        this.items.length = 0;\n        this.callDataGridMethod('selectRows', val);\n    }\n\n    @HostListener('keypress', ['$event']) onKeyPress ($event: any) {\n        if ($event.which === 13) {\n            this.invokeEventCallback('enterkeypress', {$event, $data: this.gridData});\n        }\n    }\n\n    constructor(\n        public inj: Injector,\n        public fb: FormBuilder,\n        private app: App,\n        private dynamicComponentProvider: DynamicComponentRefProvider,\n        @Attribute('dataset.bind') public binddataset,\n        @Attribute('datasource.bind') public binddatasource,\n        @Attribute('readonlygrid') public readonlygrid,\n        private ngZone: NgZone\n    ) {\n        super(inj, WIDGET_CONFIG);\n        styler(this.nativeElement, this);\n\n        this.ngform = fb.group({});\n        this.addEventsToContext(this.context);\n\n        // Show loading status based on the variable life cycle\n        this.app.subscribe('toggle-variable-state', options => {\n            if (this.datasource && this.datasource.execute(DataSource.Operation.IS_API_AWARE) && isDataSourceEqual(options.variable, this.datasource)) {\n                isDefined(this.variableInflight) ? this.debouncedHandleLoading(options) : this.handleLoading(options);\n            }\n        });\n\n        this.deleteoktext = this.appLocale.LABEL_OK;\n        this.deletecanceltext = this.appLocale.LABEL_CANCEL;\n    }\n\n    ngAfterContentInit() {\n        super.ngAfterContentInit();\n        const runModeInitialProperties = {\n            showrowindex: 'showRowIndex',\n            multiselect: 'multiselect',\n            radioselect: 'showRadioColumn',\n            filternullrecords: 'filterNullRecords',\n            enablesort: 'enableSort',\n            showheader: 'showHeader',\n            enablecolumnselection: 'enableColumnSelection',\n            shownewrow: 'showNewRow',\n            gridfirstrowselect: 'selectFirstRow'\n        };\n\n        if (this._liveTableParent) {\n            this.isPartOfLiveGrid = true;\n        }\n\n        if (this.readonlygrid || !this.editmode) {\n            if (this.readonlygrid === 'true') {\n                this.editmode = '';\n            } else {\n                if (this.isPartOfLiveGrid) {\n                    this.editmode = this.isPartOfLiveGrid.formlayout === 'inline' ? EDIT_MODE.FORM : EDIT_MODE.DIALOG;\n                } else {\n                    this.editmode = this.readonlygrid ? EDIT_MODE.INLINE : '';\n                }\n            }\n        }\n\n        this.gridOptions.colDefs = this.fullFieldDefs;\n        this.gridOptions.rowActions = this.rowActions;\n        this.gridOptions.headerConfig = this.headerConfig;\n        this.gridOptions.rowClass = this.rowclass;\n        this.gridOptions.editmode = this.editmode;\n        this.gridOptions.formPosition = this.formposition;\n        this.gridOptions.filtermode = this.filtermode;\n        this.gridOptions.searchLabel = this.searchlabel;\n        this.gridOptions.isMobile = isMobile();\n        this.gridOptions.name = this.name;\n        // When loadondemand property is enabled(deferload=\"true\") and show is true, only the column titles of the datatable are rendered, the data(body of the datatable) is not at all rendered.\n        // Because the griddata is setting before the datatable dom is rendered but we are sending empty data to the datatable.\n        if (!_.isEmpty(this.gridData)) {\n            this.gridOptions.data = getClonedObject(this.gridData);\n        }\n        this.gridOptions.messages = {\n            'selectField': 'Select Field'\n        };\n        this.datagridElement = $(this._tableElement.nativeElement);\n\n        this.gridElement = this.$element;\n        this.$element.css({'position': 'relative'});\n\n        _.forEach(runModeInitialProperties, (value, key) => {\n            if (isDefined(this[key])) {\n                this.gridOptions[value] = (this[key] === 'true' || this[key] === true);\n            }\n        });\n\n        this.renderOperationColumns();\n        this.gridOptions.colDefs = this.fieldDefs;\n\n        this.datagridElement.datatable(this.gridOptions);\n        this.callDataGridMethod('setStatus', 'loading', this.loadingdatamsg);\n\n        this.applyProps.forEach(args => this.callDataGridMethod(...args));\n\n        if (this.editmode === EDIT_MODE.QUICK_EDIT) {\n            this.documentClickBind = this._documentClickBind.bind(this);\n            document.addEventListener('click', this.documentClickBind);\n        }\n    }\n\n    ngOnDestroy() {\n        document.removeEventListener('click', this.documentClickBind);\n        if (this.navigatorResultWatch) {\n            this.navigatorResultWatch.unsubscribe();\n        }\n        if (this.navigatorMaxResultWatch) {\n            this.navigatorMaxResultWatch.unsubscribe();\n        }\n        super.ngOnDestroy();\n    }\n\n    addRowIndex(row) {\n        const rowData = getClonedObject(row);\n        const rowIndex = _.indexOf(this.gridOptions.data, row);\n        if (rowIndex < 0) {\n            return row;\n        }\n        rowData.$index = rowIndex + 1;\n        rowData.$isFirst = rowData.$index === 1;\n        rowData.$isLast = this.gridData.length === rowData.$index;\n        return rowData;\n    }\n\n    addEventsToContext(context) {\n        context.addNewRow = () => this.addNewRow();\n        context.deleteRow = () => this.deleteRow();\n        context.editRow = () => this.editRow();\n    }\n\n    execute(operation, options) {\n        if ([DataSource.Operation.IS_API_AWARE, DataSource.Operation.IS_PAGEABLE, DataSource.Operation.SUPPORTS_SERVER_FILTER].includes(operation)) {\n            return false;\n        }\n        return this.datasource ? this.datasource.execute(operation, options) : {};\n    }\n\n    isNavigationEnabled() {\n        return this.shownavigation && this.dataNavigator && this.dataNavigatorWatched;\n    }\n\n    getClonedRowObject(rowData) {\n        const row = getClonedObject(rowData);\n        row.getProperty = field => {\n            return _.get(row, field);\n        };\n        row.$isFirst = row.$index === 1;\n        row.$isLast = this.gridData.length === row.$index;\n        delete row.$$index;\n        delete row.$$pk;\n        return row;\n    }\n\n    handleLoading(data) {\n        this.variableInflight = data.active;\n        // based on the active state and response toggling the 'loading data...' and 'no data found' messages.\n        if (data.active) {\n            this.callDataGridMethod('setStatus', 'loading', this.loadingdatamsg);\n        } else {\n            // If grid is in edit mode or grid has data, dont show the no data message\n            if (!this.isGridEditMode && _.isEmpty(this.dataset)) {\n                this.callDataGridMethod('setStatus', 'nodata', this.nodatamessage);\n            } else {\n                this.callDataGridMethod('setStatus', 'ready');\n            }\n        }\n    }\n\n    setDisabledOnField(operation, colDef, widgetType) {\n        if (operation !== 'new' && colDef['primary-key'] && colDef.generator === 'assigned' && !colDef['related-entity-name'] && !colDef.period) {\n            colDef[widgetType].disabled = true;\n        }\n    }\n\n    resetFormControl(ctrl) {\n        ctrl.markAsUntouched();\n        ctrl.markAsPristine();\n    }\n\n    clearForm(newRow?) {\n        const ctrls = this.ngform.controls;\n        _.keys(this.ngform.controls).forEach(key => {\n            // If new row, clear the controls in the new row. Else, clear the controls in edit row\n            if (!key.endsWith('_filter') && ((key.endsWith('_new') && newRow) || (!key.endsWith('_new') && !newRow))) {\n                ctrls[key].setValue('');\n                this.resetFormControl(ctrls[key]);\n            }\n        });\n    }\n\n    /* Check whether it is non-empty row. */\n    isEmptyRecord(record) {\n        const properties = Object.keys(record);\n        let data,\n            isDisplayed;\n\n        return properties.every((prop, index) => {\n            data = record[prop];\n            /* If fieldDefs are missing, show all columns in data. */\n            isDisplayed = (this.fieldDefs.length && isDefined(this.fieldDefs[index]) &&\n                (isMobile() ? this.fieldDefs[index].mobileDisplay : this.fieldDefs[index].pcDisplay)) || true;\n            /*Validating only the displayed fields*/\n            if (isDisplayed) {\n                return (data === null || data === undefined || data === '');\n            }\n            return true;\n        });\n    }\n\n    /* Function to remove the empty data. */\n    removeEmptyRecords(serviceData) {\n        const allRecords = serviceData;\n        let filteredData = [];\n        if (allRecords && allRecords.length) {\n            /*Comparing and pushing the non-empty data columns*/\n            filteredData = allRecords.filter(record => {\n                return record && !this.isEmptyRecord(record);\n            });\n        }\n        return filteredData;\n    }\n\n    setGridData(serverData) {\n        const data = this.filternullrecords ?  this.removeEmptyRecords(serverData) : serverData;\n        if (!this.variableInflight) {\n            if (data && data.length === 0) {\n                this.callDataGridMethod('setStatus', 'nodata', this.nodatamessage);\n            } else {\n                this.callDataGridMethod('setStatus', 'ready');\n            }\n        }\n        this.gridData = data;\n    }\n\n    setDataGridOption(optionName, newVal, forceSet = false) {\n        if (!this.datagridElement || !this.datagridElement.datatable || !this.datagridElement.datatable('instance')) {\n            return;\n        }\n        const option = {};\n        if (isDefined && (!_.isEqual(newVal, this.gridOptions[optionName]) || forceSet)) {\n            option[optionName] = newVal;\n            this.datagridElement.datatable('option', option);\n            this.gridOptions[optionName] = newVal;\n        }\n    }\n\n    callDataGridMethod(...args) {\n        if (!this.datagridElement || !this.datagridElement.datatable('instance')) {\n            this.applyProps.set(args[1], args);\n            return; // If datagrid is not initiliazed or destroyed, return here\n        }\n        return this.datagridElement.datatable.apply(this.datagridElement, args);\n    }\n\n    renderOperationColumns() {\n        let rowActionCol,\n            insertPosition;\n\n        const rowOperationsColumn = getRowOperationsColumn(),\n            config = {\n                'name': rowOperationsColumn.field,\n                'field': rowOperationsColumn.field,\n                'isPredefined': true\n            };\n        // Return if no fieldDefs are present\n        if (!this.fieldDefs.length) {\n            return;\n        }\n\n        rowActionCol = _.find(this.fullFieldDefs, {'field': ROW_OPS_FIELD, type: 'custom'}); // Check if column is fetched from markup\n        _.remove(this.fieldDefs, {type: 'custom', field: ROW_OPS_FIELD}); // Removing operations column\n        _.remove(this.headerConfig, {field: rowOperationsColumn.field});\n\n        /*Add the column for row operations only if at-least one operation has been enabled.*/\n        if (this.rowActions.length) {\n            if (rowActionCol) { // If column is present in markup, push the column or push the default column\n                insertPosition = rowActionCol.rowactionsposition ? _.toNumber(rowActionCol.rowactionsposition) : this.fieldDefs.length;\n                this.fieldDefs.splice(insertPosition, 0, rowActionCol);\n                if (insertPosition === 0) {\n                    this.headerConfig.unshift(config);\n                } else {\n                    this.headerConfig.push(config);\n                }\n            } else {\n                this.fieldDefs.push(rowOperationsColumn);\n                this.headerConfig.push(config);\n            }\n        }\n        this.setDataGridOption('headerConfig', this.headerConfig);\n    }\n\n    enablePageNavigation() {\n        if (this.dataset && this.binddataset && this.dataNavigator) {\n            /*Check for sanity*/\n            this.dataNavigatorWatched = true;\n\n            if (this.navigatorResultWatch) {\n                this.navigatorResultWatch.unsubscribe();\n            }\n            /*Register a watch on the \"result\" property of the \"dataNavigator\" so that the paginated data is displayed in the live-list.*/\n            this.navigatorResultWatch = this.dataNavigator.resultEmitter.subscribe((newVal) => {\n                /* Check for sanity. */\n                if (isDefined(newVal)) {\n                    // Watch will not be triggered if dataset and new value are equal. So trigger the property change handler manually\n                    // This happens in case, if dataset is directly updated.\n                    if (_.isEqual(this.dataset, newVal)) {\n                        this.watchVariableDataSet(newVal);\n                    } else {\n                        if (_.isArray(newVal)) {\n                            this.widget.dataset = [].concat(newVal);\n                        } else if (_.isObject(newVal)) {\n                            this.widget.dataset = _.extend({}, newVal);\n                        } else {\n                            this.widget.dataset = newVal;\n                        }\n                    }\n                } else {\n                    this.widget.dataset = undefined;\n                }\n            }, true);\n            /*De-register the watch if it is exists */\n            if (this.navigatorMaxResultWatch) {\n                this.navigatorMaxResultWatch.unsubscribe();\n            }\n            /*Register a watch on the \"maxResults\" property of the \"dataNavigator\" so that the \"pageSize\" is displayed in the live-list.*/\n            this.navigatorMaxResultWatch = this.dataNavigator.maxResultsEmitter.subscribe((newVal) => {\n                this.pagesize = newVal;\n            });\n            // If dataset is a pageable object, data is present inside the content property\n            this.__fullData = this.dataset;\n\n            this.dataNavigator.widget.maxResults = this.pagesize || 5;\n            this.dataNavigator.options = {\n                maxResults: this.pagesize || 5\n            };\n            this.removePropertyBinding('dataset');\n            this.dataNavigator.setBindDataSet(this.binddataset, this.viewParent, this.datasource, this.dataset, this.binddatasource);\n        }\n    }\n\n    resetPageNavigation() {\n        /*Check for sanity*/\n        if (this.dataNavigator) {\n            this.dataNavigator.resetPageNavigation();\n        }\n    }\n\n    isDataValid() {\n        let error;\n        const dataset = this.dataset || {};\n\n        /*In case \"data\" contains \"error\" & \"errorMessage\", then display the error message in the grid.*/\n        if (dataset.error) {\n            error = dataset.error;\n        }\n        if (dataset.data && dataset.data.error) {\n            if (dataset.data.errorMessage) {\n                error = dataset.data.errorMessage;\n            }\n        }\n        if (error) {\n            this.setGridData([]);\n            this.callDataGridMethod('setStatus', 'error', error);\n            return false;\n        }\n        return true;\n    }\n\n    // Function to populate the grid with data.\n    populateGridData(serviceData) {\n        let data;\n        serviceData = transformData(serviceData, this.name);\n        // Apply filter and sort, if data is refreshed through Refresh data method\n        if (!this.isNavigationEnabled() && this._isClientSearch) {\n            data = getClonedObject(serviceData);\n            data = this.getSearchResult(data, this.filterInfo);\n            data = this.getSortResult(data, this.sortInfo);\n            this.serverData = data;\n        } else {\n            this.serverData = serviceData;\n        }\n        // If fielddefs are not present, generate fielddefs from data\n        // Removing fielddefs check because When loadondemand property is enabled(deferload=\"true\"), the dataset propertychangehanlder is triggered first before the dom is getting rendered.\n        // So at that time fielddefs length is zero, due to this the columns are created dynamically.\n        if (this.isdynamictable) {\n            this.createGridColumns(this.serverData);\n        } else {\n            this.setGridData(this.serverData);\n        }\n    }\n\n    // Function to generate and compile the form fields from the metadata\n    async generateDynamicColumns(columns) {\n        this.fieldDefs = []; // empty the form fields\n        // empty the filter field template refs.\n        (this.filterTmpl as any)._results = [];\n\n        if (_.isEmpty(columns)) {\n            return;\n        }\n\n        let tmpl = '';\n        columns.forEach(col => {\n            let attrsTmpl = '';\n            let customTmpl = '';\n            _.forEach(col, (val, key) => {\n                if (val) {\n                    // If custom expression is present, keep it inside table column. Else, keep as attribute\n                    if (key === 'customExpression') {\n                        customTmpl = val;\n                    } else {\n                        attrsTmpl += ` ${key}=\"${val}\"`;\n                    }\n                }\n            });\n            tmpl += `<wm-table-column ${attrsTmpl} tableName=\"${this.name}\">${customTmpl}</wm-table-column>`;\n        });\n        this.dynamicTableRef.clear();\n        if (!this._dynamicContext) {\n            this._dynamicContext = Object.create(this.viewParent);\n            this._dynamicContext[this.getAttr('wmTable')] = this;\n        }\n        this.noOfColumns = columns.length;\n        const componentFactoryRef = await this.dynamicComponentProvider.getComponentFactoryRef(\n            'app-table-dynamic-' + this.widgetId,\n            tmpl,\n            {\n                noCache: true,\n                transpile: true\n            });\n        const component = this.dynamicTableRef.createComponent(componentFactoryRef, 0, this.inj);\n        extendProto(component.instance, this._dynamicContext);\n        this.$element.find('.dynamic-table-container')[0].appendChild(component.location.nativeElement);\n    }\n\n    prepareColDefs(data) {\n        let defaultFieldDefs;\n        let properties;\n\n        this.fieldDefs = [];\n        this.headerConfig = [];\n        this.columns = {};\n        /* if properties map is existed then fetch the column configuration for all nested levels using util function */\n        properties = data;\n        /*call utility function to prepare fieldDefs for grid against given data (A MAX OF 10 COLUMNS ONLY)*/\n        defaultFieldDefs = prepareFieldDefs(properties);\n\n        /*append additional properties*/\n        _.forEach(defaultFieldDefs, columnDef => {\n            columnDef.binding = columnDef.field;\n            columnDef.caption = columnDef.displayName;\n            columnDef.pcDisplay = true;\n            columnDef.mobileDisplay = true;\n            columnDef.searchable = true;\n            columnDef.type  = 'string';\n        });\n\n        defaultFieldDefs.forEach(col => {\n            this.columns[col.field] = col;\n        });\n\n        this.invokeEventCallback('beforedatarender', {$data: data, $columns: this.columns, data: data, columns: this.columns});\n\n        defaultFieldDefs = [];\n        // Apply the changes made by the user\n        _.forEach(this.columns, val => {\n            defaultFieldDefs.push(val);\n        });\n\n        this.generateDynamicColumns(defaultFieldDefs);\n    }\n\n    createGridColumns(data) {\n        /* this call back function receives the data from the variable */\n        /* check whether data is valid or not */\n        const dataValid = data && !data.error;\n        /*if the data is type json object, make it an array of the object*/\n        if (dataValid && !_.isArray(data)) {\n            data = [data];\n        }\n        /* if the data is empty, show nodatamessage */\n        if (_.isEmpty(data)) {\n            this.setGridData(data);\n            return;\n        }\n\n        if (!dataValid) {\n            return;\n        }\n        /* if new columns to be rendered, prepare default fieldDefs for the data provided*/\n        this.prepareColDefs(data);\n\n        this.serverData = data;\n        this.setGridData(this.serverData);\n    }\n\n    getSortExpr() {\n        let sortExp;\n        let pagingOptions;\n        if (this.datasource && this.datasource.execute(DataSource.Operation.IS_PAGEABLE)) {\n            pagingOptions = this.datasource.execute(DataSource.Operation.GET_PAGING_OPTIONS);\n            sortExp = _.isEmpty(pagingOptions) ? '' : getOrderByExpr(pagingOptions.sort);\n        }\n        return sortExp || '';\n    }\n\n    watchVariableDataSet(newVal) {\n        let result;\n        // After the setting the watch on navigator, dataset is triggered with undefined. In this case, return here.\n        if (this.dataNavigatorWatched && _.isUndefined(newVal) && this.__fullData) {\n            return;\n        }\n        // If variable is in loading state, show loading icon\n        if (this.variableInflight) {\n            this.callDataGridMethod('setStatus', 'loading', this.loadingdatamsg);\n        }\n\n        result = getValidJSON(newVal);\n\n        // Converting newval to object if it is an Object that comes as a string \"{\"data\" : 1}\"\n        if (result) {\n            newVal = result;\n        }\n\n        /*Return if data is invalid.*/\n        if (!this.isDataValid()) {\n            return;\n        }\n\n        // If value is empty or in studio mode, dont enable the navigation\n        if (newVal) {\n            if (this.shownavigation && !this.dataNavigatorWatched) {\n                this.enablePageNavigation();\n                return;\n            }\n        } else {\n            this.resetPageNavigation();\n            /*for run mode, disabling the loader and showing no data found message if dataset is not valid*/\n            if (!this.variableInflight) {\n                this.callDataGridMethod('setStatus', 'nodata', this.nodatamessage);\n            }\n            this.setDataGridOption('selectFirstRow', this.gridfirstrowselect);\n        }\n\n        if (!this.isNavigationEnabled() && newVal) {\n            this.checkFiltersApplied(this.getSortExpr());\n        }\n\n        if (!_.isObject(newVal) || newVal === '' || (newVal && newVal.dataValue === '')) {\n            if (!this.variableInflight) {\n                // If variable has finished loading and resultSet is empty, ender empty data\n                this.setGridData([]);\n            }\n            return;\n        }\n        if (newVal) {\n            this.populateGridData(newVal);\n        }\n    }\n\n    onDataSourceChange() {\n        this.fieldDefs.forEach(col => {\n           triggerFn(col.onDataSourceChange && col.onDataSourceChange.bind(col));\n        });\n    }\n\n    onPropertyChange(key: string, nv: any, ov?: any) {\n        let enableNewRow;\n        switch (key) {\n            case 'datasource':\n                this.watchVariableDataSet(this.dataset);\n                this.onDataSourceChange();\n                break;\n            case 'dataset':\n                if (this.binddatasource && !this.datasource) {\n                    return;\n                }\n                this.watchVariableDataSet(nv);\n                break;\n            case 'filtermode':\n                this.setDataGridOption('filtermode', nv);\n                break;\n            case 'searchlabel':\n                this.setDataGridOption('searchLabel', nv);\n                break;\n            case 'navigation':\n                if (nv === 'Advanced') { // Support for older projects where navigation type was advanced instead of clasic\n                    this.navigation = 'Classic';\n                    return;\n                }\n                if (nv !== 'None') {\n                    this.shownavigation = true;\n                }\n                this.navControls = nv;\n                break;\n            case 'gridfirstrowselect':\n                this.setDataGridOption('selectFirstRow', nv);\n                break;\n            case 'gridclass':\n                this.callDataGridMethod('option', 'cssClassNames.grid', nv);\n                break;\n            case 'nodatamessage':\n                this.callDataGridMethod('option', 'dataStates.nodata', nv);\n                break;\n            case 'loadingdatamsg':\n                this.callDataGridMethod('option', 'dataStates.loading', nv);\n                break;\n            case 'loadingicon':\n                this.callDataGridMethod('option', 'loadingicon', nv);\n                break;\n            case 'spacing':\n                this.callDataGridMethod('option', 'spacing', nv);\n                if (nv === 'condensed') {\n                    this.navigationSize = 'small';\n                } else {\n                    this.navigationSize = '';\n                }\n                break;\n            case 'exportformat':\n                this.exportOptions = [];\n                if (nv) {\n                    // Populate options for export drop down menu\n                    _.forEach(_.split(nv, ','), type => {\n                        this.exportOptions.push({\n                            label: type,\n                            icon: exportIconMapping[type]\n                        });\n                    });\n                }\n                break;\n            case 'shownewrow':\n                // Enable new row if shownew is true or addNewRow buton is present\n                enableNewRow = nv || _.some(this.actions, act => _.includes(act.action, 'addNewRow()'));\n                this.callDataGridMethod('option', 'actionsEnabled.new', enableNewRow);\n                break;\n            case 'show':\n                if (nv) {\n                    this.invokeEventCallback('show');\n                } else {\n                    this.invokeEventCallback('hide');\n                }\n            default:\n                super.onPropertyChange(key, nv, ov);\n        }\n    }\n\n    onStyleChange(key, nv, ov) {\n        switch (key) {\n            case 'width':\n                this.callDataGridMethod('setGridDimensions', 'width', nv);\n                break;\n            case 'height':\n                this.callDataGridMethod('setGridDimensions', 'height', nv);\n                break;\n        }\n\n        super.onStyleChange(key, nv, ov);\n    }\n\n    populateActions() {\n        this._actions.header = [];\n        this._actions.footer = [];\n        _.forEach(this.actions, (action) => {\n            if (_.includes(action.position, 'header')) {\n                this._actions.header.push(action);\n            }\n            if (_.includes(action.position, 'footer')) {\n                this._actions.footer.push(action);\n            }\n        });\n    }\n\n    // this method will render the filter row.\n    renderDynamicFilterColumn(filteTemRef) {\n        // For dynamic table manually pushing the filtertemplateRef as templateRef will not be available prior.\n        if (this.isdynamictable) {\n            (this.filterTmpl as any)._results.push(filteTemRef);\n        }\n    }\n\n    registerColumns(tableColumn) {\n        if (isMobile()) {\n            if (!tableColumn.mobileDisplay) {\n                return;\n            }\n        } else {\n            if (!tableColumn.pcDisplay) {\n                return;\n            }\n        }\n        const colCount = this.fieldDefs.push(tableColumn);\n        this.fullFieldDefs.push(tableColumn);\n        this.rowFilter[tableColumn.field] = {\n            value: undefined\n        };\n        this.fieldDefs.forEach(col => {\n            this.columns[col.field] = col;\n        });\n        // If dynamic datatable and last column, pass the columns to jquery datatable\n        if (this.isdynamictable && colCount === this.noOfColumns) {\n            this.renderOperationColumns();\n            this.setDataGridOption('colDefs', this.fieldDefs);\n        }\n    }\n\n    registerFormField(name, formField) {\n        this.formfields[name] = formField;\n    }\n\n    registerActions(tableAction) {\n        this.actions.push(tableAction);\n        this.populateActions();\n    }\n\n    registerRow(tableRow, rowInstance) {\n        this.rowDef = tableRow;\n        this.rowInstance = rowInstance;\n        this.callDataGridMethod('option', 'cssClassNames.rowExpandIcon', this.rowDef.expandicon);\n        this.callDataGridMethod('option', 'cssClassNames.rowCollapseIcon', this.rowDef.collapseicon);\n        this.gridOptions.rowExpansionEnabled = true;\n        this.gridOptions.rowDef = this.rowDef;\n    }\n\n    registerRowActions(tableRowAction) {\n        this.rowActions.push(tableRowAction);\n    }\n\n    selectItem(item, data) {\n        /* server is not updating immediately, so set the server data to success callback data */\n        if (data) {\n            this.serverData = data;\n        }\n        if (_.isObject(item)) {\n            item = _.omitBy(item, (value) => {\n                return _.isArray(value) && _.isEmpty(value);\n            });\n        }\n        this.callDataGridMethod('selectRow', item, true);\n    }\n    /* deselect the given item*/\n    deselectItem(item) {\n        this.callDataGridMethod('deselectRow', item);\n    }\n\n    onDataNavigatorDataSetChange(nv) {\n        let data;\n        this.__fullData = nv;\n        this.checkFiltersApplied(this.getSortExpr());\n        if (this._isClientSearch) {\n            data = getClonedObject(this.__fullData);\n            if (_.isObject(data) && !_.isArray(data)) {\n                data = [data];\n            }\n            data = this.getSearchResult(data, this.filterInfo);\n            data = this.getSortResult(data, this.sortInfo);\n            return data;\n        }\n        return nv;\n    }\n\n    toggleMessage(show, type, msg, header?) {\n        if (show && msg) {\n            this.app.notifyApp(msg, type, header);\n        }\n    }\n\n    export($item) {\n        let filterFields;\n        const sortOptions = _.isEmpty(this.sortInfo) ? '' : this.sortInfo.field + ' ' + this.sortInfo.direction;\n        const columns = {};\n        let isValid;\n        let requestData;\n        this.fieldDefs.forEach(fieldDef => {\n            // Do not add the row operation actions column to the exported file.\n            if (fieldDef.field === ROW_OPS_FIELD || !fieldDef.show) {\n                return;\n            }\n            const option = {\n                'header': fieldDef.displayName\n            };\n            // If column has exportexpression, then send form the expression as required by backend.\n            // otherwise send the field name.\n            if (fieldDef.exportexpression) {\n                (<any>option).expression = fieldDef.exportexpression;\n            } else {\n                (<any>option).field = fieldDef.field;\n            }\n            columns[fieldDef.field] = option;\n        });\n        filterFields = this.getFilterFields(this.filterInfo);\n        requestData = {\n            matchMode : 'anywhereignorecase',\n            filterFields : filterFields,\n            orderBy : sortOptions,\n            exportType : $item.label,\n            logicalOp : 'AND',\n            exportSize : this.exportdatasize,\n            columns : columns\n        };\n        isValid = this.invokeEventCallback('beforeexport', {$data: requestData});\n        if (isValid === false) {\n            return;\n        }\n        requestData.fields = _.values(requestData.columns);\n        this.datasource.execute(DataSource.Operation.DOWNLOAD, {data: requestData});\n    }\n\n    expandRow(rowId) {\n        this.callDataGridMethod('expandRow', rowId);\n    }\n\n    collapseRow(rowId) {\n        this.callDataGridMethod('collapseRow', rowId);\n    }\n\n    private _documentClickBind(event) {\n        const $target = event.target;\n        // If click triggered from same grid or a dialog, do not save the row\n        if (this.$element[0].contains($target) || event.target.doctype || isInputBodyWrapper($($target))) {\n            return;\n        }\n        this.callDataGridMethod('saveRow');\n    }\n\n    private _redraw(forceRender) {\n        if (forceRender) {\n            this.datagridElement.datatable(this.gridOptions);\n        } else {\n            setTimeout(() => {\n                this.callDataGridMethod('setColGroupWidths');\n                this.callDataGridMethod('addOrRemoveScroll');\n            });\n        }\n    }\n\n    invokeActionEvent($event, expression: string) {\n        const fn = $parseEvent(expression);\n        fn(this.viewParent, Object.assign(this.context, {$event}));\n    }\n\n    // change and blur events are added from the template\n    protected handleEvent(node: HTMLElement, eventName: string, callback: Function, locals: any) {\n        if (eventName !== 'select') {\n            super.handleEvent(this.nativeElement, eventName, callback, locals);\n        }\n    }\n\n    triggerUploadEvent($event, eventName, fieldName, row) {\n        const params: any = {$event, row};\n        if (!this.columns[fieldName]) {\n            return;\n        }\n        if (eventName === 'change') {\n            params.newVal = $event.target.files;\n            params.oldVal = this.columns[fieldName]._oldUploadVal;\n            this.columns[fieldName]._oldUploadVal = params.newVal;\n        }\n        this.columns[fieldName].invokeEventCallback(eventName, params);\n    }\n\n    registerFormWidget() {}\n\n    // Form control accessor methods. This will be used for table inside form\n    writeValue() {}\n\n    private _onChange: any = () => {};\n    private _onTouched: any = () => {};\n\n    registerOnChange(fn) {\n        this._onChange = fn;\n    }\n    registerOnTouched(fn) {\n        this._onTouched = fn;\n    }\n}\n","import { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-table',\n        new Map(\n            [\n                ['boundarylinks', {value: false, ...PROP_BOOLEAN}],\n                ['class', PROP_STRING],\n                ['confirmdelete', {value: 'Are you sure you want to delete this?', ...PROP_STRING}],\n                ['datasource', PROP_STRING],\n                ['dataset', PROP_ANY],\n                ['deletecanceltext', PROP_STRING],\n                ['deleteoktext', PROP_STRING],\n                ['deletemessage', {value: 'Record deleted successfully', ...PROP_STRING}],\n                ['directionlinks', {value: true, ...PROP_BOOLEAN}],\n                ['editmode', PROP_STRING],\n                ['enablecolumnselection', {value: false, ...PROP_BOOLEAN}],\n                ['enablesort', {value: true, ...PROP_BOOLEAN}],\n                ['errormessage', PROP_STRING],\n                ['exportformat', PROP_STRING],\n                ['exportdatasize', {value: 100, ...PROP_NUMBER}],\n                ['filtermode', PROP_STRING],\n                ['filternullrecords', {value: true, ...PROP_BOOLEAN}],\n                ['forceellipses', {value: true, ...PROP_BOOLEAN}],\n                ['formposition', PROP_STRING],\n                ['gridclass', {value: 'table-bordered table-striped table-hover', ...PROP_STRING}],\n                ['gridfirstrowselect', PROP_BOOLEAN],\n                ['iconclass', PROP_STRING],\n                ['insertmessage', {value: 'Record added successfully', ...PROP_STRING}],\n                ['isdynamictable', PROP_BOOLEAN], // internal property to determine dynamic table\n                ['loadingdatamsg', {value: 'Loading...', ...PROP_STRING}],\n                ['loadingicon', {value: 'fa fa-circle-o-notch fa-spin', ...PROP_STRING}],\n                ['maxsize', {value: 5, ...PROP_NUMBER}],\n                ['multiselect', PROP_BOOLEAN],\n                ['name', PROP_STRING],\n                ['navigation', {value: 'Basic', ...PROP_STRING}],\n                ['navigationalign', {value: 'left', ...PROP_STRING}],\n                ['nodatamessage', {value: 'No data found.', ...PROP_STRING}],\n                ['pagesize', PROP_NUMBER],\n                ['radioselect', PROP_BOOLEAN],\n                ['rowclass', PROP_STRING],\n                ['rowngclass', PROP_STRING],\n                ['searchlabel', {value: 'Search', ...PROP_STRING}],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n                ['showheader', {value: true, ...PROP_BOOLEAN}],\n                ['shownewrow', {value: true, ...PROP_BOOLEAN}],\n                ['showrecordcount', PROP_BOOLEAN],\n                ['showrowindex', PROP_BOOLEAN],\n                ['spacing', {value: 'normal', ...PROP_STRING}],\n                ['subheading', PROP_STRING],\n                ['tabindex', {value: 0, ...PROP_NUMBER}],\n                ['title', PROP_STRING],\n                ['updatemessage', {value: 'Record updated successfully', ...PROP_STRING}]\n            ]\n        )\n    );\n};\n","import { Attribute, Directive, Inject, OnInit, Self, Optional } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\n\nimport { FormComponent } from './form.component';\nimport { WidgetRef } from '../../framework/types';\nimport { TableComponent } from '../table/table.component';\n\n@Directive({\n    selector: '[wmFormWidget]'\n})\nexport class FormWidgetDirective implements OnInit {\n\n    ngform: FormGroup;\n    fb;\n    parent;\n\n    constructor(\n        @Optional() @Inject(FormComponent) form,\n        @Optional() @Inject(TableComponent) table,\n        @Self() @Inject(WidgetRef) public componentInstance,\n        fb: FormBuilder,\n        @Attribute('name') public name,\n        @Attribute('key') public key) {\n        this.fb = fb;\n        this.parent = form || table;\n        this.ngform = this.parent.ngform;\n\n        this.componentInstance.registerPropertyChangeListener((k, nv) => {\n            if (k === 'datavalue' && this._control) {\n                this._control.setValue(nv);\n            } else if (k === 'name' && !this._control) {\n                this.addControl(this.key || nv);\n            }\n        });\n    }\n\n    get _control() {\n        const fieldName = this.key || this.name;\n        if (!fieldName) {\n            return undefined;\n        }\n        return this.ngform && this.ngform.controls[fieldName];\n    }\n\n    addControl(fieldName) {\n        this.ngform.addControl(fieldName, this.createControl());\n    }\n\n    createControl() {\n        return this.fb.control(this.componentInstance.datavalue);\n    }\n\n    ngOnInit() {\n        const fieldName = this.key || this.name;\n\n        if (fieldName && !this._control) {\n            this.addControl(fieldName);\n            this.parent.registerFormWidget(this.componentInstance);\n        }\n    }\n}\n","import { Directive, Injector, SecurityContext } from '@angular/core';\n\nimport { setProperty, toggleClass } from '@wm/core';\n\nimport { styler } from '../../framework/styler';\nimport { IWidgetConfig } from '../../framework/types';\nimport { registerProps } from './label.props';\nimport { StylableComponent } from '../base/stylable.component';\nimport { DISPLAY_TYPE } from '../../framework/constants';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\nimport { TrustAsPipe } from '../../../pipes/trust-as.pipe';\n\ndeclare const _;\n\nconst DEFAULT_CLS = 'app-label';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-label',\n    hostClass: DEFAULT_CLS,\n    displayType: DISPLAY_TYPE.INLINE_BLOCK\n};\n\n@Directive({\n    selector: '[wmLabel]',\n    providers: [\n        provideAsWidgetRef(LabelDirective)\n    ]\n})\nexport class LabelDirective extends StylableComponent {\n    static initializeProps = registerProps();\n\n    constructor(inj: Injector, private trustAsPipe: TrustAsPipe) {\n        super(inj, WIDGET_CONFIG);\n\n        styler(this.nativeElement, this);\n    }\n\n    onPropertyChange(key, nv, ov?) {\n\n        if (key === 'caption') {\n            if (_.isObject(nv)) {\n                setProperty(this.nativeElement, 'textContent', JSON.stringify(nv));\n            } else {\n                setProperty(this.nativeElement, 'innerHTML', this.trustAsPipe.transform(nv, SecurityContext.HTML));\n            }\n\n        } else if (key === 'required') {\n            toggleClass(this.nativeElement, 'required', nv);\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n}\n","import { PROP_ANY, PROP_BOOLEAN, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-label',\n        new Map(\n            [\n                ['caption', {value: 'Label', ...PROP_STRING}],\n                ['class', PROP_STRING],\n                ['conditionalclass', PROP_ANY],\n                ['conditionalstyle', PROP_ANY],\n                ['hint', PROP_STRING],\n                ['name', PROP_STRING],\n                ['required', PROP_BOOLEAN],\n                ['show', {value: true, ...PROP_BOOLEAN}]\n            ]\n        )\n    );\n};\n","import { Attribute, Directive, Injector } from '@angular/core';\n\nimport { isMobileApp, setCSS, switchClass } from '@wm/core';\n\nimport { APPLY_STYLES_TYPE, styler } from '../../../framework/styler';\nimport { IWidgetConfig } from '../../../framework/types';\nimport { StylableComponent } from '../../base/stylable.component';\nimport { registerProps } from './layout-grid-column.props';\nimport { provideAsWidgetRef } from '../../../../utils/widget-utils';\n\nconst DEFAULT_CLS = 'app-grid-column';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-gridcolumn',\n    hostClass: DEFAULT_CLS\n};\n\n@Directive({\n    selector: '[wmLayoutGridColumn]',\n    providers: [\n        provideAsWidgetRef(LayoutGridColumnDirective)\n    ]\n})\nexport class LayoutGridColumnDirective extends StylableComponent {\n    static initializeProps = registerProps();\n    constructor(inj: Injector, @Attribute('height') height) {\n        super(inj, WIDGET_CONFIG);\n\n        // if the height is provided set the overflow to auto\n        if (height) {\n            setCSS(this.nativeElement, 'overflow', 'auto');\n        }\n\n        styler(this.nativeElement, this, APPLY_STYLES_TYPE.CONTAINER);\n    }\n\n    onPropertyChange(key, nv, ov?) {\n        const prefix = isMobileApp() ? 'xs' : 'sm';\n        if (key === 'columnwidth') {\n            switchClass(this.nativeElement, `col-${prefix}-${nv}`, ov ? `col-${prefix}-${ov}` : '');\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n}\n","import { PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-gridcolumn',\n        new Map(\n            [\n                ['class', PROP_STRING],\n                ['name', PROP_STRING],\n                ['columnwidth', PROP_NUMBER],\n                ['show', {value: true, ...PROP_BOOLEAN}]\n            ]\n        )\n    );\n};\n","import { Directive, Injector } from '@angular/core';\n\nimport { APPLY_STYLES_TYPE, styler } from '../../framework/styler';\nimport { IWidgetConfig } from '../../framework/types';\nimport { StylableComponent } from '../base/stylable.component';\nimport { registerProps } from './layout-grid.props';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\n\nconst DEFAULT_CLS = 'app-grid-layout clearfix';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-layoutgrid',\n    hostClass: DEFAULT_CLS\n};\n\n@Directive({\n    selector: '[wmLayoutGrid]',\n    providers: [\n        provideAsWidgetRef(LayoutgridDirective)\n    ]\n})\nexport class LayoutgridDirective extends StylableComponent {\n    static initializeProps = registerProps();\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n\n        styler(this.nativeElement, this, APPLY_STYLES_TYPE.CONTAINER);\n    }\n}\n","import { PROP_BOOLEAN, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-layoutgrid',\n        new Map(\n            [\n                ['class', PROP_STRING],\n                ['name', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}]\n            ]\n        )\n    );\n};\n","import { Directive, Injector } from '@angular/core';\n\nimport { APPLY_STYLES_TYPE, styler } from '../../../framework/styler';\nimport { IWidgetConfig } from '../../../framework/types';\nimport { StylableComponent } from '../../base/stylable.component';\nimport { registerProps } from './layout-grid-row.props';\nimport { provideAsWidgetRef } from '../../../../utils/widget-utils';\n\nconst DEFAULT_CLS = 'app-grid-row clearfix';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-layout-grid-row',\n    hostClass: DEFAULT_CLS\n};\n\n@Directive({\n    selector: '[wmLayoutGridRow]',\n    providers: [\n        provideAsWidgetRef(LayoutGridRowDirective)\n    ]\n})\nexport class LayoutGridRowDirective extends StylableComponent {\n    static initializeProps = registerProps();\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n\n        styler(this.nativeElement, this, APPLY_STYLES_TYPE.CONTAINER);\n    }\n}\n","import { PROP_BOOLEAN, PROP_STRING, register } from '../../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-layout-grid-row',\n        new Map(\n            [\n                ['class', PROP_STRING],\n                ['name', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}]\n            ]\n        )\n    );\n};\n","import { Directive, Injector, Input, OnDestroy, TemplateRef, ViewContainerRef } from '@angular/core';\n\nimport { $watch } from '@wm/core';\n\ndeclare const _;\n\n@Directive({\n    selector: '[lazyLoad]'\n})\nexport class LazyLoadDirective implements OnDestroy {\n    private readonly viewParent: any;\n    private readonly context;\n    private embeddedView;\n    private unSubscribeFn: Function;\n\n    constructor(\n        inj: Injector,\n        private templateRef: TemplateRef<any>,\n        private viewContainer: ViewContainerRef\n    ) {\n        this.viewParent = (inj as any).view.component;\n        this.context = (inj as any).view.context;\n    }\n\n    @Input()\n    set lazyLoad(expr) {\n        this.unSubscribeFn = $watch(\n            expr,\n            this.viewParent,\n            this.context,\n            (val) => {\n                if (!this.embeddedView && val) {\n                    this.embeddedView  = this.viewContainer.createEmbeddedView(this.templateRef, this.context);\n                    this.unSubscribeFn();\n                }\n            }\n        );\n    }\n\n    ngOnDestroy() {\n        this.unSubscribeFn();\n    }\n}\n","import { SwipeAnimation } from '@swipey';\n\nimport { $appDigest } from '@wm/core';\n\nimport { AnimationType, LeftPanelDirective } from './left-panel.directive';\n\nexport class LeftPanelAnimator extends SwipeAnimation {\n    private _$animatedElements;\n    private _expanded: boolean;\n    private _leftPanelWidth: number;\n    private _maxX: number;\n    private _pageContainerWidth: number;\n    private _width: number;\n\n    constructor(private leftPanel: LeftPanelDirective) {\n        super();\n        this.init(this.leftPanel.$ele, this.leftPanel.$page);\n    }\n\n    public bounds(): {} {\n        let offset = 0;\n        this.setGesturesEnabled(this.leftPanel.isGesturesEnabled());\n        if (!this._width) {\n            this._pageContainerWidth = this.leftPanel.$page.width();\n            this._leftPanelWidth = this.leftPanel.$ele.width();\n            this._maxX = this._leftPanelWidth / this._pageContainerWidth * 100;\n            this._width = this.leftPanel.animation === AnimationType.SLIDE_IN ? this._pageContainerWidth : this._leftPanelWidth;\n        }\n        this._expanded = this.leftPanel.expanded;\n\n        if (this._expanded) {\n            return {\n                'center': this._leftPanelWidth,\n                'lower': -(this._leftPanelWidth - offset)\n            };\n        }\n        if (this.leftPanel.app.isTabletApplicationType) {\n            offset = 53.32;\n        }\n        return {\n            'center': 0,\n            'upper': this._leftPanelWidth - offset\n        };\n    }\n\n    public context() {\n        return {\n            'w': this._width,\n            'pageW': this._pageContainerWidth,\n            'leftW': this._leftPanelWidth,\n            'maxX': this._maxX,\n            'limit': (min: number, v: number, max: number) => {\n                if (v < min) {\n                    return min;\n                }\n                if (v > max) {\n                    return max;\n                }\n                return v;\n            }\n        };\n    }\n\n    public animation() {\n        this._$animatedElements = this.leftPanel.$ele;\n        if (this.leftPanel.animation === AnimationType.SLIDE_IN) {\n            this._$animatedElements = this._$animatedElements.add(this.leftPanel.$page);\n            if (this.leftPanel.app.isTabletApplicationType) {\n                return [\n                    {\n                        'target': this.leftPanel.$ele,\n                        'css': {\n                            'transform': 'translate3d(${{ limit(-100, -($d * 100 / leftW), 0) + \\'%\\' }}, 0, 0)'\n                        }\n                    },\n                    {\n                        'target': this.leftPanel.$page,\n                        'css': {\n                            'transform': 'translate3d(${{ (($d) * 100 / pageW) + \\'%\\' }}, 0, 0)',\n                            'width': '${{ (pageW - $d) + \\'px\\' }}',\n                            'z-index': 101\n                        }\n                    }\n                ];\n            }\n            return [\n                {\n                    'target': this.leftPanel.$ele,\n                    'css': {\n                        'transform': 'translate3d(-100%, 0, 0)',\n                        'opacity': 1,\n                        'z-index': 101\n                    }\n                },\n                {\n                    'target': this.leftPanel.$page,\n                    'css': {\n                        'transform': 'translate3d(${{ limit( 0, ((($D + $d) * 100 / w)), maxX ) + \\'%\\' }}, 0, 0)',\n                        'opacity': 1,\n                        'z-index': 101\n                    }\n                }];\n        } else {\n            return {\n                'transform': 'translate3d(${{ limit( -100, ((($D + $d) * 100 / w) - 100), 0 ) + \\'%\\'}}, 0, 0)',\n                'opacity': 1,\n                'z-index': 101\n            };\n        }\n    }\n\n    public onLower(): void {\n        this._expanded = false;\n        this.leftPanel.collapse();\n        this.resetTransition();\n        $appDigest();\n    }\n\n    public onUpper(): void {\n        this._expanded = true;\n        this.leftPanel.expand();\n        this.resetTransition();\n        $appDigest();\n    }\n\n    private resetTransition() {\n        if (this._$animatedElements) {\n            /*\n             * This timeout is for preventing UI flicker at the end of animation.\n             */\n            setTimeout(() => {\n                this._$animatedElements.css({\n                    'transform': '',\n                    'opacity': '',\n                    'z-index': '',\n                    'width': ''\n                });\n            }, 100);\n        }\n    }\n}\n","import { Directive, Injector } from '@angular/core';\n\nimport { App, addClass, removeClass, switchClass, toggleClass } from '@wm/core';\n\nimport { APPLY_STYLES_TYPE, styler } from '../../framework/styler';\nimport { IWidgetConfig } from '../../framework/types';\nimport { StylableComponent } from '../base/stylable.component';\nimport { registerProps } from './left-panel.props';\nimport { LeftPanelAnimator } from './left-panel.animator';\nimport { PageDirective } from '../page/page.directive';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\n\nconst DEFAULT_CLS = 'app-left-panel left-panel-collapsed';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-left-panel',\n    hostClass: DEFAULT_CLS\n};\n\nexport enum AnimationType {\n    SLIDE_IN = 'slide-in',\n    SLIDE_OVER = 'slide-over'\n}\n\n@Directive({\n    selector: '[wmLeftPanel]',\n    providers: [\n        provideAsWidgetRef(LeftPanelDirective)\n    ]\n})\nexport class LeftPanelDirective extends StylableComponent {\n    static initializeProps = registerProps();\n\n    public animation: AnimationType;\n    public columnwidth: number;\n    public expanded: boolean;\n    public gestures: string;\n    public xscolumnwidth: number;\n\n    public $ele;\n    public $page;\n\n    private _destroyCollapseActionListener: () => void;\n    private _leftPanelAnimator;\n\n    constructor(public app: App, private page: PageDirective, inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n        styler(this.nativeElement, this, APPLY_STYLES_TYPE.CONTAINER);\n        this.$ele = this.$element;\n        this.$page = page.$element;\n        addClass(this.$page[0], 'left-panel-collapsed-container');\n        if (this.columnwidth) {\n            this.setLeftPanelWidth(['md', 'sm'], this.columnwidth);\n        }\n        if (this.app.isTabletApplicationType) {\n            addClass(this.nativeElement, 'wm-tablet-app-left-panel');\n        }\n    }\n\n    public collapse(): void {\n        addClass(this.nativeElement, 'swipee-transition');\n        switchClass(this.nativeElement, 'left-panel-collapsed', 'left-panel-expanded');\n        this.expanded = false;\n        switchClass(this.$page[0], 'left-panel-collapsed-container', 'left-panel-expanded-container');\n        if (this.animation === AnimationType.SLIDE_IN) {\n            this.setPageWidthAndPosition(['md', 'sm'], null, this.columnwidth);\n            this.setPageWidthAndPosition(['xs'], null, this.xscolumnwidth);\n        }\n        if (this._destroyCollapseActionListener) {\n            this._destroyCollapseActionListener();\n        }\n        this.page.notify('wmLeftPanel:collapse');\n    }\n\n    public expand(): void {\n        removeClass(this.nativeElement, 'swipee-transition');\n        switchClass(this.nativeElement, 'left-panel-expanded', 'left-panel-collapsed');\n        this.expanded = true;\n        if (!(this.app.isTabletApplicationType && this.animation === AnimationType.SLIDE_IN)) {\n            this._destroyCollapseActionListener = this.listenForCollapseAction();\n        }\n        switchClass(this.$page[0], 'left-panel-expanded-container', 'left-panel-collapsed-container');\n        if (this.animation === AnimationType.SLIDE_IN) {\n            this.setPageWidthAndPosition(['md', 'sm'], this.columnwidth);\n            this.setPageWidthAndPosition(['xs'], this.xscolumnwidth);\n        }\n        this.page.notify('wmLeftPanel:expand');\n    }\n\n    public isGesturesEnabled(): boolean {\n        return this.gestures === 'on';\n    }\n\n    public isVisible(): boolean {\n        return this.expanded;\n    }\n\n    public onPropertyChange(key, nv, ov) {\n        switch (key) {\n            case 'animation' :\n                if (nv === AnimationType.SLIDE_IN) {\n                    removeClass(this.$page[0], 'slide-over-left-panel-container');\n                    addClass(this.$page[0], 'slide-in-left-panel-container');\n                    this.setPageWidthAndPosition(['md', 'sm'], this.columnwidth);\n                    this.setPageWidthAndPosition(['xs'], this.xscolumnwidth);\n                } else if (nv === AnimationType.SLIDE_OVER) {\n                    removeClass(this.$page[0], 'slide-in-left-panel-container');\n                    addClass(this.$page[0], 'slide-over-left-panel-container');\n                }\n                this._leftPanelAnimator = new LeftPanelAnimator(this);\n                switchClass(this.nativeElement, nv, ov);\n                break;\n            case 'columnwidth':\n                this.setLeftPanelWidth(['md', 'sm'], nv, ov);\n                if (this.animation === AnimationType.SLIDE_IN) {\n                    this.setPageWidthAndPosition(['md', 'sm'], nv, ov);\n                }\n                break;\n            case 'expanded':\n                toggleClass(this.nativeElement, 'left-panel-expanded', nv);\n                toggleClass(this.nativeElement, 'left-panel-collapsed', !nv);\n                break;\n            case 'xscolumnwidth':\n                this.setLeftPanelWidth(['xs'], nv, ov);\n                if (this.animation === AnimationType.SLIDE_IN) {\n                    this.setPageWidthAndPosition(['xs'], nv, ov);\n                }\n                break;\n            default:\n                super.onPropertyChange(key, nv, ov);\n        }\n    }\n\n    public  toggle(): void {\n        if (this.app.isTabletApplicationType) {\n            setTimeout(() => {\n                this.expanded ? this.collapse() : this.expand();\n            }, 50);\n        } else {\n            this.$ele.swipeAnimation(this.expanded ? 'gotoLower' : 'gotoUpper');\n        }\n    }\n\n    private listenForCollapseAction(): () => void {\n        const eventName = 'click.leftNavToggle';\n        let skipEvent = false;\n        this.$ele.on(eventName, () => {\n            skipEvent = true;\n        });\n        this.$page.on(eventName, () =>  {\n            if (!skipEvent) {\n                this.toggle();\n            }\n            skipEvent = false;\n        });\n        return () => {\n            this.$ele.off(eventName);\n            this.$page.off(eventName);\n        };\n    }\n\n    private setLeftPanelWidth(devices: string[], newVal: number, oldVal?: number) {\n        devices.forEach(device => {\n            if (newVal) {\n                addClass(this.nativeElement, `col-${device}-${newVal}`);\n            }\n            if (oldVal) {\n                removeClass(this.nativeElement, `col-${device}-${oldVal}`);\n            }\n        });\n    }\n\n    private setPageWidthAndPosition(devices: string[], newVal: number, oldVal?: number) {\n        devices.forEach(device => {\n            if (newVal) {\n                addClass(this.$page[0], `left-panel-container-${device}-${12 - newVal}`);\n            }\n            if (oldVal) {\n                removeClass(this.$page[0], `left-panel-container-${device}-${12 - oldVal}`);\n            }\n        });\n    }\n}\n","import { AfterViewInit, Directive, Injector, OnDestroy } from '@angular/core';\nimport { Title } from '@angular/platform-browser';\n\nimport { EventNotifier } from '@wm/core';\n\nimport { StylableComponent } from '../base/stylable.component';\nimport { registerProps } from './page.props';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\nimport { updateDeviceView } from '../../framework/deviceview';\n\nconst DEFAULT_CLS = 'app-page container';\nconst WIDGET_CONFIG = {widgetType: 'wm-page', hostClass: DEFAULT_CLS};\n\n@Directive({\n    selector: '[wmPage]',\n    providers: [\n        provideAsWidgetRef(PageDirective)\n    ]\n})\nexport class PageDirective extends StylableComponent implements AfterViewInit, OnDestroy {\n    static initializeProps = registerProps();\n\n    private _eventNotifier = new EventNotifier(false);\n\n    onPropertyChange(key: string, nv: any, ov?: any) {\n        if (key === 'pagetitle') {\n            this.titleService.setTitle(nv);\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n\n    constructor(inj: Injector, private titleService: Title) {\n        super(inj, WIDGET_CONFIG);\n    }\n\n    /**\n     * A child component can notify page using this method. Notified event will be passed to\n     * subscribed children only after page initialization.\n     *\n     * @param {string} eventName\n     * @param data\n     */\n    public notify(eventName: string, ...data: Array<any>) {\n        this._eventNotifier.notify.apply(this._eventNotifier, arguments);\n    }\n\n    /**\n     * The main purpose of this function is to provide communication between page children objects.\n     * Child component can subscribe for an event that will be emitted by another child component.\n     *\n     * @param eventName\n     * @param {(data: any) => void} callback\n     * @returns {any}\n     */\n    public subscribe(eventName, callback: (data: any) => void): () => void {\n        return this._eventNotifier.subscribe(eventName, callback);\n    }\n\n    public ngAfterViewInit() {\n        setTimeout(() => {\n            this._eventNotifier.start();\n            updateDeviceView(this.nativeElement, this.getAppInstance().isTabletApplicationType);\n        }, 1);\n    }\n\n    public ngOnDestroy() {\n        this._eventNotifier.destroy();\n    }\n}\n","import { PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-page',\n        new Map(\n            [\n                ['pagetitle', PROP_STRING]\n            ]\n        )\n    );\n};\n","import { AfterViewInit, Component, ContentChild, ElementRef, Inject, Injector, OnInit, TemplateRef, ViewChild } from '@angular/core';\nimport { EVENT_MANAGER_PLUGINS } from '@angular/platform-browser';\n\nimport { PopoverDirective } from 'ngx-bootstrap';\n\nimport { addClass, App, setAttr, setCSSFromObj } from '@wm/core';\n\nimport { IWidgetConfig } from '../../framework/types';\nimport { styler } from '../../framework/styler';\nimport { StylableComponent } from '../base/stylable.component';\nimport { registerProps } from './popover.props';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\n\ndeclare const _, $;\n\nconst DEFAULT_CLS = 'app-popover-wrapper';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-popover',\n    hostClass: DEFAULT_CLS\n};\n\nconst eventsMap = {\n    click: 'click',\n    hover: 'mouseenter:click',\n    default: 'click mouseenter'\n};\n\nlet activePopover: PopoverComponent;\n\n@Component({\n    selector: 'wm-popover',\n    templateUrl: './popover.component.html',\n    providers: [\n        provideAsWidgetRef(PopoverComponent)\n    ]\n})\n\nexport class PopoverComponent extends StylableComponent implements OnInit, AfterViewInit {\n    static initializeProps = registerProps();\n\n    public event: string;\n    public isOpen = false;\n    private closePopoverTimeout;\n    public readonly popoverContainerCls;\n    private keyEventPlugin;\n    public canPopoverOpen = true;\n    private Widgets;\n    private Variables;\n    private Actions;\n\n    public interaction: string;\n    public popoverarrow: boolean;\n    public popoverwidth: string;\n    public popoverheight: string;\n    public contentanimation: string;\n    public contentsource: string;\n    public content: string;\n    public popoverplacement: string;\n\n    public class: string;\n    public title: string;\n    public tabindex: any;\n    public name: string;\n\n    @ViewChild(PopoverDirective) private bsPopoverDirective;\n    @ViewChild('anchor') anchorRef: ElementRef;\n    @ContentChild(TemplateRef) popoverTemplate;\n    @ContentChild('partial') partialRef;\n\n    constructor(inj: Injector, private app: App, @Inject(EVENT_MANAGER_PLUGINS) evtMngrPlugins) {\n        super(inj, WIDGET_CONFIG);\n\n        // KeyEventsPlugin\n        this.keyEventPlugin = evtMngrPlugins[1];\n        this.popoverContainerCls = `app-popover-${this.widgetId}`;\n    }\n\n    // This mehtod is used to show/open the popover. This refers to the same method showPopover.\n    public open() {\n        this.showPopover();\n    }\n\n    // This mehtod is used to hide/close the popover.\n    public close() {\n        this.isOpen = false;\n    }\n\n    // Trigger on hiding popover\n    public onHidden() {\n        this.invokeEventCallback('hide', {$event: {type: 'hide'}});\n    }\n\n    private setFocusToPopoverLink() {\n        setTimeout(() => this.anchorRef.nativeElement.focus(), 10);\n    }\n\n    private adjustPopoverPosition(popoverElem, parentDimesion, popoverLeftShift) {\n        const arrowLeftShift = (parentDimesion.left + (parentDimesion.width / 2)) - popoverLeftShift;\n        this.bsPopoverDirective._popover._ngZone.onStable.subscribe(() => {\n            popoverElem.css('left', popoverLeftShift + 'px');\n            popoverElem.find('.popover-arrow').css('left', arrowLeftShift + 'px');\n        });\n    }\n\n    private calculatePopoverPostion(element) {\n        const popoverElem = $(element);\n        const popoverLeft = _.parseInt(popoverElem.css('left'));\n        const popoverWidth = _.parseInt(popoverElem.css('width'));\n        const viewPortWidth = $(window).width();\n        const parentDimesion = this.anchorRef.nativeElement.getBoundingClientRect();\n        // Adjusting popover position, if it is not visible at left side\n        if (popoverLeft < 0) {\n            const popoverLeftShift = 4;\n            this.adjustPopoverPosition(popoverElem, parentDimesion, popoverLeftShift);\n        }\n        // Adjusting popover position, if it is not visible at right side\n        if (popoverLeft + popoverWidth > viewPortWidth) {\n            const popoverLeftAdjust = (popoverLeft + popoverWidth) - viewPortWidth;\n            const popoverLeftShift =  popoverLeft - popoverLeftAdjust - 50;\n            this.adjustPopoverPosition(popoverElem, parentDimesion, popoverLeftShift);\n        }\n    }\n\n\n    // Trigger on showing popover\n    public onShown() {\n        if (activePopover && activePopover.isOpen) {\n            activePopover.isOpen = false;\n        }\n\n        activePopover = this;\n        activePopover.isOpen = true;\n\n        const popoverContainer  = document.querySelector(`.${this.popoverContainerCls}`) as HTMLElement;\n        setCSSFromObj(popoverContainer, {\n            height: this.popoverheight,\n            minWidth: this.popoverwidth\n        });\n        if (!this.popoverarrow) {\n            addClass(popoverContainer.querySelector('.arrow') as HTMLElement, 'hidden');\n        }\n        if (this.interaction === 'hover' || this.interaction === 'default') {\n\n            // do not use addEventListener here\n            // attaching the event this way will override the existing event handlers\n            popoverContainer.onmouseenter = () => clearTimeout(this.closePopoverTimeout);\n            popoverContainer.onmouseleave = () => this.hidePopover();\n            this.anchorRef.nativeElement.onmouseenter = () => clearTimeout(this.closePopoverTimeout);\n            this.anchorRef.nativeElement.onmouseleave = () => this.hidePopover();\n        }\n\n        const deRegister = this.eventManager.addEventListener(popoverContainer, 'keydown.esc', () => {\n            this.isOpen = false;\n            this.setFocusToPopoverLink();\n            deRegister();\n        });\n        const popoverStartBtn: HTMLElement = popoverContainer.querySelector('.popover-start');\n        const popoverEndBtn: HTMLElement = popoverContainer.querySelector('.popover-end');\n        popoverStartBtn.onkeydown = (event) => {\n            const action = this.keyEventPlugin.constructor.getEventFullKey(event);\n            // Check for Shift+Tab key\n            if (action === 'shift.tab') {\n                this.bsPopoverDirective.hide();\n                this.setFocusToPopoverLink();\n            }\n        };\n        popoverEndBtn.onkeydown = (event) => {\n            const action = this.keyEventPlugin.constructor.getEventFullKey(event);\n            // Check for Tab key\n            if (action === 'tab') {\n                this.bsPopoverDirective.hide();\n                this.setFocusToPopoverLink();\n            }\n        };\n\n        setAttr(popoverContainer, 'tabindex', 0);\n        setTimeout(() => popoverStartBtn.focus(), 50);\n        // Adjusting popover position if the popover placement is top or bottom\n        setTimeout( () => {\n            if (this.popoverplacement === 'bottom' || this.popoverplacement === 'top') {\n                this.calculatePopoverPostion(popoverContainer);\n            }\n            // triggering onload and onshow events after popover content has rendered\n            this.triggerPopoverEvents();\n        });\n    }\n\n    triggerPopoverEvents() {\n        if (this.contentsource === 'partial') {\n            const cancelSubscription = this.app.subscribe('partialLoaded', (data) => {\n                const parEle = this.partialRef.nativeElement;\n                let partialScope;\n\n                if (parEle) {\n                    partialScope  = parEle.widget;\n                    this.Widgets   = partialScope.Widgets;\n                    this.Variables = partialScope.Variables;\n                    this.Actions   = partialScope.Actions;\n                    this.invokeEventCallback('load');\n                    this.invokeEventCallback('show', {$event: {type: 'show'}});\n                }\n                cancelSubscription();\n            });\n        } else {\n            this.Widgets   = this.viewParent.Widgets;\n            this.Variables = this.viewParent.Variables;\n            this.Actions   = this.viewParent.Actions;\n            this.invokeEventCallback('show', {$event: {type: 'show'}});\n        }\n    }\n\n    private hidePopover() {\n        this.closePopoverTimeout = setTimeout(() => this.isOpen = false, 500);\n    }\n\n    private showPopover() {\n        this.bsPopoverDirective.show();\n    }\n\n    onPopoverAnchorKeydown($event) {\n        // if there is no content available, the popover should not open through enter key. So checking whether the canPopoverOpen flag is true or not.\n        if (!this.canPopoverOpen) {\n           return;\n        }\n        const action = this.keyEventPlugin.constructor.getEventFullKey(event);\n        if (action === 'enter') {\n            $event.stopPropagation();\n            this.showPopover();\n        }\n    }\n\n    onPropertyChange(key: string, nv: any, ov?: any) {\n        if (key === 'class' || key === 'tabindex') {\n            return;\n        }\n        if (key === 'contentsource') {\n            // if there is no partial content available, the popover should not open\n            if (this.contentsource === 'partial' && !this.content) {\n                this.canPopoverOpen = false;\n            }\n        }\n        if (key === 'content' && nv) {\n            this.canPopoverOpen = true;\n        }\n        super.onPropertyChange(key, nv, ov);\n    }\n\n    ngOnInit() {\n        super.ngOnInit();\n        this.event = eventsMap[this.interaction];\n    }\n\n    ngAfterViewInit() {\n        super.ngAfterViewInit();\n        styler(this.anchorRef.nativeElement, this);\n    }\n}\n","import { PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-left-panel',\n        new Map(\n            [\n                ['animation', {value: 'slide-in', ...PROP_STRING}],\n                ['class', PROP_STRING],\n                ['columnwidth', { value: 3, ...PROP_NUMBER}],\n                ['content', PROP_STRING],\n                ['gestures', {value: 'on', ... PROP_STRING}],\n                ['name', PROP_STRING],\n                ['xscolumnwidth', { value: 10, ...PROP_NUMBER}]\n            ]\n        )\n    );\n};\n","import { Directive, Inject, Self } from '@angular/core';\n\nimport { AbstractDialogService, App, DataSource, triggerFn } from '@wm/core';\n\nimport { ListComponent } from '../../list/list.component';\nimport { Live_Operations, performDataOperation } from '../../../../utils/data-utils';\n\n@Directive({\n    selector: '[wmLiveActions]'\n})\nexport class LiveActionsDirective {\n\n    constructor(\n        @Self() @Inject(ListComponent) private subscribedWidget,\n        private app: App,\n        private dialogService: AbstractDialogService\n    ) {\n        subscribedWidget.addRow = this.addRow.bind(this);\n        subscribedWidget.updateRow = this.updateRow.bind(this);\n        subscribedWidget.deleteRow = this.deleteRow.bind(this);\n        subscribedWidget.call = this.call.bind(this);\n    }\n\n    public addRow() {\n        this.app.notify('wm-event', {eventName: Live_Operations.INSERT, widgetName: this.subscribedWidget.name, row: this.subscribedWidget.selecteditem});\n    }\n\n    public updateRow() {\n        this.app.notify('wm-event', {eventName: Live_Operations.UPDATE, widgetName: this.subscribedWidget.name, row: this.subscribedWidget.selecteditem});\n    }\n\n    public deleteRow() {\n        this.app.notify('wm-event', {eventName: Live_Operations.DELETE, widgetName: this.subscribedWidget.name, row: this.subscribedWidget.selecteditem});\n    }\n\n    private successHandler(options, response) {\n        triggerFn(options.success, response);\n    }\n\n    private errorHandler(options, error) {\n        this.app.notifyApp(error, 'error', 'ERROR');\n        triggerFn(options.error, error);\n    }\n\n    public getRecords(options, operation) {\n        let index;\n        let dataNavigator;\n\n        if (this.subscribedWidget.navigation !== 'None' && this.subscribedWidget.dataNavigator) {\n            dataNavigator = this.subscribedWidget.dataNavigator;\n\n            // If operation is delete, decrease the data size and check if navigation to previous page is required\n            if (operation === Live_Operations.DELETE) {\n                dataNavigator.dataSize -= 1;\n                dataNavigator.calculatePagingValues();\n                index = dataNavigator.pageCount < dataNavigator.dn.currentPage ? 'prev' : undefined;\n            } else {\n                // If operation is insert, go to last page. If update operation, stay on current page\n                index = operation === Live_Operations.INSERT ? 'last' : 'current';\n                if (index === 'last') {\n                    dataNavigator.dataSize += 1;\n                }\n                dataNavigator.calculatePagingValues();\n            }\n\n            dataNavigator.navigatePage(index, null, true, response => {\n                this.successHandler(options, response);\n            });\n        } else {\n            this.subscribedWidget.datasource.execute(DataSource.Operation.LIST_RECORDS, {\n                'skipToggleState': true\n            }).then(response => {\n                this.successHandler(options, response);\n            }, err => {\n                this.errorHandler(options, err);\n            });\n        }\n    }\n\n    private performCUDOperation(requestData, operation, options) {\n        performDataOperation(this.subscribedWidget.datasource, requestData, {\n            operationType: operation\n        }).then(response => {\n            if (response.error) {\n                this.errorHandler(options, response.error);\n                return;\n            }\n            this.getRecords(options, operation);\n            // show delete success toaster\n            if (operation === 'delete') {\n                this.app.notifyApp(this.app.appLocale.MESSAGE_DELETE_RECORD_SUCCESS, 'success');\n            }\n        }, (error) => {\n            this.errorHandler(options, error);\n        });\n    }\n\n    private insertRecord(requestData, operation, options) {\n        this.performCUDOperation(requestData, operation, options);\n    }\n\n    private updateRecord(requestData, operation, options) {\n        this.performCUDOperation(requestData, operation, options);\n    }\n\n    private deleteRecord(requestData, operation, options) {\n        // Show the delete confirmation dialog. On Ok, delete the record.\n        this.dialogService.showAppConfirmDialog({\n            title:  this.app.appLocale.MESSAGE_DELETE_RECORD || 'Delete Record',\n            iconclass: 'wi wi-delete fa-lg',\n            message: this.subscribedWidget.confirmdelete || 'Are you sure you want to delete this?',\n            oktext: this.subscribedWidget.deleteoktext || 'Ok',\n            canceltext: this.subscribedWidget.deletecanceltext || 'Cancel',\n            onOk: () => {\n                this.performCUDOperation(requestData, operation, options);\n                this.dialogService.closeAppConfirmDialog();\n            },\n            onCancel: () => {\n                triggerFn(options.cancelDeleteCallback);\n                this.dialogService.closeAppConfirmDialog();\n            }\n        });\n    }\n\n    private performOperation(operation, options) {\n        const requestData = {\n            row: options.row,\n            prevData: {},\n            rowData: {},\n            transform: true,\n            skipNotification: true\n        };\n\n        if (operation === Live_Operations.UPDATE) {\n            requestData.rowData = options.rowData;\n            requestData.prevData = options.prevData;\n        }\n\n        /* decide routine based on CRUD operation to be performed */\n        switch (operation) {\n            case Live_Operations.INSERT:\n                this.insertRecord(requestData, operation, options);\n                break;\n            case Live_Operations.UPDATE:\n                this.updateRecord(requestData, operation, options);\n                break;\n            case Live_Operations.DELETE:\n                this.deleteRecord(requestData, operation, options);\n                break;\n            case Live_Operations.READ:\n                this.getRecords(options, operation);\n                break;\n        }\n    }\n\n    // API exposed to make CRUD operations\n    public call(operation, options, success?, error?) {\n        options.success = success;\n        options.error = error;\n\n        this.performOperation(operation, options);\n    }\n}\n","import { AfterContentInit, Attribute, ChangeDetectorRef, Component, ContentChild, ElementRef, Injector } from '@angular/core';\n\nimport { debounceTime } from 'rxjs/operators';\n\nimport { $appDigest, AbstractDialogService, App, getClonedObject, isDefined, triggerFn } from '@wm/core';\n\nimport { styler } from '../../framework/styler';\nimport { registerProps } from './live-table.props';\nimport { TableComponent } from '../table/table.component';\nimport { StylableComponent } from '../base/stylable.component';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\n\ndeclare const _;\ndeclare var $: any;\n\nconst DEFAULT_CLS = 'app-livegrid';\nconst WIDGET_CONFIG = {widgetType: 'wm-livetable', hostClass: DEFAULT_CLS};\n\n@Component({\n    selector: '[wmLiveTable]',\n    templateUrl: './live-table.component.html',\n    providers: [\n        provideAsWidgetRef(LiveTableComponent)\n    ]\n})\nexport class LiveTableComponent extends StylableComponent implements AfterContentInit {\n    static initializeProps = registerProps();\n    @ContentChild(TableComponent) table: TableComponent;\n\n    form;\n    isLayoutDialog: boolean;\n\n    private dialogId;\n    private $queue = [];\n\n    private tableOptions: any = {\n        'multiselect': false,\n        'setGridEditMode': ''\n    };\n\n    constructor(\n        inj: Injector,\n        elRef: ElementRef,\n        cdr: ChangeDetectorRef,\n        private dialogService: AbstractDialogService,\n        private app: App,\n        @Attribute('formlayout') layoutType: string,\n        @Attribute('dialogid') dialogId: string\n    ) {\n        super(inj, WIDGET_CONFIG);\n        styler(this.nativeElement, this);\n        if (layoutType === 'dialog') {\n            this.isLayoutDialog = true;\n            this.dialogId = dialogId;\n        }\n    }\n\n    ngAfterContentInit() {\n        super.ngAfterContentInit();\n        if (this.table) {\n            this.table._liveTableParent = this;\n            this.table.datagridElement.datatable('option', this.tableOptions);\n\n            this.table.selectedItemChange$\n                .pipe(debounceTime(250))\n                .subscribe(this.onSelectedItemChange.bind(this));\n\n            if (!this.isLayoutDialog && !this.form) {\n                this.table.datagridElement.datatable('option', {\n                    'beforeRowUpdate' : () => {\n                        this.showErrorMessage();\n                    },\n                    'beforeRowDelete' : () => {\n                        this.showErrorMessage();\n                    },\n                    'beforeRowInsert' : () => {\n                        this.showErrorMessage();\n                    }\n                });\n            }\n        }\n    }\n\n    openDialog() {\n        this.dialogService.open(this.dialogId);\n        $appDigest();\n    }\n\n    closeDialog() {\n        this.dialogService.close(this.dialogId);\n    }\n\n    focusFirstInput() {\n        const $firstInput = $(this.form.$element).find('[role=\"input\"]:first');\n        $firstInput.focus();\n        $firstInput.select();\n    }\n\n    onDialogOpen() {\n        this.focusFirstInput();\n    }\n\n    setFormData(val) {\n        if (!this.form.isDestroyed) {\n            this.form.getWidget().formdata = val;\n        }\n    }\n\n    private _addNewRow() {\n        this.form.isSelected = true;\n        this.setFormData('');\n\n        this.form.new();\n\n        if (this.isLayoutDialog) {\n            this.onDialogOpen();\n        }\n    }\n\n    addNewRow() {\n        if (this.isLayoutDialog) {\n            this.openDialog();\n            this.$queue.push(this._addNewRow.bind(this));\n            return;\n        }\n\n       this._addNewRow();\n    }\n\n    private _updateRow(row, eventName) {\n        this.setFormData(row);\n        this.form.isSelected = true;\n        this.form.edit();\n\n        if (this.isLayoutDialog) {\n            this.form.isUpdateMode = (eventName === 'dblclick') ? this.form.updateMode : true;\n            this.onDialogOpen();\n        }\n    }\n\n    updateRow(row, eventName) {\n\n        if (this.isLayoutDialog) {\n            this.openDialog();\n            this.$queue.push(this._updateRow.bind(this, row, eventName));\n            return;\n        }\n\n        this._updateRow(row, eventName);\n    }\n\n    onSelectedItemChange(newValue) {\n        let rowData;\n        if (!this.form || !this.table) {\n            return;\n        }\n\n        if (newValue && newValue.length > 0 && !this.form.isSelected) {\n            this.form.isSelected = true;\n        }\n\n        /*Update the rowdata of only that grid form that is associated with the specific grid on which row selection is being performed...\n         * Since both the grid & gridform are associated with the same \"parentgrid\", match the same*/\n        if (newValue && newValue.length > 0) {\n            if (this.table.multiselect) {\n                rowData = newValue[0];\n            } else {\n                rowData = newValue[newValue.length - 1];\n            }\n\n            this.setFormData(getClonedObject(rowData));\n            /*If the form is already in update mode, call the form update function*/\n            if (this.form.isUpdateMode) {\n                this.form.edit();\n            }\n        } else {\n            this.form.isSelected = false;\n            this.setFormData('');\n            this.form.clearData();\n        }\n    }\n\n    onCancel() {\n        this.form.isUpdateMode = false;\n        if (this.isLayoutDialog) {\n            this.closeDialog();\n        }\n    }\n\n    onResult(operation, response, newForm, updateMode) {\n        this.form.isUpdateMode = isDefined(updateMode) ? updateMode : newForm ? true : false;\n        switch (operation) {\n            case 'insert':\n                if (newForm) {\n                    /*if new form is to be shown after insert, skip the highlight of the row*/\n                    this.table.gridfirstrowselect = false;\n                    this.table.initiateSelectItem(this.table.getNavigationTargetBySortInfo(), response, true);\n                } else {\n                    /*The new row would always be inserted at the end of all existing records. Hence navigate to the last page and highlight the inserted row.*/\n                    this.table.initiateSelectItem(this.table.getNavigationTargetBySortInfo(), response);\n                }\n                break;\n            case 'update':\n                /*The updated row would be found in the current page itself. Hence simply highlight the row in the current page.*/\n                if (newForm) {\n                    this.table.gridfirstrowselect = false;\n                    this.table.initiateSelectItem('current', response, true);\n                } else {\n                    this.table.initiateSelectItem('current', response);\n                }\n                break;\n            case 'delete':\n                this.table.onRecordDelete();\n                break;\n        }\n        this.table.updateVariable();\n        if (this.isLayoutDialog) {\n            /*if new form is to be shown after update or insert, don't close the dialog*/\n            if (newForm) {\n                if (operation === 'insert') {\n                    this.form.new();\n                } else if (operation === 'update') {\n                    this.form.edit();\n                }\n            } else {\n                this.closeDialog();\n            }\n        }\n    }\n\n    showErrorMessage() {\n        this.app.notifyApp(this.appLocale.LABEL_ACCESS_DENIED, 'error');\n    }\n\n    // In dialog mode, on form render call the queued functions\n    onFormReady(form) {\n        this.form = form;\n        setTimeout(() => {\n            triggerFn(this.$queue.pop());\n        });\n    }\n}\n","import { PROP_BOOLEAN, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-livetable',\n        new Map(\n            [\n                ['class', PROP_STRING],\n                ['formlayout', PROP_STRING],\n                ['name', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n            ]\n        )\n    );\n};\n","import { Directive, Inject, Optional, Self, Attribute } from '@angular/core';\n\nimport { $appDigest, AbstractDialogService, DataSource, DataType, debounce, getClonedObject, getFiles, getValidDateObject, isDateTimeType, isDefined, isEmptyObject } from '@wm/core';\n\nimport { registerLiveFormProps } from '../form.props';\nimport { FormComponent } from '../form.component';\nimport { ALLFIELDS, applyFilterOnField, fetchRelatedFieldData, getDistinctValuesForField, Live_Operations, performDataOperation } from '../../../../utils/data-utils';\nimport { ToDatePipe } from '../../../../pipes/custom-pipes';\nimport { parseValueByType } from '../../../../utils/live-utils';\nimport { isDataSetWidget } from '../../../../utils/widget-utils';\nimport { LiveTableComponent } from '../../live-table/live-table.component';\n\ndeclare const _;\n\nconst isTimeType = field => field.widgettype === DataType.TIME || (field.type === DataType.TIME && !field.widgettype);\nconst getValidTime = val => {\n    if (val) {\n        const date = (new Date()).toDateString();\n        return (new Date(`${date} ${val}`)).getTime();\n    }\n    return undefined;\n};\n\n@Directive({\n    selector: '[wmLiveForm]'\n})\nexport class LiveFormDirective {\n    static  initializeProps = registerLiveFormProps();\n    private _debouncedSavePrevDataValues = debounce(() => {\n        this.savePrevDataValues();\n    }, 250);\n\n    constructor(\n        @Self() @Inject(FormComponent) private form,\n        @Optional() liveTable: LiveTableComponent,\n        public datePipe: ToDatePipe,\n        private dialogService: AbstractDialogService,\n        @Attribute('formlayout') formlayout: string\n    ) {\n        // If parent live table is present and this form is first child of live table, set this form instance on livetable\n        if (liveTable && !this.form.parentForm) {\n            this.form._liveTableParent = liveTable;\n            this.form.isLayoutDialog = liveTable.isLayoutDialog;\n            liveTable.onFormReady(this.form);\n        } else {\n            this.form.isLayoutDialog = formlayout === 'dialog';\n        }\n        // CUD operations\n        form.edit = this.edit.bind(this);\n        form.cancel = this.cancel.bind(this);\n        form.reset = this.reset.bind(this);\n        form.new = this.new.bind(this);\n        form.delete = this.delete.bind(this);\n        form.save = this.save.bind(this);\n        form.saveAndNew = this.saveAndNew.bind(this);\n        form.saveAndView = this.saveAndView.bind(this);\n\n        form.setPrimaryKey = this.setPrimaryKey.bind(this);\n        form.constructDataObject = this.constructDataObject.bind(this);\n        form.changeDataObject = this.setFormData.bind(this);\n        form.setFormData = this.setFormData.bind(this);\n        form.findOperationType = this.findOperationType.bind(this);\n        form.clearData = this.clearData.bind(this);\n        form.onFieldDefaultValueChange = this.onFieldDefaultValueChange.bind(this);\n        form.onDataSourceChange = this.onDataSourceChange.bind(this);\n        form.onFieldValueChange = this.onFieldValueChange.bind(this);\n        form.submitForm = this.submitForm.bind(this);\n    }\n\n    onDataSourceChange() {\n        if (_.get(this.form.formFields, 'length')) {\n            this.form.isDataSourceUpdated = true;\n        }\n        const formFields = this.form.getFormFields();\n        formFields.forEach(field => {\n            if (!field.isDataSetBound && isDataSetWidget(field.widgettype)) {\n                if (field['is-related']) {\n                    field.isDataSetBound = true;\n                    fetchRelatedFieldData(this.form.datasource, field.widget, {\n                        relatedField: field.key,\n                        datafield: ALLFIELDS,\n                        widget: 'widgettype',\n                    });\n                } else {\n                    getDistinctValuesForField(this.form.datasource, field.widget, {\n                        widget: 'widgettype',\n                        enableemptyfilter: this.form.enableemptyfilter\n                    });\n                    applyFilterOnField(this.form.datasource, field.widget, formFields, field.value, {isFirst: true});\n                }\n            }\n        });\n    }\n\n    onFieldDefaultValueChange(field, nv) {\n        // In Edit, do  not set default values\n        if (this.form.operationType === 'update') {\n            return;\n        }\n        // Set the default value only if it exists.\n        if (isDefined(nv) && nv !== null && nv !== '' && nv !== 'null') {\n            field.value = parseValueByType(nv, field.type, field.widgettype);\n        } else {\n            field.value = undefined;\n        }\n        this._debouncedSavePrevDataValues();\n    }\n\n    onFieldValueChange(field, nv) {\n        applyFilterOnField(this.form.datasource, field.widget, this.form.formFields, nv);\n    }\n\n    getBlobURL(dataObj, key, value) {\n        let href = '';\n        let primaryKeys;\n        let primaryKey;\n        if (value === null || value === undefined || !this.form.datasource) {\n            return href;\n        }\n        primaryKeys = this.form.datasource.execute(DataSource.Operation.GET_PRIMARY_KEY) || [];\n        primaryKey  = dataObj[primaryKeys[0]];\n        // TODO: Handle mobile case\n        // if (CONSTANTS.hasCordova && CONSTANTS.isRunMode) {\n        //     href += $rootScope.project.deployedUrl;\n        // }\n        href += this.form.datasource.execute(DataSource.Operation.GET_BLOB_URL, {\n            primaryValue: primaryKey,\n            columnName: key\n        });\n        href += '?' + Math.random();\n        return href;\n    }\n\n    resetFileUploadWidget(field, skipValueSet?) {\n        const $formEle = this.form.$element;\n        $formEle.find('[name=\"' + field.key + '_formWidget\"]').val('');\n        field._control.reset();\n        if (!skipValueSet) {\n            field.href = '';\n            field.value = null;\n        }\n    }\n\n    setDefaultValues() {\n        this.form.formFields.forEach(field => {\n            this.onFieldDefaultValueChange(field, field.defaultvalue);\n        });\n    }\n\n    setFormData(dataObj) {\n        if (!dataObj) {\n            return;\n        }\n        const formFields = this.form.getFormFields();\n        formFields.forEach(field => {\n            const value = _.get(dataObj, field.key || field.name);\n            if (isTimeType(field)) {\n                field.value = getValidTime(value);\n            } else if (field.type === DataType.BLOB) {\n                this.resetFileUploadWidget(field, true);\n                field.href  = this.getBlobURL(dataObj, field.key, value);\n                field.value = _.isString(value) ? '' : value;\n            } else {\n                field.value = value;\n            }\n        });\n        this.savePrevDataValues();\n        this.form.constructDataObject();\n    }\n\n    onDataSourceUpdate(response, newForm, updateMode) {\n        if (newForm) {\n            this.form.new();\n        } else {\n            this.form.setFormData(response);\n            this.closeDialog();\n        }\n        this.form.isUpdateMode = isDefined(updateMode) ? updateMode : true;\n    }\n\n    savePrevformFields() {\n        this.form.prevformFields = getClonedObject(this.form.formFields.map(field => {\n            return {\n                'key': field.key,\n                'type': field.type,\n                'widgettype': field.widgettype,\n                'outputformat': field.outputformat,\n                'value': field.value\n            };\n        }));\n    }\n\n    getPrevformFields() {\n        this.form.formFields.map(field => {\n            const prevField = this.form.prevformFields.find(pField => pField.key === field.key);\n            field.value = prevField.value;\n        });\n    }\n\n    getDataObject() {\n        if (this.form.operationType === Live_Operations.INSERT) {\n            return {};\n        }\n        if (isDefined(this.form.prevDataObject) && !isEmptyObject(this.form.prevDataObject)) {\n            return getClonedObject(this.form.prevDataObject);\n        }\n        return getClonedObject(this.form.formdata || {});\n    }\n\n    constructDataObject(isPreviousData?) {\n        const dataObject = this.getDataObject();\n        const formName = this.form.name;\n        let formFields;\n        formFields = isPreviousData ? this.form.prevformFields : this.form.getFormFields();\n        formFields.forEach(field => {\n            let dateTime,\n                fieldValue;\n            const fieldTarget = _.split(field.key, '.');\n            const fieldName = fieldTarget[0] || field.key;\n\n            /*collect the values from the fields and construct the object*/\n            /*Format the output of date time widgets to the given output format*/\n            if ((field.widgettype && isDateTimeType(field.widgettype)) || isDateTimeType(field.type)) {\n                if (field.value) {\n                    dateTime = getValidDateObject(field.value);\n                    if (field.outputformat === DataType.TIMESTAMP || field.type === DataType.TIMESTAMP) {\n                        fieldValue = field.value ? dateTime : null;\n                    } else if (field.outputformat) {\n                        fieldValue = this.datePipe.transform(dateTime, field.outputformat);\n                    } else {\n                        fieldValue = field.value;\n                    }\n                } else {\n                    fieldValue = undefined;\n                }\n            } else if (field.type === DataType.BLOB) {\n                fieldValue = getFiles(formName, fieldName + '_formWidget', field.multiple);\n            } else if (field.type === DataType.LIST) {\n                fieldValue = field.value || undefined;\n            } else {\n                fieldValue = (field.value === null || field.value === '') ? undefined : field.value;\n            }\n\n            if (fieldTarget.length === 1) {\n                dataObject[fieldName] = fieldValue;\n            } else {\n                dataObject[fieldName] = dataObject[fieldName] || {};\n                dataObject[fieldName][fieldTarget[1]] = fieldValue;\n            }\n        });\n        if (!isPreviousData) {\n            this.form.updateFormDataOutput(dataObject);\n            return this.form.dataoutput;\n        }\n        return dataObject;\n    }\n\n    setPrimaryKey(fieldName) {\n        /*Store the primary key of data*/\n        this.form.primaryKey = this.form.primaryKey || [];\n        if (this.form.primaryKey.indexOf(fieldName) === -1) {\n            this.form.primaryKey.push(fieldName);\n        }\n    }\n\n    findOperationType() {\n        let operation;\n        let isPrimary = false;\n        const sourceOperation = this.form.datasource && this.form.datasource.execute(DataSource.Operation.GET_OPERATION_TYPE);\n        if (sourceOperation && sourceOperation !== 'read') {\n            return sourceOperation;\n        }\n        /*If OperationType is not set then based on the formdata object return the operation type,\n            this case occurs only if the form is outside a livegrid*/\n        /*If the formdata object has primary key value then return update else insert*/\n        if (this.form.primaryKey && !_.isEmpty(this.form.formdata)) {\n            /*If only one column is primary key*/\n            if (this.form.primaryKey.length === 1) {\n                if (this.form.formdata[this.form.primaryKey[0]]) {\n                    operation = Live_Operations.UPDATE;\n                }\n                /*If only no column is primary key*/\n            } else if (this.form.primaryKey.length === 0) {\n                _.forEach(this.form.formdata, (value) => {\n                    if (value) {\n                        isPrimary = true;\n                    }\n                });\n                if (isPrimary) {\n                    operation = Live_Operations.UPDATE;\n                }\n                /*If multiple columns are primary key*/\n            } else {\n                isPrimary = _.some(this.form.primaryKey, (primaryKey) => {\n                    if (this.form.formdata[primaryKey]) {\n                        return true;\n                    }\n                });\n                if (isPrimary) {\n                    operation = Live_Operations.UPDATE;\n                }\n            }\n        }\n        return operation || Live_Operations.INSERT;\n    }\n\n    getPrevDataValues() {\n        const prevDataValues = _.fromPairs(_.map(this.form.prevDataValues, (item) => {\n            return [item.key, item.value];\n        })); // Convert of array of values to an object\n        this.form.formFields.forEach(field => {\n            field.value = prevDataValues[field.key] || '';\n            field.resetDisplayInput();\n        });\n        return prevDataValues;\n    }\n\n    savePrevDataValues() {\n        this.form.prevDataValues = this.form.formFields.map((obj) => {\n            return {'key': obj.key, 'value': obj.value};\n        });\n    }\n\n    emptyDataModel() {\n        this.form.formFields.forEach(field => {\n            if (isDefined(field)) {\n                if (field.type === DataType.BLOB) {\n                    this.resetFileUploadWidget(field);\n                } else {\n                    field.datavalue = '';\n                }\n            }\n        });\n    }\n\n    clearData() {\n        this.form.toggleMessage(false);\n        this.emptyDataModel();\n    }\n\n    setReadonlyFields() {\n        this.form.formFields.forEach(field => {\n            field.setReadOnlyState();\n        });\n    }\n\n    edit() {\n        this.form.resetFormState();\n        this.form.clearMessage();\n\n        this.form.operationType = Live_Operations.UPDATE;\n\n        if (this.form.isSelected) {\n            this.savePrevformFields();\n            this.savePrevDataValues();\n        }\n        this.form.prevDataObject = getClonedObject(this.form.formdata || {});\n\n        this.setReadonlyFields();\n        this.form.isUpdateMode = true;\n\n        $appDigest();\n    }\n\n    reset() {\n        let prevDataValues;\n        this.form.resetFormState();\n        prevDataValues = this.getPrevDataValues();\n        this.form.formFields.forEach(field => {\n            if (field.type === DataType.BLOB) {\n                this.resetFileUploadWidget(field, true);\n                field.href = this.getBlobURL(prevDataValues, field.key, field.value);\n            }\n        });\n        this.form.constructDataObject();\n    }\n\n    closeDialog() {\n        if (this.form.isLayoutDialog) {\n            this.dialogService.close(this.form.dialogId);\n        }\n    }\n\n    cancel() {\n        this.form.clearMessage();\n        this.form.isUpdateMode = false;\n\n        this.form.reset();\n        /*Show the previous selected data*/\n        if (this.form.isSelected) {\n            this.getPrevformFields();\n        }\n        this.form.isUpdateMode = false;\n        this.closeDialog();\n        if (this.form._liveTableParent) {\n            this.form._liveTableParent.onCancel();\n        }\n        $appDigest();\n    }\n\n    new() {\n        this.form.resetFormState();\n        this.form.operationType = Live_Operations.INSERT;\n        this.form.clearMessage();\n        if (this.form.isSelected) {\n            this.savePrevformFields();\n        }\n        this.emptyDataModel();\n        setTimeout(() => {\n            this.setDefaultValues();\n            this.savePrevDataValues();\n            this.form.constructDataObject();\n        });\n        this.form.isUpdateMode = true;\n    }\n\n    delete(callBackFn) {\n        this.form.resetFormState();\n        this.form.operationType = Live_Operations.DELETE;\n        this.form.prevDataObject = getClonedObject(this.form.formdata || {});\n        this.form.save(undefined, undefined, undefined, callBackFn);\n    }\n\n    // Function use to save the form and open new form after save\n    saveAndNew() {\n        this.save(undefined, true, true);\n    }\n    // Function use to save the form and open new form after save\n    saveAndView() {\n        this.save(undefined, false);\n    }\n\n    submitForm($event) {\n        this.save($event);\n    }\n\n    save(event?, updateMode?, newForm?) {\n        if (!this.form.datasource) {\n            return;\n        }\n        let data, prevData, operationType, isValid;\n        const requestData: any = {};\n\n        operationType = this.form.operationType = this.form.operationType || this.findOperationType();\n\n        // Disable the form submit if form is in invalid state.\n        if (this.form.validateFieldsOnSubmit()) {\n            return;\n        }\n\n        data = getClonedObject(this.form.constructDataObject());\n        prevData = this.form.prevformFields ? this.form.constructDataObject(true) : data;\n\n        try {\n            isValid = this.form.invokeEventCallback('beforeservicecall', {$event: event, $operation: this.form.operationType, $data: data, options: requestData});\n            if (isValid === false) {\n                return;\n            }\n            if (isValid && isValid.error) {\n                this.form.toggleMessage(true, isValid.error, 'error');\n                return;\n            }\n        } catch (err) {\n            if (err.message === 'Abort') {\n                return;\n            }\n        }\n\n        // If operation is update, form is not touched and current data and previous data is same, Show no changes detected message\n        if (this.form.operationType === Live_Operations.UPDATE && this.form.ngform && this.form.ngform.pristine &&\n                (this.form.isSelected && _.isEqual(data, prevData))) {\n            this.form.toggleMessage(true, this.form.appLocale.MESSAGE_NO_CHANGES, 'info', '');\n            $appDigest();\n            return;\n        }\n\n        this.form.resetFormState();\n\n        requestData.row = data;\n        requestData.transform = true;\n        requestData.skipNotification = true;\n\n        if (operationType === Live_Operations.UPDATE) {\n            requestData.rowData = this.form.formdata;\n            requestData.prevData = prevData;\n        }\n\n        performDataOperation(this.form.datasource, requestData, {\n            operationType: operationType\n        }).then((response) => {\n            const msg = operationType === Live_Operations.INSERT ? this.form.insertmessage : (operationType === Live_Operations.UPDATE ?\n                this.form.updatemessage : this.form.deletemessage);\n\n            if (operationType === Live_Operations.DELETE) {\n                this.form.onResult(requestData.row, true, event);\n                this.emptyDataModel();\n                this.form.prevDataValues = [];\n                this.form.isSelected = false;\n            } else {\n                this.form.onResult(response, true, event);\n            }\n\n            this.form.toggleMessage(true, msg, 'success');\n            if (this.form._liveTableParent) {\n                // highlight the current updated row\n                this.form._liveTableParent.onResult(operationType, response, newForm, updateMode);\n            } else {\n                /*get updated data without refreshing page*/\n                this.form.datasource.execute(DataSource.Operation.LIST_RECORDS, {\n                    'skipToggleState': true\n                });\n                this.onDataSourceUpdate(response, newForm, updateMode);\n            }\n        }, (error) => {\n            this.form.onResult(error, false, event);\n            this.form.toggleMessage(true, error, 'error');\n            $appDigest();\n        });\n    }\n}\n","import { Directive, Inject, Self } from '@angular/core';\nimport { $appDigest, DataSource, DataType, debounce, FormWidgetType, getClonedObject, isDefined } from '@wm/core';\n\nimport { FormComponent } from '../form.component';\nimport { registerLiveFilterProps } from '../form.props';\nimport { applyFilterOnField, fetchDistinctValues, getDistinctValuesForField, getEmptyMatchMode, getEnableEmptyFilter, getRangeFieldValue, getRangeMatchMode } from '../../../../utils/data-utils';\nimport { isDataSetWidget } from '../../../../utils/widget-utils';\n\ndeclare const _;\n\nconst FILTER_CONSTANTS = {\n    'EMPTY_KEY'   : 'EMPTY_NULL_FILTER'\n};\nconst noop = () => {};\n\n@Directive({\n    selector: '[wmLiveFilter]'\n})\nexport class LiveFilterDirective {\n    static  initializeProps = registerLiveFilterProps();\n    private _options;\n\n    orderBy;\n\n    // debounce the filter function. If multiple filter calls are made at same time, calls will be delayed and last call is fired\n    _filter = debounce(options => {\n        this.filter(options);\n    }, 250);\n\n    constructor(@Self() @Inject(FormComponent) private form) {\n        form.clearFilter = this.clearFilter.bind(this);\n        form.applyFilter = this.applyFilter.bind(this);\n        form.filter = this.filter.bind(this);\n        form.filterOnDefault = this.filterOnDefault.bind(this);\n        form.execute = this.execute.bind(this);\n        form.onFieldDefaultValueChange = this.onFieldDefaultValueChange.bind(this);\n        form.onMaxDefaultValueChange = this.onMaxDefaultValueChange.bind(this);\n        form.onDataSourceChange = this.onDataSourceChange.bind(this);\n        form.onFieldValueChange = this.onFieldValueChange.bind(this);\n        form.submitForm = this.submitForm.bind(this);\n        form.registerFormWidget = this.registerFormWidget.bind(this);\n    }\n\n    execute(operation, options) {\n        if (operation === DataSource.Operation.LIST_RECORDS || operation === DataSource.Operation.DOWNLOAD) {\n            return this.applyFilter(options);\n        }\n        if (operation === DataSource.Operation.GET_OPTIONS) {\n            return this._options || {};\n        }\n        if (operation === DataSource.Operation.GET_PAGING_OPTIONS) {\n            return this.form.pagination;\n        }\n        if (!this.form.datasource) {\n            return {};\n        }\n        if (operation === DataSource.Operation.FETCH_DISTINCT_VALUES) {\n            return fetchDistinctValues(this.form.datasource, this.form.formFields, {\n                widget: 'widgettype',\n                enableemptyfilter: this.form.enableemptyfilter,\n                EMPTY_VALUE: this.form.appLocale.LABEL_NO_VALUE\n            });\n        }\n        return this.form.datasource.execute(operation, options);\n    }\n\n    onFieldDefaultValueChange(field, nv) {\n        field.minValue = nv;\n        field.value = nv;\n        this.filterOnDefault();\n    }\n\n    onFieldValueChange(field, nv) {\n        applyFilterOnField(this.form.datasource, field.widget, this.form.formFields, nv, {\n            EMPTY_VALUE: this.form.appLocale.LABEL_NO_VALUE\n        });\n        if (this.form.autoupdate && isDefined(nv)) {\n            this._filter();\n        }\n    }\n\n    onMaxDefaultValueChange() {\n        setTimeout(() => {\n            this.filterOnDefault();\n        });\n    }\n\n    onDataSourceChange() {\n        const dataSource = this.form.datasource;\n\n        if (!dataSource) {\n            return;\n        }\n\n        this.form.formFields.forEach(field => {\n            if (isDataSetWidget(field.widgettype)) {\n                getDistinctValuesForField(dataSource, field.widget, {\n                    widget: 'widgettype',\n                    enableemptyfilter: this.form.enableemptyfilter,\n                    EMPTY_VALUE: this.form.appLocale.LABEL_NO_VALUE\n                });\n                applyFilterOnField(dataSource, field.widget, this.form.formFields, field.value, {\n                    isFirst: true,\n                    EMPTY_VALUE: this.form.appLocale.LABEL_NO_VALUE\n                });\n            }\n        });\n\n        // On load check if default value exists and apply filter, Call the filter with the result options\n        this._filter(this._options);\n    }\n\n    clearFilter() {\n        this.form.resetFormState();\n        this.form.formFields.forEach(filterField => {\n            // Added check for range field\n            if (!filterField.readonly && filterField.show) {\n                if (filterField.widgettype === FormWidgetType.AUTOCOMPLETE || filterField.widgettype === FormWidgetType.TYPEAHEAD) {\n                    this.form.$element.find('div[name=' + filterField.name + '] input').val('');\n                }\n                if (filterField['is-range']) {\n                    filterField.minValue = '';\n                    filterField.maxValue = '';\n                } else {\n                    filterField.value = '';\n                    filterField.resetDisplayInput();\n                }\n            }\n        });\n        // If variable has any bindings, wait for the bindings to be updated\n        setTimeout(() => {\n            // Setting result to the default data\n            this._filter();\n        });\n    }\n\n    submitForm() {\n        this.filter();\n    }\n\n    applyFilter(options) {\n        options = options ? (options.data || options) : {};\n        options.page = options.page || 1;\n        options.orderBy = isDefined(options.orderBy) ?  options.orderBy : this.orderBy;\n        return this.filter(options);\n    }\n\n    filter(options?) {\n        if (!this.form.datasource) {\n            return;\n        }\n        const filterFields = {};\n        const dataModel = {};\n        let page = 1,\n            orderBy,\n            isValid;\n        options = options || {};\n        page = options.page || page;\n        orderBy = isDefined(options.orderBy) ? options.orderBy : (this.orderBy || '');\n        this.orderBy = orderBy; // Store the order by in scope. This can be used to retain the sort after filtering\n        // Copy the values to be sent to the user as '$data' before servicecall\n        this.form.formFields.forEach(field => {\n            const fieldSelector = 'div[name=' + field.name + '] input';\n            const $el = this.form.$element;\n            let fieldEle;\n            if ((field.widgettype === FormWidgetType.AUTOCOMPLETE || field.widgettype === FormWidgetType.TYPEAHEAD) && $el) {\n                fieldEle = $el.find(fieldSelector);\n                if (!field['is-range']) {\n                    dataModel[field.field] = {\n                        'value': isDefined(field.value) ? field.value : fieldEle.val() // For autocomplete, set the datavalue. If not present, set query value\n                    };\n                } else {\n                    dataModel[field.field] = {\n                        'minValue':  isDefined(field.minValue) ? field.minValue : fieldEle.first().val(),\n                        'maxValue':  isDefined(field.maxValue) ? field.maxValue : fieldEle.last().val()\n                    };\n                }\n                return;\n            }\n            if (!field['is-range']) {\n                dataModel[field.field] = {\n                    'value': field.value\n                };\n            } else {\n                dataModel[field.field] = {\n                    'minValue': field.minValue,\n                    'maxValue': field.maxValue\n                };\n            }\n        });\n        /*Perform this function for the event onBeforeservicecall*/\n        try {\n            isValid = this.form.invokeEventCallback('beforeservicecall', {$data: dataModel});\n            if (isValid === false) {\n                return;\n            }\n            if (isValid && isValid.error) {\n                this.form.toggleMessage(true, isValid.error, 'error', 'ERROR');\n                return;\n            }\n            /*Update these values in the formFields with new reference, inorder to maintain the UI values*/\n            this.form.formFields.forEach(filterField => {\n                if (!filterField['is-range']) {\n                    filterField._value = dataModel[filterField.field].value;\n                } else {\n                    filterField._minValue = dataModel[filterField.field].minValue;\n                    filterField._maxValue = dataModel[filterField.field].maxValue;\n                }\n            });\n        } catch (err) {\n            if (err.message === 'Abort') {\n                return;\n            }\n        }\n        /* Construct the formFields Variable to send it to the queryBuilder */\n        this.form.formFields.forEach(filterField => {\n            let fieldValue;\n            let matchMode;\n            let colName  = filterField.field;\n            const minValue = filterField._minValue;\n            const maxvalue = filterField._maxValue;\n            /* if field is part of a related entity, column name will be 'entity.fieldName' */\n            if (filterField['is-related']) {\n                colName += '.' + filterField['lookup-field'];\n            }\n            if (filterField['is-range']) {\n                /*Based on the min and max values, decide the matchmode condition*/\n                fieldValue = getRangeFieldValue(minValue, maxvalue);\n                matchMode  = getRangeMatchMode(minValue, maxvalue);\n                if (isDefined(fieldValue)) {\n                    filterFields[colName] = {\n                        'value'     : fieldValue,\n                        'matchMode' : matchMode,\n                        'logicalOp' : 'AND'\n                    };\n                }\n            } else {\n                switch (filterField.widgettype) {\n                    case FormWidgetType.SELECT:\n                    case FormWidgetType.RADIOSET:\n                        if (getEnableEmptyFilter(this.form.enableemptyfilter) && filterField._value === FILTER_CONSTANTS.EMPTY_KEY) {\n                            matchMode  = getEmptyMatchMode(this.form.enableemptyfilter);\n                            fieldValue = filterField._value;\n                        } else {\n                            if (filterField.type === DataType.BOOLEAN) {\n                                if (isDefined(filterField._value) && filterField._value !== '') {\n                                    fieldValue = JSON.parse(filterField._value);\n                                }\n                            } else {\n                                fieldValue = filterField._value;\n                            }\n                        }\n                        break;\n                    case FormWidgetType.CHECKBOXSET:\n                    case FormWidgetType.CHIPS:\n                        if (filterField._value && filterField._value.length) {\n                            fieldValue = filterField._value;\n                        }\n                        break;\n                    case FormWidgetType.CHECKBOX:\n                    case FormWidgetType.TOGGLE:\n                        if (isDefined(filterField._value) && filterField._value !== '') {\n                            fieldValue = filterField.type === DataType.BOOLEAN ? JSON.parse(filterField._value) : filterField._value;\n                        }\n                        break;\n                    default:\n                        fieldValue = filterField._value;\n                        break;\n                }\n                if (isDefined(fieldValue) && fieldValue !== '' && fieldValue !== null) {\n                    filterFields[colName] = {};\n                    if (matchMode) {\n                        filterFields[colName].matchMode = matchMode;\n                        fieldValue = undefined;\n                    } else if (filterField.type === DataType.STRING || filterField.isRelated) { // Only for string types and related fields, custom match modes are enabled.\n                        filterFields[colName].matchMode = matchMode || filterField.matchmode ||\n                            this.form.datasource.execute(DataSource.Operation.GET_MATCH_MODE);\n                    }\n                    filterFields[colName].value     = fieldValue;\n                    filterFields[colName].logicalOp = 'AND';\n                    filterFields[colName].type = filterField.type;\n                }\n            }\n        });\n\n        if (options.exportType) {\n            return this.form.datasource.execute(DataSource.Operation.DOWNLOAD, {\n                data: {\n                    matchMode : 'anywhereignorecase',\n                    filterFields : filterFields,\n                    orderBy : orderBy,\n                    exportType : options.exportType,\n                    logicalOp : 'AND',\n                    exportSize : options.exportSize,\n                    fields : options.fields,\n                    fileName: options.fileName\n                }\n            });\n        }\n        return this.form.datasource.execute(DataSource.Operation.LIST_RECORDS, {\n            filterFields : filterFields,\n            orderBy : orderBy,\n            page : page,\n            pagesize : this.form.pagesize || 20,\n            skipDataSetUpdate : true, // dont update the actual variable dataset,\n            inFlightBehavior : 'executeAll'\n        }).then(response => {\n            const data = response.data;\n            this.form.pagination = response.pagination;\n\n            if (data.error) {\n                // disable readonly and show the appropriate error\n                this.form.toggleMessage(true, data.error, 'error', 'ERROR');\n                this.form.onResult(data, false);\n            } else {\n                this._options = {\n                    'page': page,\n                    'orderBy': orderBy\n                };\n                this.form.result = getClonedObject(data);\n                this.form.onResult(data, true);\n            }\n            $appDigest();\n            return this.form.result;\n        }, error => {\n            this.form.toggleMessage(true, error, 'error', 'ERROR');\n            this.form.onResult(error, false);\n            return error;\n        });\n    }\n\n    // Calls the filter function if default values are present\n    filterOnDefault() {\n        /*Check if default value is present for any filter field*/\n        const defaultObj = _.find(this.form.formFields, obj => {\n            return isDefined(obj.value) || isDefined(obj.minValue) || isDefined(obj.maxValue);\n        });\n        /*If default value exists and data is loaded, apply the filter*/\n        if (defaultObj) {\n            this._filter(this._options);\n        }\n    }\n\n    registerFormWidget(widget) {\n        const name = widget.key || widget.name;\n        this.form.filterWidgets[name] = widget;\n    }\n}\n","import { Directive, Injector } from '@angular/core';\n\nimport { IWidgetConfig } from '../../framework/types';\nimport { styler } from '../../framework/styler';\nimport { StylableComponent } from '../base/stylable.component';\nimport { registerProps } from './marquee.props';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\n\nconst DEFAULT_CLS = 'app-marquee app-container';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-marquee',\n    hostClass: DEFAULT_CLS\n};\n\n@Directive({\n    selector: '[wmMarquee]',\n    providers: [\n        provideAsWidgetRef(MarqueeDirective)\n    ]\n})\nexport class MarqueeDirective extends StylableComponent {\n    static initializeProps = registerProps();\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n\n        styler(this.nativeElement, this);\n    }\n}\n","import { PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-marquee',\n        new Map(\n            [\n                ['class', PROP_STRING],\n                ['direction', PROP_STRING],\n                ['name', PROP_STRING],\n                ['scrollamount', PROP_NUMBER],\n                ['scrolldelay', PROP_NUMBER],\n                ['show', {value: true, ...PROP_BOOLEAN}]\n            ]\n        )\n    );\n};\n","import { AfterViewInit, Component, ElementRef, Input } from '@angular/core';\n\nimport { addClass } from '@wm/core';\n\nimport { MenuComponent } from '../menu.component';\n\nconst animationClasses = {\n    scale: {\n        'name': 'wmScaleInLeft',\n        'down,right': 'wmScaleInLeft',\n        'down,left': 'wmScaleInRight',\n        'up,right': 'wmScaleInTopLeft',\n        'up,left': 'wmScaleInTopRight'\n    },\n    fade: {\n        'name': 'fadeIn',\n        'down,right': 'fadeIn',\n        'down,left': 'fadeIn',\n        'up,right': 'fadeIn',\n        'up,left': 'fadeIn'\n    },\n    slide: {\n        'name': 'wmSlideInDown',\n        'down,right': 'wmSlideInDown',\n        'down,left': 'wmSlideInDown',\n        'up,right': 'wmSlideInUp',\n        'up,left': 'wmSlideInUp'\n    }\n};\n\nconst DEFAULT_CLS = 'dropdown-menu';\n\n@Component({\n    selector: 'ul[wmMenuDropdown]',\n    templateUrl: './menu-dropdown.component.html'\n})\nexport class MenuDropdownComponent implements AfterViewInit {\n    private readonly nativeElement;\n\n    @Input() items;\n\n    constructor(elRef: ElementRef, private menuRef: MenuComponent) {\n        this.nativeElement = elRef.nativeElement;\n        addClass(this.nativeElement, DEFAULT_CLS);\n    }\n\n    ngAfterViewInit() {\n        const animateItems = this.menuRef.animateitems;\n        let animationClass = '';\n        if (animateItems) {\n            animationClass = `animated ${(animationClasses[animateItems][this.menuRef.menuposition] || animationClasses[animateItems].name)}`;\n        }\n        addClass(this.nativeElement, `dropdown-menu ${this.menuRef.menualign} ${animationClass}`, true);\n    }\n}\n","import { Component, ElementRef, HostListener, Input, OnInit, Optional } from '@angular/core';\n\nimport { $parseEvent, addClass, getRouteNameFromLink, getUrlParams, openLink, UserDefinedExecutionContext } from '@wm/core';\n\nimport { KEYBOARD_MOVEMENTS, MENU_POSITION, MenuComponent } from '../menu.component';\nimport { isActiveNavItem } from '../../../../utils/widget-utils';\nimport { NavComponent } from '../../nav/nav.component';\n\ndeclare const _, $;\n\nconst menuAlignClass = {\n    'pull-right' : 'fa-caret-left',\n    'dropinline-menu' : 'fa-caret-down',\n    'pull-left' : 'fa-caret-right'\n};\n\nconst MENU_LAYOUT_TYPE = {\n    HORIZONTAL: 'horizontal',\n    VERTICAL: 'vertical'\n};\n\n@Component({\n    selector: 'li[wmMenuDropdownItem]',\n    templateUrl: './menu-dropdown-item.component.html',\n})\nexport class MenuDropdownItemComponent implements OnInit {\n\n    public menualign: string;\n\n    private itemActionFn: Function;\n\n    @Input() item;\n\n    private readonly nativeElement;\n\n    constructor(\n        public menuRef: MenuComponent,\n        private userDefinedExecutionContext: UserDefinedExecutionContext,\n        @Optional() private parentNav: NavComponent,\n        elRef: ElementRef,\n    ) {\n        this.nativeElement = elRef.nativeElement;\n        addClass(this.nativeElement, 'app-menu-item');\n\n        this.menualign = menuAlignClass[this.menuRef.menualign] || menuAlignClass['pull-left'];\n    }\n\n    ngOnInit() {\n        // add active class to the item only if it is in nav component.\n        if (this.parentNav) {\n            if (isActiveNavItem(this.item.link, this.menuRef.route.url)) {\n                // add active class to the li, if the menu item's link is same as the current page name.\n                addClass(this.nativeElement, 'active');\n            }\n        }\n    }\n\n    getInitialKeyMovements() {\n        const KEY_MOVEMENTS = _.clone(KEYBOARD_MOVEMENTS);\n        if (this.menuRef.menulayout === MENU_LAYOUT_TYPE.HORIZONTAL) {\n            KEY_MOVEMENTS.MOVE_UP = 'LEFT-ARROW';\n            KEY_MOVEMENTS.MOVE_LEFT = 'UP-ARROW';\n            KEY_MOVEMENTS.MOVE_RIGHT = 'DOWN-ARROW';\n            KEY_MOVEMENTS.MOVE_DOWN = 'RIGHT-ARROW';\n        } else {\n            if (this.menuRef.menuposition === MENU_POSITION.DOWN_LEFT || this.menuRef.menuposition === MENU_POSITION.UP_LEFT) {\n                KEY_MOVEMENTS.MOVE_LEFT = 'RIGHT-ARROW';\n                KEY_MOVEMENTS.MOVE_RIGHT = 'LEFT-ARROW';\n            } else if (this.menuRef.menuposition === 'inline') {\n                KEY_MOVEMENTS.MOVE_UP = 'LEFT-ARROW';\n                KEY_MOVEMENTS.MOVE_LEFT = 'UP-ARROW';\n                KEY_MOVEMENTS.MOVE_RIGHT = 'DOWN-ARROW';\n                KEY_MOVEMENTS.MOVE_DOWN = 'RIGHT-ARROW';\n            }\n        }\n        return KEY_MOVEMENTS;\n    }\n\n    @HostListener('keydown.tab', ['$event', '\"TAB\"'])\n    @HostListener('keydown.escape', ['$event', '\"ESC\"'])\n    @HostListener('keydown.enter', ['$event', '\"ENTER\"'])\n    @HostListener('keydown.arrowup', ['$event', '\"UP-ARROW\"'])\n    @HostListener('keydown.arrowdown', ['$event', '\"DOWN-ARROW\"'])\n    @HostListener('keydown.arrowright', ['$event', '\"RIGHT-ARROW\"'])\n    @HostListener('keydown.arrowleft', ['$event', '\"LEFT-ARROW\"'])\n    onKeyDown($event, eventAction) {\n        const $li = $(this.nativeElement);\n        const $ul = $(this.nativeElement).closest('ul.dropdown-menu');\n        const $parentUl = this.menuRef.$element.find('> ul.dropdown-menu');\n        const ARROW_KEYS = ['LEFT-ARROW', 'RIGHT-ARROW', 'UP-ARROW', 'DOWN-ARROW'];\n        const KEY_MOVEMENTS = this.getInitialKeyMovements();\n\n        if (_.includes(ARROW_KEYS, eventAction)) {\n            // preventing from page scroll when up/down arrow is pressed, in case of menu is opened.\n            $event.preventDefault();\n        }\n\n        if ((eventAction === KEY_MOVEMENTS.ON_TAB && $parentUl.children().last()[0] === this.nativeElement) || eventAction === KEY_MOVEMENTS.ON_ESCAPE) {\n            /*closing all the children elements when\n            * 1. Tab is clicked on the last $element\n            * 2. When Escape key is clicked*/\n            $event.preventDefault();\n            this.menuRef.bsDropdown.hide();\n        } else if ((eventAction === KEY_MOVEMENTS.ON_ENTER && !this.item.link) || eventAction === KEY_MOVEMENTS.MOVE_RIGHT) {\n            // when there is no link for the menu, on enter open the inner child elements and focus the first $element\n            $event.stopPropagation();\n            if (this.item.children.length) {\n                $li.toggleClass('open');\n                $li.find('li:first > a').focus();\n            } else {\n                $li.find('> a').focus();\n            }\n        } else if (eventAction === KEY_MOVEMENTS.MOVE_LEFT || (eventAction === KEY_MOVEMENTS.ON_TAB && $ul.children().last()[0] === this.nativeElement)) {\n            if ($parentUl[0] !== $ul[0]) {\n                const $parentItem = $ul.parent();\n                $parentItem.toggleClass('open').find('li.open').removeClass('open');\n                $parentItem.find('> a').focus();\n                $event.preventDefault();\n                $event.stopPropagation();\n            }\n        } else if (eventAction === KEY_MOVEMENTS.MOVE_UP) {\n            if ($parentUl[0] !== $ul[0] || $parentUl.find('> li:first')[0] !== this.nativeElement) {\n                $event.stopPropagation();\n                $li.prev().find('> a').focus();\n            }\n        } else if (eventAction === KEY_MOVEMENTS.MOVE_DOWN) {\n            $event.stopPropagation();\n            if ($parentUl.find('> li:last')[0] === this.nativeElement && (this.menuRef.menulayout !== MENU_LAYOUT_TYPE.HORIZONTAL && this.menuRef.menuposition === MENU_POSITION.UP_RIGHT || this.menuRef.menuposition === MENU_POSITION.UP_LEFT)) {\n                this.menuRef.bsDropdown.hide();\n            } else {\n                $li.next().find('> a').focus();\n            }\n        } else if (eventAction === KEY_MOVEMENTS.ON_ENTER) {\n            this.onSelect($event, this.item);\n        } else {\n            $event.stopPropagation();\n        }\n    }\n\n    @HostListener('click', ['$event', 'item'])\n    onSelect = ($event, item) => {\n        if (this.nativeElement !== $($event.target).closest('.app-menu-item').get(0)) {\n            return;\n        }\n        // prevent event event propagation if auto close is outside click.\n        if (this.menuRef.autoclose === 'outsideClick') {\n            $event.stopPropagation();\n        }\n\n        $event.preventDefault();\n        const args = {$event, $item: item};\n        const linkTarget = item.target || this.menuRef.linktarget;\n        const itemAction = item.action;\n\n        let menuLink = item.link;\n\n        this.menuRef.onMenuItemSelect(args);\n\n        if (itemAction) {\n            if (!this.itemActionFn) {\n                this.itemActionFn = $parseEvent(itemAction);\n            }\n\n            this.itemActionFn(this.userDefinedExecutionContext, Object.create(item));\n        }\n        if (menuLink) {\n            if (menuLink.startsWith('#/') && (!linkTarget || linkTarget === '_self')) {\n                const queryParams = getUrlParams(menuLink);\n                menuLink = getRouteNameFromLink(menuLink);\n                this.menuRef.route.navigate([menuLink], { queryParams});\n            } else {\n                openLink(menuLink, linkTarget);\n            }\n        }\n    }\n}\n","import { AfterViewInit, Component, ElementRef, Injector, ViewChild } from '@angular/core';\n\nimport { APPLY_STYLES_TYPE, styler } from '../../framework/styler';\nimport { StylableComponent } from '../base/stylable.component';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\nimport { registerProps } from './navbar.props';\n\nconst DEFAULT_CLS = 'navbar navbar-default app-navbar';\nconst WIDGET_CONFIG = {widgetType: 'wm-navbar', hostClass: DEFAULT_CLS};\n\ndeclare const $;\n\n@Component({\n    selector: '[wmNavbar]',\n    templateUrl: './navbar.component.html',\n    providers: [\n        provideAsWidgetRef(NavbarComponent)\n    ]\n})\nexport class NavbarComponent extends StylableComponent implements AfterViewInit {\n    static initializeProps = registerProps();\n\n    public menuiconclass: any;\n    public title: string;\n    public imgsrc: string;\n    @ViewChild('navContent') private navContent: ElementRef;\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n        styler(this.nativeElement, this, APPLY_STYLES_TYPE.CONTAINER);\n    }\n\n    public toggleCollapse() {\n        const $navContent = $(this.navContent.nativeElement);\n        $navContent.animate({ 'height': 'toggle'});\n        if ($navContent.hasClass('in')) {\n            setTimeout(() => this.toggleNavCollapse(), 500);\n        } else {\n            this.toggleNavCollapse();\n        }\n    }\n\n    private toggleNavCollapse() {\n        this.navContent.nativeElement.classList.toggle('in');\n    }\n}\n","import { PROP_BOOLEAN, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-navbar',\n        new Map(\n            [\n                ['class', {value: '', ...PROP_STRING}],\n                ['homelink', PROP_STRING],\n                ['imgsrc', PROP_STRING],\n                ['menuiconclass', {value: 'wi wi-more-vert', ...PROP_STRING}],\n                ['name', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n                ['title', PROP_STRING]\n            ]\n        )\n    );\n};\n","import { NgModel } from '@angular/forms';\nimport { Component, ElementRef, Injector, ViewChild } from '@angular/core';\nimport { DecimalPipe } from '@angular/common';\n\nimport { AbstractI18nService } from '@wm/core';\n\nimport { registerProps } from './number.props';\nimport { IWidgetConfig } from '../../framework/types';\nimport { provideAsNgValidators, provideAsNgValueAccessor, provideAsWidgetRef } from '../../../utils/widget-utils';\nimport { NumberLocale } from '../text/locale/number-locale';\n\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-number',\n    hostClass: 'app-input-wrapper'\n};\n\n@Component({\n    selector: '[wmNumber]',\n    templateUrl: './number.component.html',\n    providers: [\n        provideAsNgValueAccessor(NumberComponent),\n        provideAsNgValidators(NumberComponent),\n        provideAsWidgetRef(NumberComponent)\n    ]\n})\nexport class NumberComponent extends NumberLocale {\n    static initializeProps = registerProps();\n\n    public required: boolean;\n    public regexp: string;\n    public disabled: boolean;\n    public name: string;\n    public tabindex: any;\n    public shortcutkey: string;\n    public autofocus: boolean;\n    @ViewChild('input') inputEl: ElementRef;\n    @ViewChild(NgModel) ngModel: NgModel;\n\n    constructor(inj: Injector, i18nService: AbstractI18nService, decimalPipe: DecimalPipe) {\n        super(inj, WIDGET_CONFIG, i18nService, decimalPipe);\n    }\n}\n","import { SwipeAnimation } from '@swipey';\n\nimport { App, isIos, setCSS } from '@wm/core';\n\ndeclare const $;\n\nexport class PullToRefresh extends SwipeAnimation {\n    private infoContainer: JQuery<HTMLElement>;\n    private runAnimation: boolean;\n    private count = 0;\n    private spinner: Spinner;\n    public cancelSubscription: Function;\n    private animationInProgress: boolean;\n\n    constructor(private $el: JQuery<HTMLElement>, private app: App, private onPullToRefresh: () => void) {\n        super();\n        const template = '<div class=\"refresh-container\"></div>';\n        this.$el.prepend(template);\n        this.infoContainer = this.$el.find('.refresh-container');\n\n        if (isIos()) {\n            this.infoContainer.addClass('ios-refresh-container');\n        }\n\n        this.init(this.$el);\n    }\n\n    public threshold() {\n        return 10;\n    }\n\n    public direction() {\n        return $.fn.swipey.DIRECTIONS.VERTICAL;\n    }\n\n    private subscribe() {\n        // Subscribing for variable updates, wait till the response and stop the animation.\n        this.cancelSubscription = this.app.subscribe('toggle-variable-state', (data) => {\n            // data.active is true means the variable update has just started whereas false means update has ended.\n            if (data.active && this.animationInProgress) {\n                this.count++;\n                this.wait();\n            } else if (this.count > 0) {\n                this.count--;\n            }\n            // call stop animation only when animation has started.\n            if (!this.count && this.animationInProgress) {\n                this.stopAnimation();\n            }\n        });\n    }\n\n    public bounds($event, $d) {\n        const pageIscroll = (this.$el[0] as any).iscroll;\n        // If scroll position is not at the top of the page then do not trigger the animation.\n        if ($d < 0 || (pageIscroll && !isNaN(pageIscroll.y) && pageIscroll.y !== 0)) {\n            return {\n                lower: undefined,\n                upper: undefined\n            };\n        }\n        if (!this.spinner) {\n            this.spinner = isIos() ? new IOSSpinner(this.infoContainer) : new AndroidSpinner(this.infoContainer);\n            this.subscribe();\n        }\n\n        return {\n            lower: 0,\n            center: 0,\n            upper: isIos() ? 0 : 150,\n            strict: !isIos()\n        };\n    }\n\n    public context(): Object {\n        this.infoContainer.show();\n        if (isIos()) {\n            this.infoContainer.addClass('entry');\n        }\n        return {\n            spin: $d => {\n                this.spinner.setRotation($d * 2);\n            }\n        };\n    }\n\n    public animation() {\n        if (isIos()) {\n            return {\n                css: {\n                    transform: 'translate3d(0, ${{$D + $d}}px, 0)',\n                    spin: '${{spin($d)}}'\n                }\n            };\n        }\n        return {\n            target: this.infoContainer,\n            css: {\n                transform: 'translate3d(0, ${{$D + $d}}px, 0)',\n                spin: '${{spin($d)}}',\n                opacity: '${{min(($D + $d) / 100, 1)}}'\n            }\n        };\n    }\n\n    // Start the spinner animation and invokes the pulltorefresh event. Stops the animation after the wait time.\n    public onAnimation() {\n        this.animationInProgress = true;\n        this.spinner.start();\n        if (this.onPullToRefresh) {\n            this.onPullToRefresh();\n        }\n\n        setTimeout(() => {\n            // if listenToAnimation is set, then wait for stopAnimation to be invoked. Otherwise call stopAnimation manually.\n            if (this.runAnimation) {\n                return;\n            }\n            this.stopAnimation();\n        });\n    }\n\n    public stopAnimation() {\n        setTimeout(() => {\n            this.runAnimation = false;\n            this.animationInProgress = false;\n            this.spinner.stop();\n            this.infoContainer.hide();\n            setCSS(this.infoContainer[0], 'transform', 'none');\n            if (!isIos()) {\n                setCSS(this.infoContainer[0], 'opacity', 0);\n            }\n            this.infoContainer.removeClass('entry');\n        }, 800);\n    }\n\n    public wait() {\n        this.runAnimation = true;\n    }\n}\n\n// Interface for Spinner\ninterface Spinner {\n    start();\n    stop();\n    setRotation(d: number);\n}\n\n// Android Spinner implementation\nclass AndroidSpinner implements Spinner {\n    private options: Object;\n    private initialized: any;\n    private cx: number;\n    private cy: number;\n    private r: number;\n    private path: any;\n    private intervalId;\n    private container: any;\n\n    constructor(private $el: JQuery<HTMLElement>, options?: any) {\n        this.options = options || {};\n    }\n\n\n    private polarToCartesian(centerX: number, centerY: number, radius: number, angleInDegrees: number): any {\n        const angleInRadians = (angleInDegrees - 90) * Math.PI / 180.0;\n        return {\n            x: centerX + (radius * Math.cos(angleInRadians)),\n            y: centerY + (radius * Math.sin(angleInRadians))\n        };\n    }\n\n    private describeArc(x: number, y: number, radius: number, startAngle: number, endAngle: number): string {\n\n        const start = this.polarToCartesian(x, y, radius, endAngle);\n        const end = this.polarToCartesian(x, y, radius, startAngle);\n\n        const arcSweep = endAngle - startAngle <= 180 ? '0' : '1';\n\n        return [\n            'M', start.x, start.y,\n            'A', radius, radius, 0, arcSweep, 0, end.x, end.y,\n            'L', end.x, end.y\n        ].join(' ');\n    }\n\n    public init(): void {\n        if (this.initialized) {\n            return;\n        }\n        // append the svg to the element on which spinner has to be shown.\n        const androidTemplate = $('<svg><path id=\"arc1\"/></svg>');\n        const container = $('<div class=\"android-spinner\"></div>');\n        container.append(androidTemplate);\n        this.$el.append(container);\n        this.cx = container.outerWidth() / 2;\n        this.cy = container.outerHeight() / 2;\n        this.r = this.cx * 0.6;\n        this.path = container.find('path');\n        this.initialized = true;\n        this.container = container;\n    }\n\n    // sets rotation to the path\n    public setRotation(deg) {\n        this.init();\n        this.path.attr('d', this.describeArc(this.cx, this.cy, this.r, 0, deg));\n    }\n\n    // animate the path to rotate continuously with some interval\n    public start() {\n        this.init();\n        const self = this,\n            totalTime = (this.options as any).time || 1800,\n            degreesToTraverse = 10;\n        let i = 0;\n        this.container.addClass('spin');\n        this.intervalId = setInterval(() => {\n            let deg;\n            i = i + degreesToTraverse;\n            if (i > 720) {\n                deg = i = 0;\n            } else if (i > 360) {\n                deg = 720 - i;\n            } else {\n                deg = i;\n            }\n            self.path.attr('d', this.describeArc(self.cx, self.cy, self.r, 0, deg));\n        }, (totalTime * degreesToTraverse / 360));\n    }\n\n    // Removes the animation by clearing the intervals\n    public stop() {\n        if (this.intervalId) {\n            clearInterval(this.intervalId);\n            this.intervalId = 0;\n        }\n        this.container.removeClass('spin');\n    }\n}\n\n// iOS spinner implementation\nclass IOSSpinner implements Spinner {\n    private svg: any;\n    private intervalId: any;\n\n    constructor(private $el) {}\n\n    // create the iOS spinner using svg\n    private init() {\n        if (this.svg) {\n            return;\n        }\n        const container = $('<div class=\"ios-spinner\"><svg></svg></div>');\n        const svg = container.find('svg');\n        this.$el.append(container);\n        const d = container.width();\n        for (let i = 0; i < 12; i++) {\n            svg[0].innerHTML += `<line y1=\"${0.15 * d}\" y2=\"${0.3 * d}\"\n                                    transform=\"translate(${0.5 * d}, ${0.5 * d}) rotate(${i * 30})\">\n                                </line>`;\n        }\n        container.append(svg);\n        this.svg = svg;\n    }\n\n    // Sets the svg to rotate depending on \"d\" value\n    public setRotation(d: number): void {\n        this.init();\n        this.svg.css('transform', `rotateZ( ${Math.round(d / 30) * 30}deg)`);\n    }\n\n    // Triggers the rotation with some interval\n    public start() {\n        this.init();\n        let i = 0;\n        this.intervalId = setInterval(() => {\n            i += 10;\n            this.setRotation(i);\n        }, 20);\n    }\n\n    // Removes the animation by clearing the intervals\n    public stop() {\n        if (this.intervalId) {\n            clearInterval(this.intervalId);\n            this.intervalId = 0;\n        }\n    }\n}\n","import { Component, Injector } from '@angular/core';\n\nimport { App, switchClass } from '@wm/core';\n\nimport { APPLY_STYLES_TYPE, styler } from '../../framework/styler';\nimport { registerProps } from './page-content.props';\nimport { StylableComponent } from '../base/stylable.component';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\nimport { PullToRefresh } from '../pull-to-refresh/pull-to-refresh';\n\nconst DEFAULT_CLS = 'app-page-content app-content-column';\nconst WIDGET_CONFIG = {widgetType: 'wm-page-content', hostClass: DEFAULT_CLS};\n\n@Component({\n    selector: '[wmPageContent]',\n    templateUrl: './page-content.component.html',\n    providers: [\n        provideAsWidgetRef(PageContentComponent)\n    ]\n})\nexport class PageContentComponent extends StylableComponent {\n    static initializeProps = registerProps();\n\n    public pullToRefreshIns: PullToRefresh;\n    private pulltorefresh: boolean;\n    private childPullToRefresh: boolean;\n\n    constructor(inj: Injector, private app: App) {\n        super(inj, WIDGET_CONFIG);\n\n        styler(this.nativeElement, this, APPLY_STYLES_TYPE.CONTAINER);\n\n        this.registerDestroyListener(this.app.subscribe('pullToRefresh:enable', () => {\n            this.childPullToRefresh = true;\n            this.initPullToRefresh();\n        }));\n    }\n\n    onPropertyChange(key: string, nv: any, ov?: any) {\n        if (key === 'columnwidth') {\n            switchClass(this.nativeElement, `col-md-${nv} col-sm-${nv}`, `col-md-${ov} col-sm-${ov}`);\n        } else if (key === 'pulltorefresh' && nv) {\n            // creating instance after timeout as the smoothscroll styles where getting added on pull refresh-container\n            setTimeout(() => {\n                this.initPullToRefresh();\n            });\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n\n    // when list component is ready, pulltorefresh instance is created and this appends pullToRefresh element on the page content.\n    private initPullToRefresh() {\n        const hasPullToRefreshEvent = this.hasEventCallback('pulltorefresh');\n        if (!this.pullToRefreshIns && (this.childPullToRefresh || hasPullToRefreshEvent) && this.pulltorefresh) {\n            this.pullToRefreshIns = new PullToRefresh($(this.nativeElement), this.app, () => {\n                if (hasPullToRefreshEvent) {\n                    this.invokeEventCallback('pulltorefresh');\n                } else {\n                    this.app.notify('pulltorefresh');\n                }\n            });\n            this.registerDestroyListener(() => {\n                if (this.pullToRefreshIns.cancelSubscription) {\n                    this.pullToRefreshIns.cancelSubscription();\n                }\n            });\n        }\n    }\n}\n","import { isMobileApp } from '@wm/core';\n\nimport { PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-page-content',\n        new Map(\n            [\n                ['class', PROP_STRING],\n                ['columnwidth', PROP_NUMBER],\n                ['content', PROP_STRING],\n                ['name', PROP_STRING],\n                ['pulltorefresh', {value: isMobileApp(), ...PROP_BOOLEAN}]\n            ]\n        )\n    );\n};\n","import { AfterContentInit, Component, ContentChildren, ElementRef, Injector, OnInit, ViewChild } from '@angular/core';\n\nimport { $appDigest, noop, removeAttr, setCSS, toggleClass } from '@wm/core';\n\nimport { APPLY_STYLES_TYPE, styler } from '../../framework/styler';\nimport { IWidgetConfig } from '../../framework/types';\nimport { registerProps } from './panel.props';\nimport { RedrawableDirective } from '../redraw/redrawable.directive';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\nimport { MenuAdapterComponent } from '../base/menu-adapator.component';\n\nconst DEFAULT_CLS = 'app-panel panel';\nconst WIDGET_CONFIG: IWidgetConfig = {widgetType: 'wm-panel', hostClass: DEFAULT_CLS};\n\n@Component({\n    selector: '[wmPanel]',\n    templateUrl: './panel.component.html',\n    providers: [\n        provideAsWidgetRef(PanelComponent)\n    ]\n})\n\nexport class PanelComponent extends MenuAdapterComponent implements OnInit, AfterContentInit {\n    static initializeProps = registerProps();\n\n    public $lazyLoad = noop;\n    public iconurl: string;\n    public iconclass: string;\n    public collapsible: boolean;\n    public expanded = true;\n    public enablefullscreen: boolean;\n    public fullscreen: boolean;\n    public title: string;\n    public subheading: string;\n    public actions: any;\n\n    public helpClass = '';\n    public helptext = '';\n    private fullScreenTitle: string;\n    private expandCollapseTitle: string;\n\n    @ViewChild('panelHeading') private panelHeader: ElementRef;\n    @ViewChild('panelContent') private panelContent: ElementRef;\n    @ViewChild('panelBody') private panelBody: ElementRef;\n    @ContentChildren(RedrawableDirective, {descendants: true}) reDrawableComponents;\n\n    private hasFooter: boolean;\n\n    // conditions to show the footer\n    public get hideFooter () {\n        return !this.hasFooter || !this.expanded;\n    }\n\n    // conditions to show header\n    public get showHeader() {\n        return this.iconurl || this.iconclass || this.collapsible || this.actions || this.title || this.subheading || this.enablefullscreen;\n    }\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n\n        styler(this.nativeElement, this, APPLY_STYLES_TYPE.SHELL);\n\n        this.fullScreenTitle = `${this.appLocale.LABEL_FULLSCREEN}/${this.appLocale.LABEL_EXITFULLSCREEN}`;\n        this.expandCollapseTitle = `${this.appLocale.LABEL_COLLAPSE}/${this.appLocale.LABEL_EXPAND}`;\n        removeAttr(this.nativeElement, 'title');\n    }\n\n    // toggle the panel state between collapsed - expanded. invoke the respective callbacks\n    public toggle($event) {\n        if (this.collapsible) {\n            this.invokeEventCallback(this.expanded ? 'collapse' : 'expand', {$event});\n            this.expanded = !this.expanded;\n            if (this.expanded) {\n                this.$lazyLoad();\n                this.reDrawChildren();\n            }\n        }\n    }\n\n    public expand($event) {\n        if (!this.expanded) {\n            this.toggle($event);\n        }\n    }\n\n    public collapse($event) {\n        if (this.expanded) {\n            this.toggle($event);\n        }\n    }\n\n    // toggle the fullscreen state of the panel. invoke the respective callbacks\n    protected toggleFullScreen($event) {\n        if (this.enablefullscreen) {\n            this.invokeEventCallback(this.fullscreen ? 'exitfullscreen' : 'fullscreen', {$event});\n            this.fullscreen = !this.fullscreen;\n            toggleClass(this.nativeElement, 'fullscreen', this.fullscreen);\n            // Re-plot the widgets inside panel\n            this.reDrawChildren();\n        }\n        this.computeDimensions();\n    }\n\n    // show/hide help\n    protected toggleHelp() {\n        this.helpClass = this.helpClass ? '' : 'show-help';\n        toggleClass(this.nativeElement, 'show-help', !!this.helpClass);\n        $appDigest();\n    }\n\n    // hide the panel and invoke the respective event handler\n    protected close($event) {\n        this.getWidget().show = false;\n        this.invokeEventCallback('close', {$event});\n    }\n\n    // calculation of dimensions when the panel the panel state changes from/to fullscreen\n    private computeDimensions() {\n        const headerHeight = this.panelHeader.nativeElement.offsetHeight;\n        const footer = this.nativeElement.querySelector('.panel-footer') as HTMLElement;\n        const content = this.panelContent.nativeElement;\n        const vHeight = window.innerHeight;\n\n        let inlineHeight;\n\n        if (this.fullscreen) {\n            inlineHeight = this.hideFooter ?  (vHeight - headerHeight) : vHeight - (footer.offsetHeight + headerHeight);\n        } else {\n            inlineHeight = this.height || '';\n        }\n\n        setCSS(content, 'height', inlineHeight);\n    }\n\n    // notify the redrawable components(charts, grid)\n    private reDrawChildren() {\n        setTimeout(() => {\n            if (this.reDrawableComponents) {\n                this.reDrawableComponents.forEach(c => c.redraw());\n            }\n        }, 100);\n    }\n\n    onPropertyChange(key: string, nv: any, ov?: any) {\n        if (key === 'expanded') {\n            this.expanded = nv;\n        } else if (key === 'content') {\n            setTimeout(() => {\n                if (this.expanded || !this.collapsible) {\n                    this.$lazyLoad();\n                }\n            }, 20);\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n\n    ngAfterContentInit() {\n        super.ngAfterContentInit();\n        this.hasFooter = !!this.nativeElement.querySelector('[wmPanelFooter]');\n        styler(this.panelBody.nativeElement as HTMLElement, this, APPLY_STYLES_TYPE.INNER_SHELL);\n    }\n}\n","import { PROP_ANY, PROP_BOOLEAN, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-panel',\n        new Map(\n            [\n                ['actions', {}],\n                ['badgetype', {value: 'default', ...PROP_STRING}],\n                ['badgevalue', PROP_STRING],\n                ['class', PROP_STRING],\n                ['closable', PROP_BOOLEAN],\n                ['collapsible', PROP_BOOLEAN],\n                ['conditionalclass', PROP_ANY],\n                ['conditionalstyle', PROP_ANY],\n                ['content', PROP_STRING],\n                ['datafield', PROP_STRING],\n                ['enablefullscreen', PROP_BOOLEAN],\n                ['expanded', {value: true, ...PROP_BOOLEAN}],\n                ['fullscreen', PROP_BOOLEAN],\n                ['helptext', PROP_STRING],\n                ['iconclass', PROP_STRING],\n                ['iconheight', PROP_STRING],\n                ['iconmargin', PROP_STRING],\n                ['iconurl', PROP_STRING],\n                ['iconwidth', PROP_STRING],\n                ['itemaction', PROP_STRING],\n                ['itemchildren', PROP_STRING],\n                ['itemicon', PROP_STRING],\n                ['itemlabel', PROP_STRING],\n                ['itemlink', PROP_STRING],\n                ['name', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n                ['subheading', PROP_STRING],\n                ['title', PROP_STRING],\n                ['userrole', PROP_STRING]\n            ]\n        )\n    );\n};\n","import { Attribute, Component, ContentChild, Injector, OnInit, TemplateRef, ViewChild } from '@angular/core';\n\nimport { toBoolean } from '@wm/core';\n\nimport { registerProps } from './partial-dialog.props';\nimport { BaseDialog } from '../base/base-dialog';\nimport { provideAsDialogRef, provideAsWidgetRef } from '../../../../utils/widget-utils';\n\nconst DIALOG_CLS = 'app-dialog modal-dialog app-page-dialog';\nconst WIDGET_INFO = {widgetType: 'wm-partialdialog'};\n\n@Component({\n    selector: 'div[wmPartialDialog]',\n    templateUrl: './partial-dialog.component.html',\n    providers: [\n        provideAsWidgetRef(PartialDialogComponent),\n        provideAsDialogRef(PartialDialogComponent)\n    ]\n})\nexport class PartialDialogComponent extends BaseDialog implements OnInit {\n    static initializeProps = registerProps();\n    @ViewChild('dialogTemplate') dialogTemplate: TemplateRef<any>;\n    @ContentChild(TemplateRef) dialogContent: TemplateRef<any>;\n\n    constructor(\n        inj: Injector,\n        @Attribute('class') dialogClass: string,\n        @Attribute('modal') modal: string | boolean,\n        @Attribute('closable') closable: string | boolean\n    ) {\n        if (modal === null || modal === undefined) {\n            modal = false;\n        }\n\n        if (closable === null || closable === undefined) {\n            closable = true;\n        }\n\n        // setting the backdrop to 'static' will not close the dialog on backdrop click\n        const backdrop: boolean | 'static' = toBoolean(modal) ? 'static' : true;\n\n        super(\n            inj,\n            WIDGET_INFO,\n            {\n                class: `${DIALOG_CLS} ${dialogClass || ''}`,\n                backdrop,\n                keyboard: !toBoolean(modal)\n            }\n        );\n    }\n\n    protected getTemplateRef(): TemplateRef<any> {\n        return this.dialogTemplate;\n    }\n\n    /**\n     * Click event handler for the ok button\n     * invokes on-ok event callback\n     * @param {Event} $event\n     */\n    onOk($event: Event) {\n        this.invokeEventCallback('ok', {$event});\n    }\n\n    ngOnInit() {\n        super.ngOnInit();\n        this.register(this.viewParent);\n    }\n}\n","import { PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-partialdialog',\n        new Map(\n            [\n                ['animation', PROP_STRING],\n                ['class', PROP_STRING],\n                ['closable', {value: true, PROP_BOOLEAN}],\n                ['content', PROP_STRING],\n                ['iconclass', {value: 'wi wi-file', PROP_STRING}],\n                ['iconheight', PROP_STRING],\n                ['iconmargin', PROP_STRING],\n                ['iconurl', PROP_STRING],\n                ['iconwidth', PROP_STRING],\n                ['modal', {value: false, ...PROP_BOOLEAN}],\n                ['name', PROP_STRING],\n                ['oktext', {value: 'OK', ...PROP_STRING}],\n                ['showactions', {value: true, ...PROP_BOOLEAN}],\n                ['tabindex', {value: 0, ...PROP_NUMBER}],\n                ['title', {value: 'Page Content', ...PROP_STRING}]\n            ]\n        )\n    );\n};\n","import { Directive, Injector } from '@angular/core';\n\nimport { StylableComponent } from '../base/stylable.component';\nimport { registerProps } from './partial.props';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\n\nconst DEFAULT_CLS = 'app-partial clearfix';\nconst WIDGET_CONFIG = {widgetType: 'wm-partial', hostClass: DEFAULT_CLS};\n\n@Directive({\n    selector: '[wmPartial]',\n    providers: [\n        provideAsWidgetRef(PartialDirective)\n    ]\n})\nexport class PartialDirective extends StylableComponent {\n    static initializeProps = registerProps();\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n    }\n}\n","import { PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-partial',\n        new Map(\n            [\n                ['name', PROP_STRING]\n            ]\n        )\n    );\n};\n","import { Attribute, Directive, Inject, Self, Input, OnInit } from '@angular/core';\n\nimport { Subject } from 'rxjs';\n\nimport { $watch } from '@wm/core';\n\nimport { WidgetRef } from '../../../widgets/framework/types';\n\ndeclare const _;\n\n@Directive({\n    selector: '[partialContainer]',\n})\nexport class PartialParamHandlerDirective {\n    constructor (@Self() @Inject(WidgetRef) private widgetRef) {\n        this.widgetRef.partialParams = {};\n        this.widgetRef.pageParams = this.widgetRef.partialParams;\n        this.widgetRef.params$ = new Subject();\n    }\n\n    registerParams(name: string, value: string, bindExpr: string, type: string) {\n        this.widgetRef.partialParams[name] = value;\n        if (!value && bindExpr) {\n            this.widgetRef.registerDestroyListener(\n                $watch(bindExpr, this.widgetRef.getViewParent(), _.get(this.widgetRef, 'context'), nv => {\n                    this.widgetRef.partialParams[name] = nv;\n\n                    // notify the partial container of the param changes\n                    this.widgetRef.params$.next();\n                })\n            );\n        } else {\n            this.widgetRef.params$.next();\n        }\n\n    }\n}\n\n@Directive({\n    selector: '[wmParam]',\n})\nexport class PartialParamDirective implements OnInit {\n\n    @Input() name: string;\n    @Input() value: any;\n\n    constructor(\n        @Attribute('value.bind') public bindValue,\n        @Attribute('type') public type,\n        private partialParamsProvider: PartialParamHandlerDirective\n    ) {\n    }\n\n    ngOnInit() {\n        this.partialParamsProvider.registerParams(this.name, this.value, this.bindValue, this.type);\n    }\n}\n","import { Directive, Injector } from '@angular/core';\n\nimport { StylableComponent } from '../base/stylable.component';\nimport { IWidgetConfig } from '../../framework/types';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\nimport { styler } from '../../framework/styler';\nimport { registerProps } from './prefab-container.props';\n\nconst DEFAULT_CLS = 'app-prefab-container full-height';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-prefab-container',\n    hostClass: DEFAULT_CLS\n};\n\n@Directive({\n    selector: '[wmPrefabContainer]',\n    providers: [\n        provideAsWidgetRef(PrefabContainerDirective)\n    ]\n})\nexport class PrefabContainerDirective extends StylableComponent {\n    static initializeProps = registerProps();\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n        styler(this.nativeElement, this);\n    }\n}\n","import { PROP_BOOLEAN, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-prefab-container',\n        new Map(\n            [\n                ['class', PROP_STRING],\n                ['name', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n            ]\n        )\n    );\n};\n","import { Directive, HostBinding, Injector, OnInit } from '@angular/core';\n\nimport { setAttr, setCSS, switchClass } from '@wm/core';\n\nimport { styler } from '../../framework/styler';\nimport { IWidgetConfig } from '../../framework/types';\nimport { registerProps } from './picture.props';\nimport { StylableComponent } from '../base/stylable.component';\nimport { DISPLAY_TYPE } from '../../framework/constants';\nimport { ImagePipe } from '../../../pipes/image.pipe';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\n\nconst DEFAULT_CLS = 'app-picture';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-picture',\n    hostClass: DEFAULT_CLS,\n    displayType: DISPLAY_TYPE.INLINE_BLOCK\n};\n\n@Directive({\n    selector: 'img[wmPicture]',\n    providers: [\n        provideAsWidgetRef(PictureDirective)\n    ]\n})\nexport class PictureDirective extends StylableComponent implements OnInit {\n    static initializeProps = registerProps();\n\n    encodeurl;\n    picturesource;\n    pictureplaceholder;\n\n    @HostBinding('src') imgSource: string;\n\n    constructor(inj: Injector, private imagePipe: ImagePipe) {\n        super(inj, WIDGET_CONFIG);\n\n        styler(this.nativeElement, this);\n    }\n\n    setImgSource() {\n        this.imgSource = this.imagePipe.transform(this.picturesource, this.encodeurl, this.pictureplaceholder);\n    }\n\n    onPropertyChange(key: string, nv: any, ov: any) {\n        if (key === 'pictureaspect') {\n            let width = '';\n            let height = '';\n            switch (nv) {\n                case 'None':\n                    width = this.width;\n                    height = this.height;\n                    break;\n                case 'H':\n                    width = '100%';\n                    break;\n                case 'V':\n                    height = '100%';\n                    break;\n                case 'Both':\n                    width = '100%';\n                    height = '100%';\n                    break;\n            }\n            setCSS(this.nativeElement, 'width', width, true);\n            setCSS(this.nativeElement, 'height', height, true);\n        } else if (key === 'encodeurl' || key === 'pictureplaceholder') {\n            this.setImgSource();\n        } else if (key === 'shape') {\n            switchClass(this.nativeElement, `img-${nv}`, `img-${ov}`);\n        } else if (key === 'hint') {\n            setAttr(this.nativeElement, 'alt', nv);\n        }\n        super.onPropertyChange(key, nv, ov);\n    }\n\n    onStyleChange(key: string, nv: any, ov?: any) {\n        if (key === 'picturesource') {\n            this.setImgSource();\n        } else {\n            super.onStyleChange(key, nv, ov);\n        }\n    }\n\n    ngOnInit() {\n        this.setImgSource();\n        super.ngOnInit();\n    }\n}\n","import { isMobileApp } from '@wm/core';\n\nimport { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    const props = new Map(\n        [\n            ['class', PROP_STRING],\n            ['conditionalclass', PROP_ANY],\n            ['conditionalstyle', PROP_ANY],\n            ['encodeurl', PROP_STRING],\n            ['hint', PROP_STRING],\n            ['name', PROP_STRING],\n            ['pictureaspect', {value: 'None', ...PROP_STRING}],\n            ['pictureplaceholder', PROP_STRING],\n            ['picturesource', PROP_STRING],\n            ['shape', PROP_STRING],\n            ['show', {value: true, ...PROP_BOOLEAN}],\n            ['tabindex', {value: 0, ...PROP_NUMBER}]\n        ]\n    );\n    if (isMobileApp()) {\n        props.set('offline', {value: true, ...PROP_BOOLEAN});\n    }\n    register('wm-picture', props);\n};\n","import { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-popover',\n        new Map(\n            [\n                ['badgevalue', PROP_STRING],\n                ['caption', {value: 'Link', ...PROP_STRING}],\n                ['class', PROP_STRING],\n                ['conditionalclass', PROP_ANY],\n                ['content', PROP_STRING],\n                ['contentanimation', PROP_STRING],\n                ['contentsource', {value: 'partial', ...PROP_STRING}],\n                ['encodeurl', PROP_BOOLEAN],\n                ['hint', PROP_STRING],\n                ['hyperlink', PROP_STRING],\n                ['iconclass', PROP_STRING],\n                ['iconheight', PROP_STRING],\n                ['iconmargin', PROP_STRING],\n                ['iconposition', PROP_STRING],\n                ['iconurl', PROP_STRING],\n                ['iconwidth', PROP_STRING],\n                ['interaction', {value: 'click', ...PROP_STRING}],\n                ['name', PROP_STRING],\n                ['popoverarrow', {value: true, ...PROP_BOOLEAN}],\n                ['popoverheight', PROP_STRING],\n                ['popoverplacement', {value: 'bottom', ... PROP_STRING}],\n                ['popoverwidth', PROP_STRING],\n                ['shortcutkey', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n                ['tabindex', {value: 0, ...PROP_NUMBER}],\n                ['title', PROP_STRING]\n\n            ]\n        )\n    );\n};\n","import { PROP_BOOLEAN, PROP_STRING } from '../../framework/widget-props';\n\nexport const prefabProps = new Map(\n    [\n        ['class', {value: '', ...PROP_STRING}],\n        ['name', PROP_STRING],\n        ['show', {value: true, ...PROP_BOOLEAN}]\n    ]\n);\n","import { Attribute, ChangeDetectorRef, Directive, ElementRef, Injector } from '@angular/core';\n\nimport { setCSS } from '@wm/core';\n\nimport { StylableComponent } from '../base/stylable.component';\nimport { styler } from '../../framework/styler';\nimport { PROP_TYPE, register } from '../../framework/widget-props';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\nimport { prefabProps } from './prefab.props';\n\nconst DEFAULT_CLS = 'app-prefab';\n\nconst registeredPropsSet = new Set<string>();\n\ndeclare const _;\n\n@Directive({\n    selector: 'section[wmPrefab]',\n    providers: [\n        provideAsWidgetRef(PrefabDirective)\n    ]\n})\nexport class PrefabDirective extends StylableComponent {\n\n    widgetType: string;\n    prefabName: string;\n    name: string;\n    propsReady: Function;\n\n    constructor(inj: Injector, elRef: ElementRef, cdr: ChangeDetectorRef, @Attribute('prefabname') prefabName) {\n        const widgetType = `wm-prefab-${prefabName}`;\n        const WIDGET_CONFIG = {widgetType, hostClass: DEFAULT_CLS};\n\n        super(inj, WIDGET_CONFIG, new Promise(res => this.propsReady = res));\n\n        this.prefabName = prefabName;\n        this.widgetType = widgetType;\n        this.name = elRef.nativeElement.getAttribute('name');\n\n        styler(this.nativeElement, this);\n\n        // Call on property change on name to set name attribute on element.\n        this.registerReadyStateListener(() => {\n            super.onPropertyChange('name', this.name);\n        });\n    }\n\n    onStyleChange(key: string, nv: any, ov: any) {\n        if (key === 'height') {\n            setCSS(this.nativeElement, 'overflow', 'auto');\n        }\n    }\n\n    public setProps(config) {\n        if (!config || !config.properties) {\n            return;\n        }\n\n        if (!registeredPropsSet.has(this.widgetType)) {\n            register(this.widgetType, this.prepareProps(config.properties));\n        }\n\n        this.propsReady();\n    }\n\n    protected handleEvent() {\n        // do not call the super;\n        // prevent events from getting registered\n    }\n\n    private prepareProps(props = {}) {\n        const propsMap = new Map(prefabProps);\n        Object.entries(props).forEach(([k, v]: [string, any]) => {\n            let type = PROP_TYPE.STRING;\n\n            if (v.type === 'boolean') {\n                type = PROP_TYPE.BOOLEAN;\n            } else if (v.type === 'number') {\n                type = PROP_TYPE.NUMBER;\n            } else if (v.type !== 'string') {\n                type = v.type;\n            }\n\n            // Do not set the 'bind:*' values\n            propsMap.set(k, {type, value: _.startsWith(v.value, 'bind:') ? undefined : v.value});\n        });\n\n        registeredPropsSet.add(this.widgetType);\n\n        return propsMap;\n    }\n}\n","import { Component, Injector } from '@angular/core';\n\nimport { switchClass } from '@wm/core';\n\nimport { styler } from '../../framework/styler';\nimport { registerProps } from './radioset.props';\nimport { provideAsNgValueAccessor, provideAsWidgetRef } from '../../../utils/widget-utils';\nimport { DatasetAwareFormComponent } from '../base/dataset-aware-form.component';\n\ndeclare const $, _;\n\nconst DEFAULT_CLS = 'app-radioset list-group';\nconst WIDGET_CONFIG = {widgetType: 'wm-radioset', hostClass: DEFAULT_CLS};\n\n@Component({\n    selector: '[wmRadioset]',\n    exportAs: 'wmRadioset',\n    templateUrl: './radioset.component.html',\n    providers: [\n        provideAsNgValueAccessor(RadiosetComponent),\n        provideAsWidgetRef(RadiosetComponent)\n    ]\n})\nexport class RadiosetComponent extends DatasetAwareFormComponent {\n    static initializeProps = registerProps();\n\n    public layout = '';\n    public disabled: boolean;\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n        styler(this.nativeElement, this);\n        this.multiple = false;\n    }\n\n    /**\n     * On click of the option, update the datavalue\n     */\n    onRadioLabelClick($event, key) {\n        if (!$($event.target).is('input')) {\n            return;\n        }\n\n        this.modelByKey = key;\n\n        this.invokeOnTouched();\n        // invoke on datavalue change.\n        this.invokeOnChange(this.datavalue, $event || {}, true);\n    }\n\n    // change and blur events are added from the template\n    protected handleEvent(node: HTMLElement, eventName: string, callback: Function, locals: any) {\n        if (eventName === 'click') {\n            this.eventManager.addEventListener(\n                node,\n                eventName,\n                e => {\n                    if (!$(e.target).is('input')) {\n                        return;\n                    }\n                    locals.$event = e;\n                    return callback();\n                }\n            );\n        } else if (!_.includes(['change'], eventName)) {\n            super.handleEvent(node, eventName, callback, locals);\n        }\n    }\n\n    onPropertyChange(key, nv, ov?) {\n        if (key === 'tabindex') {\n            return;\n        }\n\n        if (key === 'layout') {\n            switchClass(this.nativeElement, nv, ov);\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n}\n","import { Component, Injector, NgZone, OnDestroy, OnInit, SecurityContext } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\nimport { provideAsNgValueAccessor, provideAsWidgetRef } from '../../../utils/widget-utils';\nimport { APPLY_STYLES_TYPE, styler } from '../../framework/styler';\nimport { registerProps } from './rich-text-editor.props';\nimport { BaseFormCustomComponent } from '../base/base-form-custom.component';\n\nconst WIDGET_INFO = {widgetType: 'wm-richtexteditor', hostClass: 'app-richtexteditor clearfix'};\n\nconst getChangeEvt = () => {\n    let changeEvt;\n    // for IE the event constructor doesn't work so use the createEvent proto\n    if (typeof(Event) === 'function') {\n        changeEvt = new Event('change');\n    } else {\n        changeEvt = document.createEvent('Event');\n        changeEvt.initEvent('change', true, true);\n    }\n    return changeEvt;\n};\n\ndeclare const _, $;\n\n\n// override summernote methods\n\nconst origFn = $.summernote.ui.button.bind($.summernote);\n\n$.summernote.ui.button = (...args) => {\n\n    const retVal = origFn(...args);\n    const origCallback = retVal.callback;\n\n    retVal.callback = ($node, options) => {\n        // add bs3 btn class to the buttons\n        $node.addClass('btn');\n        return origCallback($node, options);\n    };\n    return retVal;\n};\n//\n\n@Component({\n    selector: 'div[wmRichTextEditor]',\n    templateUrl: './rich-text-editor.component.html',\n    providers: [\n        provideAsNgValueAccessor(RichTextEditorComponent),\n        provideAsWidgetRef(RichTextEditorComponent)\n    ]\n})\nexport class RichTextEditorComponent extends BaseFormCustomComponent implements OnInit, OnDestroy {\n    static initializeProps = registerProps();\n\n    $richTextEditor;\n    $hiddenInputEle;\n\n    proxyModel;\n    _operationStack = [];\n    isEditorLoaded = false;\n\n    public showpreview: any;\n    public disabled: boolean;\n\n    EDITOR_DEFAULT_OPTIONS = {\n        toolbar: [\n            // [groupName, [list of button]]\n            ['misc', ['undo', 'redo']],\n            ['style', ['style']],\n            ['fontname', ['fontname']],\n            ['fontsize', ['fontsize']],\n            ['height', ['height']],\n            ['style', ['bold', 'italic', 'underline', 'clear']],\n            ['font', ['strikethrough', 'superscript', 'subscript']],\n            ['color', ['color']],\n            ['insert', ['table', 'picture', 'link', 'video', 'hr']],\n            ['para', ['ul', 'ol', 'paragraph']],\n            ['misc', ['codeview', 'fullscreen', 'help']]\n        ],\n        callbacks: {\n            onInit: () => {\n                this.isEditorLoaded = true;\n                if (this._operationStack.length) {\n                    this._operationStack.forEach(operationParam => {\n                        const key = Array.from(operationParam.keys())[0],\n                            val = operationParam.get(key);\n                        this.performEditorOperation(key, val);\n                    });\n                    this._operationStack = [];\n                }\n            },\n            onChange: (contents, editable) => {\n                this.proxyModel = this.domSanitizer.sanitize(SecurityContext.HTML, contents.toString());\n                this.invokeOnChange(contents, getChangeEvt(), true);\n                this.invokeOnTouched();\n            }\n        },\n        fontNames: ['Arial', 'Arial Black', 'Comic Sans MS', 'Courier New', 'Merriweather'],\n        placeholder: '',\n        height: 100,\n        disableResizeEditor: true\n    };\n\n    get htmlcontent() {\n        return this.performEditorOperation('code');\n    }\n\n    get datavalue() {\n        return this.htmlcontent;\n    }\n\n    set datavalue(nv) {\n        if (nv !== undefined && nv !== null) {\n            this.$hiddenInputEle.val(nv);\n            this.performEditorOperation('reset');\n            this.performEditorOperation('insertText', nv);\n        }\n    }\n\n    constructor(inj: Injector, private domSanitizer: DomSanitizer, private ngZone: NgZone) {\n        super(inj, WIDGET_INFO);\n        styler(this.nativeElement, this, APPLY_STYLES_TYPE.CONTAINER, ['height']);\n    }\n\n    ngOnInit() {\n        this.$richTextEditor = $(this.nativeElement.querySelector('[richTextEditor]'));\n        this.$hiddenInputEle = $(this.nativeElement.querySelector('input.model-holder'));\n        super.ngOnInit();\n        this.initEditor();\n    }\n\n    initEditor() {\n        this.ngZone.runOutsideAngular(() => {\n            this.$richTextEditor.summernote(this.EDITOR_DEFAULT_OPTIONS);\n        });\n\n    }\n\n    onPropertyChange(key: string, nv: any, ov?: any) {\n        if (key === 'placeholder') {\n            this.EDITOR_DEFAULT_OPTIONS.placeholder = nv;\n            this.performEditorOperation({\n                placeholder: nv\n            });\n        } else if (key === 'disabled' || key === 'readonly') {\n            this.performEditorOperation(nv ? 'disable' : 'enable');\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n\n    onStyleChange(key, nv, ov) {\n        if (key === 'height') {\n            this.EDITOR_DEFAULT_OPTIONS.height = nv;\n            this.performEditorOperation({\n                height: nv\n            });\n        }\n    }\n\n    performEditorOperation(key, value?) {\n        if (this.isEditorLoaded) {\n            return this.$richTextEditor.summernote(key, value);\n        } else {\n            const op: any = new Map();\n            op.set(key, value);\n            this._operationStack.push(op);\n            return;\n        }\n    }\n\n    getCurrentPosition() {\n        return this.performEditorOperation('createRange');\n    }\n\n    undo() {\n        this.performEditorOperation('undo');\n    }\n\n    focus() {\n        this.performEditorOperation('focus');\n    }\n\n    ngOnDestroy() {\n        this.performEditorOperation('destroy');\n        super.ngOnDestroy();\n    }\n}\n","import { Directive, Injector } from '@angular/core';\n\nimport { switchClass } from '@wm/core';\n\nimport { IWidgetConfig } from '../../framework/types';\nimport { APPLY_STYLES_TYPE, styler } from '../../framework/styler';\nimport { StylableComponent } from '../base/stylable.component';\nimport { registerProps } from './right-panel.props';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\n\nconst DEFAULT_CLS = 'app-right-panel';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-right-panel',\n    hostClass: DEFAULT_CLS\n};\n\n@Directive({\n    selector: '[wmRightPanel]',\n    providers: [\n        provideAsWidgetRef(RightPanelDirective)\n    ]\n})\nexport class RightPanelDirective extends StylableComponent {\n    static initializeProps = registerProps();\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n\n        styler(this.nativeElement, this, APPLY_STYLES_TYPE.CONTAINER);\n    }\n\n    onPropertyChange(key: string, nv: any, ov?: any) {\n        if (key === 'columnwidth') {\n            switchClass(this.nativeElement, `col-sm-${nv}`, ov ? ` col-sm-${ov}` : '');\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n}\n","import { PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-right-panel',\n        new Map(\n            [\n                ['class', PROP_STRING],\n                ['columnwidth', PROP_NUMBER],\n                ['content', PROP_STRING],\n                ['name', PROP_STRING]\n            ]\n        )\n    );\n};\n","import { AfterContentInit, AfterViewInit, Directive, ElementRef, Injector } from '@angular/core';\n\nimport { SearchComponent } from './search.component';\n\ndeclare const $;\n\n@Directive({\n    selector: '[scrollable]'\n})\nexport class ScrollableDirective implements AfterContentInit, AfterViewInit {\n    private elementRef: ElementRef;\n\n    constructor(inj: Injector, private searchRef: SearchComponent) {\n        this.elementRef = inj.get(ElementRef);\n    }\n\n    ngAfterContentInit() {\n        // add the scroll event listener on the ul element.\n        this.elementRef.nativeElement.addEventListener('scroll', this.notifyParent.bind(this));\n        this.searchRef.dropdownEl = $(this.elementRef.nativeElement);\n        (this.searchRef as any).onDropdownOpen();\n    }\n\n    ngAfterViewInit() {\n        // assigning width for the dropdown.\n        const typeAheadInput = this.searchRef.$element.find('input:first');\n        this.searchRef.dropdownEl.width(typeAheadInput.outerWidth());\n    }\n\n    private notifyParent(evt: Event) {\n        this.searchRef.onScroll(this.elementRef.nativeElement, evt);\n    }\n}\n","import { AfterViewInit, Component, ElementRef, Injector, ViewChild } from '@angular/core';\n\nimport { DataSource, removeAttr, setAttr } from '@wm/core';\n\nimport { styler } from '../../framework/styler';\nimport { registerProps } from './select.props';\nimport { provideAsNgValueAccessor, provideAsWidgetRef } from '../../../utils/widget-utils';\nimport { DatasetAwareFormComponent } from '../base/dataset-aware-form.component';\n\ndeclare const _;\n\nconst WIDGET_CONFIG = {widgetType: 'wm-select', hostClass: 'app-select-wrapper'};\n\n@Component({\n    selector: 'wm-select',\n    templateUrl: './select.component.html',\n    providers: [\n        provideAsNgValueAccessor(SelectComponent),\n        provideAsWidgetRef(SelectComponent)\n    ]\n})\nexport class SelectComponent extends DatasetAwareFormComponent implements AfterViewInit {\n    static initializeProps = registerProps();\n\n    public readonly: boolean;\n    public placeholder: string;\n    public navsearchbar: any;\n    public class: any;\n    public required: boolean;\n    public disabled: boolean;\n    public tabindex: any;\n    public name: string;\n    public autofocus: boolean;\n\n    @ViewChild('select', {read: ElementRef}) selectEl: ElementRef;\n\n    set datasource(ds) {\n        if (ds && ds.execute && ds.execute(DataSource.Operation.IS_BOUND_TO_LOCALE)) {\n            this.datavalue = ds.execute(DataSource.Operation.GET_DEFAULT_LOCALE);\n        }\n    }\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n        this.acceptsArray = true;\n    }\n\n    ngAfterViewInit() {\n        super.ngAfterViewInit();\n        styler(this.selectEl.nativeElement as HTMLElement, this);\n    }\n\n    // Change event is registered from the template, Prevent the framework from registering one more event\n    protected handleEvent(node: HTMLElement, eventName: string, eventCallback: Function, locals: any) {\n        if (!_.includes(['blur', 'change'], eventName)) {\n            super.handleEvent(this.selectEl.nativeElement, eventName, eventCallback, locals);\n        }\n    }\n\n    onSelectValueChange($event) {\n        if (this.readonly) {\n            if (this.placeholder) {\n                this.selectEl.nativeElement.value = this.placeholder;\n            } else {\n                this.selectEl.nativeElement.value = '';\n            }\n            this.datavalue = (this as any).prevDatavalue;\n            return;\n        }\n        this.invokeOnTouched();\n        // invoke on datavalue change.\n        this.invokeOnChange(this.datavalue, $event || {}, true);\n    }\n\n    onPropertyChange(key: string, nv: any, ov?: any) {\n        if (key === 'class' ||  key === 'tabindex') {\n            return;\n        } else if (key === 'readonly') {\n             (nv === true) ? setAttr(this.selectEl.nativeElement, 'readonly', 'readonly') : removeAttr(this.selectEl.nativeElement, 'readonly') ;\n        }\n        super.onPropertyChange(key, nv, ov);\n    }\n}\n","import { Attribute, Directive, ElementRef, Inject } from '@angular/core';\nimport { addClass } from '@wm/core';\n\nimport { WidgetRef } from '../widgets/framework/types';\nimport { BaseComponent } from '../widgets/common/base/base.component';\n\n@Directive({\n    selector: '[showInDevice]'\n})\nexport class ShowInDeviceDirective {\n\n    constructor(\n        elRef: ElementRef,\n        @Attribute('showInDevice') showInDevice: string,\n        @Inject(WidgetRef) widget: BaseComponent\n    ) {\n        const displayType = widget.getDisplayType();\n\n        if (showInDevice) {\n            showInDevice.split(',').forEach(deviceType => {\n                addClass(elRef.nativeElement, `visible-${deviceType}-${displayType}`);\n            });\n        }\n    }\n}\n","import {Directive, DoCheck, ElementRef, Injector, Input, OnDestroy, OnInit} from '@angular/core';\n\nimport { App, debounce, isKitkatDevice, isMobileApp } from '@wm/core';\nimport {Subscription} from 'rxjs';\n\ndeclare const IScroll;\ndeclare const _, $;\n\n@Directive({\n    selector: '[wmSmoothscroll]'\n})\nexport class SmoothScrollDirective implements OnInit, DoCheck, OnDestroy {\n\n    private readonly _$el;\n    private _isEnabled = false;\n    private _smoothScrollInstance;\n    private _lastScrollY = -1;\n    private _waitRefreshTill = -1;\n    private app: App;\n    private pendingIscrolls: any = [];\n    private cancelSubscription: any;\n\n    constructor(inj: Injector, elRef: ElementRef, app: App) {\n        this._$el = $(elRef.nativeElement);\n        this.app = app;\n    }\n\n    public ngOnInit() {\n        this.cancelSubscription = this.app.subscribe('no-iscroll', el => {\n            this.pendingIscrolls.push(el);\n        });\n    }\n\n    public ngDoCheck() {\n        if (this._isEnabled) {\n            if (!this._smoothScrollInstance) {\n                this._smoothScrollInstance = this.applySmoothScroll();\n            } else {\n                this.refreshIScroll();\n            }\n        } else if (this._smoothScrollInstance && this._smoothScrollInstance.destroy) {\n            this._smoothScrollInstance.destroy();\n        }\n    }\n\n    public ngOnDestroy() {\n        if (this._smoothScrollInstance && this._smoothScrollInstance.destroy) {\n            this._smoothScrollInstance.destroy();\n        }\n        if (this.cancelSubscription) {\n            this.cancelSubscription();\n        }\n    }\n\n    @Input()\n    set wmSmoothscroll(val: any) {\n        this._isEnabled = (val === true || val === 'true');\n        if (this._isEnabled) {\n            if (!this._smoothScrollInstance) {\n                this._smoothScrollInstance = this.applySmoothScroll();\n            }\n        } else {\n            this.ngOnDestroy();\n        }\n    }\n\n    private applySmoothScroll($events?: any[], activeEl?: any) {\n        if (!isMobileApp() || isKitkatDevice()) {\n            return null;\n        }\n        // Set the fadeScrollbars to true only when content is scrollable inside the smoothscroll-container\n        const scrollOptions = {\n            scrollbars: true,\n            preventDefault: false,\n            momentum: true,\n            bounce: false,\n            mouseWheel: true, // for preview in browser support\n            disablePointer: true, // disable the pointer events as it causes lag in scrolling (jerky).\n            disableTouch: false, // false to be usable with touch devices\n            disableMouse: false // false to be usable with a mouse (desktop)\n        },\n        el = this._$el[0];\n\n        if (!el.children.length) {\n            return null;\n        }\n\n        this._$el.addClass('smoothscroll-wrapper');\n\n        if (activeEl && activeEl.tagName === 'INPUT') {\n            activeEl.focus();\n        }\n\n        // Add fadeScrollbars options only when smoothscroll container is included, which means content is scrollable.\n        if ($events) {\n            scrollOptions['fadeScrollbars'] = true;\n        }\n\n        let iScroll = new IScroll(el, scrollOptions);\n\n        if ($events) {\n            // map all events on previous iscroll to the newly created iscroll.\n            _.forEach($events, (listeners, key)  => {\n                _.forEach(listeners, l => {\n                    iScroll.on(key, l);\n                });\n            });\n            iScroll.on('scrollStart', function () {\n                this._scrolling = true;\n            });\n            iScroll.on('scrollEnd', function () {\n                this._scrolling = false;\n            });\n            iScroll.refresh();\n        }\n\n        // refresh the indicators.\n        iScroll.indicatorRefresh = () => {\n            const indicators = this._$el[0].iscroll.indicators;\n            let i;\n            if (indicators.length) {\n                for (i = 0; i < indicators.length; i++) {\n                    indicators[i].refresh();\n                }\n            }\n        };\n\n        this._$el[0].iscroll = iScroll;\n        _.forEach(this.pendingIscrolls, (_el, index) => {\n            if (_el.isSameNode(this._$el[0])) {\n                this.app.notify('iscroll-update', {el: _el});\n                this.pendingIscrolls.splice(index, 1);\n                return;\n            }\n        });\n        this.app.notify('iscroll-update', {});\n\n        return {\n            iScroll: iScroll,\n            destroy: function () {\n                iScroll.destroy();\n                $(iScroll.scroller).css({\n                    'transition-timing-function': '',\n                    'transition-duration': '',\n                    'transform': ''\n                });\n\n                iScroll = null;\n                delete el.iscroll;\n            }\n        };\n    }\n\n    /*\n     * When element has scroll (i.e. scrollHeight > clientHeight), a div with smoothscroll-container class will be added.\n     * new iScroll will be initialised on the element after the div addition, by removing the existing iscroll on the element.\n     * This div will have no height, so the elements inside this div will inherit this height, i.e. no height,\n     * Scenario: tabs with 100% height, as it covers the pageContent with no scroll, this div will not be added.\n     * TODO: Scenario: tabs with 100% height and add others widgets after/before, as it has scroll, this div will be added.\n     *          But tabs having 100% height will not be honoured as div is having no height.\n     */\n    private refreshIScroll() {\n        const iScroll = this._smoothScrollInstance.iScroll;\n        const waitTime = 500;\n        if (iScroll._scrolling || this._waitRefreshTill > Date.now()) {\n            return;\n        }\n        // Check for scrollable content and if smoothscroll-container div is already added.\n        if (iScroll.wrapper\n            && !_.includes(iScroll.wrapper.children[0].classList, 'smoothscroll-container')\n            && iScroll.wrapper.scrollHeight > iScroll.wrapper.clientHeight) {\n\n            const cloneEvents = iScroll._events;\n            const prevActiveEl = document.activeElement;\n\n            // Adds the smoothscroll container div wrapper only when element has scrollable content.\n            $(iScroll.wrapper.children).wrapAll('<div class=\"smoothscroll-container\"></div>');\n            this._smoothScrollInstance.destroy();\n\n            // create new iscroll instance on the element\n            this._smoothScrollInstance = this.applySmoothScroll(cloneEvents, prevActiveEl);\n        }\n        if (this._lastScrollY !== this._$el[0].iscroll.maxScrollY) {\n            refreshIscrolls(this._smoothScrollInstance.iScroll);\n            this._lastScrollY = this._$el[0].iscroll.maxScrollY;\n        } else {\n            this._smoothScrollInstance.iScroll.refresh();\n        }\n        this._waitRefreshTill = Date.now() + waitTime;\n    }\n}\n\n/**\n * Refreshes the given iScorll or all iScrolls in the page.\n * @param iScroll\n */\nconst refreshIscrolls = function(iScroll?: any) {\n    const scrollContainer = !iScroll && $('.smoothscroll-container');\n\n    // Fix for issue: keyboard hides the input on focus.\n    // On input focus or window resize, keypad in device has to adjust.\n    if (($(document.activeElement).offset().top + document.activeElement.clientHeight) > window.innerHeight * 0.9) {\n        document.activeElement.scrollIntoView({behavior: 'auto', block: 'end', inline: 'end'});\n    }\n\n    if (iScroll) {\n        // refresh specify iscroll on change.\n        if (iScroll.indicatorRefresh) {\n            iScroll.indicatorRefresh();\n        }\n        if (iScroll.refresh) {\n            iScroll.refresh();\n        }\n    } else if (scrollContainer.length) {\n        // refresh all the iscrolls in pagecontent.\n        scrollContainer.parent().each( (i, el: any) => {\n            el.iscroll.indicatorRefresh();\n            el.iscroll.refresh();\n        });\n    }\n};\n\n// on window resize, recalculate the iscroll position and refresh scrollers.\nwindow.addEventListener('resize', debounce(refreshIscrolls, 200));\n","import { PROP_BOOLEAN, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-spinner',\n        new Map(\n            [\n                ['animation', {value: 'spin', PROP_STRING}],\n                ['caption', {value: 'Loading...', ...PROP_STRING}],\n                ['class', PROP_STRING],\n                ['iconclass', {value: 'fa fa-circle-o-notch fa-spin', ...PROP_STRING}],\n                ['iconsize', PROP_STRING],\n                ['image', PROP_STRING],\n                ['imageheight', PROP_STRING],\n                ['imagewidth', {value: '20px', ...PROP_STRING}],\n                ['name', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n                ['type', {value: 'icon', ...PROP_STRING}],\n                ['servicevariabletotrack', PROP_STRING]\n            ]\n        )\n    );\n};\n","import { Component, Injector, OnInit } from '@angular/core';\n\nimport { DataSource, validateDataSourceCtx } from '@wm/core';\n\nimport { styler } from '../../framework/styler';\nimport { IWidgetConfig } from '../../framework/types';\nimport { registerProps } from './spinner.props';\nimport { StylableComponent } from '../base/stylable.component';\nimport { ImagePipe } from '../../../pipes/image.pipe';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\n\ndeclare const _;\n\nconst DEFAULT_CLS = 'app-spinner';\nconst WIDGET_CONFIG: IWidgetConfig = {widgetType: 'wm-spinner', hostClass: DEFAULT_CLS};\n\n@Component({\n    selector: '[wmSpinner]',\n    templateUrl: './spinner.component.html',\n    providers: [\n        provideAsWidgetRef(SpinnerComponent)\n    ]\n})\nexport class SpinnerComponent extends StylableComponent implements OnInit {\n    static initializeProps = registerProps();\n\n    public iconclass = '';\n    public animation = '';\n    public imagewidth;\n    public imageheight;\n    public servicevariabletotrack: string;\n    public show: boolean;\n    private picture: string;\n    private _spinnerMessages;\n    public showCaption = true;\n    public type: any;\n\n    public get spinnerMessages() {\n        return this._spinnerMessages;\n    }\n\n    public set spinnerMessages(newVal) {\n        this.showCaption = _.isEmpty(newVal);\n        this._spinnerMessages = newVal;\n    }\n\n    private listenOnDataSource() {\n        const variables = _.split(this.servicevariabletotrack, ',');\n        this.getAppInstance().subscribe('toggle-variable-state', data => {\n            const name = data.variable.execute(DataSource.Operation.GET_NAME);\n            if (_.includes(variables, name) && validateDataSourceCtx(data.variable, this.getViewParent())) {\n                this.widget.show = data.active;\n            }\n        });\n    }\n\n    constructor(inj: Injector, private imagePipe: ImagePipe) {\n        super(inj, WIDGET_CONFIG);\n        styler(this.nativeElement, this);\n    }\n\n    onPropertyChange(key: string, nv: any, ov?: any) {\n        if (key === 'image') {\n            this.picture = this.imagePipe.transform(nv);\n        } else if (key === 'animation') {\n            if (nv === 'spin') {\n                this.animation = 'fa-spin';\n            } else {\n                this.animation = nv || '';\n            }\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n\n    ngOnInit() {\n        super.ngOnInit();\n        // if variables are to be listened to, hide the widget and set the listener\n        if (this.servicevariabletotrack) {\n            this.widget.show = false;\n            this.listenOnDataSource();\n        }\n    }\n}\n","import { AfterViewInit, Component, Injector } from '@angular/core';\n\nimport { $appDigest, debounce, isDefined, setCSS, toBoolean } from '@wm/core';\n\nimport { styler } from '../../framework/styler';\nimport { registerProps } from './switch.props';\nimport { provideAsNgValueAccessor, provideAsWidgetRef } from '../../../utils/widget-utils';\nimport { DatasetAwareFormComponent } from '../base/dataset-aware-form.component';\nimport { DataSetItem } from '../../../utils/form-utils';\n\ndeclare const _, $;\n\nconst DEFAULT_CLS = 'app-switch';\nconst WIDGET_CONFIG = {widgetType: 'wm-switch', hostClass: DEFAULT_CLS};\n\n@Component({\n    selector: '[wmSwitch]',\n    templateUrl: './switch.component.html',\n    providers: [\n        provideAsNgValueAccessor(SwitchComponent),\n        provideAsWidgetRef(SwitchComponent)\n    ]\n})\nexport class SwitchComponent extends DatasetAwareFormComponent implements AfterViewInit {\n    static initializeProps = registerProps();\n\n    options = [];\n    selectedItem: DataSetItem;\n    iconclass;\n    private btnwidth;\n    public disabled: boolean;\n    public required: boolean;\n    private _debounceSetSelectedValue: Function;\n    public name: string;\n\n    constructor(inj: Injector, ) {\n        super(inj, WIDGET_CONFIG);\n\n        this._debounceSetSelectedValue = debounce((val) => {\n            this.setSelectedValue();\n            this.updateHighlighter(val);\n            // only for default value trigger app digest to apply the selectedItem\n            if (val) {\n                $appDigest();\n            }\n        }, 200);\n\n        const datasetSubscription = this.dataset$.subscribe(() => this.updateSwitchOptions());\n\n        this.registerDestroyListener(() => datasetSubscription.unsubscribe());\n\n        const datavalueSubscription = this.datavalue$.subscribe(() => {\n            this._debounceSetSelectedValue(true);\n        });\n        this.registerDestroyListener(() => datavalueSubscription.unsubscribe());\n    }\n\n    ngAfterViewInit() {\n        super.ngAfterViewInit();\n        styler(this.nativeElement as HTMLElement, this);\n    }\n\n    onStyleChange(key: string, nv: any, ov?: any) {\n        if (key === 'height') {\n            setCSS(this.nativeElement, 'overflow', nv ? 'auto' : '');\n        } else {\n            super.onStyleChange(key, nv, ov);\n        }\n    }\n\n    // This function sets the selectedItem by either using compareby fields or selected flag on datasetItems.\n    private setSelectedValue() {\n        if (isDefined(this.datavalue) || isDefined(this.toBeProcessedDatavalue)) {\n            this.selectedItem = _.find(this.datasetItems, {selected: true});\n            return;\n        }\n\n        // If no value is provided, set first value as default if options are available else set -1 ie no selection\n        this.selectOptAtIndex(0);\n    }\n\n    // set the css for switch overlay element.\n    // set the selected index from the datasetItems and highlight the datavalue on switch.\n    private updateSwitchOptions() {\n        if (this.datasetItems.length) {\n            this.btnwidth = (100 / this.datasetItems.length);\n            setCSS(this.nativeElement.querySelector('.app-switch-overlay') as HTMLElement, 'width', this.btnwidth + '%');\n        }\n\n        this._debounceSetSelectedValue(true);\n    }\n\n    // This function animates the highlighted span on to the selected value.\n    private updateHighlighter(skipAnimation?) {\n        const handler = $(this.nativeElement).find('span.app-switch-overlay');\n\n        this.setSelectedValue();\n\n        let left,\n            index = this.selectedItem ? _.findIndex(this.datasetItems, {key: this.selectedItem.key}) : -1;\n\n        if (index === undefined || index === null) {\n            index = -1;\n        }\n        left = index * this.btnwidth;\n        if (skipAnimation) {\n            handler.css('left', left + '%');\n        } else {\n            handler.animate({\n                left: left + '%'\n            }, 300);\n        }\n    }\n\n    selectOptAtIndex($index) {\n        if (!this.datasetItems.length) {\n            return;\n        }\n        const opt = this.datasetItems[$index];\n        this._modelByValue = opt.value;\n    }\n\n    // Triggered on selected the option from the switch.\n    // set the index and highlight the default value. Invoke onchange event handler.\n    selectOpt($event, $index, option) {\n        this.modelByKey = option.key;\n\n        this.invokeOnTouched();\n        $event.preventDefault();\n\n        if (this.disabled) {\n            return;\n        }\n\n        if (this.selectedItem && $index === _.findIndex(this.datasetItems, {key: this.selectedItem.key})) {\n            if (this.datasetItems.length === 2) {\n                $index = $index === 1 ? 0 : 1;\n            } else {\n                return;\n            }\n        }\n        this.selectedItem = this.datasetItems[$index];\n        this.updateHighlighter();\n\n        // invoke on datavalue change.\n        this.invokeOnChange(this.datavalue, $event || {}, true);\n        $appDigest();\n    }\n\n    onPropertyChange(key, nv, ov?) {\n        if (key === 'disabled' && !toBoolean(nv)) {\n            this.nativeElement.removeAttribute(key);\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n}\n","import { Directive, Injector, OnInit, Optional } from '@angular/core';\n\nimport { BaseComponent } from '../../base/base.component';\nimport { registerProps } from './table-action.props';\nimport { provideAsWidgetRef } from '../../../../utils/widget-utils';\nimport { TableComponent } from '../table.component';\n\ndeclare const _;\n\nconst WIDGET_CONFIG = {widgetType: 'wm-table-action', hostClass: ''};\n\n@Directive({\n    selector: '[wmTableAction]',\n    providers: [\n        provideAsWidgetRef(TableActionDirective)\n    ]\n})\nexport class TableActionDirective extends BaseComponent implements OnInit {\n    static initializeProps = registerProps();\n\n    accessroles;\n    action;\n    caption;\n    class;\n    disabled;\n    displayName;\n    icon;\n    iconclass;\n    position;\n    shortcutkey;\n    show;\n    tabindex;\n    title;\n    key;\n    hyperlink;\n    target;\n    buttonDef;\n    conditionalclass;\n    conditionalstyle;\n\n    private _propsInitialized: boolean;\n\n    constructor(inj: Injector, @Optional() public table: TableComponent) {\n        super(inj, WIDGET_CONFIG);\n    }\n\n    populateAction() {\n        this.buttonDef = {\n            key: this.key,\n            displayName: this['display-name'] || this.caption || '',\n            show: this.show,\n            class: this.class || '',\n            iconclass: this.iconclass || '',\n            title: _.isUndefined(this.title) ? (this['display-name'] || '') : this.title,\n            action: this.action,\n            accessroles: this.accessroles,\n            shortcutkey: this.shortcutkey,\n            disabled: this.disabled,\n            tabindex: this.tabindex,\n            icon: this.icon,\n            position: this.position,\n            widgetType: this['widget-type'],\n            hyperlink: this.hyperlink,\n            target: this.target,\n            conditionalclass: this.conditionalclass || '',\n            conditionalstyle: this.conditionalstyle || {}\n        };\n        this._propsInitialized = true;\n    }\n\n    ngOnInit() {\n        super.ngOnInit();\n        this.populateAction();\n        this.table.registerActions(this.buttonDef);\n    }\n\n    onPropertyChange(key, nv) {\n        if (!this._propsInitialized) {\n            return;\n        }\n\n        if (key === 'display-name') {\n            this.buttonDef.displayName = nv;\n        } else {\n            this.buttonDef[key] = nv;\n        }\n    }\n}\n","import { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-table-action',\n        new Map(\n            [\n                ['accessroles', PROP_STRING],\n                ['action', PROP_STRING],\n                ['caption', PROP_STRING],\n                ['class', PROP_STRING],\n                ['conditionalclass', PROP_ANY],\n                ['conditionalstyle', PROP_ANY],\n                ['disabled', {value: false, ...PROP_BOOLEAN}],\n                ['display-name', PROP_STRING],\n                ['hyperlink', PROP_STRING],\n                ['icon', PROP_STRING],\n                ['iconclass', PROP_STRING],\n                ['key', PROP_STRING],\n                ['position', {value: 'footer', ...PROP_STRING}],\n                ['shortcutkey', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n                ['tabindex', {value: 0, ...PROP_NUMBER}],\n                ['title', PROP_STRING],\n                ['target', PROP_STRING],\n                ['widget-type', {value: 'button', ...PROP_STRING}]\n            ]\n        )\n    );\n};\n","import { Directive, Injector, OnInit, Optional, SkipSelf } from '@angular/core';\n\nimport { BaseComponent } from '../../base/base.component';\nimport { setHeaderConfigForTable } from '../../../../utils/live-utils';\nimport { registerProps } from './table-column-group.props';\nimport { provideAsWidgetRef } from '../../../../utils/widget-utils';\nimport { TableComponent } from '../table.component';\n\nconst WIDGET_CONFIG = {widgetType: 'wm-table-column-group', hostClass: ''};\n\n@Directive({\n    selector: '[wmTableColumnGroup]',\n    providers: [\n        provideAsWidgetRef(TableColumnGroupDirective)\n    ]\n})\nexport class TableColumnGroupDirective extends BaseComponent implements OnInit {\n    static initializeProps = registerProps();\n\n    accessroles;\n    backgroundcolor;\n    caption;\n    colClass;\n    name;\n    textalignment;\n    config: any = {};\n\n    constructor(\n        inj: Injector,\n        @SkipSelf() @Optional() public group: TableColumnGroupDirective,\n        @Optional() public table: TableComponent\n    ) {\n        super(inj, WIDGET_CONFIG);\n    }\n\n    populateConfig() {\n        this.config = {\n            field: this.name,\n            displayName: this.caption || '',\n            columns: [],\n            isGroup: true,\n            accessroles: this.accessroles,\n            textAlignment: this.textalignment || 'center',\n            backgroundColor: this.backgroundcolor,\n            class: this['col-class']\n        };\n    }\n\n    onPropertyChange(key, nv, ov?) {\n        if (key === 'caption') {\n            this.config.displayName = nv || '';\n            this.table.callDataGridMethod('setColumnProp', this.config.field, 'displayName', nv, true);\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n\n    ngOnInit() {\n        super.ngOnInit();\n        this.populateConfig();\n        setHeaderConfigForTable(this.table.headerConfig, this.config, this.group && this.group.name);\n    }\n}\n","import { PROP_STRING, register } from '../../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-table-column-group',\n        new Map(\n            [\n                ['backgroundcolor', PROP_STRING],\n                ['caption', PROP_STRING],\n                ['col-class', PROP_STRING],\n                ['name', PROP_STRING],\n                ['textalignment', {value: 'center', ...PROP_STRING}]\n            ]\n        )\n    );\n};\n","import { AfterContentInit, AfterViewInit, Attribute, ContentChild, ContentChildren, TemplateRef, Directive, Injector, OnInit, Optional } from '@angular/core';\nimport { Validators } from '@angular/forms';\n\nimport { $watch, AppDefaults, DataSource, DataType, debounce, FormWidgetType, getDisplayDateTimeFormat, isDateTimeType, isDefined } from '@wm/core';\n\nimport { BaseComponent } from '../../base/base.component';\nimport { EDIT_MODE, getDataTableFilterWidget, getDefaultValue, getEditModeWidget, setHeaderConfigForTable } from '../../../../utils/live-utils';\nimport { registerProps } from './table-column.props';\nimport { getWatchIdentifier, isDataSetWidget, provideAsWidgetRef } from '../../../../utils/widget-utils';\nimport { TableComponent } from '../table.component';\nimport { TableColumnGroupDirective } from '../table-column-group/table-column-group.directive';\nimport { applyFilterOnField, fetchRelatedFieldData, getDistinctFieldProperties, getDistinctValues, getDistinctValuesForField } from '../../../../utils/data-utils';\n\ndeclare const _;\n\nconst WIDGET_CONFIG = {widgetType: 'wm-table-column', hostClass: ''};\n\nlet inlineWidgetProps = ['datafield', 'displayfield', 'placeholder', 'searchkey', 'matchmode', 'displaylabel',\n                            'checkedvalue', 'uncheckedvalue', 'showdropdownon', 'dataset'];\nconst validationProps = ['maxchars', 'regexp', 'minvalue', 'maxvalue', 'required'];\ninlineWidgetProps = [...inlineWidgetProps, ...validationProps];\n\nclass FieldDef {\n    widget;\n\n    constructor(widget) {\n        this.widget = widget;\n    }\n\n    focus() {\n        this.widget.focus();\n    }\n\n    setProperty(prop, newval) {\n        // Get the scope of the current editable widget and set the value\n        prop = prop === 'value' ? 'datavalue' : prop;\n        this.widget[prop] = newval;\n    }\n\n    getProperty(prop) {\n        prop = prop === 'value' ? 'datavalue' : prop;\n        return this.widget[prop];\n    }\n}\n\n@Directive({\n    selector: '[wmTableColumn]',\n    providers: [\n        provideAsWidgetRef(TableColumnDirective)\n    ]\n})\nexport class TableColumnDirective extends BaseComponent implements OnInit, AfterContentInit, AfterViewInit {\n    static initializeProps = registerProps();\n\n    @ContentChildren('filterWidget') _filterInstances;\n    @ContentChildren('inlineWidget') _inlineInstances;\n    @ContentChildren('inlineWidgetNew') _inlineInstancesNew;\n    @ContentChild('customExprTmpl') customExprTmpl;\n\n    private _propsInitialized: boolean;\n    private _filterDataSet;\n    private _isRowFilter;\n    private _isInlineEditable;\n    private _isNewEditableRow;\n\n    filterInstance;\n    inlineInstance;\n    inlineInstanceNew;\n\n    backgroundcolor;\n    binding;\n    caption;\n    dataset;\n    defaultvalue;\n    editWidgetType;\n    filterwidget;\n    field;\n    formatpattern;\n    generator;\n    limit;\n    mobiledisplay;\n    pcdisplay;\n    readonly;\n    required;\n    maxchars;\n    minvalue;\n    maxvalue;\n    regexp;\n    searchable;\n    show;\n    sortable;\n    textalignment;\n    textcolor;\n    type;\n    width;\n    datepattern;\n    editdatepattern;\n    filterdatafield;\n    filterdisplayfield;\n    filterdisplaylabel;\n    filtersearchkey;\n    filterplaceholder;\n    datafield;\n    displayfield;\n    displayName;\n    pcDisplay;\n    mobileDisplay;\n    textAlignment;\n    backgroundColor;\n    textColor;\n    primaryKey;\n    relatedEntityName;\n    style;\n    class;\n    ngclass;\n    filterOn;\n    filterControl;\n    isDataSetBound;\n    isFilterDataSetBound;\n    private _dataoptions: any;\n    private _datasource: any;\n    private _debounceSetUpValidators;\n    private _debounceSetUpValidatorsNew;\n\n    @ContentChild('filterTmpl') filterTemplateRef: TemplateRef<any>;\n\n    constructor(\n        inj: Injector,\n        private appDefaults: AppDefaults,\n        @Optional() public table: TableComponent,\n        @Optional() public group: TableColumnGroupDirective,\n        @Attribute('filterdataset.bind') public bindfilterdataset,\n        @Attribute('dataset.bind') public binddataset\n    ) {\n        super(inj, WIDGET_CONFIG);\n\n        this._debounceSetUpValidators = debounce(this.setUpValidators.bind(this, 'inlineInstance'), 250);\n        this._debounceSetUpValidatorsNew = debounce(this.setUpValidators.bind(this, 'inlineInstanceNew'), 250);\n    }\n\n    get dataoptions() {\n        return this._dataoptions;\n    }\n\n    set dataoptions(options) {\n        this._dataoptions = options;\n    }\n\n    get datasource() {\n        return this._datasource;\n    }\n\n    set datasource(ds) {\n        this._datasource = ds;\n    }\n\n    ngOnInit() {\n        super.ngOnInit();\n\n        // Set the default values and register with table\n        this.populateFieldDef();\n\n        // Register column with header config to create group structure\n        setHeaderConfigForTable(this.table.headerConfig, {\n            field: this.field,\n            displayName: this.displayName\n        }, this.group && this.group.name);\n\n        this.table.registerColumns(this.widget);\n\n        this._isRowFilter = this.table.filtermode === 'multicolumn' && this.searchable;\n        this._isInlineEditable = !this.readonly && (this.table.editmode !== EDIT_MODE.DIALOG && this.table.editmode !== EDIT_MODE.FORM);\n        this._isNewEditableRow = this._isInlineEditable && this.table.editmode === EDIT_MODE.QUICK_EDIT && this.table.shownewrow;\n        this.setUpControls();\n\n        this._propsInitialized = true;\n    }\n\n    ngAfterContentInit() {\n        if (this._isRowFilter) {\n            // Listen on the inner row filter widget and setup the widget\n            const s1 = this._filterInstances.changes.subscribe((val) => {\n                this.filterInstance = val.first && val.first.widget;\n                this.setUpFilterWidget();\n            });\n            this.registerDestroyListener(() => s1.unsubscribe());\n        }\n\n        if (this._isInlineEditable) {\n            const s2 = this._inlineInstances.changes.subscribe((val) => {\n                // Listen on the inner inline widget and setup the widget\n                this.inlineInstance = val.first && val.first.widget;\n                this.table.registerFormField(this.binding, new FieldDef(this.inlineInstance));\n                this.setUpInlineWidget('inlineInstance');\n            });\n            this.registerDestroyListener(() => s2.unsubscribe());\n\n            if (this._isNewEditableRow) {\n                const s3 = this._inlineInstancesNew.changes.subscribe((val) => {\n                    // Listen on the inner inline widget and setup the widget\n                    this.inlineInstanceNew = val.first && val.first.widget;\n                    this.setUpInlineWidget('inlineInstanceNew');\n                });\n                this.registerDestroyListener(() => s3.unsubscribe());\n            }\n        }\n        super.ngAfterContentInit();\n    }\n\n    ngAfterViewInit() {\n        // manually listing the table column templateRef as templateRef will not be available prior.\n        if (this.filterTemplateRef) {\n            this.table.renderDynamicFilterColumn(this.filterTemplateRef);\n        }\n    }\n\n    addFormControl(suffix?: string) {\n        const ctrlName = suffix ? (this.binding + suffix) : this.binding;\n        this.table.ngform.addControl(ctrlName, this.table.fb.control(''));\n    }\n\n    getFormControl(suffix?: string) {\n        const ctrlName = suffix ? (this.binding + suffix) : this.binding;\n        return this.table.ngform.controls[ctrlName];\n    }\n\n    // Setup the inline edit and filter widget\n    setUpControls() {\n        if (this._isInlineEditable) {\n            if (this.editWidgetType === FormWidgetType.UPLOAD) {\n                return;\n            }\n            this.addFormControl();\n            const control = this.getFormControl();\n            if (control) {\n                const onValueChangeSubscription =  control.valueChanges.subscribe(this.onValueChange.bind(this));\n                this.registerDestroyListener(() => onValueChangeSubscription.unsubscribe());\n            }\n\n            if (this._isNewEditableRow) {\n                this.addFormControl('_new');\n                const newControl = this.getFormControl('_new');\n                if (newControl) {\n                   const onNewValueChangeSubscription =  newControl.valueChanges.subscribe(this.onValueChange.bind(this));\n                   this.registerDestroyListener(() => onNewValueChangeSubscription.unsubscribe());\n                }\n            }\n        }\n\n        if (this._isRowFilter) {\n            this.addFormControl('_filter');\n            this.filterControl = this.getFormControl('_filter');\n            if (this.filterControl) {\n                const onFilterValueSubscription = this.filterControl.valueChanges.subscribe(this.onFilterValueChange.bind(this));\n                this.registerDestroyListener(() => onFilterValueSubscription.unsubscribe());\n            }\n        }\n    }\n\n    // Reset the row filter value\n    resetFilter() {\n        if (this.filterControl) {\n            this.filterControl.setValue('');\n        }\n        if (this.filterwidget === FormWidgetType.AUTOCOMPLETE) {\n            this.filterInstance.query = '';\n            this.filterInstance.queryModel = '';\n        }\n    }\n\n    // On field value change, propagate event to parent form\n    onFilterValueChange(val) {\n        this.table.rowFilter[this.field].value = val;\n    }\n\n    // On field value change, apply cascading filter\n    onValueChange(val) {\n        if (val !== null) {\n            applyFilterOnField(this.table.datasource, this.widget, this.table.fieldDefs, val, {\n                widget: 'edit-widget-type'\n            });\n        }\n    }\n\n    loadFilterData() {\n        // If filterdataset is not bound, get the data implicitly\n        if (this._isRowFilter && isDataSetWidget(this.filterwidget) && !this.bindfilterdataset) {\n            // For live variable, get the data using distinct API\n            if (this.table.datasource.execute(DataSource.Operation.SUPPORTS_DISTINCT_API)) {\n                // check for related entity columns\n                if (this.relatedEntityName) {\n                    this.widget['is-related']  = true;\n                    this.widget['lookup-type']  = this.relatedEntityName;\n                    this.widget['lookup-field'] = _.last(_.split(this.field, '.'));\n                }\n                if (this.filterwidget === FormWidgetType.AUTOCOMPLETE) {\n                    this.filterInstance.dataoptions = getDistinctFieldProperties(this.table.datasource, this);\n                    this.filterInstance.datasource = this.table.datasource;\n                } else {\n                    getDistinctValues(this.table.datasource, this.widget, 'filterwidget').then((res: any) => {\n                        this._filterDataSet = res.data;\n                        this.setFilterWidgetDataSet();\n                    });\n                }\n            } else {\n                // For other datasources, get the data from datasource bound to table\n                this.registerDestroyListener(\n                    $watch(\n                        this.table.binddataset,\n                        this.viewParent,\n                        {},\n                        nv => this.widget.filterdataset = nv,\n                        getWatchIdentifier(this.widgetId, 'filterdataset')\n                    )\n                );\n            }\n        }\n    }\n\n    loadInlineWidgetData() {\n        // If dataset is not bound, get the data implicitly\n        if (isDataSetWidget(this['edit-widget-type']) && !this.binddataset && !this.readonly) {\n            const dataSource = this.table.datasource;\n            if (this['related-entity-name'] && this['primary-key']) {\n                // Fetch the data for the related fields\n                this.isDataSetBound = true;\n                const bindings = _.split(this.binding, '.');\n                fetchRelatedFieldData(dataSource, this.widget, {\n                    relatedField: _.head(bindings),\n                    datafield: _.last(bindings),\n                    widget: 'edit-widget-type'\n                });\n            } else if (dataSource.execute(DataSource.Operation.SUPPORTS_DISTINCT_API)) {\n                getDistinctValuesForField(dataSource, this.widget, {\n                    widget: 'edit-widget-type'\n                });\n            }\n        }\n    }\n\n    // On table datasource change, get the data for row filters\n    onDataSourceChange() {\n        this.loadFilterData();\n        this.loadInlineWidgetData();\n    }\n\n    // Set the data on the row filter widget\n    setFilterWidgetDataSet() {\n        if (this.filterInstance) {\n            this.filterInstance.dataset = this._filterDataSet;\n        }\n    }\n\n    // Set the props on the row filter widget\n    setUpFilterWidget() {\n        this.filterInstance.registerReadyStateListener(() => {\n            if (isDataSetWidget(this.filterwidget)) {\n                // if binding is department.deptId then field will be deptId\n                const field = _.last(this.binding.split('.'));\n                this.filterInstance.dataset = this._filterDataSet;\n                this.filterInstance.datafield = this.filterdatafield || field;\n                this.filterInstance.displayfield = this.filterdisplayfield || field;\n                if (this.filterwidget === FormWidgetType.AUTOCOMPLETE) {\n                    this.filterInstance.displaylabel = this.filterdisplaylabel || field;\n                    this.filterInstance.searchkey = this.filtersearchkey || field;\n                }\n            }\n            if (this.filterwidget === FormWidgetType.TIME) {\n                this.filterInstance.timepattern = this.appDefaults.timeFormat || 'hh:mm:ss a';\n            }\n            this.filterInstance.placeholder = this.filterplaceholder || '';\n        });\n    }\n\n    // On change of any validation property, set the angular form validators\n    setUpValidators(widget) {\n        const control = this.getFormControl(widget === 'inlineInstanceNew' ? '_new' : undefined);\n        if (!control) {\n            return;\n        }\n        const validators = [];\n        if (this.required) {\n            // For checkbox/toggle widget, required validation should consider true value only\n            if (this.editWidgetType === FormWidgetType.CHECKBOX || this.editWidgetType === FormWidgetType.TOGGLE) {\n                validators.push(Validators.requiredTrue);\n            } else {\n                validators.push(Validators.required);\n            }\n        }\n        if (this.maxchars) {\n            validators.push(Validators.maxLength(this.maxchars));\n        }\n        if (this.minvalue) {\n            validators.push(Validators.min(this.minvalue));\n        }\n        if (this.maxvalue) {\n            validators.push(Validators.max(this.maxvalue));\n        }\n        if (this.regexp) {\n            validators.push(Validators.pattern(this.regexp));\n        }\n        if (this[widget] && _.isFunction(this[widget].validate)) {\n            validators.push(this[widget].validate.bind(this[widget]));\n        }\n        control.setValidators(validators);\n        control.updateValueAndValidity();\n    }\n\n    // Set the props on the inline edit widget\n    setInlineWidgetProp(widget, prop, nv) {\n        if (prop === 'datepattern' && this.editWidgetType === FormWidgetType.TIME) {\n            prop = 'timepattern';\n        }\n        if (this[widget] && isDefined(nv)) {\n            this[widget][prop] = nv;\n        }\n        if (validationProps.includes(prop)) {\n            this._debounceSetUpValidators();\n            this._debounceSetUpValidatorsNew();\n        }\n    }\n\n    // Initialize the inline edit widget\n    setUpInlineWidget(widget) {\n        this[widget].registerReadyStateListener(() => {\n            if (isDataSetWidget(this['edit-widget-type'])) {\n                this[widget].dataset = this.dataset;\n            }\n            inlineWidgetProps.forEach(key => {\n                this.setInlineWidgetProp(widget, key, this[key]);\n            });\n            this[widget].datasource = this._datasource;\n            this[widget].dataoptions = this._dataoptions;\n            this.setInlineWidgetProp(widget, 'datepattern', this.editdatepattern);\n        });\n    }\n\n    getStyleDef() {\n        return `width: ${this.width || ''}; background-color: ${this.backgroundcolor || ''}; color: ${this.textcolor || ''};`;\n    }\n\n    populateFieldDef() {\n        this.width = this.width === 'px' ?  '' : (this.width || '');\n        this.field = this.binding;\n        this.displayName =  this.caption || '';\n        this.pcDisplay =  this.pcdisplay;\n        this.mobileDisplay =  this.mobiledisplay;\n        this.textAlignment =  this.textalignment;\n        this.backgroundColor =  this.backgroundcolor;\n        this.textColor =  this.textcolor;\n        this.primaryKey =  this['primary-key'];\n        this.relatedEntityName =  this['related-entity-name'];\n        this.style =  this.getStyleDef();\n        this.class =  this['col-class'];\n        this.ngclass =  this['col-ng-class'];\n        this.formatpattern =  this.formatpattern === 'toNumber' ? 'numberToString'  :  this.formatpattern;\n        this.searchable =  (this.type === 'blob' || this.type === 'clob') ? false  :  this.searchable;\n        this.limit =  this.limit ? +this.limit  :  undefined;\n        this.editWidgetType = this['edit-widget-type'] =  this['edit-widget-type'] || getEditModeWidget(this);\n        this.filterOn =  this['filter-on'];\n        this.readonly =  isDefined(this.getAttr('readonly')) ? this.getAttr('readonly') === 'true' :  (this['related-entity-name'] ? !this['primary-key'] :  _.includes(['identity', 'uniqueid', 'sequence'], this.generator));\n        this.filterwidget =  this.filterwidget || getDataTableFilterWidget(this.type || 'string');\n        this.isFilterDataSetBound = !!this.bindfilterdataset;\n        this.defaultvalue = getDefaultValue(this.defaultvalue, this.type, this.editWidgetType);\n\n        // For date time data types, if date pattern is not specified, set the app format or default format\n        if (isDateTimeType(this.type) && this.formatpattern === 'toDate' && !this.datepattern) {\n            const defaultFormat = getDisplayDateTimeFormat(this.type);\n            if (this.type === DataType.DATE) {\n                this.datepattern  = this.appDefaults.dateFormat || defaultFormat;\n            } else if (this.type === DataType.TIME) {\n                this.datepattern  = this.appDefaults.timeFormat || defaultFormat;\n            } else if (this.type === DataType.TIMESTAMP || this.type === DataType.DATETIME) {\n                this.datepattern  = this.appDefaults.dateTimeFormat || defaultFormat;\n            }\n        }\n    }\n\n    onPropertyChange(key, nv, ov) {\n        if (!this._propsInitialized) {\n            return;\n        }\n        switch (key) {\n            case 'caption':\n                this.displayName = nv || '';\n                this.setProperty('displayName', this.displayName);\n                break;\n            case 'defaultvalue':\n                this.defaultvalue = getDefaultValue(this.defaultvalue, this.type, this.editWidgetType);\n                break;\n            case 'show':\n                this.table.redraw(true);\n                break;\n            case 'filterdataset':\n                this._filterDataSet = nv;\n                this.setFilterWidgetDataSet();\n                break;\n            case 'editdatepattern':\n                this.setInlineWidgetProp('inlineInstance', 'datepattern', nv);\n                this.setInlineWidgetProp('inlineInstanceNew', 'datepattern', nv);\n                break;\n            default:\n                if (inlineWidgetProps.includes(key)) {\n                    this.setInlineWidgetProp('inlineInstance', key, nv);\n                    this.setInlineWidgetProp('inlineInstanceNew', key, nv);\n                }\n                break;\n        }\n\n        super.onPropertyChange(key, nv, ov);\n    }\n\n    setProperty(property, nv) {\n        this[property] = nv;\n        switch (property) {\n            case 'displayName':\n                this.table.callDataGridMethod('setColumnProp', this.field, property, nv);\n                break;\n            default:\n                this.table.redraw(true);\n        }\n    }\n}\n","import { PROP_ANY, PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-table-column',\n        new Map(\n            [\n                ['accessroles', PROP_STRING],\n                ['backgroundcolor', PROP_STRING],\n                ['binding', PROP_STRING],\n                ['caption', PROP_STRING],\n                ['checkedvalue', PROP_STRING],\n                ['col-class', PROP_STRING],\n                ['col-ng-class', PROP_STRING],\n                ['currencypattern', PROP_STRING],\n                ['customExpression', PROP_BOOLEAN], // Internal property to check if column has custom expression\n                ['datafield', PROP_STRING],\n                ['dataoptions', PROP_ANY],\n                ['dataset', PROP_ANY],\n                ['datasource', PROP_STRING],\n                ['datepattern', PROP_STRING],\n                ['debouncetime', {value: 250, ...PROP_NUMBER}],\n                ['defaultvalue', PROP_STRING],\n                ['disabled', PROP_BOOLEAN],\n                ['displayfield', PROP_STRING],\n                ['displaylabel', PROP_STRING],\n                ['editdatepattern', PROP_STRING],\n                ['edit-widget-type', PROP_STRING],\n                ['editinputtype', PROP_STRING],\n                ['exportexpression', PROP_STRING],\n                ['filterdataset', PROP_STRING],\n                ['filterdatafield', PROP_STRING],\n                ['filterdisplayfield', PROP_STRING],\n                ['filterdisplaylabel', PROP_STRING],\n                ['filterexpressions', {value: '{}', ...PROP_STRING}],\n                ['filtersearchkey', PROP_STRING],\n                ['filter-on', PROP_STRING],\n                ['filteronfilter', PROP_STRING],\n                ['filterplaceholder', PROP_STRING],\n                ['filterwidget', PROP_STRING],\n                ['filterinputtype', PROP_STRING],\n                ['formatpattern', PROP_STRING],\n                ['fractionsize', PROP_STRING],\n                ['generator', PROP_STRING],\n                ['limit', PROP_NUMBER],\n                ['matchmode', PROP_STRING],\n                ['maxchars', PROP_NUMBER],\n                ['maxvalue', PROP_NUMBER],\n                ['mobiledisplay', {value: true, ...PROP_BOOLEAN}],\n                ['minvalue', PROP_NUMBER],\n                ['pcdisplay', {value: true, ...PROP_BOOLEAN}],\n                ['period', PROP_BOOLEAN],\n                ['placeholder', PROP_STRING],\n                ['prefix', PROP_STRING],\n                ['primary-key', PROP_BOOLEAN],\n                ['readonly', PROP_BOOLEAN],\n                ['regexp', PROP_ANY],\n                ['related-entity-name', PROP_STRING],\n                ['required', PROP_BOOLEAN],\n                ['rowactionsposition', PROP_STRING],\n                ['searchkey', PROP_STRING],\n                ['searchable', {value: true, ...PROP_BOOLEAN}],\n                ['suffix', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n                ['showdropdownon', {value: 'default', ...PROP_STRING}],\n                ['sortable', {value: true, ...PROP_BOOLEAN}],\n                ['textalignment', {value: 'left', ...PROP_STRING}],\n                ['textcolor', PROP_STRING],\n                ['type', {value: 'string', ...PROP_STRING}],\n                ['uncheckedvalue', PROP_STRING],\n                ['validationmessage', PROP_STRING],\n                ['widget-type', PROP_STRING],\n                ['width', PROP_STRING],\n            ]\n        )\n    );\n};\n","import { Directive, Inject, Self } from '@angular/core';\n\nimport { $appDigest, AbstractDialogService, App, DataSource, triggerFn } from '@wm/core';\n\nimport { TableComponent } from './table.component';\nimport { refreshDataSource } from '../../../utils/data-utils';\n\ndeclare const $;\n\nconst OPERATION = {\n    'NEW': 'new',\n    'EDIT': 'edit',\n    'DELETE': 'delete'\n};\n\n@Directive({\n    selector: '[wmTableCUD]'\n})\nexport class TableCUDDirective {\n\n    constructor(\n        @Self() @Inject(TableComponent) private table,\n        private dialogService: AbstractDialogService,\n        private  app: App\n    ) {\n        table.initiateSelectItem = this.initiateSelectItem.bind(this);\n        table.updateVariable = this.updateVariable.bind(this);\n        table.updateRecord = this.updateRecord.bind(this);\n        table.deleteRecord = this.deleteRecord.bind(this);\n        table.insertRecord = this.insertRecord.bind(this);\n        table.editRow = this.editRow.bind(this);\n        table.addNewRow = this.addNewRow.bind(this);\n        table.addRow = this.addNewRow.bind(this);\n        table.deleteRow = this.deleteRow.bind(this);\n        table.onRecordDelete = this.onRecordDelete.bind(this);\n        table.hideEditRow = this.hideEditRow.bind(this);\n        table.saveRow = this.saveRow.bind(this);\n        table.cancelRow = this.cancelRow.bind(this);\n    }\n\n    private selectItemOnSuccess(row, skipSelectItem, callBack) {\n        /*$timeout is used so that by then $is.dataset has the updated value.\n         * Selection of the item is done in the callback of page navigation so that the item that needs to be selected actually exists in the grid.*/\n        /*Do not select the item if skip selection item is specified*/\n        setTimeout(() => {\n            if (!skipSelectItem) {\n                this.table.selectItem(row, this.table.dataset);\n            }\n            triggerFn(callBack);\n        }, 250);\n    }\n\n    initiateSelectItem(index, row, skipSelectItem?, isStaticVariable?, callBack?) {\n        /*index === \"last\" indicates that an insert operation has been successfully performed and navigation to the last page is required.\n         * Hence increment the \"dataSize\" by 1.*/\n        if (index === 'last') {\n            if (!isStaticVariable) {\n                this.table.dataNavigator.dataSize += 1;\n            }\n            /*Update the data in the current page in the grid after insert/update operations.*/\n            if (!this.table.isNavigationEnabled()) {\n                index = 'current';\n            }\n        }\n        /*Re-calculate the paging values like pageCount etc that could change due to change in the dataSize.*/\n        this.table.dataNavigator.calculatePagingValues();\n        this.table.dataNavigator.navigatePage(index, null, true, () => {\n            if (this.table.isNavigationEnabled() || isStaticVariable) {\n                this.selectItemOnSuccess(row, skipSelectItem, callBack);\n            }\n        });\n    }\n\n    updateVariable(row?, callBack?) {\n        const dataSource = this.table.datasource;\n        if (!dataSource) {\n            return;\n        }\n\n        dataSource.execute(DataSource.Operation.FETCH_DISTINCT_VALUES);\n\n        if (!this.table.isNavigationEnabled()) {\n            const sortInfo = this.table.sortInfo;\n            const sortOptions  = sortInfo && sortInfo.direction ? (sortInfo.field + ' ' + sortInfo.direction) : '';\n            refreshDataSource(dataSource, {\n                page: 1,\n                filterFields: this.table.getFilterFields(this.table.filterInfo),\n                orderBy: sortOptions,\n                matchMode: 'anywhereignorecase'\n            }).then(() => {\n                $appDigest();\n                this.selectItemOnSuccess(row, true, callBack);\n            });\n        }\n    }\n\n    private insertSuccessHandler(response, options) {\n        /*Display appropriate error message in case of error.*/\n        if (response.error) {\n            this.table.invokeEventCallback('error', {$event: options.event, $operation: OPERATION.NEW, $data: response.error});\n            this.table.toggleMessage(true, 'error', this.table.errormessage || response.error);\n            triggerFn(options.error, response);\n        } else {\n            if (options.event) {\n                const row = $(options.event.target).closest('tr');\n                this.table.callDataGridMethod('hideRowEditMode', row);\n            }\n            this.table.toggleMessage(true, 'success', this.table.insertmessage);\n            if (this.table.datasource.execute(DataSource.Operation.SUPPORTS_CRUD)) {\n                this.table.initiateSelectItem(this.table.getNavigationTargetBySortInfo(), response, undefined, false, options.callBack);\n                this.updateVariable(response, options.callBack);\n            } else if (!this.table.datasource.execute(DataSource.Operation.IS_API_AWARE)) {\n                this.table.initiateSelectItem(this.table.getNavigationTargetBySortInfo(), response, undefined, false, options.callBack);\n            }\n            triggerFn(options.success, response);\n            this.table.invokeEventCallback('rowinsert', {$event: options.event, $data: response, row: response});\n        }\n    }\n\n    insertRecord(options) {\n        const dataSource = this.table.datasource;\n        if (!dataSource) {\n            return;\n        }\n        const dataObject = {\n            row : options.row,\n            skipNotification : true,\n            period: options.period\n        };\n\n        if (dataSource.execute(DataSource.Operation.SUPPORTS_CRUD) || !dataSource.execute(DataSource.Operation.IS_API_AWARE)) {\n            if (!dataSource.execute(DataSource.Operation.IS_API_AWARE)) {\n                dataSource.execute(DataSource.Operation.ADD_ITEM, {item: options.row});\n                this.insertSuccessHandler(options.row, options);\n                return;\n            }\n            dataSource.execute(DataSource.Operation.INSERT_RECORD, dataObject).then(response => {\n                this.insertSuccessHandler(response, options);\n            }, error => {\n                this.table.invokeEventCallback('error', {$event: options.event, $operation: OPERATION.NEW, $data: error});\n                this.table.toggleMessage(true, 'error', this.table.errormessage || error);\n                triggerFn(options.error, error);\n                triggerFn(options.callBack, undefined, true);\n            });\n        } else {\n            this.table.invokeEventCallback('rowinsert', {$event: options.event, row: options.row});\n        }\n    }\n\n    private updateSuccessHandler(response, options) {\n        /*Display appropriate error message in case of error.*/\n        if (response.error) {\n            this.table.invokeEventCallback('error', {$event: options.event, $operation: OPERATION.EDIT, $data: response.error});\n            /*disable readonly and show the appropriate error*/\n            this.table.toggleMessage(true, 'error', this.table.errormessage || response.error);\n            triggerFn(options.error, response);\n        } else {\n            if (options.event) {\n                const row = $(options.event.target).closest('tr');\n                this.table.callDataGridMethod('hideRowEditMode', row);\n            }\n            this.table.toggleMessage(true, 'success', this.table.updatemessage);\n            if (this.table.datasource.execute(DataSource.Operation.SUPPORTS_CRUD)) {\n                this.table.initiateSelectItem('current', response, undefined, false, options.callBack);\n                this.updateVariable(response, options.callBack);\n            }\n            triggerFn(options.success, response);\n            this.table.invokeEventCallback('rowupdate', {$event: options.event, $data: response, row: response});\n        }\n    }\n\n    updateRecord(options) {\n        const dataSource = this.table.datasource;\n        if (!dataSource) {\n            return;\n        }\n        const dataObject = {\n            row : options.row,\n            prevData : options.prevData,\n            skipNotification : true,\n            period : options.period\n        };\n\n        if (dataSource.execute(DataSource.Operation.SUPPORTS_CRUD) || !dataSource.execute(DataSource.Operation.IS_API_AWARE)) {\n            if (!dataSource.execute(DataSource.Operation.IS_API_AWARE)) {\n                dataSource.execute(DataSource.Operation.SET_ITEM, {prevItem: options.prevData, item: options.row});\n                this.updateSuccessHandler(options.row, options);\n                return;\n            }\n            dataSource.execute(DataSource.Operation.UPDATE_RECORD, dataObject).then(response => {\n                this.updateSuccessHandler(response, options);\n            }, error => {\n                this.table.invokeEventCallback('error', {$event: options.event, $operation: OPERATION.EDIT, $data: error});\n                this.table.toggleMessage(true, 'error', this.table.errormessage || error);\n                triggerFn(options.error, error);\n                triggerFn(options.callBack, undefined, true);\n            });\n        } else {\n            this.table.invokeEventCallback('rowupdate', {$event: options.event, row: options.row});\n        }\n    }\n\n    onRecordDelete(callBack?) {\n        let index;\n        /*Check for sanity*/\n        if (this.table.dataNavigator) {\n            this.table.dataNavigator.dataSize -= 1;\n            this.table.dataNavigator.calculatePagingValues();\n            /*If the current page does not contain any records due to deletion, then navigate to the previous page.*/\n            index = this.table.dataNavigator.pageCount < this.table.dataNavigator.dn.currentPage ? 'prev' : undefined;\n            this.table.dataNavigator.navigatePage(index, null, true, () => {\n                setTimeout(() => {\n                    triggerFn(callBack);\n                }, undefined, false);\n            });\n        }\n    }\n\n    private deleteSuccessHandler(row, response?, evt?, callBack?) {\n        /* check the response whether the data successfully deleted or not , if any error occurred show the\n         * corresponding error , other wise remove the row from grid */\n        if (response && response.error) {\n            this.table.toggleMessage(true, 'error', this.table.errormessage || response.error);\n            return;\n        }\n        this.onRecordDelete(callBack);\n        if (this.table.datasource.execute(DataSource.Operation.SUPPORTS_CRUD)) {\n            this.updateVariable(row, callBack);\n        }\n        this.table.toggleMessage(true, 'success', this.table.deletemessage);\n        // custom EventHandler for row deleted event\n        this.table.invokeEventCallback('rowdelete', {$event: evt, $data: row, row});\n        this.table.invokeEventCallback('rowdeleted', {$event: evt, $data: row, row});\n    }\n\n    private deleteFn(options) {\n        const dataSource = this.table.datasource;\n        if (!dataSource) {\n            return;\n        }\n        if (dataSource.execute(DataSource.Operation.SUPPORTS_CRUD) || !dataSource.execute(DataSource.Operation.IS_API_AWARE)) {\n            if (!dataSource.execute(DataSource.Operation.IS_API_AWARE)) {\n                dataSource.execute(DataSource.Operation.REMOVE_ITEM, {item: options.row});\n                this.deleteSuccessHandler(options.row, undefined, options.evt, options.callBack);\n                return;\n            }\n            dataSource.execute(DataSource.Operation.DELETE_RECORD, {\n                row: options.row,\n                skipNotification : true,\n                period: options.period\n            }).then(response => {\n                this.deleteSuccessHandler(response, options.row, options.evt, options.callBack);\n            }, error => {\n                triggerFn(options.callBack, undefined, true);\n                this.table.invokeEventCallback('error', {$event: options.evt, $operation: OPERATION.DELETE, $data: error});\n                this.table.toggleMessage(true, 'error', this.table.errormessage || error);\n            });\n        } else {\n            this.table.invokeEventCallback('rowdelete', {$event: options.evt, row: options.row});\n        }\n        triggerFn(options.cancelRowDeleteCallback);\n    }\n\n    deleteRecord(options) {\n        if (!this.table.confirmdelete) {\n            this.deleteFn(options);\n            triggerFn(options.cancelRowDeleteCallback);\n            return;\n        }\n        this.dialogService.showAppConfirmDialog({\n            title: this.app.appLocale.MESSAGE_DELETE_RECORD || 'Delete Record',\n            iconclass: 'wi wi-delete fa-lg',\n            message: this.table.confirmdelete,\n            oktext: this.table.deleteoktext,\n            canceltext: this.table.deletecanceltext,\n            onOk: () => {\n                this.deleteFn(options);\n                this.dialogService.closeAppConfirmDialog();\n            },\n            onCancel: () => {\n                triggerFn(options.cancelRowDeleteCallback);\n                this.dialogService.closeAppConfirmDialog();\n            },\n            onOpen: () => {\n                // Focus the cancel button on open\n                $('.cancel-action').focus();\n            }\n        });\n    }\n\n    editRow(evt?) {\n        let row;\n        if (evt && evt.target) {\n            this.table.callDataGridMethod('toggleEditRow', evt, {'selectRow': true, action: 'edit'});\n        } else {\n            // For live form, call the update function with selected item\n            if (this.table.editmode === 'form' || this.table.editmode === 'dialog') {\n                row = evt || this.table.selectedItems[0];\n                this.table.gridOptions.beforeRowUpdate(row);\n            } else {\n                // Wait for the selected item to get updated\n                setTimeout(() => {\n                    row = this.table.datagridElement.find('tr.active');\n                    if (row.length) {\n                        this.table.callDataGridMethod('toggleEditRow', undefined, {$row: row, action: 'edit'});\n                    }\n                });\n            }\n        }\n    }\n\n    addNewRow() {\n        if (!this.table.isGridEditMode) { // If grid is already in edit mode, do not add new row\n            this.table.callDataGridMethod('addNewRow');\n            if (this.table._liveTableParent) {\n                this.table._liveTableParent.addNewRow();\n            }\n        }\n    }\n\n    deleteRow(evt) {\n        let row;\n        if (evt && evt.target) {\n            this.table.callDataGridMethod('deleteRowAndUpdateSelectAll', evt);\n        } else {\n            // Wait for the selected item to get updated\n            setTimeout(() => {\n                row = evt || this.table.selectedItems[0];\n                this.deleteRecord({row});\n            });\n        }\n    }\n\n    // Function to hide the edited row\n    hideEditRow() {\n        const $row = this.table.datagridElement.find('tr.row-editing');\n        if ($row.length) {\n            this.table.callDataGridMethod('hideRowEditMode', $row);\n        }\n    }\n\n    // Function to save the row\n    saveRow() {\n        this.table.callDataGridMethod('saveRow');\n    }\n\n    // Function to cancel the edit\n    cancelRow() {\n        const $row = this.table.datagridElement.find('tr.row-editing');\n        if ($row.length) {\n            this.table.callDataGridMethod('cancelEdit', $row);\n        }\n    }\n}\n","import { Directive, Inject, Self } from '@angular/core';\n\nimport { $appDigest, DataSource, DataType, FormWidgetType, getClonedObject, isDefined, isNumberType } from '@wm/core';\n\nimport { TableComponent } from './table.component';\nimport { refreshDataSource } from '../../../utils/data-utils';\nimport { getMatchModeMsgs, getMatchModeTypesMap, isDataSetWidget } from '../../../utils/widget-utils';\n\ndeclare const _, $;\ndeclare const moment;\n\nconst emptyMatchModes = ['null', 'empty', 'nullorempty', 'isnotnull', 'isnotempty'];\n\n// Get search value based on the time\nconst getSearchValue = (value, type) => {\n    if (!isDefined(value) || value === '') {\n        return undefined;\n    }\n    if (isNumberType(type)) {\n        return _.toNumber(value);\n    }\n    if (type === DataType.DATETIME) {\n        return moment(value).valueOf();\n    }\n    return _.toString(value).toLowerCase();\n};\n\n// Filter the data based on the search value and conditions\nconst getFilteredData = (data, searchObj) => {\n    const searchVal = getSearchValue(searchObj.value, searchObj.type);\n    let currentVal;\n    if (!isDefined(searchVal) && !_.includes(emptyMatchModes, searchObj.matchMode)) {\n        return data;\n    }\n    data = data.filter((obj) => {\n        let isExists;\n        if (searchObj.field) {\n            currentVal = getSearchValue(_.get(obj, searchObj.field), searchObj.type);\n        } else {\n            currentVal = _.values(obj).join(' ').toLowerCase(); // If field is not there, search on all the columns\n        }\n        switch (searchObj.matchMode) {\n            case 'start':\n                isExists = _.startsWith(currentVal, searchVal as string);\n                break;\n            case 'end':\n                isExists = _.endsWith(currentVal, searchVal as string);\n                break;\n            case 'exact':\n                isExists = _.isEqual(currentVal, searchVal);\n                break;\n            case 'notequals':\n                isExists = !_.isEqual(currentVal, searchVal);\n                break;\n            case 'null':\n                isExists = _.isNull(currentVal);\n                break;\n            case 'isnotnull':\n                isExists = !_.isNull(currentVal);\n                break;\n            case 'empty':\n                isExists = _.isEmpty(currentVal);\n                break;\n            case 'isnotempty':\n                isExists = !_.isEmpty(currentVal);\n                break;\n            case 'nullorempty':\n                isExists = _.isNull(currentVal) || _.isEmpty(currentVal);\n                break;\n            case 'lessthan':\n                isExists = currentVal < searchVal;\n                break;\n            case 'lessthanequal':\n                isExists = currentVal <= searchVal;\n                break;\n            case 'greaterthan':\n                isExists = currentVal > searchVal;\n                break;\n            case 'greaterthanequal':\n                isExists = currentVal >= searchVal;\n                break;\n            default:\n                isExists = isNumberType(searchObj.type) ? _.isEqual(currentVal, searchVal) : _.includes(currentVal, searchVal);\n                break;\n        }\n        return isExists;\n    });\n    return data;\n};\n\n// Set the filter fields as required by datasource\nconst setFilterFields = (filterFields, searchObj) => {\n    const field = searchObj && searchObj.field;\n    /*Set the filter options only when a field/column has been selected.*/\n    if (field) {\n        filterFields[field] = {\n            'value'     : searchObj.value,\n            'logicalOp' : 'AND'\n        };\n        if (searchObj.matchMode) {\n            filterFields[field].matchMode = searchObj.matchMode;\n        }\n    }\n};\n\n// Transform filter fields from array to object having field names as keys\nconst transformFilterField = (userFilters, filterField) => {\n    if (filterField.field) {\n        userFilters[filterField.field] = {\n            value: filterField.value,\n            matchMode: filterField.matchMode,\n            type: filterField.type\n        };\n    }\n};\n\n@Directive({\n    selector: '[wmTableFilterSort]'\n})\nexport class TableFilterSortDirective {\n\n    constructor(@Self() @Inject(TableComponent) private table) {\n        table._searchSortHandler = this.searchSortHandler.bind(this);\n        table.getSearchResult = this.getSearchResult.bind(this);\n        table.getSortResult = this.getSortResult.bind(this);\n        table.checkFiltersApplied = this.checkFiltersApplied.bind(this);\n        table.getFilterFields = this.getFilterFields.bind(this);\n        table.onRowFilterChange = this.onRowFilterChange.bind(this);\n        table.onFilterConditionSelect = this.onFilterConditionSelect.bind(this);\n        table.showClearIcon = this.showClearIcon.bind(this);\n        table.clearRowFilter = this.clearRowFilter.bind(this);\n        table.matchModeTypesMap = getMatchModeTypesMap();\n        table.matchModeMsgs = getMatchModeMsgs(table.appLocale);\n        table.emptyMatchModes = emptyMatchModes;\n        table.getNavigationTargetBySortInfo = this.getNavigationTargetBySortInfo.bind(this);\n        table.refreshData = this.refreshData.bind(this);\n        table.clearFilter = this.clearFilter.bind(this);\n    }\n\n    // Get first or last page based on sort info of primary key\n    getNavigationTargetBySortInfo() {\n        return this.table.sortInfo && this.table.sortInfo.direction === 'desc' &&\n                    _.includes(this.table.primaryKey, this.table.sortInfo.field) ? 'first' : 'last';\n    }\n\n    // Get the filter fields as required by datasource\n    getFilterFields(searchObj) {\n        const filterFields = {};\n        if (_.isArray(searchObj)) {\n            _.forEach(searchObj,  obj => {\n                setFilterFields(filterFields, obj);\n            });\n        } else {\n            setFilterFields(filterFields, searchObj);\n        }\n        return filterFields;\n    }\n\n    // Reset the sort based on sort returned by the call\n    resetSortStatus(variableSort) {\n        let gridSortString;\n        if (!_.isEmpty(this.table.sortInfo) && this.table.datasource) {\n            gridSortString = this.table.sortInfo.field + ' ' + this.table.sortInfo.direction;\n            variableSort = this.table.datasource.execute(DataSource.Operation.GET_OPTIONS).orderBy || variableSort;\n            if (variableSort) { // If multiple order by fields are present, compare with the first one\n                variableSort = _.head(_.split(variableSort, ','));\n            }\n            if (gridSortString !== variableSort) {\n                this.table.callDataGridMethod('resetSortIcons');\n                this.table.sortInfo = {};\n                this.table.setDataGridOption('sortInfo', {});\n            }\n        }\n    }\n\n    // Clear the all the filters applied\n    clearFilter(skipFilter) {\n        let $gridElement;\n        this.table.filterInfo = {};\n        if (this.table.filtermode === 'multicolumn') {\n            this.table.fieldDefs.forEach(col => {\n                if (col.resetFilter) {\n                    col.resetFilter();\n                }\n            });\n            if (!skipFilter) {\n                this.table.onRowFilterChange();\n            }\n        } else if (this.table.filtermode === 'search') {\n            $gridElement = this.table.datagridElement;\n            $gridElement.find('[data-element=\"dgSearchText\"]').val('');\n            $gridElement.find('[data-element=\"dgFilterValue\"]').val('');\n            if (!skipFilter) {\n                $gridElement.find('.app-search-button').trigger('click');\n            }\n        }\n    }\n\n    // Check the filters applied and remove if dat does not contain any filters\n    checkFiltersApplied(variableSort) {\n        if (!this.table.datasource) {\n            return;\n        }\n        if (this.table.datasource.execute(DataSource.Operation.SUPPORTS_SERVER_FILTER)) {\n            if (_.isEmpty(this.table.datasource.execute(DataSource.Operation.GET_OPTIONS).filterFields) && _.isEmpty(this.table.filterInfo)) {\n                this.clearFilter(true);\n            }\n            this.resetSortStatus(variableSort);\n            return;\n        }\n        if (this.table.datasource.execute(DataSource.Operation.IS_PAGEABLE)) {\n            this.resetSortStatus(variableSort);\n        }\n    }\n\n    // Returns data filtered using searchObj\n    getSearchResult(data, searchObj) {\n        if (!searchObj) {\n            return data;\n        }\n        if (_.isArray(searchObj)) {\n            searchObj.forEach((obj) => {\n                data = getFilteredData(data, obj);\n            });\n        } else {\n            data = getFilteredData(data, searchObj);\n        }\n        return data;\n    }\n\n    // Returns data sorted using sortObj\n    getSortResult(data, sortObj) {\n        if (sortObj && sortObj.direction) {\n            data = _.orderBy(data, sortObj.field, sortObj.direction);\n        }\n        return data;\n    }\n\n    // This method handles the client side sort and search\n    private handleClientSideSortSearch(searchSortObj, e, type) {\n        this.table._isClientSearch = true;\n\n        let data;\n        data = this.table.isNavigationEnabled() ? getClonedObject(this.table.__fullData) : getClonedObject(this.table.dataset);\n        if (type === 'search') {\n            this.table.filterInfo = searchSortObj;\n        } else {\n            this.table.sortInfo = searchSortObj;\n        }\n        if (_.isObject(data) && !_.isArray(data)) {\n            data = [data];\n        }\n        /*Both the functions return same 'data' if arguments are undefined*/\n        data = this.getSearchResult(data, this.table.filterInfo);\n        data = this.getSortResult(data, this.table.sortInfo);\n        this.table.serverData = data;\n\n        if (type === 'sort') {\n            // Calling 'onSort' event\n            this.table.invokeEventCallback('sort', {$event: e, $data: {\n                    data: this.table.serverData,\n                    sortDirection: this.table.sortInfo.direction,\n                    colDef: this.table.columns[this.table.sortInfo.field]\n                }});\n        }\n\n        if (this.table.isNavigationEnabled()) {\n            // Reset the page number to 1\n            this.table.dataNavigator.dn.currentPage = 1;\n            this.table.dataNavigator.setPagingValues(data);\n        } else {\n            this.table.setGridData(this.table.serverData);\n        }\n    }\n\n    // This method handles the search for pageable datasource\n    private handleSinglePageSearch(searchObj) {\n        this.table._isPageSearch = true;\n\n        let data  = getClonedObject(this.table.gridData);\n        const $rows = this.table.datagridElement.find('tbody tr.app-datagrid-row');\n        this.table.filterInfo = searchObj;\n        data = this.getSearchResult(data, searchObj);\n        // Compared the filtered data and original data, to show or hide the rows\n        _.forEach(this.table.gridData, (value, index) => {\n            const $row = $($rows[index]);\n            if (_.find(data, obj => _.isEqual(obj, value))) {\n                $row.show();\n            } else {\n                $row.hide();\n            }\n        });\n        if (data && data.length) {\n            this.table.callDataGridMethod('setStatus', 'ready');\n            // Select the first row after the search for single select\n            if (this.table.gridfirstrowselect && !this.table.multiselect) {\n                this.table.callDataGridMethod('selectFirstRow', true, true);\n            }\n        } else {\n            this.table.callDataGridMethod('setStatus', 'nodata', this.table.nodatamessage);\n            this.table.selecteditem = undefined;\n        }\n        this.table.callDataGridMethod('updateSelectAllCheckboxState');\n    }\n\n    // This method handles the search for server side variables\n    private handleServerSideSearch(searchObj) {\n        this.table.filterInfo = searchObj;\n\n        if (!this.table.datasource) {\n            return;\n        }\n\n        const sortInfo     = this.table.sortInfo;\n        const sortOptions  = sortInfo && sortInfo.direction ? (sortInfo.field + ' ' + sortInfo.direction) : '';\n        const filterFields = this.getFilterFields(searchObj);\n        refreshDataSource(this.table.datasource, {\n            page: 1,\n            filterFields : filterFields,\n            orderBy : sortOptions\n        }).then(() => {\n            $appDigest();\n        }, () => {\n            this.table.toggleMessage(true, 'error', this.table.nodatamessage);\n        });\n    }\n\n    // This method handles the sort for server side variables\n    private handleSeverSideSort(sortObj, e) {\n        // Update the sort info for passing to datagrid\n        this.table.gridOptions.sortInfo.field = sortObj.field;\n        this.table.gridOptions.sortInfo.direction = sortObj.direction;\n        this.table.sortInfo = getClonedObject(sortObj);\n\n        const sortOptions  = sortObj && sortObj.direction ? (sortObj.field + ' ' + sortObj.direction) : '';\n        const filterFields = this.getFilterFields(this.table.filterInfo);\n\n        refreshDataSource(this.table.datasource, {\n            page : 1,\n            filterFields : filterFields,\n            orderBy : sortOptions\n        }).then((response) => {\n            $appDigest();\n            const data = (response && response.data) ? response.data : response;\n            this.table.invokeEventCallback('sort', {$event: e, $data: {\n                    data,\n                    sortDirection: sortObj.direction,\n                    colDef: this.table.columns[sortObj.field]\n                }});\n        });\n    }\n\n    private searchHandler(searchSortObj, e, type) {\n        let filterFields = getClonedObject(searchSortObj);\n        const dataSource = this.table.datasource;\n        if (!dataSource) {\n            return;\n        }\n        let output;\n        const userFilters = {};\n        // Transform filter fields from array to object having field names as keys\n        if (_.isArray(filterFields)) {\n            filterFields.forEach(filterField => {\n                transformFilterField(userFilters, filterField);\n            });\n        } else {\n            transformFilterField(userFilters, filterFields);\n        }\n        output = this.table.invokeEventCallback('beforefilter', {$event: e, $data: userFilters, columns: userFilters});\n        // If callback returns false, don't trigger the filter call\n        if (output === false) {\n            return;\n        }\n        // Transform back the filter fields from object to array\n        filterFields = [];\n        _.forEach(userFilters, (val, key) => {\n            filterFields.push({\n                field: key,\n                matchMode: val.matchMode,\n                type: val.type,\n                value: val.value\n            });\n        });\n        if (dataSource.execute(DataSource.Operation.SUPPORTS_SERVER_FILTER)) {\n            this.handleServerSideSearch(filterFields);\n            return;\n        }\n        if (dataSource.execute(DataSource.Operation.IS_API_AWARE) && dataSource.execute(DataSource.Operation.IS_PAGEABLE)) {\n            this.handleSinglePageSearch(filterFields);\n        } else {\n            this.handleClientSideSortSearch(filterFields, e, type);\n        }\n    }\n\n    private sortHandler(searchSortObj, e, type) {\n        const dataSource = this.table.datasource;\n        if (!dataSource) {\n            return;\n        }\n        if (dataSource.execute(DataSource.Operation.IS_PAGEABLE)) {\n            this.handleSeverSideSort(searchSortObj, e);\n        } else {\n            this.handleClientSideSortSearch(searchSortObj, e, type);\n        }\n    }\n\n    // This method is triggered by jquery table\n    searchSortHandler(searchSortObj, e, type) {\n        if (type === 'search') {\n            this.searchHandler(searchSortObj, e, type);\n        } else {\n            this.sortHandler(searchSortObj, e, type);\n        }\n    }\n\n    // Method to show/hide clear icon in multi column filter\n    showClearIcon(fieldName) {\n        const value = this.table.rowFilter[fieldName] && this.table.rowFilter[fieldName].value;\n        return isDefined(value) && value !== '' && value !== null;\n    }\n\n    // Method clear the filter value in multi column filter\n    clearRowFilter(fieldName) {\n        if (this.table.rowFilter && this.table.rowFilter[fieldName]) {\n            this.table.columns[fieldName].resetFilter();\n            this.onRowFilterChange(fieldName);\n        }\n    }\n\n    // This method is triggered on select of condition in multi column filter\n    onFilterConditionSelect(fieldName, condition) {\n        this.table.rowFilter[fieldName] = this.table.rowFilter[fieldName] || {};\n        this.table.rowFilter[fieldName].matchMode = condition;\n        // For empty match modes, clear off the value and call filter\n        if (_.includes(this.table.emptyMatchModes, condition)) {\n            this.table.columns[fieldName].resetFilter();\n            this.table.onRowFilterChange();\n        } else {\n            // If value is present, call the filter. Else, focus on the field\n            if (isDefined(this.table.rowFilter[fieldName].value) && this.table.rowFilter[fieldName].value !== '') {\n                this.table.onRowFilterChange();\n            } else {\n                setTimeout(() => {\n                    this.table.columns[fieldName].filterInstance.focus();\n                });\n            }\n        }\n    }\n\n    // Method to get the updated values when filter on field is changed for multicolumn filter\n    private getFilterOnFieldValues(filterDef) {\n        if (!this.table.datasource || !this.table.datasource.execute(DataSource.Operation.SUPPORTS_DISTINCT_API)) {\n            return;\n        }\n\n        const fieldName = filterDef.field;\n        const formFields = this.table.fullFieldDefs;\n        const filterOnFields = _.filter(formFields, {'filteronfilter': fieldName});\n        const newVal = _.get(this.table.rowFilter, [fieldName, 'value']);\n\n        // Loop over the fields for which the current field is filter on field\n        _.forEach(filterOnFields, filterField => {\n            const filterOn = filterField.filteronfilter;\n            const filterKey = filterField.field;\n            const filterFields = {};\n            const filterWidget = filterField.filterwidget;\n\n            if (!isDataSetWidget(filterWidget) || filterOn === filterKey || filterField.isFilterDataSetBound) {\n                return;\n            }\n\n            filterFields[filterOn] = (isDefined(newVal) && newVal !== '' && newVal !== null) ? {'value' : newVal} : {};\n\n            if (filterWidget === FormWidgetType.AUTOCOMPLETE && filterField.filterInstance.dataoptions) {\n                filterField.filterInstance.dataoptions.filterFields = filterFields;\n            } else {\n                this.table.datasource.execute(DataSource.Operation.GET_DISTINCT_DATA_BY_FIELDS, {\n                    'fields'         : filterKey,\n                    'filterFields'   : filterFields\n                }).then(data => {\n                    filterField.filterdataset = data.data;\n                });\n            }\n        });\n    }\n\n    // This method is triggered on value change in multi column filter\n    onRowFilterChange(fieldName) {\n        const searchObj = [];\n        const field = _.find(this.table.fullFieldDefs, {'field': fieldName});\n        // Convert row filters to a search object and call search handler\n        _.forEach(this.table.rowFilter, (value, key) => {\n            if ((isDefined(value.value) && value.value !== '') || _.includes(this.table.emptyMatchModes, value.matchMode)) {\n                if (field && key === field.field) {\n                    value.type      = value.type || field.type;\n                    value.matchMode = value.matchMode || _.get(this.table.matchModeTypesMap[value.type], 0);\n                }\n                searchObj.push({\n                    field: key,\n                    value: value.value,\n                    matchMode: value.matchMode,\n                    type: value.type\n                });\n            }\n        });\n        this.table.gridOptions.searchHandler(searchObj, undefined, 'search');\n\n        // If field is passed, update any filter on field values if present\n        if (field) {\n            this.getFilterOnFieldValues(field);\n        }\n    }\n\n    refreshData(isSamePage) {\n        if (!this.table.datasource) {\n            return;\n        }\n        const page = isSamePage ? this.table.dataNavigator.dn.currentPage : 1;\n        const sortInfo     = this.table.sortInfo;\n        const sortOptions  = sortInfo && sortInfo.direction ? (sortInfo.field + ' ' + sortInfo.direction) : '';\n        const filterFields = this.getFilterFields(this.table.filterInfo);\n        refreshDataSource(this.table.datasource, {\n            page: page,\n            filterFields : filterFields,\n            orderBy : sortOptions\n        });\n    }\n}\n","import { Directive, Inject, Injector, OnInit, Optional, Self } from '@angular/core';\n\nimport { BaseComponent } from '../../base/base.component';\nimport { registerProps } from './table-row-action.props';\nimport { provideAsWidgetRef } from '../../../../utils/widget-utils';\nimport { TableComponent } from '../table.component';\nimport { Context } from '../../../framework/types';\n\ndeclare const _;\n\nconst WIDGET_CONFIG = {widgetType: 'wm-table-row-action', hostClass: ''};\n\n@Directive({\n    selector: '[wmTableRowAction]',\n    providers: [\n        provideAsWidgetRef(TableRowActionDirective),\n        {provide: Context, useValue: {}, multi: true}\n    ]\n})\nexport class TableRowActionDirective extends BaseComponent implements OnInit {\n    static initializeProps = registerProps();\n\n    accessroles;\n    action;\n    caption;\n    class;\n    disabled;\n    displayName;\n    iconclass;\n    key;\n    show;\n    tabindex;\n    title;\n    buttonDef;\n    hyperlink;\n    target;\n    conditionalclass;\n    conditionalstyle;\n\n    constructor(\n        inj: Injector,\n        @Optional() public table: TableComponent,\n        @Self() @Inject(Context) contexts: Array<any>\n    ) {\n        super(inj, WIDGET_CONFIG);\n\n        contexts[0].editRow = (evt) => this.table.editRow(evt);\n        contexts[0].deleteRow = (evt) => this.table.deleteRow(evt);\n        contexts[0].addNewRow = (evt) => this.table.addNewRow(evt);\n    }\n\n    getTitle() {\n        return _.isUndefined(this.title) ? (this['display-name'] || '') : this.title;\n    }\n\n    populateAction() {\n        this.buttonDef = {\n            key: this.key,\n            displayName: this['display-name'] || this.caption || '',\n            show: this.show,\n            class: this.class || '',\n            iconclass: this.iconclass || '',\n            title: this.getTitle(),\n            action: this.action,\n            accessroles: this.accessroles,\n            disabled: this.disabled,\n            tabindex: this.tabindex ? +this.tabindex : undefined,\n            widgetType: this['widget-type'] || 'button',\n            hyperlink: this.hyperlink,\n            target: this.target,\n            conditionalclass: this.conditionalclass || '',\n            conditionalstyle: this.conditionalstyle || {}\n        };\n    }\n\n    ngOnInit() {\n        super.ngOnInit();\n        this.populateAction();\n        this.table.registerRowActions(this.buttonDef);\n    }\n}\n","import { PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-table-row-action',\n        new Map(\n            [\n                ['accessroles', PROP_STRING],\n                ['action', PROP_STRING],\n                ['caption', PROP_STRING],\n                ['class ', {value: 'btn-secondary', ...PROP_STRING}],\n                ['disabled', {value: false, ...PROP_BOOLEAN}],\n                ['display-name', PROP_STRING],\n                ['hyperlink', PROP_STRING],\n                ['iconclass', PROP_STRING],\n                ['key', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n                ['tabindex', {value: 0, ...PROP_NUMBER}],\n                ['target', PROP_STRING],\n                ['title', PROP_STRING],\n                ['widget-type', {value: 'button', ...PROP_STRING}]\n            ]\n        )\n    );\n};\n","import { Directive, Injector, OnInit, Optional, SkipSelf } from '@angular/core';\n\nimport { BaseComponent } from '../../base/base.component';\nimport { registerProps } from './table-row.props';\nimport { provideAsWidgetRef } from '../../../../utils/widget-utils';\nimport { TableComponent } from '../table.component';\n\nconst WIDGET_CONFIG = {widgetType: 'wm-table-row', hostClass: ''};\n\n@Directive({\n    selector: '[wmTableRow]',\n    providers: [\n        provideAsWidgetRef(TableRowDirective)\n    ]\n})\nexport class TableRowDirective extends BaseComponent implements OnInit {\n    static initializeProps = registerProps();\n\n    config;\n    columnwidth;\n    closeothers;\n    content;\n    expandicon;\n    collapseicon;\n    height;\n    position;\n\n    constructor(\n        inj: Injector,\n        @Optional() @SkipSelf() public table: TableComponent\n    ) {\n        super(inj, WIDGET_CONFIG);\n    }\n\n    populateConfig() {\n        this.config = {\n            closeothers: this.closeothers,\n            content: this.content,\n            columnwidth: this.columnwidth,\n            expandicon: this.expandicon,\n            collapseicon: this.collapseicon,\n            height: this.height,\n            position: this.position\n        };\n    }\n\n    ngOnInit() {\n        super.ngOnInit();\n        this.populateConfig();\n        this.table.registerRow(this.config, this);\n    }\n\n    onPropertyChange(key: string, nv: any) {\n        if (key === 'content' && this.config) {\n            this.config.content = this.content;\n        }\n    }\n}\n","import { PROP_ANY, PROP_BOOLEAN, PROP_STRING, register } from '../../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-table-row',\n        new Map(\n            [\n                ['class', PROP_STRING],\n                ['closeothers', {value: true, ...PROP_BOOLEAN}],\n                ['content', PROP_STRING],\n                ['columnwidth', {value: '30px', ...PROP_STRING}],\n                ['collapseicon', PROP_STRING],\n                ['expandicon', PROP_STRING],\n                ['height', PROP_STRING],\n                ['position', {value: '0', ...PROP_STRING}]\n            ]\n        )\n    );\n};\n","import { Component, ElementRef, Injector, ViewChild } from '@angular/core';\nimport { NgModel } from '@angular/forms';\n\nimport { registerProps } from './textarea.props';\nimport { BaseInput } from '../text/base/base-input';\nimport { provideAsNgValueAccessor, provideAsWidgetRef } from '../../../utils/widget-utils';\n\nconst WIDGET_CONFIG = {\n    widgetType: 'wm-textarea',\n    hostClass: 'app-input-wrapper'\n};\n\n@Component({\n    selector: 'wm-textarea',\n    templateUrl: './textarea.component.html',\n    providers: [\n        provideAsNgValueAccessor(TextareaComponent),\n        provideAsWidgetRef(TextareaComponent)\n    ]\n})\nexport class TextareaComponent extends BaseInput {\n    static initializeProps = registerProps();\n    public required: boolean;\n    public maxchars: number;\n    public disabled: boolean;\n    public name: string;\n    public readonly: boolean;\n    public tabindex: any;\n    public placeholder: any;\n    public shortcutkey: string;\n    public autofocus: boolean;\n    @ViewChild('textarea') inputEl: ElementRef;\n    @ViewChild(NgModel) ngModel: NgModel;\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n    }\n}\n","import { Directive, ElementRef, Input } from '@angular/core';\n\n@Directive({\n    selector: '[textContent]'\n})\nexport class TextContentDirective {\n    @Input()\n    set textContent(nv) {\n        let v = nv;\n\n        if (nv === undefined || nv === null) {\n            v = '';\n        }\n        this.elRef.nativeElement.textContent = v;\n    }\n\n    constructor(private elRef: ElementRef) {}\n}","import { Directive, Injector } from '@angular/core';\n\nimport { APPLY_STYLES_TYPE, styler } from '../../framework/styler';\nimport { IWidgetConfig } from '../../framework/types';\nimport { StylableComponent } from '../base/stylable.component';\nimport { registerProps } from './tile.props';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\n\nconst DEFAULT_CLS = 'app-tile';\nconst WIDGET_CONFIG: IWidgetConfig = {widgetType: 'wm-tile', hostClass: DEFAULT_CLS};\n\n@Directive({\n    selector: '[wmTile]',\n    providers: [\n        provideAsWidgetRef(TileDirective)\n    ]\n})\nexport class TileDirective extends StylableComponent {\n    static initializeProps = registerProps();\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n\n        styler(this.nativeElement, this, APPLY_STYLES_TYPE.CONTAINER);\n    }\n}\n","import { PROP_ANY, PROP_BOOLEAN, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-tile',\n        new Map(\n            [\n                ['class', PROP_STRING],\n                ['conditionalclass', PROP_ANY],\n                ['conditionalstyle', PROP_ANY],\n                ['name', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}]\n            ]\n        )\n    );\n};\n","import { Component, Inject, Injector, NgZone, OnDestroy, ViewChild } from '@angular/core';\nimport { EVENT_MANAGER_PLUGINS } from '@angular/platform-browser';\n\nimport { TimepickerComponent } from 'ngx-bootstrap';\n\nimport { $appDigest, addClass, addEventListenerOnElement, adjustContainerPosition, AppDefaults, EVENT_LIFE, FormWidgetType, getDisplayDateTimeFormat, getFormattedDate, getNativeDateObject } from '@wm/core';\n\nimport { styler } from '../../framework/styler';\nimport { registerProps } from './time.props';\nimport { provideAsNgValidators, provideAsNgValueAccessor, provideAsWidgetRef } from '../../../utils/widget-utils';\nimport { BaseDateTimeComponent } from '../base/base-date-time.component';\n\nconst CURRENT_TIME = 'CURRENT_TIME';\nconst DEFAULT_CLS = 'input-group app-timeinput';\nconst WIDGET_CONFIG = {widgetType: 'wm-time', hostClass: DEFAULT_CLS};\n\ndeclare const _, moment, $;\n\n@Component({\n    selector: '[wmTime]',\n    templateUrl: './time.component.html',\n    providers: [\n        provideAsNgValueAccessor(TimeComponent),\n        provideAsNgValidators(TimeComponent),\n        provideAsWidgetRef(TimeComponent)\n    ]\n})\nexport class TimeComponent extends BaseDateTimeComponent implements OnDestroy {\n    static initializeProps = registerProps();\n    /**\n     * This property sets the display pattern of the time selected\n     */\n    timepattern: string;\n\n    /**\n     * This property sets the output format for the selected time datavalue\n     */\n    outputformat: string;\n\n    public showdropdownon: string;\n\n    private deregisterEventListener;\n\n    get timestamp() {\n        return this.bsTimeValue ? this.bsTimeValue.valueOf() : undefined;\n    }\n\n    get datavalue(): any {\n        if (this.isCurrentTime && !this.bsTimeValue) {\n            return CURRENT_TIME;\n        }\n        return getFormattedDate(this.datePipe, this.bsTimeValue, this.outputformat) || '';\n    }\n\n    /**Todo[Shubham]: needs to be redefined\n     * This property sets the default value for the time selection\n     */\n    set datavalue(newVal: any) {\n        if (newVal) {\n            if (newVal === CURRENT_TIME) {\n                this.isCurrentTime = true;\n                this.setTimeInterval();\n            } else {\n                this.clearTimeInterval();\n                this.bsTimeValue = getNativeDateObject(newVal);\n                this.isCurrentTime = false;\n            }\n        } else {\n            this.bsTimeValue = undefined;\n            this.clearTimeInterval();\n            this.isCurrentTime = false;\n        }\n        this.invokeOnChange(this.datavalue);\n        $appDigest();\n    }\n\n    get displayValue() {\n        return getFormattedDate(this.datePipe, this.bsTimeValue, this.timepattern) || '';\n    }\n\n    /* Internal property to have a flag to check the given datavalue is of Current time*/\n    private isCurrentTime: boolean;\n\n    private timeinterval: any;\n\n    /**\n     * This is an internal property used to map it to the widget\n     */\n    private minTime: Date;\n\n    /**\n     * This is an internal property used to map it to the widget\n     */\n    private maxTime: Date;\n\n    /**\n     * This is an internal property used to toggle the timepicker dropdown\n     */\n    private status = { isopen: false };\n\n    /**\n     * This is an internal property used to map the main model to the time widget\n     */\n    private bsTimeValue: Date;\n\n    private keyEventPlugin;\n\n    @ViewChild(TimepickerComponent) bsTimePicker;\n\n    constructor(\n        inj: Injector,\n        private ngZone: NgZone,\n        private appDefaults: AppDefaults,\n        @Inject(EVENT_MANAGER_PLUGINS) evtMngrPlugins\n    ) {\n        super(inj, WIDGET_CONFIG);\n\n        // KeyEventsPlugin\n        this.keyEventPlugin = evtMngrPlugins[1];\n\n        styler(this.nativeElement, this);\n        /**\n         * Destroy the timer once the date widget is gone\n         */\n        this.registerDestroyListener(() => this.clearTimeInterval());\n\n        this.timepattern = this.appDefaults.timeFormat || getDisplayDateTimeFormat(FormWidgetType.TIME);\n        this.updateFormat('timepattern');\n    }\n\n    onPropertyChange(key: string, nv: any, ov?: any) {\n        if (key === 'tabindex') {\n            return;\n        }\n        if (key === 'timepattern') {\n           this.updateFormat('timepattern');\n        }\n        if (key === 'mintime') {\n            this.minTime = getNativeDateObject(nv); // TODO it is supposed to be time conversion, not to the day\n            this.mintimeMaxtimeValidation();\n        } else if (key === 'maxtime') {\n            this.maxTime = getNativeDateObject(nv);\n            this.mintimeMaxtimeValidation();\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n\n    /**\n     * This is an internal method used to validate mintime and maxtime\n     */\n    private mintimeMaxtimeValidation() {\n        this.timeNotInRange = this.minTime && this.maxTime && (this.bsTimeValue < this.minTime || this.bsTimeValue > this.maxTime);\n        this.invokeOnChange(this.datavalue, undefined, false);\n    }\n\n    /**\n     * This is an internal method used to toggle the dropdown of the time widget\n     */\n    private toggleDropdown($event): void {\n        if ($event.type === 'click') {\n            this.invokeEventCallback('click', {$event: $event});\n        }\n        if ($event.target && $($event.target).is('input') && !(this.isDropDownDisplayEnabledOnInput(this.showdropdownon))) {\n            return;\n        }\n        this.ngZone.run(() => {\n            this.status.isopen = !this.status.isopen;\n        });\n\n        this.addBodyClickListener(this.status.isopen);\n    }\n\n    /**\n     * This is an internal method used to Prevent time picker close while changing time value\n     */\n    private preventTpClose($event) {\n        $event.stopImmediatePropagation();\n    }\n\n    private addBodyClickListener(skipListener) {\n        if (!skipListener) {\n            return;\n        }\n        const bodyElement = document.querySelector('body');\n        setTimeout(() => {\n            const dropdownElement = $(bodyElement).find('>bs-dropdown-container .dropdown-menu').get(0);\n            this.deregisterEventListener = addEventListenerOnElement(bodyElement, dropdownElement, this.nativeElement, 'click', this.isDropDownDisplayEnabledOnInput(this.showdropdownon), () => {\n                this.status.isopen = false;\n            }, EVENT_LIFE.ONCE, true);\n        }, 350);\n    }\n\n    /**\n     * This is an internal method triggered when pressing key on the time input\n     */\n    private onDisplayKeydown(event) {\n        if (this.isDropDownDisplayEnabledOnInput(this.showdropdownon)) {\n            event.stopPropagation();\n            const action = this.keyEventPlugin.constructor.getEventFullKey(event);\n            if (action === 'enter' || action === 'arrowdown') {\n                event.preventDefault();\n                this.toggleDropdown(event);\n            } else {\n                this.hideTimepickerDropdown();\n            }\n        } else {\n            this.hideTimepickerDropdown();\n        }\n    }\n\n    /**\n     * This is an internal method triggered when the time input changes\n     */\n    onDisplayTimeChange($event) {\n        const newVal = getNativeDateObject($event.target.value);\n        // time pattern validation\n        // if invalid pattern is entered, device is showing an error.\n        if (!this.formatValidation(newVal, $event.target.value)) {\n            return;\n        }\n        this.invalidDateTimeFormat = false;\n        this.onTimeChange(newVal);\n    }\n\n    onInputBlur($event) {\n        if (!$($event.relatedTarget).hasClass('bs-timepicker-field')) {\n            this.invokeOnTouched();\n            this.invokeEventCallback('blur', {$event});\n        }\n    }\n\n    /**\n     * This is an internal method used to execute the on time change functionality\n     */\n    private onTimeChange(newVal, isNativePicker?: boolean) {\n        let timeValue,\n            timeInputValue,\n            minTimeMeridian,\n            maxTimeMeridian;\n        // For nativePicker, newVal is event, get the dateobject from the event.\n        if (isNativePicker) {\n            newVal = getNativeDateObject(newVal.target.value);\n        }\n        if (newVal) {\n            this.bsTimeValue = newVal;\n            // if the newVal is valid but not in the given range then highlight the input field\n            this.timeNotInRange = this.minTime && this.maxTime && (newVal < this.minTime || newVal > this.maxTime);\n        } else {\n            // sometimes library is not returning the correct value when the min and max time are given, displaying the datavalue based on the value given by the user\n            if (this.bsTimePicker && this.bsTimePicker.min && this.bsTimePicker.max) {\n                minTimeMeridian = moment(new Date(this.bsTimePicker.min)).format('A');\n                maxTimeMeridian = moment(new Date(this.bsTimePicker.max)).format('A');\n                timeValue = this.bsTimePicker.hours + ':' + (this.bsTimePicker.minutes || 0) + ':' + (this.bsTimePicker.seconds || 0) + (this.bsTimePicker.showMeridian ? (' ' + minTimeMeridian) : '');\n                timeInputValue =  getNativeDateObject(timeValue);\n                this.bsTimePicker.meridian = minTimeMeridian;\n                this.timeNotInRange = (this.bsTimePicker.min > timeInputValue || this.bsTimePicker.max < timeInputValue);\n            }\n            this.bsTimeValue = timeInputValue;\n        }\n        this.invokeOnTouched();\n        this.invokeOnChange(this.datavalue, {}, true);\n    }\n\n    /**\n     * This is an internal method used to maintain a time interval to update the time model when the data value is set to CURRENT_TIME\n     */\n    private setTimeInterval() {\n        if (this.timeinterval) {\n            return;\n        }\n        this.timeinterval = setInterval( () => {\n            const now = new Date();\n            now.setSeconds(now.getSeconds() + 1);\n            this.datavalue = CURRENT_TIME;\n            this.onTimeChange(now);\n        }, 1000);\n    }\n\n    /**\n     * This is an internal method used to clear the time interval created\n     */\n    private clearTimeInterval() {\n        if (this.timeinterval) {\n            clearInterval(this.timeinterval);\n            this.timeinterval = null;\n        }\n    }\n\n    /**\n     * This function sets the value isOpen/isTimeOpen (i.e when datepicker popup is closed) based on widget type(i.e  DateTime, Time)\n     * @param val - isOpen/isTimeOpen is set based on the timepicker popup is open/closed\n     */\n    private setIsTimeOpen(val: boolean) {\n        this.status.isopen = val;\n    }\n\n    // Change event is registered from the template, Prevent the framework from registering one more event\n    protected handleEvent(node: HTMLElement, eventName: string, eventCallback: Function, locals: any) {\n        if (!_.includes(['blur', 'focus', 'change', 'click'], eventName)) {\n            super.handleEvent(node, eventName, eventCallback, locals);\n        }\n    }\n\n    private hideTimepickerDropdown() {\n        this.invokeOnTouched();\n        this.status.isopen = false;\n        if (this.deregisterEventListener) {\n            this.deregisterEventListener();\n        }\n    }\n\n    private isValid(event) {\n        if (!event) {\n            const enteredDate = $(this.nativeElement).find('input').val();\n            const newVal = getNativeDateObject(enteredDate);\n            if (!this.formatValidation(newVal, enteredDate)) {\n                return;\n            }\n        }\n    }\n    /**\n     * This is an internal method to add css class for dropdown while opening the time dropdown\n     */\n    public onShown() {\n        const tpElements  = document.querySelectorAll('timepicker');\n        _.forEach(tpElements, element => {\n            addClass(element.parentElement as HTMLElement, 'app-datetime', true);\n        });\n        this.focusTimePickerPopover(this);\n        this.bindTimePickerKeyboardEvents();\n        adjustContainerPosition($('bs-dropdown-container'), this.nativeElement, this.bsDropdown._dropdown, $('bs-dropdown-container .dropdown-menu'));\n    }\n}\n","import { Directive, Injector } from '@angular/core';\n\nimport { styler } from '../../framework/styler';\nimport { registerProps } from './top-nav.props';\nimport { StylableComponent } from '../base/stylable.component';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\n\nconst DEFAULT_CLS = 'app-top-nav';\nconst WIDGET_CONFIG = {widgetType: 'wm-top-nav', hostClass: DEFAULT_CLS};\n\n@Directive({\n    selector: '[wmTopNav]',\n    providers: [\n        provideAsWidgetRef(TopNavDirective)\n    ]\n})\nexport class TopNavDirective extends StylableComponent {\n    static initializeProps = registerProps();\n\n    constructor(inj: Injector) {\n        super(inj, WIDGET_CONFIG);\n\n        styler(this.nativeElement, this);\n    }\n}\n","import { PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-top-nav',\n        new Map(\n            [\n                ['name', PROP_STRING],\n                ['content', PROP_STRING]\n            ]\n        )\n    );\n};\n","import { ContentChildren, Directive, HostBinding, Injector, Self } from '@angular/core';\nimport { NgForm } from '@angular/forms';\n\nimport { IWidgetConfig } from '../../../framework/types';\nimport { registerProps } from './wizard-step.props';\nimport { BaseComponent } from '../../base/base.component';\nimport { RedrawableDirective } from '../../redraw/redrawable.directive';\nimport { provideAsWidgetRef } from '../../../../utils/widget-utils';\n\nconst DEFAULT_CLS = 'app-wizard-step-content';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-wizardstep',\n    hostClass: DEFAULT_CLS,\n};\n\nconst enum STEP_STATUS {\n    CURRENT = 1,\n    DISABLED,\n    COMPLETED\n}\n\n@Directive({\n    selector: 'form[wmWizardStep]',\n    providers: [\n        provideAsWidgetRef(WizardStepDirective)\n    ],\n    exportAs: 'wmWizardStep'\n})\nexport class WizardStepDirective extends BaseComponent {\n    static initializeProps = registerProps();\n\n    public show: boolean;\n    public name: string;\n    public enableskip: any;\n    public disablenext: boolean;\n    public disabledone: boolean;\n    public disableprevious: boolean;\n    public isInitialized: boolean;\n\n    private status: STEP_STATUS = STEP_STATUS.DISABLED;\n\n    // reference to the components which needs a redraw(eg, grid, chart) when the height of this component changes\n    @ContentChildren(RedrawableDirective, {descendants: true}) reDrawableComponents;\n\n    @HostBinding('class.current')\n    get isCurrent() {\n        return this.active;\n    }\n\n    public get isValid() {\n        return this.ngForm.valid;\n    }\n\n    public get enableNext() {\n        return !this.disablenext;\n    }\n\n    public get enableDone() {\n        return !this.disabledone;\n    }\n\n    public get enablePrev() {\n        return !this.disableprevious;\n    }\n\n    public set active(nv: boolean) {\n        const isActive = this.active;\n        this.status = STEP_STATUS.CURRENT;\n        if (nv && !isActive) {\n            this.invokeEventCallback('load');\n            this.redrawChildren();\n        }\n    }\n\n    public get active(): boolean {\n        return this.status === STEP_STATUS.CURRENT;\n    }\n\n    public set done(nv: boolean) {\n        if (nv) {\n            this.status = STEP_STATUS.COMPLETED;\n        }\n    }\n\n    public get done(): boolean {\n        return this.status === STEP_STATUS.COMPLETED;\n    }\n\n    public set disabled(nv: boolean) {\n        if (nv) {\n            this.status = STEP_STATUS.DISABLED;\n        }\n    }\n\n    public get disabled(): boolean {\n        return this.status === STEP_STATUS.DISABLED;\n    }\n\n    constructor(inj: Injector, @Self() private ngForm: NgForm) {\n        super(inj, WIDGET_CONFIG);\n    }\n\n    public onNext(index: number): boolean {\n        return this.invokeEventCallback('next', {currentStep: this, stepIndex: index});\n    }\n\n    public onPrev(index: number): boolean {\n        return this.invokeEventCallback('prev', {currentStep: this, stepIndex: index});\n    }\n\n    public onSkip(index: number): boolean {\n        return this.invokeEventCallback('skip', {currentStep: this, stepIndex: index});\n    }\n\n    // redraw all the projected components which are projected.\n    private redrawChildren() {\n        setTimeout(() => {\n            if (this.reDrawableComponents) {\n                this.reDrawableComponents.forEach(c => c.redraw());\n            }\n        }, 100);\n    }\n}\n","import { PROP_BOOLEAN, PROP_STRING, register } from '../../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-wizardstep',\n        new Map(\n            [\n                ['class', PROP_STRING],\n                ['enableskip', {value: false, ...PROP_BOOLEAN}],\n                ['iconclass', PROP_STRING],\n                ['name', PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n                ['title', {value: 'Step Title', ...PROP_STRING}]\n            ]\n        )\n    );\n};\n","import { AfterContentInit, AfterViewInit, Component, ContentChildren, Injector, OnInit, QueryList } from '@angular/core';\n\nimport { noop } from '@wm/core';\n\nimport { APPLY_STYLES_TYPE, styler } from '../../framework/styler';\nimport { IWidgetConfig } from '../../framework/types';\nimport { registerProps } from './wizard.props';\nimport { StylableComponent } from '../base/stylable.component';\nimport { WizardStepDirective } from './wizard-step/wizard-step.directive';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\n\nconst DEFAULT_CLS = 'app-wizard panel clearfix';\nconst WIDGET_CONFIG: IWidgetConfig = {\n    widgetType: 'wm-wizard',\n    hostClass: DEFAULT_CLS\n};\n\n@Component({\n    selector: 'div[wmWizard]',\n    templateUrl: './wizard.component.html',\n    providers: [\n        provideAsWidgetRef(WizardComponent)\n    ]\n})\nexport class WizardComponent extends StylableComponent implements OnInit, AfterContentInit, AfterViewInit {\n    static initializeProps = registerProps();\n\n    @ContentChildren(WizardStepDirective) steps: QueryList<WizardStepDirective>;\n\n    public message: {caption: string, type: string};\n    public currentStep: WizardStepDirective;\n\n    public stepClass: string;\n    private readonly promiseResolverFn: Function;\n    public actionsalignment: any;\n    public cancelable: any;\n\n    get hasPrevStep(): boolean {\n        return !this.isFirstStep(this.currentStep);\n    }\n\n    get hasNextStep(): boolean {\n        return !this.isLastStep(this.currentStep);\n    }\n\n    get showDoneBtn(): boolean {\n        if (!this.currentStep) {\n            return;\n        }\n        return !this.hasNextStep && this.currentStep.enableDone;\n    }\n\n    get enablePrev(): boolean {\n        if (!this.currentStep) {\n            return;\n        }\n        return this.currentStep.enablePrev;\n    }\n\n    get enableNext(): boolean {\n        if (!this.currentStep) {\n            return;\n        }\n        return this.currentStep.enableNext && this.currentStep.isValid;\n    }\n\n    get enableDone(): boolean {\n        if (!this.currentStep) {\n            return;\n        }\n        return this.currentStep.enableDone && this.currentStep.isValid;\n    }\n\n    constructor(inj: Injector) {\n        let resolveFn: Function = noop;\n\n        super(inj, WIDGET_CONFIG, new Promise(res => resolveFn = res));\n        styler(this.nativeElement, this, APPLY_STYLES_TYPE.SHELL);\n\n        this.promiseResolverFn = resolveFn;\n\n        // initialize the message object with default values\n        this.message = {\n            caption: '',\n            type: ''\n        };\n    }\n\n    /**\n     * returns next valid step. the index passed is also checked if its valid step\n     * @param index\n     * @returns {WizardStepDirective}\n     */\n    private getNextValidStepFormIndex(index: number): WizardStepDirective {\n        for (let i = index; i < this.steps.length; i++) {\n            const step = this.getStepRefByIndex(i);\n            if (step.show) {\n                return step;\n            }\n        }\n    }\n\n    /**\n     * returns previous valid step. the index passed is also checked if its valid step\n     * @param index\n     * @returns {WizardStepDirective}\n     */\n    private getPreviousValidStepFormIndex(index: number): WizardStepDirective {\n        for (let i = index; i >= 0; i--) {\n            const step = this.getStepRefByIndex(i);\n            if (step.show) {\n                return step;\n            }\n        }\n    }\n\n    /**\n     * returns current step index value.\n     * @returns {number}\n     */\n    private getCurrentStepIndex(): number {\n        return this.getStepIndexByRef(this.currentStep);\n    }\n\n    /**\n     * returns stepRef when index is passed.\n     * @param {number} index\n     * @returns {WizardStepDirective}\n     */\n    private getStepRefByIndex(index: number): WizardStepDirective {\n        return this.steps.toArray()[index];\n    }\n\n    /**\n     * returns the index value of the step.\n     * @param {WizardStepDirective} wizardStep\n     * @returns {number}\n     */\n    private getStepIndexByRef(wizardStep: WizardStepDirective): number {\n        return this.steps.toArray().indexOf(wizardStep);\n    }\n\n    /**\n     * gets stepRef by searching on the name property.\n     * @param {string} name\n     * @returns {WizardStepDirective}\n     */\n    private getStepRefByName(name: string): WizardStepDirective {\n        return this.steps.find(step => step.name === name);\n    }\n\n    /**\n     * sets default step as current step if configured\n     * or finds first valid step and set it as current step.\n     * @param {WizardStepDirective} step\n     */\n    private setDefaultStep(step: WizardStepDirective) {\n        // If the default step has show true then only update the currentStep\n        if (step && step.show) {\n            this.currentStep = step;\n            step.active = true;\n            step.isInitialized = true;\n            // Mark all previous step status COMPLETED\n            let index = this.getStepIndexByRef(step) - 1;\n            while (index >= 0) {\n                const prevStep = this.getStepRefByIndex(index);\n                prevStep.done = true;\n                prevStep.isInitialized = true;\n                index--;\n            }\n        } else {\n            // set next valid step as current step\n            step = this.getNextValidStepFormIndex(0);\n            if (step) {\n                this.setDefaultStep(step);\n            }\n        }\n    }\n\n    /**\n     * Selects the associated step when the wizard header is clicked.\n     * @param $event\n     * @param {WizardStepDirective} currentStep\n     */\n    private onWizardHeaderClick($event: Event, currentStep: WizardStepDirective) {\n        // select the step if it's status is done\n        if (currentStep.done) {\n            // set all the next steps status as disabled and previous steps as done\n            this.steps.forEach((step, index) => {\n                if (index < this.getStepIndexByRef(currentStep)) {\n                   step.done = true;\n                } else {\n                    step.disabled = true;\n                }\n            });\n            // set the selected step as current step and make it active\n            this.currentStep = currentStep;\n            this.currentStep.active = true;\n        }\n    }\n\n    // Method to navigate to next step\n    public next(eventName: string = 'next') {\n        const currentStep = this.currentStep;\n        const currentStepIndex = this.getCurrentStepIndex();\n\n        let nextStep: WizardStepDirective;\n\n        // abort if onSkip method returns false\n        if (eventName === 'skip') {\n            if (currentStep.onSkip(currentStepIndex) === false) {\n                return;\n            }\n        } else if (eventName === 'next') {\n            if (currentStep.onNext(currentStepIndex) === false) {\n                return;\n            }\n        }\n        nextStep = this.getNextValidStepFormIndex(currentStepIndex + 1);\n        nextStep.isInitialized = true;\n\n        // If there are any steps which has show then only change state of current step else remain same\n        if (nextStep) {\n            currentStep.done = true;\n            nextStep.active = true;\n            this.currentStep = nextStep;\n        }\n    }\n    // Method to navigate to previous step\n    public prev() {\n        const currentStep = this.currentStep;\n        const currentStepIndex = this.getCurrentStepIndex();\n\n        let prevStep: WizardStepDirective;\n\n        // abort if onPrev method returns false.\n        if (currentStep.onPrev(currentStepIndex) === false) {\n            return;\n        }\n\n        prevStep = this.getPreviousValidStepFormIndex(currentStepIndex - 1);\n\n        // If there are any steps which has show then only change state of current step else remain same\n        if (prevStep) {\n            currentStep.disabled = true;\n            prevStep.active = true;\n            this.currentStep = prevStep;\n        }\n    }\n\n    public skip() {\n        this.next('skip');\n    }\n\n    // Method to invoke on-Done event on wizard\n    public done() {\n        this.invokeEventCallback('done', {steps: this.steps.toArray()});\n    }\n    // Method to invoke on-Cancel event on wizard\n    public cancel () {\n        this.invokeEventCallback('cancel', {steps: this.steps.toArray()});\n    }\n\n    private isFirstStep(stepRef: WizardStepDirective) {\n        return this.steps.first === stepRef;\n    }\n\n    private isLastStep(stepRef: WizardStepDirective) {\n        return this.steps.last === stepRef;\n    }\n\n    // Define the property change handler. This Method will be triggered when there is a change in the widget property\n    onPropertyChange(key: string, nv: any, ov?: any) {\n        // Monitoring changes for properties and accordingly handling respective changes\n\n        if (key === 'stepstyle') {\n            this.stepClass =  nv === 'justified' ? 'nav-justified' : '';\n        } else if (key === 'defaultstep') {\n            this.setDefaultStep(this.getStepRefByName(nv));\n        } else {\n            super.onPropertyChange(key, nv, ov);\n        }\n    }\n\n    ngAfterContentInit() {\n        super.ngAfterContentInit();\n        this.promiseResolverFn();\n    }\n\n    ngAfterViewInit() {\n        super.ngAfterViewInit();\n        styler(\n            this.nativeElement.querySelector('.panel-body') as HTMLElement,\n            this,\n            APPLY_STYLES_TYPE.INNER_SHELL\n        );\n    }\n}\n","import { PROP_BOOLEAN, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-wizard',\n        new Map(\n            [\n                ['actionsalignment', {value: 'right', ...PROP_STRING}],\n                ['cancelable', {value: true, ...PROP_BOOLEAN}],\n                ['cancelbtnlabel', {value: 'Cancel', ...PROP_STRING}],\n                ['class', PROP_STRING],\n                ['defaultstep', {value: 'none', ...PROP_STRING}],\n                ['donebtnlabel', {value: 'Done', ...PROP_STRING}],\n                ['name', PROP_STRING],\n                ['nextbtnlabel', {value: 'Next', ...PROP_STRING}],\n                ['previousbtnlabel', {value: 'Previous', ...PROP_STRING}],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n                ['stepstyle', {value: 'auto', ...PROP_STRING}]\n            ]\n        )\n    );\n};\n","import { Directive } from '@angular/core';\n\n@Directive({\n    selector: '[onFileSelect]'\n})\nexport class OnFileSelectDirective {\n    // Todo[Shubham] Need to implement 2 drag and drop file directives\n}\n","import { AfterViewInit, Attribute, Component, Injector, OnInit } from '@angular/core';\n\nimport { Subject } from 'rxjs';\n\nimport { App, DataSource, isAudioFile, isImageFile, isVideoFile } from '@wm/core';\n\nimport { registerProps } from './file-upload.props';\nimport { StylableComponent } from '../base/stylable.component';\nimport { styler } from '../../framework/styler';\nimport { provideAsWidgetRef } from '../../../utils/widget-utils';\n\ndeclare const _, $;\n\nconst DEFAULT_CLS = 'app-fileupload';\nconst WIDGET_CONFIG = {\n    widgetType: 'wm-fileupload',\n    hostClass: DEFAULT_CLS\n};\n\n@Component({\n    selector: '[wmFileUpload]',\n    templateUrl: './file-upload.component.html',\n    providers: [\n        provideAsWidgetRef(FileUploadComponent)\n    ]\n})\n\nexport class FileUploadComponent extends StylableComponent implements OnInit, AfterViewInit {\n    static initializeProps = registerProps();\n    selectedFiles: any = [];\n    progressObservable;\n    name;\n    multiple;\n    fileTransfers = {};\n    caption = 'Upload';\n    formName = '';\n    maxfilesize;\n    selectedUploadTypePath;\n    DEFAULT_CAPTIONS = {\n        MULTIPLE_SELECT: 'Drop your files here.',\n        SELECT: 'Select'\n    };\n    DEVICE_CONTENTTYPES = {\n        IMAGE: 'image',\n        VIDEO: 'video',\n        AUDIO: 'audio',\n        FILES: 'files'\n    };\n    FILESIZE_MB = 1048576;\n    widgetProps;\n    _isMobileType;\n    _isCordova;\n    // parentPrefabScope = element.closest('.app-prefab').isolateScope(),\n    CONSTANT_FILE_SERVICE = 'FileService';\n    uploadData = {\n        file: undefined,\n        uploadPath: undefined\n    };\n    chooseFilter = '';\n    datasource;\n    fileUploadMessage = 'You can also browse for files';\n    uploadedFiles = {\n        fileName: '',\n        path: '',\n        length: '',\n        status: ''\n    };\n    /*_hasOnSuccessEvt = WM.isDefined(attrs.onSuccess);\n     _hasOnErrorEvt = WM.isDefined(attrs.onError);*/\n\n    // Checking if the selected file is valid for the choosen filter type\n    isValidFile(filename, contenttype, extensionName, isMobileType) {\n        let isValid, contentTypes;\n\n        if (!contenttype) {\n            return true;\n        }\n        contentTypes = _.toLower(contenttype).split(',');\n\n        if (_.includes(contentTypes, 'image/*') || (_.includes(contentTypes, 'image') && isMobileType)) {\n            isValid = isImageFile(filename);\n            // If one of the content type chosen is image and user uploads image it is valid file\n            if (isValid) {\n                return isValid;\n            }\n        }\n        if (_.includes(contentTypes, 'audio/*') || (_.includes(contentTypes, 'audio') && isMobileType)) {\n            isValid = isAudioFile(filename);\n            // If one of the content type chosen is audio/* and user uploads audio it is valid file\n            if (isValid) {\n                return isValid;\n            }\n        }\n        if (_.includes(contentTypes, 'video/*') || (_.includes(contentTypes, 'video') && isMobileType)) {\n            isValid = isVideoFile(filename);\n            // If one of the content type chosen is video/* and user uploads video it is valid file\n            if (isValid) {\n                return isValid;\n            }\n        }\n        /*content type and the uploaded file extension should be same*/\n        if (_.includes(contentTypes, '.' + _.toLower(extensionName))) {\n            isValid = true;\n        }\n        return isValid;\n    }\n\n    /* this return the array of files which are having the file size not more than maxfilesize and filters based on contenttype */\n    getValidFiles($files) {\n        const validFiles = [];\n        const errorFiles = [];\n        const MAXFILEUPLOAD_SIZE = parseFloat(this.maxfilesize) * this.FILESIZE_MB || this.FILESIZE_MB;\n        const MAX_FILE_UPLOAD_FORMATTED_SIZE = (this.maxfilesize || '1') + 'MB';\n\n        // if contenttype is files for mobile projects.\n        if (this.chooseFilter === this.DEVICE_CONTENTTYPES.FILES) {\n            this.chooseFilter = '';\n        }\n\n        _.forEach($files, (file) => {\n            /* check for the file content type before uploading */\n            if (!this.isValidFile(file.name, this.chooseFilter, this.getFileExtension(file.name), this._isMobileType)) {\n                const msg = `${this.appLocale.LABEL_FILE_EXTENTION_VALIDATION_MESSAGE} ${this.chooseFilter}`;\n                this.app.notifyApp(msg, 'Error');\n                const error = {\n                    key: 'INVALID_FILE_EXTENSION',\n                    message: msg\n                };\n                file.error = error;\n                errorFiles.push(file);\n                return;\n            }\n            if (file.size > MAXFILEUPLOAD_SIZE) {\n                const msg = `${this.appLocale.LABEL_FILE_EXCEED_VALIDATION_MESSAGE} ${MAX_FILE_UPLOAD_FORMATTED_SIZE}`;\n                this.app.notifyApp(msg, 'Error');\n                const error = {\n                    key: 'INVALID_FILE_SIZE',\n                    message: msg\n                };\n                file.error = error;\n                errorFiles.push(file);\n                return;\n            }\n            validFiles.push(file);\n        });\n        return {\n            validFiles: validFiles,\n            errorFiles: errorFiles\n        };\n    }\n\n    /*Overwrite the caption only if they are default*/\n    getCaption(caption, isMultiple, isMobileType) {\n        if (_.includes(this.DEFAULT_CAPTIONS, caption)) {\n            return isMultiple && !isMobileType ? this.DEFAULT_CAPTIONS.MULTIPLE_SELECT : this.DEFAULT_CAPTIONS.SELECT;\n        }\n        return caption;\n    }\n\n    uploadUrl = 'services';\n\n    /* change server path based on user option */\n    changeServerUploadPath(path) {\n        this.selectedUploadTypePath = path;\n    }\n\n    /* this function returns the fileextension */\n    getFileExtension(fileName) {\n        if (fileName && _.includes(fileName, '.')) {\n            return fileName.substring(fileName.lastIndexOf('.') + 1);\n        }\n        return 'file';\n    }\n\n    /**\n     * Calls select Event\n     * @param $event\n     * @param $files\n     */\n    onSelectEventCall($event, $files) {\n        this.selectedFiles = $files;\n        setTimeout(() => {\n            this.invokeEventCallback('select', {\n                $event: $.extend($event.$files || {}, $files),\n                selectedFiles: $files\n            });\n        });\n    }\n\n    onFileElemClick() {\n        const fileInputElem = $('.file-input')[0];\n        fileInputElem.value = null;\n    }\n\n    /*this function to append upload status dom elements to widget */\n    onFileSelect($event, $files) {\n        let beforeSelectVal;\n        const files = this.getValidFiles($files);\n        $files = files.validFiles;\n\n        // Trigger error callback event if any invalid file found.\n        if (!_.isEmpty(files.errorFiles)) {\n            this.invokeEventCallback('error', {\n                $event,\n                files: files.errorFiles\n            });\n        }\n\n        // Make call if there are valid files else no call is made\n        if ($files.length) {\n            this.progressObservable = new Subject();\n            // EVENT: ON_BEFORE_SELECT\n            beforeSelectVal = this.invokeEventCallback('beforeselect', {\n                $event: $.extend($event.$files || {}, $files),\n                files: $files\n            });\n            if (this.datasource) {\n                this.datasource._progressObservable = this.progressObservable;\n                this.datasource._progressObservable.asObservable().subscribe((progressObj) => {\n                    _.forEach(this.selectedFiles, (file) => {\n                        if (file.name === progressObj.fileName) {\n                            file.progress = progressObj.progress;\n                            if (file.progress === 100) {\n                                file.status = 'success';\n                            } else {\n                                file.status = progressObj.status;\n                            }\n                        }\n                    });\n                });\n            } else {\n                this.selectedFiles = $files;\n            }\n            if (beforeSelectVal !== false) {\n                // EVENT: ON_SELECT\n                this.onSelectEventCall($event, $files);\n            }\n        }\n    }\n\n    /**\n     * Aborts a file upload request\n     * @param $file, the file for which the request is to be aborted\n     */\n    abortFileUpload($file) {\n        this.datasource.execute(DataSource.Operation.CANCEL, $file);\n    }\n\n    /* Define the property change handler. This function will be triggered when there is a change in the widget property */\n    onPropertyChange(key, nv, ov) {\n        /*Monitoring changes for styles or properties and accordingly handling respective changes.*/\n        switch (key) {\n            case 'uploadpath':\n                // TODO Srinivas: why do we need uploadpath\n                this.changeServerUploadPath(nv);\n                break;\n            case 'contenttype':\n                this.chooseFilter = nv.split(' ').join(',');\n                break;\n            case 'multiple':\n                this.formName = this.name + (this.multiple ? '-multiple-fileupload' : '-single-fileupload');\n                this.caption = this.getCaption(this.caption, this.multiple, this._isMobileType);\n                break;\n            case 'fileuploadmessage':\n                this.fileUploadMessage = nv;\n        }\n\n        super.onPropertyChange(key, nv, ov);\n    }\n\n    constructor(inj: Injector, private app: App, @Attribute('select.event') public onSelectEvt) {\n        super(inj, WIDGET_CONFIG);\n        // styler(this.nativeElement, this);\n    }\n\n    ngOnInit() {\n        super.ngOnInit();\n    }\n\n    ngAfterViewInit() {\n        styler( this.nativeElement.querySelector('.app-button, .drop-box'), this);\n    }\n}\n","import { PROP_BOOLEAN, PROP_NUMBER, PROP_STRING, register } from '../../framework/widget-props';\n\nexport const registerProps = () => {\n    register(\n        'wm-fileupload',\n        new Map(\n            [\n                ['caption', PROP_STRING],\n                ['name', PROP_STRING],\n                ['tabindex', PROP_NUMBER],\n                ['multiple', PROP_BOOLEAN],\n                ['fileuploadmessage' , PROP_STRING],\n                ['show', {value: true, ...PROP_BOOLEAN}],\n                ['disabled', PROP_BOOLEAN],\n                ['contenttype', PROP_STRING],\n                ['maxfilesize', PROP_NUMBER],\n                ['iconclass', {value: 'wi wi-file-upload', ...PROP_STRING}],\n                ['class', PROP_STRING],\n                ['uploadpath', {...PROP_STRING}],\n                ['datasource', PROP_STRING],\n                ['selectedFiles', PROP_STRING],\n                ['destination', PROP_STRING],\n                ['filelistheight', PROP_NUMBER],\n            ]\n        )\n    );\n};\n","import { Injectable } from '@angular/core';\n\nimport { BaseDialog } from './base/base-dialog';\n\nconst openedDialogs = [];\n/*We need closedDialogs array because onHidden event is asynchronous,\nand if the user uses script and calls dialog1.close() and then dialog2.close() then\nwe cannot be sure if both the dialogs onClose callback will be called or not.*/\nconst closeDialogsArray = [];\n\ndeclare const _;\n\n@Injectable()\nexport class DialogServiceImpl {\n\n    /**\n     * map which contains the references to all dialogs by name\n     * @type {Map<any, any>}\n     * Ex Map[[dialogName, [[dialogScope, dialogRef]]]]\n     */\n    private dialogRefsCollection = new Map<any, any>();\n    private appConfirmDialog = '_app-confirm-dialog';\n\n    constructor() {}\n\n    /**\n     * Register dialog by name and scope\n     * @param {string} name\n     * @param {BaseDialog} dialogRef\n     * @param {scope}\n     */\n    public register(name: string, dialogRef: BaseDialog, scope: any) {\n        if (!name) {\n            return;\n        }\n        if (this.dialogRefsCollection.get(name)) {\n            this.dialogRefsCollection.get(name).set(scope, dialogRef);\n        } else {\n            this.dialogRefsCollection.set(name, new Map([[scope, dialogRef]]));\n        }\n    }\n\n    public getDialogRefsCollection() {\n        return this.dialogRefsCollection;\n    }\n\n    /**\n     * De Register dialog by name and scope\n     * @param name\n     * @param dialogRef\n     * @param scope\n     */\n    public deRegister(name: string, scope: any) {\n        if (!name) {\n            return;\n        }\n        if (this.dialogRefsCollection.get(name)) {\n                this.dialogRefsCollection.get(name).delete(scope);\n        }\n    }\n\n    private getDialogRef(name: string, scope?: any) {\n        const dialogRefMap = this.dialogRefsCollection.get(name);\n        let dialogRef;\n\n        if (scope) {\n            dialogRef = dialogRefMap.get(scope);\n            if (!dialogRef) {\n                // Check if the scope is App level scope\n                // else throw a console error\n                if (!scope.pageName && !scope.partialName && !scope.prefabName) {\n                    dialogRefMap.forEach((dRef, dialogScope) => {\n                        // Check if the collection of dialogs have a \"common\" partial scope\n                        // If yes use that else through a console error\n                        if (dialogScope && dialogScope.partialName === 'Common') {\n                            dialogRef = dRef;\n                        } else {\n                            console.error('No dialog with the name \"' + name + '\" found in the App scope.');\n                        }\n                    });\n                } else {\n                    console.error('No dialog with the name \"' + name + '\" found in the given scope.');\n                }\n            }\n        } else {\n            if (dialogRefMap.size === 1) {\n                dialogRef = dialogRefMap.entries().next().value[1];\n            } else {\n                console.error('There are multiple instances of this dialog name. Please provide the Page/Partial/App instance in which the dialog exists.');\n            }\n        }\n        return dialogRef;\n    }\n\n    /**\n     * Opens the dialog with the given name\n     * @param {string} name\n     */\n    public open(name: string, scope?: any, initState?: any) {\n        const dialogRef = this.getDialogRef(name, scope);\n        if (!dialogRef) {\n            return;\n        }\n\n        dialogRef.open(initState);\n    }\n\n    /**\n     * closes the dialog with the given name\n     * @param {string} name\n     */\n    public close(name: string, scope?: any) {\n        const dialogRef = this.getDialogRef(name, scope);\n        if (!dialogRef) {\n            return;\n        }\n\n        dialogRef.close();\n    }\n\n    /**\n     * closes all the opened dialogs\n     */\n    closeAllDialogs() {\n        _.forEach(openedDialogs.reverse(), (dialog) => {\n            dialog.close();\n        });\n    }\n\n    public showAppConfirmDialog(initState?: any) {\n        this.open(this.getAppConfirmDialog(), undefined, initState);\n    }\n\n    public closeAppConfirmDialog() {\n        this.close(this.getAppConfirmDialog());\n    }\n\n    public getAppConfirmDialog() {\n        return this.appConfirmDialog;\n    }\n\n    public setAppConfirmDialog(dialogName: string) {\n        this.appConfirmDialog = dialogName;\n    }\n\n    public addToOpenedDialogs(ref) {\n        openedDialogs.push(ref);\n    }\n\n    public getLastOpenedDialog() {\n        return openedDialogs[openedDialogs.length - 1];\n    }\n\n    public removeFromOpenedDialogs(ref) {\n        if (openedDialogs.indexOf(ref) !== -1) {\n            openedDialogs.splice(openedDialogs.indexOf(ref), 1);\n        }\n    }\n\n    public getOpenedDialogs() {\n        return openedDialogs;\n    }\n\n    public addToClosedDialogs(ref) {\n        closeDialogsArray.push(ref);\n    }\n\n    public removeFromClosedDialogs(ref) {\n        if (closeDialogsArray.indexOf(ref) !== -1) {\n            closeDialogsArray.splice(closeDialogsArray.indexOf(ref), 1);\n        }\n    }\n\n    public getDialogRefFromClosedDialogs() {\n        return closeDialogsArray.splice(0, 1)[0];\n    }\n}\n","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { CommonModule, Location } from '@angular/common';\n\nimport {\n    BsDatepickerModule,\n    BsDropdownModule,\n    CarouselModule,\n    DatepickerModule,\n    ModalModule,\n    PopoverModule,\n    ProgressbarModule,\n    TimepickerModule,\n    TypeaheadModule\n} from 'ngx-bootstrap';\nimport { PaginationModule } from 'ngx-bootstrap/pagination';\nimport { ColorPickerModule } from 'ngx-color-picker';\nimport { TextMaskModule } from 'angular2-text-mask';\nimport { NgCircleProgressModule } from 'ng-circle-progress';\n\nimport { AbstractDialogService } from '@wm/core';\nimport { SecurityModule } from '@wm/security';\n\nimport { AccordionDirective } from './widgets/common/accordion/accordion.directive';\nimport { AccordionPaneComponent } from './widgets/common/accordion/accordion-pane/accordion-pane.component';\nimport { TabsComponent } from './widgets/common/tabs/tabs.component';\nimport { TabPaneComponent } from './widgets/common/tabs/tab-pane/tab-pane.component';\nimport { AlertDialogComponent } from './widgets/common/dialog/alert-dialog/alert-dialog.component';\nimport { AnchorComponent } from './widgets/common/anchor/anchor.component';\nimport { AudioComponent } from './widgets/common/audio/audio.component';\nimport { BreadcrumbComponent } from './widgets/common/breadcrumb/breadcrumb.component';\nimport { ButtonComponent } from './widgets/common/button/button.component';\nimport { ButtonGroupDirective } from './widgets/common/button-group/button-group.directive';\nimport { CalendarComponent } from './widgets/common/calendar/calendar.component';\nimport { CardComponent } from './widgets/common/card/card.component';\nimport { CardActionsDirective } from './widgets/common/card/card-actions/card-actions.directive';\nimport { CardContentComponent } from './widgets/common/card/card-content/card-content.component';\nimport { CardFooterDirective } from './widgets/common/card/card-footer/card-footer.directive';\nimport { CarouselDirective } from './widgets/common/carousel/carousel.directive';\nimport { CarouselTemplateDirective } from './widgets/common/carousel/carousel-template/carousel-template.directive';\nimport { ChartComponent } from './widgets/common/chart/chart.component';\nimport { CheckboxComponent } from './widgets/common/checkbox/checkbox.component';\nimport { CheckboxsetComponent } from './widgets/common/checkboxset/checkboxset.component';\nimport { ChipsComponent } from './widgets/common/chips/chips.component';\nimport { ProgressCircleComponent } from './widgets/common/progress-bar/progress-circle/progress-circle.component';\nimport { ColorPickerComponent } from './widgets/common/color-picker/color-picker.component';\nimport { CompositeDirective } from './widgets/common/composite/composite.directive';\nimport { ConfirmDialogComponent } from './widgets/common/dialog/confirm-dialog/confirm-dialog.component';\nimport { ContainerDirective } from './widgets/common/container/container.directive';\nimport { ContentComponent } from './widgets/common/content/content.component';\nimport { CurrencyComponent } from './widgets/common/currency/currency.component';\nimport { DateComponent } from './widgets/common/date/date.component';\nimport { DatetimeComponent } from './widgets/common/date-time/date-time.component';\nimport { DependsonDirective } from './widgets/common/form/live-actions/dependson.directive';\nimport { DialogComponent } from './widgets/common/dialog/design-dialog/dialog.component';\nimport { DialogBodyDirective } from './widgets/common/dialog/base/dialog-body/dialog-body.directive';\nimport { DialogFooterDirective } from './widgets/common/dialog/base/dialog-footer/dialog-footer.directive';\nimport { DialogHeaderComponent } from './widgets/common/dialog/base/dialog-header/dialog-header.component';\nimport { FooterDirective } from './widgets/common/footer/footer.directive';\nimport { FormActionDirective } from './widgets/common/form/form-action/form-action.directive';\nimport { FormComponent } from './widgets/common/form/form.component';\nimport { FormFieldDirective } from './widgets/common/form/form-field/form-field.directive';\nimport { HeaderComponent } from './widgets/common/header/header.component';\nimport { HtmlDirective } from './widgets/common/html/html.directive';\nimport { IconComponent } from './widgets/common/icon/icon.component';\nimport { IframeComponent } from './widgets/common/iframe/iframe.component';\nimport { IframeDialogComponent } from './widgets/common/dialog/iframe-dialog/iframe-dialog.component';\nimport { ImagePipe } from './pipes/image.pipe';\nimport { InputCalendarComponent } from './widgets/common/text/calendar/input-calendar.component';\nimport { InputColorComponent } from './widgets/common/text/color/input-color.component';\nimport { InputEmailComponent } from './widgets/common/text/email/input-email.component';\nimport { InputNumberComponent } from './widgets/common/text/number/input-number.component';\nimport { InputTextComponent } from './widgets/common/text/text/input-text.component';\nimport { FormWidgetDirective } from './widgets/common/form/form-widget.directive';\nimport { LabelDirective } from './widgets/common/label/label.directive';\nimport { LayoutGridColumnDirective } from './widgets/common/layout-grid/layout-grid-column/layout-grid-column.directive';\nimport { LayoutgridDirective } from './widgets/common/layout-grid/layout-grid.directive';\nimport { LayoutGridRowDirective } from './widgets/common/layout-grid/layout-grid-row/layout-grid-row.directive';\nimport { LazyLoadDirective } from './widgets/common/lazy-load/lazy-load.directive';\nimport { LeftPanelDirective } from './widgets/common/left-panel/left-panel.directive';\nimport { ListComponent } from './widgets/common/list/list.component';\nimport { ListItemDirective } from './widgets/common/list/list-item.directive';\nimport { LiveActionsDirective } from './widgets/common/form/live-actions/live-actions.directive';\nimport { LiveFormDirective } from './widgets/common/form/live-form/live-form.directive';\nimport { LiveFilterDirective } from './widgets/common/form/live-filter/live-filter.directive';\nimport { LiveTableComponent } from './widgets/common/live-table/live-table.component';\nimport { LoginComponent } from './widgets/common/login/login.component';\nimport { MarqueeDirective } from './widgets/common/marquee/marquee.directive';\nimport { MenuComponent } from './widgets/common/menu/menu.component';\nimport { MenuDropdownComponent } from './widgets/common/menu/menu-dropdown/menu-dropdown.component';\nimport { MenuDropdownItemComponent } from './widgets/common/menu/menu-dropdown-item/menu-dropdown-item.component';\nimport { MessageComponent } from './widgets/common/message/message.component';\nimport { NavbarComponent } from './widgets/common/navbar/navbar.component';\nimport { NavComponent } from './widgets/common/nav/nav.component';\nimport { NavItemDirective } from './widgets/common/nav/nav-item/nav-item.directive';\nimport { NavigationControlDirective } from './widgets/common/nav/navigation-control.directive';\nimport { NumberComponent } from './widgets/common/number/number.component';\nimport { PageContentComponent } from './widgets/common/page-content/page-content.component';\nimport { PageDirective } from './widgets/common/page/page.directive';\nimport { PaginationComponent } from './widgets/common/pagination/pagination.component';\nimport { PanelComponent } from './widgets/common/panel/panel.component';\nimport { PartialDialogComponent } from './widgets/common/dialog/partial-dialog/partial-dialog.component';\nimport { PartialDirective } from './widgets/common/partial/partial.directive';\nimport {\n    PartialParamDirective,\n    PartialParamHandlerDirective\n} from './widgets/common/partial-param/partial-param.directive';\nimport { PrefabContainerDirective } from './widgets/common/prefab-container/prefab-container.directive';\nimport { PictureDirective } from './widgets/common/picture/picture.directive';\nimport { PopoverComponent } from './widgets/common/popover/popover.component';\nimport { PrefabDirective } from './widgets/common/prefab/prefab.directive';\nimport { ProgressBarComponent } from './widgets/common/progress-bar/progress-bar.component';\nimport { RadiosetComponent } from './widgets/common/radioset/radioset.component';\nimport { RatingComponent } from './widgets/common/rating/rating.component';\nimport { RedrawableDirective } from './widgets/common/redraw/redrawable.directive';\nimport { RichTextEditorComponent } from './widgets/common/rich-text-editor/rich-text-editor.component';\nimport { RightPanelDirective } from './widgets/common/right-panel/right-panel.directive';\nimport { SearchComponent } from './widgets/common/search/search.component';\nimport { ScrollableDirective } from './widgets/common/search/scrollable.directive';\nimport { SelectComponent } from './widgets/common/select/select.component';\nimport { ShowInDeviceDirective } from './directives/show-in-device.directive';\nimport { SliderComponent } from './widgets/common/slider/slider.component';\nimport { SmoothScrollDirective } from './widgets/common/smooth-scroll/smooth-scroll.directive';\nimport { SpinnerComponent } from './widgets/common/spinner/spinner.component';\nimport { SwitchComponent } from './widgets/common/switch/switch.component';\nimport { TableActionDirective } from './widgets/common/table/table-action/table-action.directive';\nimport { TableColumnDirective } from './widgets/common/table/table-column/table-column.directive';\nimport { TableColumnGroupDirective } from './widgets/common/table/table-column-group/table-column-group.directive';\nimport { TableComponent } from './widgets/common/table/table.component';\nimport { TableCUDDirective } from './widgets/common/table/table-cud.directive';\nimport { TableFilterSortDirective } from './widgets/common/table/table-filter.directive';\nimport { TableRowActionDirective } from './widgets/common/table/table-row-action/table-row-action.directive';\nimport { TableRowDirective } from './widgets/common/table/table-row/table-row.directive';\nimport { TextareaComponent } from './widgets/common/textarea/textarea.component';\nimport { TextContentDirective } from './widgets/common/base/text-content.directive';\nimport { TileDirective } from './widgets/common/tile/tile.directive';\nimport { TimeComponent } from './widgets/common/time/time.component';\nimport { TopNavDirective } from './widgets/common/top-nav/top-nav.directive';\nimport { TreeDirective } from './widgets/common/tree/tree.directive';\nimport { VideoComponent } from './widgets/common/video/video.component';\nimport {\n    FileExtensionFromMimePipe,\n    FileIconClassPipe,\n    FileSizePipe,\n    FilterPipe,\n    NumberToStringPipe,\n    PrefixPipe,\n    StateClassPipe,\n    StringToNumberPipe,\n    SuffixPipe,\n    TimeFromNowPipe,\n    ToCurrencyPipe,\n    ToDatePipe,\n    ToNumberPipe\n} from './pipes/custom-pipes';\nimport { TrustAsPipe } from './pipes/trust-as.pipe';\nimport { WizardComponent } from './widgets/common/wizard/wizard.component';\nimport { WizardStepDirective } from './widgets/common/wizard/wizard-step/wizard-step.directive';\nimport { OnFileSelectDirective } from './widgets/common/file-upload/common.directive';\nimport { FileUploadComponent } from './widgets/common/file-upload/file-upload.component';\nimport { LoginDialogDirective } from './widgets/common/dialog/login-dialog/login-dialog.directive';\nimport { DialogServiceImpl } from './widgets/common/dialog/dialog.service';\n\n\nconst wmComponents = [\n    // AccordionDirective,\n    // AccordionPaneComponent,\n    TabsComponent,\n    TabPaneComponent,\n    AlertDialogComponent,\n    AnchorComponent,\n    // AudioComponent,\n    BreadcrumbComponent,\n    ButtonComponent,\n    ButtonGroupDirective,\n    CalendarComponent,\n    CardComponent,\n    CardActionsDirective,\n    CardContentComponent,\n    CardFooterDirective,\n    // CarouselDirective,\n    // CarouselTemplateDirective,\n    ChartComponent,\n    CheckboxComponent,\n    // ProgressCircleComponent,\n    // ColorPickerComponent,\n    CompositeDirective,\n    ConfirmDialogComponent,\n    ContainerDirective,\n    ContentComponent,\n    CurrencyComponent,\n    CheckboxsetComponent,\n    ChipsComponent,\n    DateComponent,\n    DatetimeComponent,\n    DependsonDirective,\n    DialogComponent,\n    DialogBodyDirective,\n    DialogFooterDirective,\n    DialogHeaderComponent,\n    FooterDirective,\n    // LoginDialogDirective,\n    FormActionDirective,\n    FormComponent,\n    FormFieldDirective,\n    HeaderComponent,\n    HtmlDirective,\n    IconComponent,\n    IframeComponent,\n    IframeDialogComponent,\n    InputCalendarComponent,\n    InputColorComponent,\n    InputEmailComponent,\n    InputNumberComponent,\n    InputTextComponent,\n    FileUploadComponent,\n    FormWidgetDirective,\n    LabelDirective,\n    LayoutGridColumnDirective,\n    LayoutgridDirective,\n    LayoutGridRowDirective,\n    LazyLoadDirective,\n    LeftPanelDirective,\n    ListComponent,\n    ListItemDirective,\n    LiveActionsDirective,\n    LiveFilterDirective,\n    LiveFormDirective,\n    LiveTableComponent,\n    // LoginComponent,\n    MarqueeDirective,\n    MenuComponent,\n    MenuDropdownComponent,\n    MenuDropdownItemComponent,\n    MessageComponent,\n    NavbarComponent,\n    NavComponent,\n    NavItemDirective,\n    NavigationControlDirective,\n    NumberComponent,\n    OnFileSelectDirective,\n    PageContentComponent,\n    PageDirective,\n    PaginationComponent,\n    PanelComponent,\n    PartialDialogComponent,\n    PartialDirective,\n    PartialParamHandlerDirective,\n    PartialParamDirective,\n    PictureDirective,\n    PopoverComponent,\n    PrefabDirective,\n    PrefabContainerDirective,\n    // ProgressBarComponent,\n    RadiosetComponent,\n    // RatingComponent,\n    RedrawableDirective,\n    RichTextEditorComponent,\n    RightPanelDirective,\n    ScrollableDirective,\n    SearchComponent,\n    SelectComponent,\n    ShowInDeviceDirective,\n    // SliderComponent,\n    SmoothScrollDirective,\n    SpinnerComponent,\n    SwitchComponent,\n    TableActionDirective,\n    TableColumnDirective,\n    TableColumnGroupDirective,\n    TableComponent,\n    TableCUDDirective,\n    TableFilterSortDirective,\n    TableRowDirective,\n    TableRowActionDirective,\n    TextareaComponent,\n    TextContentDirective,\n    TileDirective,\n    TimeComponent,\n    TopNavDirective,\n    // TreeDirective,\n    // VideoComponent,\n    WizardComponent,\n    WizardStepDirective\n];\n\nconst PIPES = [\n    ToDatePipe,\n    FileIconClassPipe,\n    FileExtensionFromMimePipe,\n    FilterPipe,\n    FileSizePipe,\n    ToNumberPipe,\n    ToCurrencyPipe,\n    PrefixPipe,\n    SuffixPipe,\n    TimeFromNowPipe,\n    NumberToStringPipe,\n    StateClassPipe,\n    StringToNumberPipe,\n    TrustAsPipe,\n    ImagePipe\n];\n\nexport const bsDatePickerModule: ModuleWithProviders = BsDatepickerModule.forRoot();\nexport const datepickerModule: ModuleWithProviders = DatepickerModule.forRoot();\nexport const timepickerModule: ModuleWithProviders = TimepickerModule.forRoot();\nexport const bsDropdownModule: ModuleWithProviders = BsDropdownModule.forRoot();\nexport const paginationModule: ModuleWithProviders = PaginationModule.forRoot();\nexport const typeaheadModule: ModuleWithProviders = TypeaheadModule.forRoot();\nexport const progressbarModule: ModuleWithProviders = ProgressbarModule.forRoot();\nexport const carouselModule: ModuleWithProviders = CarouselModule.forRoot();\nexport const popoverModule: ModuleWithProviders = PopoverModule.forRoot();\nexport const ngCircleProgressModule: ModuleWithProviders = NgCircleProgressModule.forRoot({});\n\n@NgModule({\n    imports: [\n        ColorPickerModule,\n        CommonModule,\n        FormsModule,\n        ModalModule,\n        SecurityModule,\n        TextMaskModule,\n        bsDatePickerModule,\n        datepickerModule,\n        timepickerModule,\n        bsDropdownModule,\n        paginationModule,\n        typeaheadModule,\n        progressbarModule,\n        carouselModule,\n        popoverModule,\n        ngCircleProgressModule\n    ],\n    declarations: [...wmComponents, ...PIPES],\n    exports: [...wmComponents, ...PIPES],\n    entryComponents: [\n        MenuComponent,\n        MenuDropdownComponent\n    ]\n})\nexport class WmComponentsModule {\n\n    static forRoot(): ModuleWithProviders {\n        return {\n            ngModule: WmComponentsModule,\n            providers: [\n                ToDatePipe,\n                FilterPipe,\n                TrustAsPipe,\n                ImagePipe,\n                Location,\n                {provide: AbstractDialogService, useClass: DialogServiceImpl}\n            ]\n        };\n    }\n}\n"]}