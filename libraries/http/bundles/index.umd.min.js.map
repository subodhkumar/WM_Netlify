{"version":3,"sources":["node_modules/tslib/tslib.es6.js","ng://@wm/http/http.service.ts","ng://@wm/http/wm-http-request.ts","ng://@wm/http/wm-http-response.ts","ng://@wm/http/http-service.module.ts"],"names":["extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__read","o","n","m","Symbol","iterator","r","e","i","call","ar","next","done","push","value","error","HttpServiceImpl","httpClient","_this","_super","nonBodyTypeMethods","sessionTimeoutObservable","Subject","sessionTimeoutQueue","tslib_1.__extends","handleSessionTimeout","options","subscriber401","requestInfo","sub401","on401","generateRequest","third","fourth","reqHeaders","HttpHeaders","reqParams","HttpParams","headers","params","responseType","isDirectCall","append","entries","forEach","_a","_b","k","v","reqOptions","_","includes","method","toUpperCase","data","HttpRequest","url","getErrMessage","err","errMsg","404","getLocale","401","403","status","errorDetails","getValidJSON","errors","parseErrors","sendCallAsObservable","req","request","send","Promise","resolve","reject","toPromise","then","response","isPlatformSessionTimeout","_401Subscriber","asObservable","subscribe","details","setLocale","locale","localeObject","parseError","errorObj","message","replace","parameters","getHeader","headerKey","get","body","post","put","patch","delete","head","jsonp","upload","reportProgress","registerOnSessionTimeout","callback","pushToSessionFailureQueue","executeSessionFailureRequests","queue","that","isFunction","type","reason","Injectable","HttpClient","AbstractHttpService","WmHttpRequest","wmToAngularRequest","reqObj","angReq","clone","urlWithParams","withCredentials","header","angularToWmRequest","wmReq","headerMap","Map","keys","set","toLowerCase","WmHttpResponse","wmToAngularResponse","respObj","angResp","HttpResponse","ok","statusText","angularToWmResponse","wmResp","HttpServiceModule","forRoot","ngModule","CommonModule","providers","provide","useClass","NgModule","args","imports","HttpClientModule","declarations"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { if (o[n]) i[n] = function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; }; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator];\r\n    return m ? m.call(o) : typeof __values === \"function\" ? __values(o) : o[Symbol.iterator]();\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpEvent, HttpHeaders, HttpParams, HttpRequest, HttpResponse } from '@angular/common/http';\n\nimport { Observable, Subject } from 'rxjs';\n\nimport { AbstractHttpService, getValidJSON, replace } from '@wm/core';\n\ndeclare const _;\n\n@Injectable()\nexport class HttpServiceImpl extends AbstractHttpService {\n    nonBodyTypeMethods = ['GET', 'DELETE', 'HEAD', 'OPTIONS', 'JSONP'];\n    sessionTimeoutObservable = new Subject();\n    sessionTimeoutQueue = [];\n    localeObject: any;\n\n    constructor(private httpClient: HttpClient) {\n        super();\n    }\n\n    /**\n     * This method handles session timeout.\n     * @param options\n     * @param resolve\n     * @param reject\n     */\n    handleSessionTimeout(options, subscriber401?) {\n        this.sessionTimeoutQueue.push({\n            requestInfo: options,\n            sub401: subscriber401\n        });\n        this.on401();\n    }\n\n    /**\n     * Generates a request with provided options\n     * @param options, request params/options\n     */\n    private generateRequest(options: any) {\n        let reqHeaders = new HttpHeaders(),\n            reqParams = new HttpParams();\n        const headers = options.headers;\n        const params = options.params;\n        const responseType = options.responseType;\n\n        // this header is not to be sent with non-proxy calls from service variable\n        if (!options.isDirectCall) {\n            reqHeaders = reqHeaders.append('X-Requested-With', 'XMLHttpRequest');\n        }\n\n        // headers\n        if (headers) {\n            Object.entries(headers).forEach(([k, v]) => reqHeaders = reqHeaders.append(k, v as string));\n        }\n\n        // params\n        if (params) {\n            Object.entries(params).forEach(([k, v]) => reqParams = reqParams.append(k, v as string));\n        }\n\n        let third, fourth;\n        const reqOptions = {\n            headers: reqHeaders,\n            params: reqParams,\n            responseType: responseType\n        };\n        if (_.includes(this.nonBodyTypeMethods, options.method && options.method.toUpperCase())) {\n            third = reqOptions;\n            fourth = null;\n        } else {\n            third = options.data;\n            fourth = reqOptions;\n        }\n        return new HttpRequest(options.method, options.url, third, fourth);\n    }\n\n    /**\n     * This method filters and returns error message from the failed network call response.\n     * @param err, error form network call failure\n     */\n    public getErrMessage(err: any) {\n        const HTTP_STATUS_MSG = {\n            404: this.getLocale()['MESSAGE_404_ERROR'] || 'Requested resource not found',\n            401: this.getLocale()['MESSAGE_401_ERROR'] || 'Requested resource requires authentication',\n            403: this.getLocale()['LABEL_FORBIDDEN_MESSAGE'] || 'The requested resource access/action is forbidden.'\n        };\n\n        // check if error message present for responded http status\n        let errMsg = HTTP_STATUS_MSG[err.status];\n        let errorDetails = err.error;\n        errorDetails = getValidJSON(errorDetails) || errorDetails;\n\n        // WM services have the format of error response as errorDetails.error\n        if (errorDetails && errorDetails.errors) {\n            errMsg = this.parseErrors(errorDetails.errors);\n        } else {\n            errMsg = errMsg || 'Service Call Failed';\n        }\n        return errMsg;\n    }\n\n    /**\n     * Make a http call and returns an observable that can be cancelled\n     * @param options, options using which the call needs to be made\n     */\n    sendCallAsObservable(options: any): any {\n        const req = this.generateRequest(options);\n        return this.httpClient.request(req);\n    }\n\n    /**\n     * Makes a http call and return a promise\n     * @param options, options using which the call needs to be made\n     */\n    send(options: any) {\n        const req = this.generateRequest(options);\n\n        return new Promise((resolve, reject) => {\n            this.httpClient.request(req).toPromise().then((response) => {\n                resolve(response);\n            } , (err) => {\n                if (this.isPlatformSessionTimeout(err)) {\n                    err._401Subscriber.asObservable().subscribe((response) => {\n                        resolve(response);\n                    }, (e) => {\n                        reject(e);\n                    });\n                } else {\n                    const errMsg = this.getErrMessage(err);\n                    reject({\n                        error: errMsg,\n                        details: err\n                    });\n                }\n            });\n        });\n    }\n\n    setLocale(locale) {\n        this.localeObject = locale;\n    }\n\n    getLocale() {\n        return this.localeObject;\n    }\n\n    parseErrors(errors) {\n        let errMsg = '';\n        errors.error.forEach((errorDetails, i) => {\n            errMsg += this.parseError(errorDetails) + (i > 0 ? '\\n' : '');\n        });\n        return errMsg;\n    }\n\n    parseError(errorObj) {\n        let errMsg;\n        errMsg = errorObj.message ? replace(errorObj.message, errorObj.parameters, true) : ((errorObj.parameters && errorObj.parameters[0]) || '');\n        return errMsg;\n    }\n\n    getHeader(error, headerKey) {\n        return error.headers.get(headerKey);\n    }\n\n    isPlatformSessionTimeout(error) {\n        const MSG_SESSION_NOT_FOUND = 'Session Not Found';\n        return error.status === 401 && this.getHeader(error, 'x-wm-login-errormessage') === MSG_SESSION_NOT_FOUND;\n    }\n\n    get(url: string, options?: any) {\n        options = options || {};\n        options.url = url;\n        options.method = 'get';\n        return this.send(options).then((response: HttpResponse<string>) => response.body);\n    }\n\n    post(url, data, options) {\n        options = options || {};\n        options.url = url;\n        options.method = 'post';\n        options.data = data;\n        return this.send(options);\n    }\n\n    put(url, data, options) {\n        options = options || {};\n        options.url = url;\n        options.method = 'put';\n        options.data = data;\n        return this.send(options);\n    }\n\n    patch(url, data, options) {\n        options = options || {};\n        options.url = url;\n        options.method = 'patch';\n        options.data = data;\n        return this.send(options);\n    }\n\n    delete(url, options) {\n        options = options || {};\n        options.url = url;\n        options.method = 'delete';\n        return this.send(options);\n    }\n\n    head(url, options) {\n        options = options || {};\n        options.url = url;\n        options.method = 'head';\n        return this.send(options);\n    }\n\n    jsonp(url, options) {\n        options = options || {};\n        options.url = url;\n        options.method = 'jsonp';\n        return this.send(options);\n    }\n\n    upload(url, data, options): Observable<HttpEvent<any>> {\n        const req = new HttpRequest('POST', url, data, {\n            reportProgress: true // for progress data\n        });\n        return this.httpClient.request(req);\n        // return this.httpClient.post(url, data, {\n        //     reportProgress: true\n        // });\n    }\n\n    /**\n     * registers a callback to be trigerred on session timeout\n     * @param callback\n     */\n    registerOnSessionTimeout(callback) {\n        this.sessionTimeoutObservable.asObservable().subscribe(callback);\n    }\n\n    /**\n     * trigger the registered methods on session timeout\n     */\n    on401() {\n        this.sessionTimeoutObservable.next();\n    }\n\n    pushToSessionFailureQueue(callback) {\n        this.sessionTimeoutQueue.push({\n            callback: callback\n        });\n    }\n\n    /**\n     * Execute queued requests, failed due to session timeout\n     */\n    executeSessionFailureRequests() {\n        const queue = this.sessionTimeoutQueue;\n        const that = this;\n        that.sessionTimeoutQueue = [];\n        queue.forEach(data => {\n            if (_.isFunction(data.callback)) {\n                data.callback();\n            } else {\n                data.requestInfo.headers.headers.delete('x-wm-xsrf-token');\n                that.httpClient.request(data.requestInfo)\n                    .subscribe(\n                        response => {\n                            if (response && response.type && data.sub401) {\n                                data.sub401.next(response);\n                            }\n                        }, (reason) => {\n                            data.sub401.error(reason);\n                        });\n            }\n        });\n    }\n}\n","import { HttpRequest } from '@angular/common/http';\n\ndeclare const _;\n\n/**\n * This class creates a custom WmHttpRequest.\n */\nexport class WmHttpRequest {\n\n    method: string;\n    url: string;\n    headers: any = [];\n    responseType: string;\n    withCredentials: boolean;\n    urlWithParams: string;\n    body: any;\n\n    constructor() {}\n\n    /**\n     * This method converts the given wm HttpRequest to angular HttpRequest\n     * @param reqObj, the wm HttpRequest\n     */\n    wmToAngularRequest(reqObj) {\n        let angReq;\n        angReq = new HttpRequest(reqObj.method, reqObj.url);\n        angReq = angReq.clone();\n        angReq.body = reqObj.body;\n        angReq.method = reqObj.method;\n        angReq.responseType =  reqObj.responseType;\n        angReq.urlWithParams = reqObj.url;\n        angReq.withCredentials =  reqObj.withCredentials;\n        reqObj.headers.forEach((value, header)=>{\n            angReq.headers = angReq.headers.append(header, value);\n        });\n        return angReq;\n    }\n\n    /**\n     * This method converts the given angular HttpRequest to wm HttpRequest\n     * @param req, the angular HttpRequest\n     */\n    angularToWmRequest(req) {\n        let wmReq = new WmHttpRequest();\n        let headerMap = new Map();\n        wmReq.body = req.body;\n        wmReq.method = req.method;\n        wmReq.responseType = req.responseType;\n        wmReq.url = req.urlWithParams;\n        wmReq.withCredentials = req.withCredentials;\n        req.headers.keys().forEach((header) => {\n            headerMap.set(header, req.headers.headers.get(header.toLowerCase())[0]);\n        });\n        wmReq.headers = headerMap;\n        return wmReq;\n    }\n}","import { WmHttpRequest } from './wm-http-request';\nimport { HttpResponse } from '@angular/common/http';\n\n\ndeclare const _;\n\n/**\n * This class creates a custom WmHttpRequest.\n */\nexport class WmHttpResponse extends WmHttpRequest{\n\n    error: any;\n    message: string;\n    ok: boolean;\n    status: number;\n    statusText: string;\n\n    constructor() {\n        super();\n    }\n\n    /**\n     * This method converts the given wm HttpResponse to angular HttpResponse\n     * @param respObj, the wm HttpResponse\n     */\n    wmToAngularResponse(respObj) {\n        let angResp;\n        angResp = new HttpResponse();\n        angResp = angResp.clone();\n        angResp.body = respObj.body;\n        angResp.error = respObj.error;\n        angResp.message = respObj.message;\n        angResp.url = respObj.url;\n        angResp.ok = respObj.ok;\n        angResp.status = respObj.status;\n        angResp.statusText = respObj.statusText;\n        respObj.headers.forEach((value, header)=>{\n            angResp.headers = angResp.headers.append(header, value);\n        });\n        return angResp;\n    }\n\n    /**\n     * This method converts the given wm HttpResponse to angular HttpResponse\n     * @param respObj, the angular HttpResponse\n     */\n    angularToWmResponse(respObj) {\n        let wmResp;\n        let headerMap = new Map();\n        wmResp = new WmHttpResponse();\n        wmResp.body = respObj.body;\n        wmResp.error = respObj.error;\n        wmResp.message = respObj.message;\n        wmResp.url = respObj.url;\n        wmResp.ok = respObj.ok;\n        wmResp.status = respObj.status;\n        wmResp.statusText = respObj.statusText;\n        respObj.headers.keys().forEach((header) => {\n            headerMap.set(header, respObj.headers.headers.get(header.toLowerCase())[0]);\n        });\n        wmResp.headers = headerMap;\n        return wmResp;\n    }\n}","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { AbstractHttpService } from '@wm/core';\n\nimport { HttpServiceImpl } from './http.service';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        HttpClientModule\n    ],\n    declarations: []\n})\nexport class HttpServiceModule {\n\n    static forRoot(): ModuleWithProviders {\n        return {\n            ngModule: CommonModule,\n            providers: [\n                {provide: AbstractHttpService, useClass: HttpServiceImpl}\n            ]\n        };\n    }\n}\n\nexport * from './http.service';\nexport * from './wm-http-request';\nexport * from './wm-http-response';\n"]}